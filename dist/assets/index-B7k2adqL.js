var jg=t=>{throw TypeError(t)};var Dd=(t,e,r)=>e.has(t)||jg("Cannot "+r);var U=(t,e,r)=>(Dd(t,e,"read from private field"),r?r.call(t):e.get(t)),ve=(t,e,r)=>e.has(t)?jg("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),le=(t,e,r,n)=>(Dd(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),st=(t,e,r)=>(Dd(t,e,"access private method"),r);var Cc=(t,e,r,n)=>({set _(i){le(t,e,i,r)},get _(){return U(t,e,n)}});function i0(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var x=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function dv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Q1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var o0={exports:{}},Lu={},a0={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nc=Symbol.for("react.element"),J1=Symbol.for("react.portal"),Y1=Symbol.for("react.fragment"),X1=Symbol.for("react.strict_mode"),Z1=Symbol.for("react.profiler"),eR=Symbol.for("react.provider"),tR=Symbol.for("react.context"),rR=Symbol.for("react.forward_ref"),nR=Symbol.for("react.suspense"),iR=Symbol.for("react.memo"),oR=Symbol.for("react.lazy"),Ag=Symbol.iterator;function aR(t){return t===null||typeof t!="object"?null:(t=Ag&&t[Ag]||t["@@iterator"],typeof t=="function"?t:null)}var s0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},c0=Object.assign,l0={};function Ea(t,e,r){this.props=t,this.context=e,this.refs=l0,this.updater=r||s0}Ea.prototype.isReactComponent={};Ea.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ea.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function u0(){}u0.prototype=Ea.prototype;function fv(t,e,r){this.props=t,this.context=e,this.refs=l0,this.updater=r||s0}var hv=fv.prototype=new u0;hv.constructor=fv;c0(hv,Ea.prototype);hv.isPureReactComponent=!0;var Lg=Array.isArray,d0=Object.prototype.hasOwnProperty,pv={current:null},f0={key:!0,ref:!0,__self:!0,__source:!0};function h0(t,e,r){var n,i={},o=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)d0.call(e,n)&&!f0.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:nc,type:t,key:o,ref:a,props:i,_owner:pv.current}}function sR(t,e){return{$$typeof:nc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vv(t){return typeof t=="object"&&t!==null&&t.$$typeof===nc}function cR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Ig=/\/+/g;function $d(t,e){return typeof t=="object"&&t!==null&&t.key!=null?cR(""+t.key):e.toString(36)}function xl(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case nc:case J1:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+$d(a,0):n,Lg(i)?(r="",t!=null&&(r=t.replace(Ig,"$&/")+"/"),xl(i,e,r,"",function(l){return l})):i!=null&&(vv(i)&&(i=sR(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Ig,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",Lg(t))for(var s=0;s<t.length;s++){o=t[s];var c=n+$d(o,s);a+=xl(o,e,r,c,i)}else if(c=aR(t),typeof c=="function")for(t=c.call(t),s=0;!(o=t.next()).done;)o=o.value,c=n+$d(o,s++),a+=xl(o,e,r,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Pc(t,e,r){if(t==null)return t;var n=[],i=0;return xl(t,n,"","",function(o){return e.call(r,o,i++)}),n}function lR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},El={transition:null},uR={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:El,ReactCurrentOwner:pv};function p0(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Pc,forEach:function(t,e,r){Pc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Pc(t,function(){e++}),e},toArray:function(t){return Pc(t,function(e){return e})||[]},only:function(t){if(!vv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=Ea;he.Fragment=Y1;he.Profiler=Z1;he.PureComponent=fv;he.StrictMode=X1;he.Suspense=nR;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uR;he.act=p0;he.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=c0({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=pv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(c in e)d0.call(e,c)&&!f0.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&s!==void 0?s[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];n.children=s}return{$$typeof:nc,type:t.type,key:i,ref:o,props:n,_owner:a}};he.createContext=function(t){return t={$$typeof:tR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eR,_context:t},t.Consumer=t};he.createElement=h0;he.createFactory=function(t){var e=h0.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:rR,render:t}};he.isValidElement=vv;he.lazy=function(t){return{$$typeof:oR,_payload:{_status:-1,_result:t},_init:lR}};he.memo=function(t,e){return{$$typeof:iR,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=El.transition;El.transition={};try{t()}finally{El.transition=e}};he.unstable_act=p0;he.useCallback=function(t,e){return wt.current.useCallback(t,e)};he.useContext=function(t){return wt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};he.useEffect=function(t,e){return wt.current.useEffect(t,e)};he.useId=function(){return wt.current.useId()};he.useImperativeHandle=function(t,e,r){return wt.current.useImperativeHandle(t,e,r)};he.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return wt.current.useMemo(t,e)};he.useReducer=function(t,e,r){return wt.current.useReducer(t,e,r)};he.useRef=function(t){return wt.current.useRef(t)};he.useState=function(t){return wt.current.useState(t)};he.useSyncExternalStore=function(t,e,r){return wt.current.useSyncExternalStore(t,e,r)};he.useTransition=function(){return wt.current.useTransition()};he.version="18.3.1";a0.exports=he;var b=a0.exports;const G=dv(b),Iu=i0({__proto__:null,default:G},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dR=b,fR=Symbol.for("react.element"),hR=Symbol.for("react.fragment"),pR=Object.prototype.hasOwnProperty,vR=dR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mR={key:!0,ref:!0,__self:!0,__source:!0};function v0(t,e,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)pR.call(e,n)&&!mR.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:fR,type:t,key:o,ref:a,props:i,_owner:vR.current}}Lu.Fragment=hR;Lu.jsx=v0;Lu.jsxs=v0;o0.exports=Lu;var p=o0.exports,m0={exports:{}},Wt={},g0={exports:{}},y0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,L){var B=R.length;R.push(L);e:for(;0<B;){var F=B-1>>>1,Q=R[F];if(0<i(Q,L))R[F]=L,R[B]=Q,B=F;else break e}}function r(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var L=R[0],B=R.pop();if(B!==L){R[0]=B;e:for(var F=0,Q=R.length,K=Q>>>1;F<K;){var z=2*(F+1)-1,W=R[z],ee=z+1,V=R[ee];if(0>i(W,B))ee<Q&&0>i(V,W)?(R[F]=V,R[ee]=B,F=ee):(R[F]=W,R[z]=B,F=z);else if(ee<Q&&0>i(V,B))R[F]=V,R[ee]=B,F=ee;else break e}}return L}function i(R,L){var B=R.sortIndex-L.sortIndex;return B!==0?B:R.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var c=[],l=[],u=1,d=null,h=3,f=!1,y=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(R){for(var L=r(l);L!==null;){if(L.callback===null)n(l);else if(L.startTime<=R)n(l),L.sortIndex=L.expirationTime,e(c,L);else break;L=r(l)}}function S(R){if(v=!1,w(R),!y)if(r(c)!==null)y=!0,I(k);else{var L=r(l);L!==null&&$(S,L.startTime-R)}}function k(R,L){y=!1,v&&(v=!1,_(C),C=-1),f=!0;var B=h;try{for(w(L),d=r(c);d!==null&&(!(d.expirationTime>L)||R&&!N());){var F=d.callback;if(typeof F=="function"){d.callback=null,h=d.priorityLevel;var Q=F(d.expirationTime<=L);L=t.unstable_now(),typeof Q=="function"?d.callback=Q:d===r(c)&&n(c),w(L)}else n(c);d=r(c)}if(d!==null)var K=!0;else{var z=r(l);z!==null&&$(S,z.startTime-L),K=!1}return K}finally{d=null,h=B,f=!1}}var E=!1,T=null,C=-1,O=5,A=-1;function N(){return!(t.unstable_now()-A<O)}function j(){if(T!==null){var R=t.unstable_now();A=R;var L=!0;try{L=T(!0,R)}finally{L?D():(E=!1,T=null)}}else E=!1}var D;if(typeof m=="function")D=function(){m(j)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,M=P.port2;P.port1.onmessage=j,D=function(){M.postMessage(null)}}else D=function(){g(j,0)};function I(R){T=R,E||(E=!0,D())}function $(R,L){C=g(function(){R(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){y||f||(y=!0,I(k))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(R){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var B=h;h=L;try{return R()}finally{h=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,L){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var B=h;h=R;try{return L()}finally{h=B}},t.unstable_scheduleCallback=function(R,L,B){var F=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?F+B:F):B=F,R){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=B+Q,R={id:u++,callback:L,priorityLevel:R,startTime:B,expirationTime:Q,sortIndex:-1},B>F?(R.sortIndex=B,e(l,R),r(c)===null&&R===r(l)&&(v?(_(C),C=-1):v=!0,$(S,B-F))):(R.sortIndex=Q,e(c,R),y||f||(y=!0,I(k))),R},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(R){var L=h;return function(){var B=h;h=L;try{return R.apply(this,arguments)}finally{h=B}}}})(y0);g0.exports=y0;var gR=g0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yR=b,zt=gR;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _0=new Set,Ss={};function so(t,e){ha(t,e),ha(t+"Capture",e)}function ha(t,e){for(Ss[t]=e,t=0;t<e.length;t++)_0.add(e[t])}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ph=Object.prototype.hasOwnProperty,_R=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ng={},Mg={};function wR(t){return ph.call(Mg,t)?!0:ph.call(Ng,t)?!1:_R.test(t)?Mg[t]=!0:(Ng[t]=!0,!1)}function bR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SR(t,e,r,n){if(e===null||typeof e>"u"||bR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,r,n,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var mv=/[\-:]([a-z])/g;function gv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mv,gv);ot[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mv,gv);ot[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mv,gv);ot[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function yv(t,e,r,n){var i=ot.hasOwnProperty(e)?ot[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SR(e,r,i,n)&&(r=null),n||i===null?wR(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var fn=yR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oc=Symbol.for("react.element"),Io=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),_v=Symbol.for("react.strict_mode"),vh=Symbol.for("react.profiler"),w0=Symbol.for("react.provider"),b0=Symbol.for("react.context"),wv=Symbol.for("react.forward_ref"),mh=Symbol.for("react.suspense"),gh=Symbol.for("react.suspense_list"),bv=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),S0=Symbol.for("react.offscreen"),Dg=Symbol.iterator;function Ba(t){return t===null||typeof t!="object"?null:(t=Dg&&t[Dg]||t["@@iterator"],typeof t=="function"?t:null)}var Ue=Object.assign,Ud;function es(t){if(Ud===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ud=e&&e[1]||""}return`
`+Ud+t}var Fd=!1;function Bd(t,e){if(!t||Fd)return"";Fd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=s);break}}}finally{Fd=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?es(t):""}function kR(t){switch(t.tag){case 5:return es(t.type);case 16:return es("Lazy");case 13:return es("Suspense");case 19:return es("SuspenseList");case 0:case 2:case 15:return t=Bd(t.type,!1),t;case 11:return t=Bd(t.type.render,!1),t;case 1:return t=Bd(t.type,!0),t;default:return""}}function yh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case No:return"Fragment";case Io:return"Portal";case vh:return"Profiler";case _v:return"StrictMode";case mh:return"Suspense";case gh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case b0:return(t.displayName||"Context")+".Consumer";case w0:return(t._context.displayName||"Context")+".Provider";case wv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bv:return e=t.displayName||null,e!==null?e:yh(t.type)||"Memo";case Ln:e=t._payload,t=t._init;try{return yh(t(e))}catch{}}return null}function TR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yh(e);case 8:return e===_v?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ri(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function k0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function xR(t){var e=k0(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Rc(t){t._valueTracker||(t._valueTracker=xR(t))}function T0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=k0(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _h(t,e){var r=e.checked;return Ue({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function $g(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ri(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function x0(t,e){e=e.checked,e!=null&&yv(t,"checked",e,!1)}function wh(t,e){x0(t,e);var r=ri(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?bh(t,e.type,r):e.hasOwnProperty("defaultValue")&&bh(t,e.type,ri(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ug(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function bh(t,e,r){(e!=="number"||Kl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ts=Array.isArray;function Ko(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ri(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Sh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Ue({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fg(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(H(92));if(ts(r)){if(1<r.length)throw Error(H(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ri(r)}}function E0(t,e){var r=ri(e.value),n=ri(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Bg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function C0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?C0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jc,P0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jc=jc||document.createElement("div"),jc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ks(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var ls={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ER=["Webkit","ms","Moz","O"];Object.keys(ls).forEach(function(t){ER.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ls[e]=ls[t]})});function O0(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||ls.hasOwnProperty(t)&&ls[t]?(""+e).trim():e+"px"}function R0(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=O0(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var CR=Ue({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Th(t,e){if(e){if(CR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function xh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eh=null;function Sv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ch=null,Go=null,Qo=null;function Vg(t){if(t=ac(t)){if(typeof Ch!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Uu(e),Ch(t.stateNode,t.type,e))}}function j0(t){Go?Qo?Qo.push(t):Qo=[t]:Go=t}function A0(){if(Go){var t=Go,e=Qo;if(Qo=Go=null,Vg(t),e)for(t=0;t<e.length;t++)Vg(e[t])}}function L0(t,e){return t(e)}function I0(){}var Vd=!1;function N0(t,e,r){if(Vd)return t(e,r);Vd=!0;try{return L0(t,e,r)}finally{Vd=!1,(Go!==null||Qo!==null)&&(I0(),A0())}}function Ts(t,e){var r=t.stateNode;if(r===null)return null;var n=Uu(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(H(231,e,typeof r));return r}var Ph=!1;if(an)try{var Va={};Object.defineProperty(Va,"passive",{get:function(){Ph=!0}}),window.addEventListener("test",Va,Va),window.removeEventListener("test",Va,Va)}catch{Ph=!1}function PR(t,e,r,n,i,o,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(u){this.onError(u)}}var us=!1,Gl=null,Ql=!1,Oh=null,OR={onError:function(t){us=!0,Gl=t}};function RR(t,e,r,n,i,o,a,s,c){us=!1,Gl=null,PR.apply(OR,arguments)}function jR(t,e,r,n,i,o,a,s,c){if(RR.apply(this,arguments),us){if(us){var l=Gl;us=!1,Gl=null}else throw Error(H(198));Ql||(Ql=!0,Oh=l)}}function co(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function M0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zg(t){if(co(t)!==t)throw Error(H(188))}function AR(t){var e=t.alternate;if(!e){if(e=co(t),e===null)throw Error(H(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return zg(i),t;if(o===n)return zg(i),e;o=o.sibling}throw Error(H(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?t:e}function D0(t){return t=AR(t),t!==null?$0(t):null}function $0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=$0(t);if(e!==null)return e;t=t.sibling}return null}var U0=zt.unstable_scheduleCallback,Wg=zt.unstable_cancelCallback,LR=zt.unstable_shouldYield,IR=zt.unstable_requestPaint,We=zt.unstable_now,NR=zt.unstable_getCurrentPriorityLevel,kv=zt.unstable_ImmediatePriority,F0=zt.unstable_UserBlockingPriority,Jl=zt.unstable_NormalPriority,MR=zt.unstable_LowPriority,B0=zt.unstable_IdlePriority,Nu=null,Fr=null;function DR(t){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(Nu,t,void 0,(t.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:FR,$R=Math.log,UR=Math.LN2;function FR(t){return t>>>=0,t===0?32:31-($R(t)/UR|0)|0}var Ac=64,Lc=4194304;function rs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yl(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=rs(s):(o&=a,o!==0&&(n=rs(o)))}else a=r&~i,a!==0?n=rs(a):o!==0&&(n=rs(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-wr(e),i=1<<r,n|=t[r],e&=~i;return n}function BR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function VR(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-wr(o),s=1<<a,c=i[a];c===-1?(!(s&r)||s&n)&&(i[a]=BR(s,e)):c<=e&&(t.expiredLanes|=s),o&=~s}}function Rh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function V0(){var t=Ac;return Ac<<=1,!(Ac&4194240)&&(Ac=64),t}function zd(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function ic(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wr(e),t[e]=r}function zR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-wr(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function Tv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-wr(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var we=0;function z0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var W0,xv,H0,q0,K0,jh=!1,Ic=[],Gn=null,Qn=null,Jn=null,xs=new Map,Es=new Map,Nn=[],WR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hg(t,e){switch(t){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":xs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Es.delete(e.pointerId)}}function za(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ac(e),e!==null&&xv(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function HR(t,e,r,n,i){switch(e){case"focusin":return Gn=za(Gn,t,e,r,n,i),!0;case"dragenter":return Qn=za(Qn,t,e,r,n,i),!0;case"mouseover":return Jn=za(Jn,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return xs.set(o,za(xs.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Es.set(o,za(Es.get(o)||null,t,e,r,n,i)),!0}return!1}function G0(t){var e=Ai(t.target);if(e!==null){var r=co(e);if(r!==null){if(e=r.tag,e===13){if(e=M0(r),e!==null){t.blockedOn=e,K0(t.priority,function(){H0(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Ah(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Eh=n,r.target.dispatchEvent(n),Eh=null}else return e=ac(r),e!==null&&xv(e),t.blockedOn=r,!1;e.shift()}return!0}function qg(t,e,r){Cl(t)&&r.delete(e)}function qR(){jh=!1,Gn!==null&&Cl(Gn)&&(Gn=null),Qn!==null&&Cl(Qn)&&(Qn=null),Jn!==null&&Cl(Jn)&&(Jn=null),xs.forEach(qg),Es.forEach(qg)}function Wa(t,e){t.blockedOn===e&&(t.blockedOn=null,jh||(jh=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,qR)))}function Cs(t){function e(i){return Wa(i,t)}if(0<Ic.length){Wa(Ic[0],t);for(var r=1;r<Ic.length;r++){var n=Ic[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Gn!==null&&Wa(Gn,t),Qn!==null&&Wa(Qn,t),Jn!==null&&Wa(Jn,t),xs.forEach(e),Es.forEach(e),r=0;r<Nn.length;r++)n=Nn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Nn.length&&(r=Nn[0],r.blockedOn===null);)G0(r),r.blockedOn===null&&Nn.shift()}var Jo=fn.ReactCurrentBatchConfig,Xl=!0;function KR(t,e,r,n){var i=we,o=Jo.transition;Jo.transition=null;try{we=1,Ev(t,e,r,n)}finally{we=i,Jo.transition=o}}function GR(t,e,r,n){var i=we,o=Jo.transition;Jo.transition=null;try{we=4,Ev(t,e,r,n)}finally{we=i,Jo.transition=o}}function Ev(t,e,r,n){if(Xl){var i=Ah(t,e,r,n);if(i===null)Zd(t,e,n,Zl,r),Hg(t,n);else if(HR(i,t,e,r,n))n.stopPropagation();else if(Hg(t,n),e&4&&-1<WR.indexOf(t)){for(;i!==null;){var o=ac(i);if(o!==null&&W0(o),o=Ah(t,e,r,n),o===null&&Zd(t,e,n,Zl,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else Zd(t,e,n,null,r)}}var Zl=null;function Ah(t,e,r,n){if(Zl=null,t=Sv(n),t=Ai(t),t!==null)if(e=co(t),e===null)t=null;else if(r=e.tag,r===13){if(t=M0(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zl=t,null}function Q0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(NR()){case kv:return 1;case F0:return 4;case Jl:case MR:return 16;case B0:return 536870912;default:return 16}default:return 16}}var Wn=null,Cv=null,Pl=null;function J0(){if(Pl)return Pl;var t,e=Cv,r=e.length,n,i="value"in Wn?Wn.value:Wn.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[o-n];n++);return Pl=i.slice(t,1<n?1-n:void 0)}function Ol(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nc(){return!0}function Kg(){return!1}function Ht(t){function e(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Nc:Kg,this.isPropagationStopped=Kg,this}return Ue(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Nc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Nc)},persist:function(){},isPersistent:Nc}),e}var Ca={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pv=Ht(Ca),oc=Ue({},Ca,{view:0,detail:0}),QR=Ht(oc),Wd,Hd,Ha,Mu=Ue({},oc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ov,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ha&&(Ha&&t.type==="mousemove"?(Wd=t.screenX-Ha.screenX,Hd=t.screenY-Ha.screenY):Hd=Wd=0,Ha=t),Wd)},movementY:function(t){return"movementY"in t?t.movementY:Hd}}),Gg=Ht(Mu),JR=Ue({},Mu,{dataTransfer:0}),YR=Ht(JR),XR=Ue({},oc,{relatedTarget:0}),qd=Ht(XR),ZR=Ue({},Ca,{animationName:0,elapsedTime:0,pseudoElement:0}),ej=Ht(ZR),tj=Ue({},Ca,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rj=Ht(tj),nj=Ue({},Ca,{data:0}),Qg=Ht(nj),ij={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aj[t])?!!e[t]:!1}function Ov(){return sj}var cj=Ue({},oc,{key:function(t){if(t.key){var e=ij[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ol(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ov,charCode:function(t){return t.type==="keypress"?Ol(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ol(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lj=Ht(cj),uj=Ue({},Mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Jg=Ht(uj),dj=Ue({},oc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ov}),fj=Ht(dj),hj=Ue({},Ca,{propertyName:0,elapsedTime:0,pseudoElement:0}),pj=Ht(hj),vj=Ue({},Mu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mj=Ht(vj),gj=[9,13,27,32],Rv=an&&"CompositionEvent"in window,ds=null;an&&"documentMode"in document&&(ds=document.documentMode);var yj=an&&"TextEvent"in window&&!ds,Y0=an&&(!Rv||ds&&8<ds&&11>=ds),Yg=" ",Xg=!1;function X0(t,e){switch(t){case"keyup":return gj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mo=!1;function _j(t,e){switch(t){case"compositionend":return Z0(e);case"keypress":return e.which!==32?null:(Xg=!0,Yg);case"textInput":return t=e.data,t===Yg&&Xg?null:t;default:return null}}function wj(t,e){if(Mo)return t==="compositionend"||!Rv&&X0(t,e)?(t=J0(),Pl=Cv=Wn=null,Mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Y0&&e.locale!=="ko"?null:e.data;default:return null}}var bj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bj[t.type]:e==="textarea"}function eS(t,e,r,n){j0(n),e=eu(e,"onChange"),0<e.length&&(r=new Pv("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var fs=null,Ps=null;function Sj(t){dS(t,0)}function Du(t){var e=Uo(t);if(T0(e))return t}function kj(t,e){if(t==="change")return e}var tS=!1;if(an){var Kd;if(an){var Gd="oninput"in document;if(!Gd){var ey=document.createElement("div");ey.setAttribute("oninput","return;"),Gd=typeof ey.oninput=="function"}Kd=Gd}else Kd=!1;tS=Kd&&(!document.documentMode||9<document.documentMode)}function ty(){fs&&(fs.detachEvent("onpropertychange",rS),Ps=fs=null)}function rS(t){if(t.propertyName==="value"&&Du(Ps)){var e=[];eS(e,Ps,t,Sv(t)),N0(Sj,e)}}function Tj(t,e,r){t==="focusin"?(ty(),fs=e,Ps=r,fs.attachEvent("onpropertychange",rS)):t==="focusout"&&ty()}function xj(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Du(Ps)}function Ej(t,e){if(t==="click")return Du(e)}function Cj(t,e){if(t==="input"||t==="change")return Du(e)}function Pj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sr=typeof Object.is=="function"?Object.is:Pj;function Os(t,e){if(Sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!ph.call(e,i)||!Sr(t[i],e[i]))return!1}return!0}function ry(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ny(t,e){var r=ry(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ry(r)}}function nS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function iS(){for(var t=window,e=Kl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Kl(t.document)}return e}function jv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Oj(t){var e=iS(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&nS(r.ownerDocument.documentElement,r)){if(n!==null&&jv(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=ny(r,o);var a=ny(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Rj=an&&"documentMode"in document&&11>=document.documentMode,Do=null,Lh=null,hs=null,Ih=!1;function iy(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ih||Do==null||Do!==Kl(n)||(n=Do,"selectionStart"in n&&jv(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),hs&&Os(hs,n)||(hs=n,n=eu(Lh,"onSelect"),0<n.length&&(e=new Pv("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Do)))}function Mc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var $o={animationend:Mc("Animation","AnimationEnd"),animationiteration:Mc("Animation","AnimationIteration"),animationstart:Mc("Animation","AnimationStart"),transitionend:Mc("Transition","TransitionEnd")},Qd={},oS={};an&&(oS=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function $u(t){if(Qd[t])return Qd[t];if(!$o[t])return t;var e=$o[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in oS)return Qd[t]=e[r];return t}var aS=$u("animationend"),sS=$u("animationiteration"),cS=$u("animationstart"),lS=$u("transitionend"),uS=new Map,oy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ai(t,e){uS.set(t,e),so(e,[t])}for(var Jd=0;Jd<oy.length;Jd++){var Yd=oy[Jd],jj=Yd.toLowerCase(),Aj=Yd[0].toUpperCase()+Yd.slice(1);ai(jj,"on"+Aj)}ai(aS,"onAnimationEnd");ai(sS,"onAnimationIteration");ai(cS,"onAnimationStart");ai("dblclick","onDoubleClick");ai("focusin","onFocus");ai("focusout","onBlur");ai(lS,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);so("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));so("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));so("onBeforeInput",["compositionend","keypress","textInput","paste"]);so("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));so("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));so("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ns="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lj=new Set("cancel close invalid load scroll toggle".split(" ").concat(ns));function ay(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,jR(n,e,void 0,t),t.currentTarget=null}function dS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var s=n[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;ay(i,s,l),o=c}else for(a=0;a<n.length;a++){if(s=n[a],c=s.instance,l=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;ay(i,s,l),o=c}}}if(Ql)throw t=Oh,Ql=!1,Oh=null,t}function je(t,e){var r=e[Uh];r===void 0&&(r=e[Uh]=new Set);var n=t+"__bubble";r.has(n)||(fS(e,t,2,!1),r.add(n))}function Xd(t,e,r){var n=0;e&&(n|=4),fS(r,t,n,e)}var Dc="_reactListening"+Math.random().toString(36).slice(2);function Rs(t){if(!t[Dc]){t[Dc]=!0,_0.forEach(function(r){r!=="selectionchange"&&(Lj.has(r)||Xd(r,!1,t),Xd(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dc]||(e[Dc]=!0,Xd("selectionchange",!1,e))}}function fS(t,e,r,n){switch(Q0(e)){case 1:var i=KR;break;case 4:i=GR;break;default:i=Ev}r=i.bind(null,e,r,t),i=void 0,!Ph||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Zd(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Ai(s),a===null)return;if(c=a.tag,c===5||c===6){n=o=a;continue e}s=s.parentNode}}n=n.return}N0(function(){var l=o,u=Sv(r),d=[];e:{var h=uS.get(t);if(h!==void 0){var f=Pv,y=t;switch(t){case"keypress":if(Ol(r)===0)break e;case"keydown":case"keyup":f=lj;break;case"focusin":y="focus",f=qd;break;case"focusout":y="blur",f=qd;break;case"beforeblur":case"afterblur":f=qd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Gg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=YR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=fj;break;case aS:case sS:case cS:f=ej;break;case lS:f=pj;break;case"scroll":f=QR;break;case"wheel":f=mj;break;case"copy":case"cut":case"paste":f=rj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Jg}var v=(e&4)!==0,g=!v&&t==="scroll",_=v?h!==null?h+"Capture":null:h;v=[];for(var m=l,w;m!==null;){w=m;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,_!==null&&(S=Ts(m,_),S!=null&&v.push(js(m,S,w)))),g)break;m=m.return}0<v.length&&(h=new f(h,y,null,r,u),d.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&r!==Eh&&(y=r.relatedTarget||r.fromElement)&&(Ai(y)||y[sn]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(y=r.relatedTarget||r.toElement,f=l,y=y?Ai(y):null,y!==null&&(g=co(y),y!==g||y.tag!==5&&y.tag!==6)&&(y=null)):(f=null,y=l),f!==y)){if(v=Gg,S="onMouseLeave",_="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(v=Jg,S="onPointerLeave",_="onPointerEnter",m="pointer"),g=f==null?h:Uo(f),w=y==null?h:Uo(y),h=new v(S,m+"leave",f,r,u),h.target=g,h.relatedTarget=w,S=null,Ai(u)===l&&(v=new v(_,m+"enter",y,r,u),v.target=w,v.relatedTarget=g,S=v),g=S,f&&y)t:{for(v=f,_=y,m=0,w=v;w;w=mo(w))m++;for(w=0,S=_;S;S=mo(S))w++;for(;0<m-w;)v=mo(v),m--;for(;0<w-m;)_=mo(_),w--;for(;m--;){if(v===_||_!==null&&v===_.alternate)break t;v=mo(v),_=mo(_)}v=null}else v=null;f!==null&&sy(d,h,f,v,!1),y!==null&&g!==null&&sy(d,g,y,v,!0)}}e:{if(h=l?Uo(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var k=kj;else if(Zg(h))if(tS)k=Cj;else{k=xj;var E=Tj}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=Ej);if(k&&(k=k(t,l))){eS(d,k,r,u);break e}E&&E(t,h,l),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&bh(h,"number",h.value)}switch(E=l?Uo(l):window,t){case"focusin":(Zg(E)||E.contentEditable==="true")&&(Do=E,Lh=l,hs=null);break;case"focusout":hs=Lh=Do=null;break;case"mousedown":Ih=!0;break;case"contextmenu":case"mouseup":case"dragend":Ih=!1,iy(d,r,u);break;case"selectionchange":if(Rj)break;case"keydown":case"keyup":iy(d,r,u)}var T;if(Rv)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Mo?X0(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(Y0&&r.locale!=="ko"&&(Mo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Mo&&(T=J0()):(Wn=u,Cv="value"in Wn?Wn.value:Wn.textContent,Mo=!0)),E=eu(l,C),0<E.length&&(C=new Qg(C,t,null,r,u),d.push({event:C,listeners:E}),T?C.data=T:(T=Z0(r),T!==null&&(C.data=T)))),(T=yj?_j(t,r):wj(t,r))&&(l=eu(l,"onBeforeInput"),0<l.length&&(u=new Qg("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:l}),u.data=T))}dS(d,e)})}function js(t,e,r){return{instance:t,listener:e,currentTarget:r}}function eu(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ts(t,r),o!=null&&n.unshift(js(t,o,i)),o=Ts(t,e),o!=null&&n.push(js(t,o,i))),t=t.return}return n}function mo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sy(t,e,r,n,i){for(var o=e._reactName,a=[];r!==null&&r!==n;){var s=r,c=s.alternate,l=s.stateNode;if(c!==null&&c===n)break;s.tag===5&&l!==null&&(s=l,i?(c=Ts(r,o),c!=null&&a.unshift(js(r,c,s))):i||(c=Ts(r,o),c!=null&&a.push(js(r,c,s)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var Ij=/\r\n?/g,Nj=/\u0000|\uFFFD/g;function cy(t){return(typeof t=="string"?t:""+t).replace(Ij,`
`).replace(Nj,"")}function $c(t,e,r){if(e=cy(e),cy(t)!==e&&r)throw Error(H(425))}function tu(){}var Nh=null,Mh=null;function Dh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $h=typeof setTimeout=="function"?setTimeout:void 0,Mj=typeof clearTimeout=="function"?clearTimeout:void 0,ly=typeof Promise=="function"?Promise:void 0,Dj=typeof queueMicrotask=="function"?queueMicrotask:typeof ly<"u"?function(t){return ly.resolve(null).then(t).catch($j)}:$h;function $j(t){setTimeout(function(){throw t})}function ef(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Cs(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Cs(e)}function Yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Pa=Math.random().toString(36).slice(2),Dr="__reactFiber$"+Pa,As="__reactProps$"+Pa,sn="__reactContainer$"+Pa,Uh="__reactEvents$"+Pa,Uj="__reactListeners$"+Pa,Fj="__reactHandles$"+Pa;function Ai(t){var e=t[Dr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[sn]||r[Dr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=uy(t);t!==null;){if(r=t[Dr])return r;t=uy(t)}return e}t=r,r=t.parentNode}return null}function ac(t){return t=t[Dr]||t[sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Uo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Uu(t){return t[As]||null}var Fh=[],Fo=-1;function si(t){return{current:t}}function Ae(t){0>Fo||(t.current=Fh[Fo],Fh[Fo]=null,Fo--)}function Pe(t,e){Fo++,Fh[Fo]=t.current,t.current=e}var ni={},dt=si(ni),Rt=si(!1),Xi=ni;function pa(t,e){var r=t.type.contextTypes;if(!r)return ni;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function jt(t){return t=t.childContextTypes,t!=null}function ru(){Ae(Rt),Ae(dt)}function dy(t,e,r){if(dt.current!==ni)throw Error(H(168));Pe(dt,e),Pe(Rt,r)}function hS(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(H(108,TR(t)||"Unknown",i));return Ue({},r,n)}function nu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ni,Xi=dt.current,Pe(dt,t),Pe(Rt,Rt.current),!0}function fy(t,e,r){var n=t.stateNode;if(!n)throw Error(H(169));r?(t=hS(t,e,Xi),n.__reactInternalMemoizedMergedChildContext=t,Ae(Rt),Ae(dt),Pe(dt,t)):Ae(Rt),Pe(Rt,r)}var Zr=null,Fu=!1,tf=!1;function pS(t){Zr===null?Zr=[t]:Zr.push(t)}function Bj(t){Fu=!0,pS(t)}function ci(){if(!tf&&Zr!==null){tf=!0;var t=0,e=we;try{var r=Zr;for(we=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Zr=null,Fu=!1}catch(i){throw Zr!==null&&(Zr=Zr.slice(t+1)),U0(kv,ci),i}finally{we=e,tf=!1}}return null}var Bo=[],Vo=0,iu=null,ou=0,Gt=[],Qt=0,Zi=null,tn=1,rn="";function xi(t,e){Bo[Vo++]=ou,Bo[Vo++]=iu,iu=t,ou=e}function vS(t,e,r){Gt[Qt++]=tn,Gt[Qt++]=rn,Gt[Qt++]=Zi,Zi=t;var n=tn;t=rn;var i=32-wr(n)-1;n&=~(1<<i),r+=1;var o=32-wr(e)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,tn=1<<32-wr(e)+i|r<<i|n,rn=o+t}else tn=1<<o|r<<i|n,rn=t}function Av(t){t.return!==null&&(xi(t,1),vS(t,1,0))}function Lv(t){for(;t===iu;)iu=Bo[--Vo],Bo[Vo]=null,ou=Bo[--Vo],Bo[Vo]=null;for(;t===Zi;)Zi=Gt[--Qt],Gt[Qt]=null,rn=Gt[--Qt],Gt[Qt]=null,tn=Gt[--Qt],Gt[Qt]=null}var Bt=null,Ft=null,Ne=!1,_r=null;function mS(t,e){var r=Yt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function hy(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bt=t,Ft=Yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bt=t,Ft=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Zi!==null?{id:tn,overflow:rn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Yt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Bt=t,Ft=null,!0):!1;default:return!1}}function Bh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vh(t){if(Ne){var e=Ft;if(e){var r=e;if(!hy(t,e)){if(Bh(t))throw Error(H(418));e=Yn(r.nextSibling);var n=Bt;e&&hy(t,e)?mS(n,r):(t.flags=t.flags&-4097|2,Ne=!1,Bt=t)}}else{if(Bh(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ne=!1,Bt=t}}}function py(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bt=t}function Uc(t){if(t!==Bt)return!1;if(!Ne)return py(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dh(t.type,t.memoizedProps)),e&&(e=Ft)){if(Bh(t))throw gS(),Error(H(418));for(;e;)mS(t,e),e=Yn(e.nextSibling)}if(py(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ft=Yn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ft=null}}else Ft=Bt?Yn(t.stateNode.nextSibling):null;return!0}function gS(){for(var t=Ft;t;)t=Yn(t.nextSibling)}function va(){Ft=Bt=null,Ne=!1}function Iv(t){_r===null?_r=[t]:_r.push(t)}var Vj=fn.ReactCurrentBatchConfig;function qa(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var n=r.stateNode}if(!n)throw Error(H(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,t))}return t}function Fc(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vy(t){var e=t._init;return e(t._payload)}function yS(t){function e(_,m){if(t){var w=_.deletions;w===null?(_.deletions=[m],_.flags|=16):w.push(m)}}function r(_,m){if(!t)return null;for(;m!==null;)e(_,m),m=m.sibling;return null}function n(_,m){for(_=new Map;m!==null;)m.key!==null?_.set(m.key,m):_.set(m.index,m),m=m.sibling;return _}function i(_,m){return _=ti(_,m),_.index=0,_.sibling=null,_}function o(_,m,w){return _.index=w,t?(w=_.alternate,w!==null?(w=w.index,w<m?(_.flags|=2,m):w):(_.flags|=2,m)):(_.flags|=1048576,m)}function a(_){return t&&_.alternate===null&&(_.flags|=2),_}function s(_,m,w,S){return m===null||m.tag!==6?(m=lf(w,_.mode,S),m.return=_,m):(m=i(m,w),m.return=_,m)}function c(_,m,w,S){var k=w.type;return k===No?u(_,m,w.props.children,S,w.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ln&&vy(k)===m.type)?(S=i(m,w.props),S.ref=qa(_,m,w),S.return=_,S):(S=Ml(w.type,w.key,w.props,null,_.mode,S),S.ref=qa(_,m,w),S.return=_,S)}function l(_,m,w,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==w.containerInfo||m.stateNode.implementation!==w.implementation?(m=uf(w,_.mode,S),m.return=_,m):(m=i(m,w.children||[]),m.return=_,m)}function u(_,m,w,S,k){return m===null||m.tag!==7?(m=zi(w,_.mode,S,k),m.return=_,m):(m=i(m,w),m.return=_,m)}function d(_,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return m=lf(""+m,_.mode,w),m.return=_,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Oc:return w=Ml(m.type,m.key,m.props,null,_.mode,w),w.ref=qa(_,null,m),w.return=_,w;case Io:return m=uf(m,_.mode,w),m.return=_,m;case Ln:var S=m._init;return d(_,S(m._payload),w)}if(ts(m)||Ba(m))return m=zi(m,_.mode,w,null),m.return=_,m;Fc(_,m)}return null}function h(_,m,w,S){var k=m!==null?m.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:s(_,m,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Oc:return w.key===k?c(_,m,w,S):null;case Io:return w.key===k?l(_,m,w,S):null;case Ln:return k=w._init,h(_,m,k(w._payload),S)}if(ts(w)||Ba(w))return k!==null?null:u(_,m,w,S,null);Fc(_,w)}return null}function f(_,m,w,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return _=_.get(w)||null,s(m,_,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Oc:return _=_.get(S.key===null?w:S.key)||null,c(m,_,S,k);case Io:return _=_.get(S.key===null?w:S.key)||null,l(m,_,S,k);case Ln:var E=S._init;return f(_,m,w,E(S._payload),k)}if(ts(S)||Ba(S))return _=_.get(w)||null,u(m,_,S,k,null);Fc(m,S)}return null}function y(_,m,w,S){for(var k=null,E=null,T=m,C=m=0,O=null;T!==null&&C<w.length;C++){T.index>C?(O=T,T=null):O=T.sibling;var A=h(_,T,w[C],S);if(A===null){T===null&&(T=O);break}t&&T&&A.alternate===null&&e(_,T),m=o(A,m,C),E===null?k=A:E.sibling=A,E=A,T=O}if(C===w.length)return r(_,T),Ne&&xi(_,C),k;if(T===null){for(;C<w.length;C++)T=d(_,w[C],S),T!==null&&(m=o(T,m,C),E===null?k=T:E.sibling=T,E=T);return Ne&&xi(_,C),k}for(T=n(_,T);C<w.length;C++)O=f(T,_,C,w[C],S),O!==null&&(t&&O.alternate!==null&&T.delete(O.key===null?C:O.key),m=o(O,m,C),E===null?k=O:E.sibling=O,E=O);return t&&T.forEach(function(N){return e(_,N)}),Ne&&xi(_,C),k}function v(_,m,w,S){var k=Ba(w);if(typeof k!="function")throw Error(H(150));if(w=k.call(w),w==null)throw Error(H(151));for(var E=k=null,T=m,C=m=0,O=null,A=w.next();T!==null&&!A.done;C++,A=w.next()){T.index>C?(O=T,T=null):O=T.sibling;var N=h(_,T,A.value,S);if(N===null){T===null&&(T=O);break}t&&T&&N.alternate===null&&e(_,T),m=o(N,m,C),E===null?k=N:E.sibling=N,E=N,T=O}if(A.done)return r(_,T),Ne&&xi(_,C),k;if(T===null){for(;!A.done;C++,A=w.next())A=d(_,A.value,S),A!==null&&(m=o(A,m,C),E===null?k=A:E.sibling=A,E=A);return Ne&&xi(_,C),k}for(T=n(_,T);!A.done;C++,A=w.next())A=f(T,_,C,A.value,S),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?C:A.key),m=o(A,m,C),E===null?k=A:E.sibling=A,E=A);return t&&T.forEach(function(j){return e(_,j)}),Ne&&xi(_,C),k}function g(_,m,w,S){if(typeof w=="object"&&w!==null&&w.type===No&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Oc:e:{for(var k=w.key,E=m;E!==null;){if(E.key===k){if(k=w.type,k===No){if(E.tag===7){r(_,E.sibling),m=i(E,w.props.children),m.return=_,_=m;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ln&&vy(k)===E.type){r(_,E.sibling),m=i(E,w.props),m.ref=qa(_,E,w),m.return=_,_=m;break e}r(_,E);break}else e(_,E);E=E.sibling}w.type===No?(m=zi(w.props.children,_.mode,S,w.key),m.return=_,_=m):(S=Ml(w.type,w.key,w.props,null,_.mode,S),S.ref=qa(_,m,w),S.return=_,_=S)}return a(_);case Io:e:{for(E=w.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===w.containerInfo&&m.stateNode.implementation===w.implementation){r(_,m.sibling),m=i(m,w.children||[]),m.return=_,_=m;break e}else{r(_,m);break}else e(_,m);m=m.sibling}m=uf(w,_.mode,S),m.return=_,_=m}return a(_);case Ln:return E=w._init,g(_,m,E(w._payload),S)}if(ts(w))return y(_,m,w,S);if(Ba(w))return v(_,m,w,S);Fc(_,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,m!==null&&m.tag===6?(r(_,m.sibling),m=i(m,w),m.return=_,_=m):(r(_,m),m=lf(w,_.mode,S),m.return=_,_=m),a(_)):r(_,m)}return g}var ma=yS(!0),_S=yS(!1),au=si(null),su=null,zo=null,Nv=null;function Mv(){Nv=zo=su=null}function Dv(t){var e=au.current;Ae(au),t._currentValue=e}function zh(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Yo(t,e){su=t,Nv=zo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(Nv!==t)if(t={context:t,memoizedValue:e,next:null},zo===null){if(su===null)throw Error(H(308));zo=t,su.dependencies={lanes:0,firstContext:t}}else zo=zo.next=t;return e}var Li=null;function $v(t){Li===null?Li=[t]:Li.push(t)}function wS(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,$v(e)):(r.next=i.next,i.next=r),e.interleaved=r,cn(t,n)}function cn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var In=!1;function Uv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function on(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ye&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,cn(t,r)}return i=n.interleaved,i===null?(e.next=e,$v(n)):(e.next=i.next,i.next=e),n.interleaved=e,cn(t,r)}function Rl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Tv(t,r)}}function my(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function cu(t,e,r,n){var i=t.updateQueue;In=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,a===null?o=l:a.next=l,a=c;var u=t.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(o!==null){var d=i.baseState;a=0,u=l=c=null,s=o;do{var h=s.lane,f=s.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var y=t,v=s;switch(h=e,f=r,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(f,d,h);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,h=typeof y=="function"?y.call(f,d,h):y,h==null)break e;d=Ue({},d,h);break e;case 2:In=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);to|=a,t.lanes=a,t.memoizedState=d}}function gy(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(H(191,i));i.call(n)}}}var sc={},Br=si(sc),Ls=si(sc),Is=si(sc);function Ii(t){if(t===sc)throw Error(H(174));return t}function Fv(t,e){switch(Pe(Is,e),Pe(Ls,t),Pe(Br,sc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kh(e,t)}Ae(Br),Pe(Br,e)}function ga(){Ae(Br),Ae(Ls),Ae(Is)}function SS(t){Ii(Is.current);var e=Ii(Br.current),r=kh(e,t.type);e!==r&&(Pe(Ls,t),Pe(Br,r))}function Bv(t){Ls.current===t&&(Ae(Br),Ae(Ls))}var De=si(0);function lu(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var rf=[];function Vv(){for(var t=0;t<rf.length;t++)rf[t]._workInProgressVersionPrimary=null;rf.length=0}var jl=fn.ReactCurrentDispatcher,nf=fn.ReactCurrentBatchConfig,eo=0,$e=null,Je=null,et=null,uu=!1,ps=!1,Ns=0,zj=0;function ct(){throw Error(H(321))}function zv(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Sr(t[r],e[r]))return!1;return!0}function Wv(t,e,r,n,i,o){if(eo=o,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jl.current=t===null||t.memoizedState===null?Kj:Gj,t=r(n,i),ps){o=0;do{if(ps=!1,Ns=0,25<=o)throw Error(H(301));o+=1,et=Je=null,e.updateQueue=null,jl.current=Qj,t=r(n,i)}while(ps)}if(jl.current=du,e=Je!==null&&Je.next!==null,eo=0,et=Je=$e=null,uu=!1,e)throw Error(H(300));return t}function Hv(){var t=Ns!==0;return Ns=0,t}function Ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?$e.memoizedState=et=t:et=et.next=t,et}function er(){if(Je===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=et===null?$e.memoizedState:et.next;if(e!==null)et=e,Je=t;else{if(t===null)throw Error(H(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},et===null?$e.memoizedState=et=t:et=et.next=t}return et}function Ms(t,e){return typeof e=="function"?e(t):e}function of(t){var e=er(),r=e.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=Je,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,c=null,l=o;do{var u=l.lane;if((eo&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(s=c=d,a=n):c=c.next=d,$e.lanes|=u,to|=u}l=l.next}while(l!==null&&l!==o);c===null?a=n:c.next=s,Sr(n,e.memoizedState)||(Ot=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,$e.lanes|=o,to|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function af(t){var e=er(),r=e.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Sr(o,e.memoizedState)||(Ot=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function kS(){}function TS(t,e){var r=$e,n=er(),i=e(),o=!Sr(n.memoizedState,i);if(o&&(n.memoizedState=i,Ot=!0),n=n.queue,qv(CS.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||et!==null&&et.memoizedState.tag&1){if(r.flags|=2048,Ds(9,ES.bind(null,r,n,i,e),void 0,null),tt===null)throw Error(H(349));eo&30||xS(r,e,i)}return i}function xS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function ES(t,e,r,n){e.value=r,e.getSnapshot=n,PS(e)&&OS(t)}function CS(t,e,r){return r(function(){PS(e)&&OS(t)})}function PS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Sr(t,r)}catch{return!0}}function OS(t){var e=cn(t,1);e!==null&&br(e,t,1,-1)}function yy(t){var e=Ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ms,lastRenderedState:t},e.queue=t,t=t.dispatch=qj.bind(null,$e,t),[e.memoizedState,t]}function Ds(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function RS(){return er().memoizedState}function Al(t,e,r,n){var i=Ar();$e.flags|=t,i.memoizedState=Ds(1|e,r,void 0,n===void 0?null:n)}function Bu(t,e,r,n){var i=er();n=n===void 0?null:n;var o=void 0;if(Je!==null){var a=Je.memoizedState;if(o=a.destroy,n!==null&&zv(n,a.deps)){i.memoizedState=Ds(e,r,o,n);return}}$e.flags|=t,i.memoizedState=Ds(1|e,r,o,n)}function _y(t,e){return Al(8390656,8,t,e)}function qv(t,e){return Bu(2048,8,t,e)}function jS(t,e){return Bu(4,2,t,e)}function AS(t,e){return Bu(4,4,t,e)}function LS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function IS(t,e,r){return r=r!=null?r.concat([t]):null,Bu(4,4,LS.bind(null,e,t),r)}function Kv(){}function NS(t,e){var r=er();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&zv(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function MS(t,e){var r=er();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&zv(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function DS(t,e,r){return eo&21?(Sr(r,e)||(r=V0(),$e.lanes|=r,to|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=r)}function Wj(t,e){var r=we;we=r!==0&&4>r?r:4,t(!0);var n=nf.transition;nf.transition={};try{t(!1),e()}finally{we=r,nf.transition=n}}function $S(){return er().memoizedState}function Hj(t,e,r){var n=ei(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},US(t))FS(e,r);else if(r=wS(t,e,r,n),r!==null){var i=_t();br(r,t,n,i),BS(r,e,n)}}function qj(t,e,r){var n=ei(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(US(t))FS(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,Sr(s,a)){var c=e.interleaved;c===null?(i.next=i,$v(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=wS(t,e,i,n),r!==null&&(i=_t(),br(r,t,n,i),BS(r,e,n))}}function US(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function FS(t,e){ps=uu=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function BS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Tv(t,r)}}var du={readContext:Zt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},Kj={readContext:Zt,useCallback:function(t,e){return Ar().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:_y,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Al(4194308,4,LS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Al(4194308,4,t,e)},useInsertionEffect:function(t,e){return Al(4,2,t,e)},useMemo:function(t,e){var r=Ar();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ar();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=Hj.bind(null,$e,t),[n.memoizedState,t]},useRef:function(t){var e=Ar();return t={current:t},e.memoizedState=t},useState:yy,useDebugValue:Kv,useDeferredValue:function(t){return Ar().memoizedState=t},useTransition:function(){var t=yy(!1),e=t[0];return t=Wj.bind(null,t[1]),Ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=$e,i=Ar();if(Ne){if(r===void 0)throw Error(H(407));r=r()}else{if(r=e(),tt===null)throw Error(H(349));eo&30||xS(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,_y(CS.bind(null,n,o,t),[t]),n.flags|=2048,Ds(9,ES.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=Ar(),e=tt.identifierPrefix;if(Ne){var r=rn,n=tn;r=(n&~(1<<32-wr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ns++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=zj++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Gj={readContext:Zt,useCallback:NS,useContext:Zt,useEffect:qv,useImperativeHandle:IS,useInsertionEffect:jS,useLayoutEffect:AS,useMemo:MS,useReducer:of,useRef:RS,useState:function(){return of(Ms)},useDebugValue:Kv,useDeferredValue:function(t){var e=er();return DS(e,Je.memoizedState,t)},useTransition:function(){var t=of(Ms)[0],e=er().memoizedState;return[t,e]},useMutableSource:kS,useSyncExternalStore:TS,useId:$S,unstable_isNewReconciler:!1},Qj={readContext:Zt,useCallback:NS,useContext:Zt,useEffect:qv,useImperativeHandle:IS,useInsertionEffect:jS,useLayoutEffect:AS,useMemo:MS,useReducer:af,useRef:RS,useState:function(){return af(Ms)},useDebugValue:Kv,useDeferredValue:function(t){var e=er();return Je===null?e.memoizedState=t:DS(e,Je.memoizedState,t)},useTransition:function(){var t=af(Ms)[0],e=er().memoizedState;return[t,e]},useMutableSource:kS,useSyncExternalStore:TS,useId:$S,unstable_isNewReconciler:!1};function dr(t,e){if(t&&t.defaultProps){e=Ue({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Wh(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ue({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Vu={isMounted:function(t){return(t=t._reactInternals)?co(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=_t(),i=ei(t),o=on(n,i);o.payload=e,r!=null&&(o.callback=r),e=Xn(t,o,i),e!==null&&(br(e,t,i,n),Rl(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=_t(),i=ei(t),o=on(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Xn(t,o,i),e!==null&&(br(e,t,i,n),Rl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=_t(),n=ei(t),i=on(r,n);i.tag=2,e!=null&&(i.callback=e),e=Xn(t,i,n),e!==null&&(br(e,t,n,r),Rl(e,t,n))}};function wy(t,e,r,n,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,a):e.prototype&&e.prototype.isPureReactComponent?!Os(r,n)||!Os(i,o):!0}function VS(t,e,r){var n=!1,i=ni,o=e.contextType;return typeof o=="object"&&o!==null?o=Zt(o):(i=jt(e)?Xi:dt.current,n=e.contextTypes,o=(n=n!=null)?pa(t,i):ni),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vu,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function by(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Vu.enqueueReplaceState(e,e.state,null)}function Hh(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Uv(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Zt(o):(o=jt(e)?Xi:dt.current,i.context=pa(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Wh(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Vu.enqueueReplaceState(i,i.state,null),cu(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ya(t,e){try{var r="",n=e;do r+=kR(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function sf(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function qh(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Jj=typeof WeakMap=="function"?WeakMap:Map;function zS(t,e,r){r=on(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){hu||(hu=!0,rp=n),qh(t,e)},r}function WS(t,e,r){r=on(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){qh(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){qh(t,e),typeof n!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Sy(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Jj;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=uA.bind(null,t,e,r),e.then(t,t))}function ky(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ty(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=on(-1,1),e.tag=2,Xn(r,e,1))),r.lanes|=1),t)}var Yj=fn.ReactCurrentOwner,Ot=!1;function pt(t,e,r,n){e.child=t===null?_S(e,null,r,n):ma(e,t.child,r,n)}function xy(t,e,r,n,i){r=r.render;var o=e.ref;return Yo(e,i),n=Wv(t,e,r,n,o,i),r=Hv(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ln(t,e,i)):(Ne&&r&&Av(e),e.flags|=1,pt(t,e,n,i),e.child)}function Ey(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!tm(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,HS(t,e,o,n,i)):(t=Ml(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Os,r(a,n)&&t.ref===e.ref)return ln(t,e,i)}return e.flags|=1,t=ti(o,n),t.ref=e.ref,t.return=e,e.child=t}function HS(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(Os(o,n)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,ln(t,e,i)}return Kh(t,e,r,n,i)}function qS(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Ho,Mt),Mt|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(Ho,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Pe(Ho,Mt),Mt|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Pe(Ho,Mt),Mt|=n;return pt(t,e,i,r),e.child}function KS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Kh(t,e,r,n,i){var o=jt(r)?Xi:dt.current;return o=pa(e,o),Yo(e,i),r=Wv(t,e,r,n,o,i),n=Hv(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ln(t,e,i)):(Ne&&n&&Av(e),e.flags|=1,pt(t,e,r,i),e.child)}function Cy(t,e,r,n,i){if(jt(r)){var o=!0;nu(e)}else o=!1;if(Yo(e,i),e.stateNode===null)Ll(t,e),VS(e,r,n),Hh(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var c=a.context,l=r.contextType;typeof l=="object"&&l!==null?l=Zt(l):(l=jt(r)?Xi:dt.current,l=pa(e,l));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||c!==l)&&by(e,a,n,l),In=!1;var h=e.memoizedState;a.state=h,cu(e,n,a,i),c=e.memoizedState,s!==n||h!==c||Rt.current||In?(typeof u=="function"&&(Wh(e,r,u,n),c=e.memoizedState),(s=In||wy(e,r,s,n,h,c,l))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=l,n=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,bS(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:dr(e.type,s),a.props=l,d=e.pendingProps,h=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Zt(c):(c=jt(r)?Xi:dt.current,c=pa(e,c));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||h!==c)&&by(e,a,n,c),In=!1,h=e.memoizedState,a.state=h,cu(e,n,a,i);var y=e.memoizedState;s!==d||h!==y||Rt.current||In?(typeof f=="function"&&(Wh(e,r,f,n),y=e.memoizedState),(l=In||wy(e,r,l,n,h,y,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),a.props=n,a.state=y,a.context=c,n=l):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Gh(t,e,r,n,o,i)}function Gh(t,e,r,n,i,o){KS(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&fy(e,r,!1),ln(t,e,o);n=e.stateNode,Yj.current=e;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=ma(e,t.child,null,o),e.child=ma(e,null,s,o)):pt(t,e,s,o),e.memoizedState=n.state,i&&fy(e,r,!0),e.child}function GS(t){var e=t.stateNode;e.pendingContext?dy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dy(t,e.context,!1),Fv(t,e.containerInfo)}function Py(t,e,r,n,i){return va(),Iv(i),e.flags|=256,pt(t,e,r,n),e.child}var Qh={dehydrated:null,treeContext:null,retryLane:0};function Jh(t){return{baseLanes:t,cachePool:null,transitions:null}}function QS(t,e,r){var n=e.pendingProps,i=De.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Pe(De,i&1),t===null)return Vh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,o?(n=e.mode,o=e.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=Hu(a,n,0,null),t=zi(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Jh(r),e.memoizedState=Qh,t):Gv(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Xj(t,e,a,n,s,i,r);if(o){o=n.fallback,a=e.mode,i=t.child,s=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=ti(i,c),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=ti(s,o):(o=zi(o,a,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,a=t.child.memoizedState,a=a===null?Jh(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~r,e.memoizedState=Qh,n}return o=t.child,t=o.sibling,n=ti(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Gv(t,e){return e=Hu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Bc(t,e,r,n){return n!==null&&Iv(n),ma(e,t.child,null,r),t=Gv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Xj(t,e,r,n,i,o,a){if(r)return e.flags&256?(e.flags&=-257,n=sf(Error(H(422))),Bc(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=Hu({mode:"visible",children:n.children},i,0,null),o=zi(o,i,a,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&ma(e,t.child,null,a),e.child.memoizedState=Jh(a),e.memoizedState=Qh,o);if(!(e.mode&1))return Bc(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(H(419)),n=sf(o,n,void 0),Bc(t,e,a,n)}if(s=(a&t.childLanes)!==0,Ot||s){if(n=tt,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,cn(t,i),br(n,t,i,-1))}return em(),n=sf(Error(H(421))),Bc(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=dA.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ft=Yn(i.nextSibling),Bt=e,Ne=!0,_r=null,t!==null&&(Gt[Qt++]=tn,Gt[Qt++]=rn,Gt[Qt++]=Zi,tn=t.id,rn=t.overflow,Zi=e),e=Gv(e,n.children),e.flags|=4096,e)}function Oy(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),zh(t.return,e,r)}function cf(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function JS(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(pt(t,e,n.children,r),n=De.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Oy(t,r,e);else if(t.tag===19)Oy(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Pe(De,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&lu(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),cf(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&lu(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}cf(e,!0,r,null,o);break;case"together":cf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ll(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ln(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),to|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,r=ti(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ti(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function Zj(t,e,r){switch(e.tag){case 3:GS(e),va();break;case 5:SS(e);break;case 1:jt(e.type)&&nu(e);break;case 4:Fv(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Pe(au,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Pe(De,De.current&1),e.flags|=128,null):r&e.child.childLanes?QS(t,e,r):(Pe(De,De.current&1),t=ln(t,e,r),t!==null?t.sibling:null);Pe(De,De.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return JS(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(De,De.current),n)break;return null;case 22:case 23:return e.lanes=0,qS(t,e,r)}return ln(t,e,r)}var YS,Yh,XS,ZS;YS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Yh=function(){};XS=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Ii(Br.current);var o=null;switch(r){case"input":i=_h(t,i),n=_h(t,n),o=[];break;case"select":i=Ue({},i,{value:void 0}),n=Ue({},n,{value:void 0}),o=[];break;case"textarea":i=Sh(t,i),n=Sh(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=tu)}Th(r,n);var a;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ss.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in n){var c=n[l];if(s=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&c!==s&&(c!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(l,r)),r=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(o=o||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Ss.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&je("scroll",t),o||s===c||(o=[])):(o=o||[]).push(l,c))}r&&(o=o||[]).push("style",r);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};ZS=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ka(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function eA(t,e,r){var n=e.pendingProps;switch(Lv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return jt(e.type)&&ru(),lt(e),null;case 3:return n=e.stateNode,ga(),Ae(Rt),Ae(dt),Vv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Uc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_r!==null&&(op(_r),_r=null))),Yh(t,e),lt(e),null;case 5:Bv(e);var i=Ii(Is.current);if(r=e.type,t!==null&&e.stateNode!=null)XS(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(H(166));return lt(e),null}if(t=Ii(Br.current),Uc(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Dr]=e,n[As]=o,t=(e.mode&1)!==0,r){case"dialog":je("cancel",n),je("close",n);break;case"iframe":case"object":case"embed":je("load",n);break;case"video":case"audio":for(i=0;i<ns.length;i++)je(ns[i],n);break;case"source":je("error",n);break;case"img":case"image":case"link":je("error",n),je("load",n);break;case"details":je("toggle",n);break;case"input":$g(n,o),je("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},je("invalid",n);break;case"textarea":Fg(n,o),je("invalid",n)}Th(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&$c(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&$c(n.textContent,s,t),i=["children",""+s]):Ss.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&je("scroll",n)}switch(r){case"input":Rc(n),Ug(n,o,!0);break;case"textarea":Rc(n),Bg(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=tu)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=C0(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Dr]=e,t[As]=n,YS(t,e,!1,!1),e.stateNode=t;e:{switch(a=xh(r,n),r){case"dialog":je("cancel",t),je("close",t),i=n;break;case"iframe":case"object":case"embed":je("load",t),i=n;break;case"video":case"audio":for(i=0;i<ns.length;i++)je(ns[i],t);i=n;break;case"source":je("error",t),i=n;break;case"img":case"image":case"link":je("error",t),je("load",t),i=n;break;case"details":je("toggle",t),i=n;break;case"input":$g(t,n),i=_h(t,n),je("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Ue({},n,{value:void 0}),je("invalid",t);break;case"textarea":Fg(t,n),i=Sh(t,n),je("invalid",t);break;default:i=n}Th(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="style"?R0(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&P0(t,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ks(t,c):typeof c=="number"&&ks(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ss.hasOwnProperty(o)?c!=null&&o==="onScroll"&&je("scroll",t):c!=null&&yv(t,o,c,a))}switch(r){case"input":Rc(t),Ug(t,n,!1);break;case"textarea":Rc(t),Bg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ri(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Ko(t,!!n.multiple,o,!1):n.defaultValue!=null&&Ko(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=tu)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)ZS(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(H(166));if(r=Ii(Is.current),Ii(Br.current),Uc(e)){if(n=e.stateNode,r=e.memoizedProps,n[Dr]=e,(o=n.nodeValue!==r)&&(t=Bt,t!==null))switch(t.tag){case 3:$c(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&$c(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Dr]=e,e.stateNode=n}return lt(e),null;case 13:if(Ae(De),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Ft!==null&&e.mode&1&&!(e.flags&128))gS(),va(),e.flags|=98560,o=!1;else if(o=Uc(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(H(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(H(317));o[Dr]=e}else va(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),o=!1}else _r!==null&&(op(_r),_r=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Ye===0&&(Ye=3):em())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return ga(),Yh(t,e),t===null&&Rs(e.stateNode.containerInfo),lt(e),null;case 10:return Dv(e.type._context),lt(e),null;case 17:return jt(e.type)&&ru(),lt(e),null;case 19:if(Ae(De),o=e.memoizedState,o===null)return lt(e),null;if(n=(e.flags&128)!==0,a=o.rendering,a===null)if(n)Ka(o,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=lu(t),a!==null){for(e.flags|=128,Ka(o,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Pe(De,De.current&1|2),e.child}t=t.sibling}o.tail!==null&&We()>_a&&(e.flags|=128,n=!0,Ka(o,!1),e.lanes=4194304)}else{if(!n)if(t=lu(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ka(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ne)return lt(e),null}else 2*We()-o.renderingStartTime>_a&&r!==1073741824&&(e.flags|=128,n=!0,Ka(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=We(),e.sibling=null,r=De.current,Pe(De,n?r&1|2:r&1),e):(lt(e),null);case 22:case 23:return Zv(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Mt&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function tA(t,e){switch(Lv(e),e.tag){case 1:return jt(e.type)&&ru(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ga(),Ae(Rt),Ae(dt),Vv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Bv(e),null;case 13:if(Ae(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));va()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(De),null;case 4:return ga(),null;case 10:return Dv(e.type._context),null;case 22:case 23:return Zv(),null;case 24:return null;default:return null}}var Vc=!1,ut=!1,rA=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Wo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ve(t,e,n)}else r.current=null}function Xh(t,e,r){try{r()}catch(n){Ve(t,e,n)}}var Ry=!1;function nA(t,e){if(Nh=Xl,t=iS(),jv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,s=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==r||i!==0&&d.nodeType!==3||(s=a+i),d!==o||n!==0&&d.nodeType!==3||(c=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===r&&++l===i&&(s=a),h===o&&++u===n&&(c=a),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}r=s===-1||c===-1?null:{start:s,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Mh={focusedElem:t,selectionRange:r},Xl=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,g=y.memoizedState,_=e.stateNode,m=_.getSnapshotBeforeUpdate(e.elementType===e.type?v:dr(e.type,v),g);_.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(S){Ve(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return y=Ry,Ry=!1,y}function vs(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Xh(e,r,o)}i=i.next}while(i!==n)}}function zu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Zh(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function ek(t){var e=t.alternate;e!==null&&(t.alternate=null,ek(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Dr],delete e[As],delete e[Uh],delete e[Uj],delete e[Fj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tk(t){return t.tag===5||t.tag===3||t.tag===4}function jy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ep(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=tu));else if(n!==4&&(t=t.child,t!==null))for(ep(t,e,r),t=t.sibling;t!==null;)ep(t,e,r),t=t.sibling}function tp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(tp(t,e,r),t=t.sibling;t!==null;)tp(t,e,r),t=t.sibling}var nt=null,mr=!1;function kn(t,e,r){for(r=r.child;r!==null;)rk(t,e,r),r=r.sibling}function rk(t,e,r){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(Nu,r)}catch{}switch(r.tag){case 5:ut||Wo(r,e);case 6:var n=nt,i=mr;nt=null,kn(t,e,r),nt=n,mr=i,nt!==null&&(mr?(t=nt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):nt.removeChild(r.stateNode));break;case 18:nt!==null&&(mr?(t=nt,r=r.stateNode,t.nodeType===8?ef(t.parentNode,r):t.nodeType===1&&ef(t,r),Cs(t)):ef(nt,r.stateNode));break;case 4:n=nt,i=mr,nt=r.stateNode.containerInfo,mr=!0,kn(t,e,r),nt=n,mr=i;break;case 0:case 11:case 14:case 15:if(!ut&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Xh(r,e,a),i=i.next}while(i!==n)}kn(t,e,r);break;case 1:if(!ut&&(Wo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Ve(r,e,s)}kn(t,e,r);break;case 21:kn(t,e,r);break;case 22:r.mode&1?(ut=(n=ut)||r.memoizedState!==null,kn(t,e,r),ut=n):kn(t,e,r);break;default:kn(t,e,r)}}function Ay(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new rA),e.forEach(function(n){var i=fA.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function sr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:nt=s.stateNode,mr=!1;break e;case 3:nt=s.stateNode.containerInfo,mr=!0;break e;case 4:nt=s.stateNode.containerInfo,mr=!0;break e}s=s.return}if(nt===null)throw Error(H(160));rk(o,a,i),nt=null,mr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){Ve(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nk(e,t),e=e.sibling}function nk(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sr(e,t),jr(t),n&4){try{vs(3,t,t.return),zu(3,t)}catch(v){Ve(t,t.return,v)}try{vs(5,t,t.return)}catch(v){Ve(t,t.return,v)}}break;case 1:sr(e,t),jr(t),n&512&&r!==null&&Wo(r,r.return);break;case 5:if(sr(e,t),jr(t),n&512&&r!==null&&Wo(r,r.return),t.flags&32){var i=t.stateNode;try{ks(i,"")}catch(v){Ve(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=r!==null?r.memoizedProps:o,s=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&x0(i,o),xh(s,a);var l=xh(s,o);for(a=0;a<c.length;a+=2){var u=c[a],d=c[a+1];u==="style"?R0(i,d):u==="dangerouslySetInnerHTML"?P0(i,d):u==="children"?ks(i,d):yv(i,u,d,l)}switch(s){case"input":wh(i,o);break;case"textarea":E0(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Ko(i,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Ko(i,!!o.multiple,o.defaultValue,!0):Ko(i,!!o.multiple,o.multiple?[]:"",!1))}i[As]=o}catch(v){Ve(t,t.return,v)}}break;case 6:if(sr(e,t),jr(t),n&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){Ve(t,t.return,v)}}break;case 3:if(sr(e,t),jr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Cs(e.containerInfo)}catch(v){Ve(t,t.return,v)}break;case 4:sr(e,t),jr(t);break;case 13:sr(e,t),jr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Yv=We())),n&4&&Ay(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(ut=(l=ut)||u,sr(e,t),ut=l):sr(e,t),jr(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Y=t,u=t.child;u!==null;){for(d=Y=u;Y!==null;){switch(h=Y,f=h.child,h.tag){case 0:case 11:case 14:case 15:vs(4,h,h.return);break;case 1:Wo(h,h.return);var y=h.stateNode;if(typeof y.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Ve(n,r,v)}}break;case 5:Wo(h,h.return);break;case 22:if(h.memoizedState!==null){Iy(d);continue}}f!==null?(f.return=h,Y=f):Iy(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=O0("display",a))}catch(v){Ve(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(v){Ve(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:sr(e,t),jr(t),n&4&&Ay(t);break;case 21:break;default:sr(e,t),jr(t)}}function jr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(tk(r)){var n=r;break e}r=r.return}throw Error(H(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(ks(i,""),n.flags&=-33);var o=jy(t);tp(t,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=jy(t);ep(t,s,a);break;default:throw Error(H(161))}}catch(c){Ve(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iA(t,e,r){Y=t,ik(t)}function ik(t,e,r){for(var n=(t.mode&1)!==0;Y!==null;){var i=Y,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||Vc;if(!a){var s=i.alternate,c=s!==null&&s.memoizedState!==null||ut;s=Vc;var l=ut;if(Vc=a,(ut=c)&&!l)for(Y=i;Y!==null;)a=Y,c=a.child,a.tag===22&&a.memoizedState!==null?Ny(i):c!==null?(c.return=a,Y=c):Ny(i);for(;o!==null;)Y=o,ik(o),o=o.sibling;Y=i,Vc=s,ut=l}Ly(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Y=o):Ly(t)}}function Ly(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||zu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ut)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:dr(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&gy(e,o,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}gy(e,a,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Cs(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}ut||e.flags&512&&Zh(e)}catch(h){Ve(e,e.return,h)}}if(e===t){Y=null;break}if(r=e.sibling,r!==null){r.return=e.return,Y=r;break}Y=e.return}}function Iy(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Y=r;break}Y=e.return}}function Ny(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{zu(4,e)}catch(c){Ve(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){Ve(e,i,c)}}var o=e.return;try{Zh(e)}catch(c){Ve(e,o,c)}break;case 5:var a=e.return;try{Zh(e)}catch(c){Ve(e,a,c)}}}catch(c){Ve(e,e.return,c)}if(e===t){Y=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Y=s;break}Y=e.return}}var oA=Math.ceil,fu=fn.ReactCurrentDispatcher,Qv=fn.ReactCurrentOwner,Xt=fn.ReactCurrentBatchConfig,ye=0,tt=null,qe=null,it=0,Mt=0,Ho=si(0),Ye=0,$s=null,to=0,Wu=0,Jv=0,ms=null,Pt=null,Yv=0,_a=1/0,Yr=null,hu=!1,rp=null,Zn=null,zc=!1,Hn=null,pu=0,gs=0,np=null,Il=-1,Nl=0;function _t(){return ye&6?We():Il!==-1?Il:Il=We()}function ei(t){return t.mode&1?ye&2&&it!==0?it&-it:Vj.transition!==null?(Nl===0&&(Nl=V0()),Nl):(t=we,t!==0||(t=window.event,t=t===void 0?16:Q0(t.type)),t):1}function br(t,e,r,n){if(50<gs)throw gs=0,np=null,Error(H(185));ic(t,r,n),(!(ye&2)||t!==tt)&&(t===tt&&(!(ye&2)&&(Wu|=r),Ye===4&&Mn(t,it)),At(t,n),r===1&&ye===0&&!(e.mode&1)&&(_a=We()+500,Fu&&ci()))}function At(t,e){var r=t.callbackNode;VR(t,e);var n=Yl(t,t===tt?it:0);if(n===0)r!==null&&Wg(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Wg(r),e===1)t.tag===0?Bj(My.bind(null,t)):pS(My.bind(null,t)),Dj(function(){!(ye&6)&&ci()}),r=null;else{switch(z0(n)){case 1:r=kv;break;case 4:r=F0;break;case 16:r=Jl;break;case 536870912:r=B0;break;default:r=Jl}r=fk(r,ok.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function ok(t,e){if(Il=-1,Nl=0,ye&6)throw Error(H(327));var r=t.callbackNode;if(Xo()&&t.callbackNode!==r)return null;var n=Yl(t,t===tt?it:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=vu(t,n);else{e=n;var i=ye;ye|=2;var o=sk();(tt!==t||it!==e)&&(Yr=null,_a=We()+500,Vi(t,e));do try{cA();break}catch(s){ak(t,s)}while(!0);Mv(),fu.current=o,ye=i,qe!==null?e=0:(tt=null,it=0,e=Ye)}if(e!==0){if(e===2&&(i=Rh(t),i!==0&&(n=i,e=ip(t,i))),e===1)throw r=$s,Vi(t,0),Mn(t,n),At(t,We()),r;if(e===6)Mn(t,n);else{if(i=t.current.alternate,!(n&30)&&!aA(i)&&(e=vu(t,n),e===2&&(o=Rh(t),o!==0&&(n=o,e=ip(t,o))),e===1))throw r=$s,Vi(t,0),Mn(t,n),At(t,We()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(H(345));case 2:Ei(t,Pt,Yr);break;case 3:if(Mn(t,n),(n&130023424)===n&&(e=Yv+500-We(),10<e)){if(Yl(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){_t(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=$h(Ei.bind(null,t,Pt,Yr),e);break}Ei(t,Pt,Yr);break;case 4:if(Mn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-wr(n);o=1<<a,a=e[a],a>i&&(i=a),n&=~o}if(n=i,n=We()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*oA(n/1960))-n,10<n){t.timeoutHandle=$h(Ei.bind(null,t,Pt,Yr),n);break}Ei(t,Pt,Yr);break;case 5:Ei(t,Pt,Yr);break;default:throw Error(H(329))}}}return At(t,We()),t.callbackNode===r?ok.bind(null,t):null}function ip(t,e){var r=ms;return t.current.memoizedState.isDehydrated&&(Vi(t,e).flags|=256),t=vu(t,e),t!==2&&(e=Pt,Pt=r,e!==null&&op(e)),t}function op(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function aA(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Sr(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mn(t,e){for(e&=~Jv,e&=~Wu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-wr(e),n=1<<r;t[r]=-1,e&=~n}}function My(t){if(ye&6)throw Error(H(327));Xo();var e=Yl(t,0);if(!(e&1))return At(t,We()),null;var r=vu(t,e);if(t.tag!==0&&r===2){var n=Rh(t);n!==0&&(e=n,r=ip(t,n))}if(r===1)throw r=$s,Vi(t,0),Mn(t,e),At(t,We()),r;if(r===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ei(t,Pt,Yr),At(t,We()),null}function Xv(t,e){var r=ye;ye|=1;try{return t(e)}finally{ye=r,ye===0&&(_a=We()+500,Fu&&ci())}}function ro(t){Hn!==null&&Hn.tag===0&&!(ye&6)&&Xo();var e=ye;ye|=1;var r=Xt.transition,n=we;try{if(Xt.transition=null,we=1,t)return t()}finally{we=n,Xt.transition=r,ye=e,!(ye&6)&&ci()}}function Zv(){Mt=Ho.current,Ae(Ho)}function Vi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Mj(r)),qe!==null)for(r=qe.return;r!==null;){var n=r;switch(Lv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&ru();break;case 3:ga(),Ae(Rt),Ae(dt),Vv();break;case 5:Bv(n);break;case 4:ga();break;case 13:Ae(De);break;case 19:Ae(De);break;case 10:Dv(n.type._context);break;case 22:case 23:Zv()}r=r.return}if(tt=t,qe=t=ti(t.current,null),it=Mt=e,Ye=0,$s=null,Jv=Wu=to=0,Pt=ms=null,Li!==null){for(e=0;e<Li.length;e++)if(r=Li[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}Li=null}return t}function ak(t,e){do{var r=qe;try{if(Mv(),jl.current=du,uu){for(var n=$e.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}uu=!1}if(eo=0,et=Je=$e=null,ps=!1,Ns=0,Qv.current=null,r===null||r.return===null){Ye=1,$s=e,qe=null;break}e:{var o=t,a=r.return,s=r,c=e;if(e=it,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=ky(a);if(f!==null){f.flags&=-257,Ty(f,a,s,o,e),f.mode&1&&Sy(o,l,e),e=f,c=l;var y=e.updateQueue;if(y===null){var v=new Set;v.add(c),e.updateQueue=v}else y.add(c);break e}else{if(!(e&1)){Sy(o,l,e),em();break e}c=Error(H(426))}}else if(Ne&&s.mode&1){var g=ky(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Ty(g,a,s,o,e),Iv(ya(c,s));break e}}o=c=ya(c,s),Ye!==4&&(Ye=2),ms===null?ms=[o]:ms.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var _=zS(o,c,e);my(o,_);break e;case 1:s=c;var m=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Zn===null||!Zn.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=WS(o,s,e);my(o,S);break e}}o=o.return}while(o!==null)}lk(r)}catch(k){e=k,qe===r&&r!==null&&(qe=r=r.return);continue}break}while(!0)}function sk(){var t=fu.current;return fu.current=du,t===null?du:t}function em(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),tt===null||!(to&268435455)&&!(Wu&268435455)||Mn(tt,it)}function vu(t,e){var r=ye;ye|=2;var n=sk();(tt!==t||it!==e)&&(Yr=null,Vi(t,e));do try{sA();break}catch(i){ak(t,i)}while(!0);if(Mv(),ye=r,fu.current=n,qe!==null)throw Error(H(261));return tt=null,it=0,Ye}function sA(){for(;qe!==null;)ck(qe)}function cA(){for(;qe!==null&&!LR();)ck(qe)}function ck(t){var e=dk(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?lk(t):qe=e,Qv.current=null}function lk(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=tA(r,e),r!==null){r.flags&=32767,qe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,qe=null;return}}else if(r=eA(r,e,Mt),r!==null){qe=r;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Ye===0&&(Ye=5)}function Ei(t,e,r){var n=we,i=Xt.transition;try{Xt.transition=null,we=1,lA(t,e,r,n)}finally{Xt.transition=i,we=n}return null}function lA(t,e,r,n){do Xo();while(Hn!==null);if(ye&6)throw Error(H(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(zR(t,o),t===tt&&(qe=tt=null,it=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||zc||(zc=!0,fk(Jl,function(){return Xo(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Xt.transition,Xt.transition=null;var a=we;we=1;var s=ye;ye|=4,Qv.current=null,nA(t,r),nk(r,t),Oj(Mh),Xl=!!Nh,Mh=Nh=null,t.current=r,iA(r),IR(),ye=s,we=a,Xt.transition=o}else t.current=r;if(zc&&(zc=!1,Hn=t,pu=i),o=t.pendingLanes,o===0&&(Zn=null),DR(r.stateNode),At(t,We()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(hu)throw hu=!1,t=rp,rp=null,t;return pu&1&&t.tag!==0&&Xo(),o=t.pendingLanes,o&1?t===np?gs++:(gs=0,np=t):gs=0,ci(),null}function Xo(){if(Hn!==null){var t=z0(pu),e=Xt.transition,r=we;try{if(Xt.transition=null,we=16>t?16:t,Hn===null)var n=!1;else{if(t=Hn,Hn=null,pu=0,ye&6)throw Error(H(331));var i=ye;for(ye|=4,Y=t.current;Y!==null;){var o=Y,a=o.child;if(Y.flags&16){var s=o.deletions;if(s!==null){for(var c=0;c<s.length;c++){var l=s[c];for(Y=l;Y!==null;){var u=Y;switch(u.tag){case 0:case 11:case 15:vs(8,u,o)}var d=u.child;if(d!==null)d.return=u,Y=d;else for(;Y!==null;){u=Y;var h=u.sibling,f=u.return;if(ek(u),u===l){Y=null;break}if(h!==null){h.return=f,Y=h;break}Y=f}}}var y=o.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(v!==null)}}Y=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Y=a;else e:for(;Y!==null;){if(o=Y,o.flags&2048)switch(o.tag){case 0:case 11:case 15:vs(9,o,o.return)}var _=o.sibling;if(_!==null){_.return=o.return,Y=_;break e}Y=o.return}}var m=t.current;for(Y=m;Y!==null;){a=Y;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Y=w;else e:for(a=m;Y!==null;){if(s=Y,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:zu(9,s)}}catch(k){Ve(s,s.return,k)}if(s===a){Y=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,Y=S;break e}Y=s.return}}if(ye=i,ci(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(Nu,t)}catch{}n=!0}return n}finally{we=r,Xt.transition=e}}return!1}function Dy(t,e,r){e=ya(r,e),e=zS(t,e,1),t=Xn(t,e,1),e=_t(),t!==null&&(ic(t,1,e),At(t,e))}function Ve(t,e,r){if(t.tag===3)Dy(t,t,r);else for(;e!==null;){if(e.tag===3){Dy(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zn===null||!Zn.has(n))){t=ya(r,t),t=WS(e,t,1),e=Xn(e,t,1),t=_t(),e!==null&&(ic(e,1,t),At(e,t));break}}e=e.return}}function uA(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&r,tt===t&&(it&r)===r&&(Ye===4||Ye===3&&(it&130023424)===it&&500>We()-Yv?Vi(t,0):Jv|=r),At(t,e)}function uk(t,e){e===0&&(t.mode&1?(e=Lc,Lc<<=1,!(Lc&130023424)&&(Lc=4194304)):e=1);var r=_t();t=cn(t,e),t!==null&&(ic(t,e,r),At(t,r))}function dA(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),uk(t,r)}function fA(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(H(314))}n!==null&&n.delete(e),uk(t,r)}var dk;dk=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)Ot=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ot=!1,Zj(t,e,r);Ot=!!(t.flags&131072)}else Ot=!1,Ne&&e.flags&1048576&&vS(e,ou,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Ll(t,e),t=e.pendingProps;var i=pa(e,dt.current);Yo(e,r),i=Wv(null,e,n,t,i,r);var o=Hv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(n)?(o=!0,nu(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uv(e),i.updater=Vu,e.stateNode=i,i._reactInternals=e,Hh(e,n,t,r),e=Gh(null,e,n,!0,o,r)):(e.tag=0,Ne&&o&&Av(e),pt(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Ll(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=pA(n),t=dr(n,t),i){case 0:e=Kh(null,e,n,t,r);break e;case 1:e=Cy(null,e,n,t,r);break e;case 11:e=xy(null,e,n,t,r);break e;case 14:e=Ey(null,e,n,dr(n.type,t),r);break e}throw Error(H(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dr(n,i),Kh(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dr(n,i),Cy(t,e,n,i,r);case 3:e:{if(GS(e),t===null)throw Error(H(387));n=e.pendingProps,o=e.memoizedState,i=o.element,bS(t,e),cu(e,n,null,r);var a=e.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ya(Error(H(423)),e),e=Py(t,e,n,r,i);break e}else if(n!==i){i=ya(Error(H(424)),e),e=Py(t,e,n,r,i);break e}else for(Ft=Yn(e.stateNode.containerInfo.firstChild),Bt=e,Ne=!0,_r=null,r=_S(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(va(),n===i){e=ln(t,e,r);break e}pt(t,e,n,r)}e=e.child}return e;case 5:return SS(e),t===null&&Vh(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,Dh(n,i)?a=null:o!==null&&Dh(n,o)&&(e.flags|=32),KS(t,e),pt(t,e,a,r),e.child;case 6:return t===null&&Vh(e),null;case 13:return QS(t,e,r);case 4:return Fv(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ma(e,null,n,r):pt(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dr(n,i),xy(t,e,n,i,r);case 7:return pt(t,e,e.pendingProps,r),e.child;case 8:return pt(t,e,e.pendingProps.children,r),e.child;case 12:return pt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Pe(au,n._currentValue),n._currentValue=a,o!==null)if(Sr(o.value,a)){if(o.children===i.children&&!Rt.current){e=ln(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var c=s.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=on(-1,r&-r),c.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),zh(o.return,r,e),s.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(H(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),zh(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}pt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Yo(e,r),i=Zt(i),n=n(i),e.flags|=1,pt(t,e,n,r),e.child;case 14:return n=e.type,i=dr(n,e.pendingProps),i=dr(n.type,i),Ey(t,e,n,i,r);case 15:return HS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dr(n,i),Ll(t,e),e.tag=1,jt(n)?(t=!0,nu(e)):t=!1,Yo(e,r),VS(e,n,i),Hh(e,n,i,r),Gh(null,e,n,!0,t,r);case 19:return JS(t,e,r);case 22:return qS(t,e,r)}throw Error(H(156,e.tag))};function fk(t,e){return U0(t,e)}function hA(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,r,n){return new hA(t,e,r,n)}function tm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pA(t){if(typeof t=="function")return tm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wv)return 11;if(t===bv)return 14}return 2}function ti(t,e){var r=t.alternate;return r===null?(r=Yt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ml(t,e,r,n,i,o){var a=2;if(n=t,typeof t=="function")tm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case No:return zi(r.children,i,o,e);case _v:a=8,i|=8;break;case vh:return t=Yt(12,r,e,i|2),t.elementType=vh,t.lanes=o,t;case mh:return t=Yt(13,r,e,i),t.elementType=mh,t.lanes=o,t;case gh:return t=Yt(19,r,e,i),t.elementType=gh,t.lanes=o,t;case S0:return Hu(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case w0:a=10;break e;case b0:a=9;break e;case wv:a=11;break e;case bv:a=14;break e;case Ln:a=16,n=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Yt(a,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function zi(t,e,r,n){return t=Yt(7,t,n,e),t.lanes=r,t}function Hu(t,e,r,n){return t=Yt(22,t,n,e),t.elementType=S0,t.lanes=r,t.stateNode={isHidden:!1},t}function lf(t,e,r){return t=Yt(6,t,null,e),t.lanes=r,t}function uf(t,e,r){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function vA(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zd(0),this.expirationTimes=zd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zd(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function rm(t,e,r,n,i,o,a,s,c){return t=new vA(t,e,r,s,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Yt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uv(o),t}function mA(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Io,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function hk(t){if(!t)return ni;t=t._reactInternals;e:{if(co(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var r=t.type;if(jt(r))return hS(t,r,e)}return e}function pk(t,e,r,n,i,o,a,s,c){return t=rm(r,n,!0,t,i,o,a,s,c),t.context=hk(null),r=t.current,n=_t(),i=ei(r),o=on(n,i),o.callback=e??null,Xn(r,o,i),t.current.lanes=i,ic(t,i,n),At(t,n),t}function qu(t,e,r,n){var i=e.current,o=_t(),a=ei(i);return r=hk(r),e.context===null?e.context=r:e.pendingContext=r,e=on(o,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Xn(i,e,a),t!==null&&(br(t,i,a,o),Rl(t,i,a)),a}function mu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $y(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function nm(t,e){$y(t,e),(t=t.alternate)&&$y(t,e)}function gA(){return null}var vk=typeof reportError=="function"?reportError:function(t){console.error(t)};function im(t){this._internalRoot=t}Ku.prototype.render=im.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));qu(t,e,null,null)};Ku.prototype.unmount=im.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ro(function(){qu(null,t,null,null)}),e[sn]=null}};function Ku(t){this._internalRoot=t}Ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=q0();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Nn.length&&e!==0&&e<Nn[r].priority;r++);Nn.splice(r,0,t),r===0&&G0(t)}};function om(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Uy(){}function yA(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var l=mu(a);o.call(l)}}var a=pk(e,n,t,0,null,!1,!1,"",Uy);return t._reactRootContainer=a,t[sn]=a.current,Rs(t.nodeType===8?t.parentNode:t),ro(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var l=mu(c);s.call(l)}}var c=rm(t,0,!1,null,null,!1,!1,"",Uy);return t._reactRootContainer=c,t[sn]=c.current,Rs(t.nodeType===8?t.parentNode:t),ro(function(){qu(e,c,r,n)}),c}function Qu(t,e,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var c=mu(a);s.call(c)}}qu(e,a,t,i)}else a=yA(r,e,t,i,n);return mu(a)}W0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=rs(e.pendingLanes);r!==0&&(Tv(e,r|1),At(e,We()),!(ye&6)&&(_a=We()+500,ci()))}break;case 13:ro(function(){var n=cn(t,1);if(n!==null){var i=_t();br(n,t,1,i)}}),nm(t,1)}};xv=function(t){if(t.tag===13){var e=cn(t,134217728);if(e!==null){var r=_t();br(e,t,134217728,r)}nm(t,134217728)}};H0=function(t){if(t.tag===13){var e=ei(t),r=cn(t,e);if(r!==null){var n=_t();br(r,t,e,n)}nm(t,e)}};q0=function(){return we};K0=function(t,e){var r=we;try{return we=t,e()}finally{we=r}};Ch=function(t,e,r){switch(e){case"input":if(wh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Uu(n);if(!i)throw Error(H(90));T0(n),wh(n,i)}}}break;case"textarea":E0(t,r);break;case"select":e=r.value,e!=null&&Ko(t,!!r.multiple,e,!1)}};L0=Xv;I0=ro;var _A={usingClientEntryPoint:!1,Events:[ac,Uo,Uu,j0,A0,Xv]},Ga={findFiberByHostInstance:Ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wA={bundleType:Ga.bundleType,version:Ga.version,rendererPackageName:Ga.rendererPackageName,rendererConfig:Ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=D0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ga.findFiberByHostInstance||gA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wc.isDisabled&&Wc.supportsFiber)try{Nu=Wc.inject(wA),Fr=Wc}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_A;Wt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!om(e))throw Error(H(200));return mA(t,e,null,r)};Wt.createRoot=function(t,e){if(!om(t))throw Error(H(299));var r=!1,n="",i=vk;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=rm(t,1,!1,null,null,r,!1,n,i),t[sn]=e.current,Rs(t.nodeType===8?t.parentNode:t),new im(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=D0(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return ro(t)};Wt.hydrate=function(t,e,r){if(!Gu(e))throw Error(H(200));return Qu(null,t,e,!0,r)};Wt.hydrateRoot=function(t,e,r){if(!om(t))throw Error(H(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=vk;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=pk(e,null,t,1,r??null,i,!1,o,a),t[sn]=e.current,Rs(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Ku(e)};Wt.render=function(t,e,r){if(!Gu(e))throw Error(H(200));return Qu(null,t,e,!1,r)};Wt.unmountComponentAtNode=function(t){if(!Gu(t))throw Error(H(40));return t._reactRootContainer?(ro(function(){Qu(null,null,t,!1,function(){t._reactRootContainer=null,t[sn]=null})}),!0):!1};Wt.unstable_batchedUpdates=Xv;Wt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Gu(r))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Qu(t,e,r,!1,n)};Wt.version="18.3.1-next-f1338f8080-20240426";function mk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mk)}catch(t){console.error(t)}}mk(),m0.exports=Wt;var lo=m0.exports;const gk=dv(lo);var yk,Fy=lo;yk=Fy.createRoot,Fy.hydrateRoot;const bA=1,SA=1e6;let df=0;function kA(){return df=(df+1)%Number.MAX_SAFE_INTEGER,df.toString()}const ff=new Map,By=t=>{if(ff.has(t))return;const e=setTimeout(()=>{ff.delete(t),ys({type:"REMOVE_TOAST",toastId:t})},SA);ff.set(t,e)},TA=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,bA)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?By(r):t.toasts.forEach(n=>{By(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},Dl=[];let $l={toasts:[]};function ys(t){$l=TA($l,t),Dl.forEach(e=>{e($l)})}function xA({...t}){const e=kA(),r=i=>ys({type:"UPDATE_TOAST",toast:{...i,id:e}}),n=()=>ys({type:"DISMISS_TOAST",toastId:e});return ys({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||n()}}}),{id:e,dismiss:n,update:r}}function Ju(){const[t,e]=b.useState($l);return b.useEffect(()=>(Dl.push(e),()=>{const r=Dl.indexOf(e);r>-1&&Dl.splice(r,1)}),[t]),{...t,toast:xA,dismiss:r=>ys({type:"DISMISS_TOAST",toastId:r})}}function pe(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t==null||t(i),r===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function Vy(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function cc(...t){return e=>{let r=!1;const n=t.map(i=>{const o=Vy(i,e);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let i=0;i<n.length;i++){const o=n[i];typeof o=="function"?o():Vy(t[i],null)}}}}function ze(...t){return b.useCallback(cc(...t),t)}function lc(t,e=[]){let r=[];function n(o,a){const s=b.createContext(a),c=r.length;r=[...r,a];const l=d=>{var _;const{scope:h,children:f,...y}=d,v=((_=h==null?void 0:h[t])==null?void 0:_[c])||s,g=b.useMemo(()=>y,Object.values(y));return p.jsx(v.Provider,{value:g,children:f})};l.displayName=o+"Provider";function u(d,h){var v;const f=((v=h==null?void 0:h[t])==null?void 0:v[c])||s,y=b.useContext(f);if(y)return y;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[l,u]}const i=()=>{const o=r.map(a=>b.createContext(a));return function(s){const c=(s==null?void 0:s[t])||o;return b.useMemo(()=>({[`__scope${t}`]:{...s,[t]:c}}),[s,c])}};return i.scopeName=t,[n,EA(i,...e)]}function EA(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=n.reduce((s,{useScope:c,scopeName:l})=>{const d=c(o)[`__scope${l}`];return{...s,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}function zy(t){const e=CA(t),r=b.forwardRef((n,i)=>{const{children:o,...a}=n,s=b.Children.toArray(o),c=s.find(OA);if(c){const l=c.props.children,u=s.map(d=>d===c?b.Children.count(l)>1?b.Children.only(null):b.isValidElement(l)?l.props.children:null:d);return p.jsx(e,{...a,ref:i,children:b.isValidElement(l)?b.cloneElement(l,void 0,u):null})}return p.jsx(e,{...a,ref:i,children:o})});return r.displayName=`${t}.Slot`,r}function CA(t){const e=b.forwardRef((r,n)=>{const{children:i,...o}=r;if(b.isValidElement(i)){const a=jA(i),s=RA(o,i.props);return i.type!==b.Fragment&&(s.ref=n?cc(n,a):a),b.cloneElement(i,s)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var PA=Symbol("radix.slottable");function OA(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===PA}function RA(t,e){const r={...e};for(const n in e){const i=t[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...s)=>{const c=o(...s);return i(...s),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...t,...r}}function jA(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function _k(t){const e=t+"CollectionProvider",[r,n]=lc(e),[i,o]=r(e,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:g,children:_}=v,m=G.useRef(null),w=G.useRef(new Map).current;return p.jsx(i,{scope:g,itemMap:w,collectionRef:m,children:_})};a.displayName=e;const s=t+"CollectionSlot",c=zy(s),l=G.forwardRef((v,g)=>{const{scope:_,children:m}=v,w=o(s,_),S=ze(g,w.collectionRef);return p.jsx(c,{ref:S,children:m})});l.displayName=s;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=zy(u),f=G.forwardRef((v,g)=>{const{scope:_,children:m,...w}=v,S=G.useRef(null),k=ze(g,S),E=o(u,_);return G.useEffect(()=>(E.itemMap.set(S,{ref:S,...w}),()=>void E.itemMap.delete(S))),p.jsx(h,{[d]:"",ref:k,children:m})});f.displayName=u;function y(v){const g=o(t+"CollectionConsumer",v);return G.useCallback(()=>{const m=g.collectionRef.current;if(!m)return[];const w=Array.from(m.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((E,T)=>w.indexOf(E.ref.current)-w.indexOf(T.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:a,Slot:l,ItemSlot:f},y,n]}function AA(t){const e=LA(t),r=b.forwardRef((n,i)=>{const{children:o,...a}=n,s=b.Children.toArray(o),c=s.find(NA);if(c){const l=c.props.children,u=s.map(d=>d===c?b.Children.count(l)>1?b.Children.only(null):b.isValidElement(l)?l.props.children:null:d);return p.jsx(e,{...a,ref:i,children:b.isValidElement(l)?b.cloneElement(l,void 0,u):null})}return p.jsx(e,{...a,ref:i,children:o})});return r.displayName=`${t}.Slot`,r}function LA(t){const e=b.forwardRef((r,n)=>{const{children:i,...o}=r;if(b.isValidElement(i)){const a=DA(i),s=MA(o,i.props);return i.type!==b.Fragment&&(s.ref=n?cc(n,a):a),b.cloneElement(i,s)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var IA=Symbol("radix.slottable");function NA(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===IA}function MA(t,e){const r={...e};for(const n in e){const i=t[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...s)=>{const c=o(...s);return i(...s),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...t,...r}}function DA(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var $A=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],xe=$A.reduce((t,e)=>{const r=AA(`Primitive.${e}`),n=b.forwardRef((i,o)=>{const{asChild:a,...s}=i,c=a?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(c,{...s,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function wk(t,e){t&&lo.flushSync(()=>t.dispatchEvent(e))}function kr(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function UA(t,e=globalThis==null?void 0:globalThis.document){const r=kr(t);b.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var FA="DismissableLayer",ap="dismissableLayer.update",BA="dismissableLayer.pointerDownOutside",VA="dismissableLayer.focusOutside",Wy,bk=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yu=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:s,...c}=t,l=b.useContext(bk),[u,d]=b.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=b.useState({}),y=ze(e,T=>d(T)),v=Array.from(l.layers),[g]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),_=v.indexOf(g),m=u?v.indexOf(u):-1,w=l.layersWithOutsidePointerEventsDisabled.size>0,S=m>=_,k=WA(T=>{const C=T.target,O=[...l.branches].some(A=>A.contains(C));!S||O||(i==null||i(T),a==null||a(T),T.defaultPrevented||s==null||s())},h),E=HA(T=>{const C=T.target;[...l.branches].some(A=>A.contains(C))||(o==null||o(T),a==null||a(T),T.defaultPrevented||s==null||s())},h);return UA(T=>{m===l.layers.size-1&&(n==null||n(T),!T.defaultPrevented&&s&&(T.preventDefault(),s()))},h),b.useEffect(()=>{if(u)return r&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(Wy=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),Hy(),()=>{r&&l.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Wy)}},[u,h,r,l]),b.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),Hy())},[u,l]),b.useEffect(()=>{const T=()=>f({});return document.addEventListener(ap,T),()=>document.removeEventListener(ap,T)},[]),p.jsx(xe.div,{...c,ref:y,style:{pointerEvents:w?S?"auto":"none":void 0,...t.style},onFocusCapture:pe(t.onFocusCapture,E.onFocusCapture),onBlurCapture:pe(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:pe(t.onPointerDownCapture,k.onPointerDownCapture)})});Yu.displayName=FA;var zA="DismissableLayerBranch",Sk=b.forwardRef((t,e)=>{const r=b.useContext(bk),n=b.useRef(null),i=ze(e,n);return b.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),p.jsx(xe.div,{...t,ref:i})});Sk.displayName=zA;function WA(t,e=globalThis==null?void 0:globalThis.document){const r=kr(t),n=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const o=s=>{if(s.target&&!n.current){let c=function(){kk(BA,r,l,{discrete:!0})};const l={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function HA(t,e=globalThis==null?void 0:globalThis.document){const r=kr(t),n=b.useRef(!1);return b.useEffect(()=>{const i=o=>{o.target&&!n.current&&kk(VA,r,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Hy(){const t=new CustomEvent(ap);document.dispatchEvent(t)}function kk(t,e,r,{discrete:n}){const i=r.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?wk(i,o):i.dispatchEvent(o)}var qA=Yu,KA=Sk,at=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},GA="Portal",am=b.forwardRef((t,e)=>{var s;const{container:r,...n}=t,[i,o]=b.useState(!1);at(()=>o(!0),[]);const a=r||i&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return a?gk.createPortal(p.jsx(xe.div,{...n,ref:e}),a):null});am.displayName=GA;function QA(t,e){return b.useReducer((r,n)=>e[r][n]??r,t)}var sm=t=>{const{present:e,children:r}=t,n=JA(e),i=typeof r=="function"?r({present:n.isPresent}):b.Children.only(r),o=ze(n.ref,YA(i));return typeof r=="function"||n.isPresent?b.cloneElement(i,{ref:o}):null};sm.displayName="Presence";function JA(t){const[e,r]=b.useState(),n=b.useRef(null),i=b.useRef(t),o=b.useRef("none"),a=t?"mounted":"unmounted",[s,c]=QA(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const l=Hc(n.current);o.current=s==="mounted"?l:"none"},[s]),at(()=>{const l=n.current,u=i.current;if(u!==t){const h=o.current,f=Hc(l);t?c("MOUNT"):f==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&h!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),at(()=>{if(e){let l;const u=e.ownerDocument.defaultView??window,d=f=>{const v=Hc(n.current).includes(CSS.escape(f.animationName));if(f.target===e&&v&&(c("ANIMATION_END"),!i.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",l=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},h=f=>{f.target===e&&(o.current=Hc(n.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(l),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:b.useCallback(l=>{n.current=l?getComputedStyle(l):null,r(l)},[])}}function Hc(t){return(t==null?void 0:t.animationName)||"none"}function YA(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var XA=Iu[" useInsertionEffect ".trim().toString()]||at;function sp({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[i,o,a]=ZA({defaultProp:e,onChange:r}),s=t!==void 0,c=s?t:i;{const u=b.useRef(t!==void 0);b.useEffect(()=>{const d=u.current;d!==s&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=s},[s,n])}const l=b.useCallback(u=>{var d;if(s){const h=eL(u)?u(t):u;h!==t&&((d=a.current)==null||d.call(a,h))}else o(u)},[s,t,o,a]);return[c,l]}function ZA({defaultProp:t,onChange:e}){const[r,n]=b.useState(t),i=b.useRef(r),o=b.useRef(e);return XA(()=>{o.current=e},[e]),b.useEffect(()=>{var a;i.current!==r&&((a=o.current)==null||a.call(o,r),i.current=r)},[r,i]),[r,n,o]}function eL(t){return typeof t=="function"}var Tk=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),tL="VisuallyHidden",Xu=b.forwardRef((t,e)=>p.jsx(xe.span,{...t,ref:e,style:{...Tk,...t.style}}));Xu.displayName=tL;var rL=Xu,cm="ToastProvider",[lm,nL,iL]=_k("Toast"),[xk]=lc("Toast",[iL]),[oL,Zu]=xk(cm),Ek=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:a}=t,[s,c]=b.useState(null),[l,u]=b.useState(0),d=b.useRef(!1),h=b.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${cm}\`. Expected non-empty \`string\`.`),p.jsx(lm.Provider,{scope:e,children:p.jsx(oL,{scope:e,label:r,duration:n,swipeDirection:i,swipeThreshold:o,toastCount:l,viewport:s,onViewportChange:c,onToastAdd:b.useCallback(()=>u(f=>f+1),[]),onToastRemove:b.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:a})})};Ek.displayName=cm;var Ck="ToastViewport",aL=["F8"],cp="toast.viewportPause",lp="toast.viewportResume",Pk=b.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=aL,label:i="Notifications ({hotkey})",...o}=t,a=Zu(Ck,r),s=nL(r),c=b.useRef(null),l=b.useRef(null),u=b.useRef(null),d=b.useRef(null),h=ze(e,d,a.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),y=a.toastCount>0;b.useEffect(()=>{const g=_=>{var w;n.length!==0&&n.every(S=>_[S]||_.code===S)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[n]),b.useEffect(()=>{const g=c.current,_=d.current;if(y&&g&&_){const m=()=>{if(!a.isClosePausedRef.current){const E=new CustomEvent(cp);_.dispatchEvent(E),a.isClosePausedRef.current=!0}},w=()=>{if(a.isClosePausedRef.current){const E=new CustomEvent(lp);_.dispatchEvent(E),a.isClosePausedRef.current=!1}},S=E=>{!g.contains(E.relatedTarget)&&w()},k=()=>{g.contains(document.activeElement)||w()};return g.addEventListener("focusin",m),g.addEventListener("focusout",S),g.addEventListener("pointermove",m),g.addEventListener("pointerleave",k),window.addEventListener("blur",m),window.addEventListener("focus",w),()=>{g.removeEventListener("focusin",m),g.removeEventListener("focusout",S),g.removeEventListener("pointermove",m),g.removeEventListener("pointerleave",k),window.removeEventListener("blur",m),window.removeEventListener("focus",w)}}},[y,a.isClosePausedRef]);const v=b.useCallback(({tabbingDirection:g})=>{const m=s().map(w=>{const S=w.ref.current,k=[S,..._L(S)];return g==="forwards"?k:k.reverse()});return(g==="forwards"?m.reverse():m).flat()},[s]);return b.useEffect(()=>{const g=d.current;if(g){const _=m=>{var k,E,T;const w=m.altKey||m.ctrlKey||m.metaKey;if(m.key==="Tab"&&!w){const C=document.activeElement,O=m.shiftKey;if(m.target===g&&O){(k=l.current)==null||k.focus();return}const j=v({tabbingDirection:O?"backwards":"forwards"}),D=j.findIndex(P=>P===C);hf(j.slice(D+1))?m.preventDefault():O?(E=l.current)==null||E.focus():(T=u.current)==null||T.focus()}};return g.addEventListener("keydown",_),()=>g.removeEventListener("keydown",_)}},[s,v]),p.jsxs(KA,{ref:c,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:y?void 0:"none"},children:[y&&p.jsx(up,{ref:l,onFocusFromOutsideViewport:()=>{const g=v({tabbingDirection:"forwards"});hf(g)}}),p.jsx(lm.Slot,{scope:r,children:p.jsx(xe.ol,{tabIndex:-1,...o,ref:h})}),y&&p.jsx(up,{ref:u,onFocusFromOutsideViewport:()=>{const g=v({tabbingDirection:"backwards"});hf(g)}})]})});Pk.displayName=Ck;var Ok="ToastFocusProxy",up=b.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=t,o=Zu(Ok,r);return p.jsx(Xu,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{var l;const s=a.relatedTarget;!((l=o.viewport)!=null&&l.contains(s))&&n()}})});up.displayName=Ok;var uc="Toast",sL="toast.swipeStart",cL="toast.swipeMove",lL="toast.swipeCancel",uL="toast.swipeEnd",Rk=b.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:o,...a}=t,[s,c]=sp({prop:n,defaultProp:i??!0,onChange:o,caller:uc});return p.jsx(sm,{present:r||s,children:p.jsx(hL,{open:s,...a,ref:e,onClose:()=>c(!1),onPause:kr(t.onPause),onResume:kr(t.onResume),onSwipeStart:pe(t.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(t.onSwipeMove,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:pe(t.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(t.onSwipeEnd,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});Rk.displayName=uc;var[dL,fL]=xk(uc,{onClose(){}}),hL=b.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:o,onClose:a,onEscapeKeyDown:s,onPause:c,onResume:l,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:f,...y}=t,v=Zu(uc,r),[g,_]=b.useState(null),m=ze(e,P=>_(P)),w=b.useRef(null),S=b.useRef(null),k=i||v.duration,E=b.useRef(0),T=b.useRef(k),C=b.useRef(0),{onToastAdd:O,onToastRemove:A}=v,N=kr(()=>{var M;(g==null?void 0:g.contains(document.activeElement))&&((M=v.viewport)==null||M.focus()),a()}),j=b.useCallback(P=>{!P||P===1/0||(window.clearTimeout(C.current),E.current=new Date().getTime(),C.current=window.setTimeout(N,P))},[N]);b.useEffect(()=>{const P=v.viewport;if(P){const M=()=>{j(T.current),l==null||l()},I=()=>{const $=new Date().getTime()-E.current;T.current=T.current-$,window.clearTimeout(C.current),c==null||c()};return P.addEventListener(cp,I),P.addEventListener(lp,M),()=>{P.removeEventListener(cp,I),P.removeEventListener(lp,M)}}},[v.viewport,k,c,l,j]),b.useEffect(()=>{o&&!v.isClosePausedRef.current&&j(k)},[o,k,v.isClosePausedRef,j]),b.useEffect(()=>(O(),()=>A()),[O,A]);const D=b.useMemo(()=>g?Dk(g):null,[g]);return v.viewport?p.jsxs(p.Fragment,{children:[D&&p.jsx(pL,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:D}),p.jsx(dL,{scope:r,onClose:N,children:lo.createPortal(p.jsx(lm.ItemSlot,{scope:r,children:p.jsx(qA,{asChild:!0,onEscapeKeyDown:pe(s,()=>{v.isFocusedToastEscapeKeyDownRef.current||N(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(xe.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,...y,ref:m,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:pe(t.onKeyDown,P=>{P.key==="Escape"&&(s==null||s(P.nativeEvent),P.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,N()))}),onPointerDown:pe(t.onPointerDown,P=>{P.button===0&&(w.current={x:P.clientX,y:P.clientY})}),onPointerMove:pe(t.onPointerMove,P=>{if(!w.current)return;const M=P.clientX-w.current.x,I=P.clientY-w.current.y,$=!!S.current,R=["left","right"].includes(v.swipeDirection),L=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,B=R?L(0,M):0,F=R?0:L(0,I),Q=P.pointerType==="touch"?10:2,K={x:B,y:F},z={originalEvent:P,delta:K};$?(S.current=K,qc(cL,d,z,{discrete:!1})):qy(K,v.swipeDirection,Q)?(S.current=K,qc(sL,u,z,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(M)>Q||Math.abs(I)>Q)&&(w.current=null)}),onPointerUp:pe(t.onPointerUp,P=>{const M=S.current,I=P.target;if(I.hasPointerCapture(P.pointerId)&&I.releasePointerCapture(P.pointerId),S.current=null,w.current=null,M){const $=P.currentTarget,R={originalEvent:P,delta:M};qy(M,v.swipeDirection,v.swipeThreshold)?qc(uL,f,R,{discrete:!0}):qc(lL,h,R,{discrete:!0}),$.addEventListener("click",L=>L.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),pL=t=>{const{__scopeToast:e,children:r,...n}=t,i=Zu(uc,e),[o,a]=b.useState(!1),[s,c]=b.useState(!1);return gL(()=>a(!0)),b.useEffect(()=>{const l=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(l)},[]),s?null:p.jsx(am,{asChild:!0,children:p.jsx(Xu,{...n,children:o&&p.jsxs(p.Fragment,{children:[i.label," ",r]})})})},vL="ToastTitle",jk=b.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return p.jsx(xe.div,{...n,ref:e})});jk.displayName=vL;var mL="ToastDescription",Ak=b.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return p.jsx(xe.div,{...n,ref:e})});Ak.displayName=mL;var Lk="ToastAction",Ik=b.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?p.jsx(Mk,{altText:r,asChild:!0,children:p.jsx(um,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Lk}\`. Expected non-empty \`string\`.`),null)});Ik.displayName=Lk;var Nk="ToastClose",um=b.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,i=fL(Nk,r);return p.jsx(Mk,{asChild:!0,children:p.jsx(xe.button,{type:"button",...n,ref:e,onClick:pe(t.onClick,i.onClose)})})});um.displayName=Nk;var Mk=b.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...i}=t;return p.jsx(xe.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:e})});function Dk(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),yL(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const a=n.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...Dk(n))}}),e}function qc(t,e,r,{discrete:n}){const i=r.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?wk(i,o):i.dispatchEvent(o)}var qy=(t,e,r=0)=>{const n=Math.abs(t.x),i=Math.abs(t.y),o=n>i;return e==="left"||e==="right"?o&&n>r:!o&&i>r};function gL(t=()=>{}){const e=kr(t);at(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function yL(t){return t.nodeType===t.ELEMENT_NODE}function _L(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function hf(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var wL=Ek,$k=Pk,Uk=Rk,Fk=jk,Bk=Ak,Vk=Ik,zk=um;function Wk(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=Wk(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function Hk(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=Wk(t))&&(n&&(n+=" "),n+=e);return n}const Ky=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Gy=Hk,ed=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return Gy(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:o}=e,a=Object.keys(i).map(l=>{const u=r==null?void 0:r[l],d=o==null?void 0:o[l];if(u===null)return null;const h=Ky(u)||Ky(d);return i[l][h]}),s=r&&Object.entries(r).reduce((l,u)=>{let[d,h]=u;return h===void 0||(l[d]=h),l},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((l,u)=>{let{class:d,className:h,...f}=u;return Object.entries(f).every(y=>{let[v,g]=y;return Array.isArray(g)?g.includes({...o,...s}[v]):{...o,...s}[v]===g})?[...l,d,h]:l},[]);return Gy(t,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qk=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var SL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:a,...s},c)=>b.createElement("svg",{ref:c,...SL,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:qk("lucide",i),...s},[...a.map(([l,u])=>b.createElement(l,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(t,e)=>{const r=b.forwardRef(({className:n,...i},o)=>b.createElement(kL,{ref:o,iconNode:e,className:qk(`lucide-${bL(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=_e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=_e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=_e("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=_e("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dp=_e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=_e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=_e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=_e("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=_e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const td=_e("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=_e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=_e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=_e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=_e("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=_e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=_e("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dm=_e("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=_e("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=_e("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=_e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=_e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=_e("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=_e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=_e("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=_e("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=_e("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=_e("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=_e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=_e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),hm="-",WL=t=>{const e=qL(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:a=>{const s=a.split(hm);return s[0]===""&&s.length!==1&&s.shift(),eT(s,e)||HL(a)},getConflictingClassGroupIds:(a,s)=>{const c=r[a]||[];return s&&n[a]?[...c,...n[a]]:c}}},eT=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?eT(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(hm);return(a=e.validators.find(({validator:s})=>s(o)))==null?void 0:a.classGroupId},Qy=/^\[(.+)\]$/,HL=t=>{if(Qy.test(t)){const e=Qy.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},qL=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return GL(Object.entries(t.classGroups),r).forEach(([o,a])=>{fp(a,n,o,e)}),n},fp=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:Jy(e,i);o.classGroupId=r;return}if(typeof i=="function"){if(KL(i)){fp(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([o,a])=>{fp(a,Jy(e,o),r,n)})})},Jy=(t,e)=>{let r=t;return e.split(hm).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},KL=t=>t.isThemeGetter,GL=(t,e)=>e?t.map(([r,n])=>{const i=n.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,s])=>[e+a,s])):o);return[r,i]}):t,QL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(o,a)=>{r.set(o,a),e++,e>t&&(e=0,n=r,r=new Map)};return{get(o){let a=r.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return i(o,a),a},set(o,a){r.has(o)?r.set(o,a):i(o,a)}}},tT="!",JL=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],o=e.length,a=s=>{const c=[];let l=0,u=0,d;for(let g=0;g<s.length;g++){let _=s[g];if(l===0){if(_===i&&(n||s.slice(g,g+o)===e)){c.push(s.slice(u,g)),u=g+o;continue}if(_==="/"){d=g;continue}}_==="["?l++:_==="]"&&l--}const h=c.length===0?s:s.substring(u),f=h.startsWith(tT),y=f?h.substring(1):h,v=d&&d>u?d-u:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:y,maybePostfixModifierPosition:v}};return r?s=>r({className:s,parseClassName:a}):a},YL=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},XL=t=>({cache:QL(t.cacheSize),parseClassName:JL(t),...WL(t)}),ZL=/\s+/,eI=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,o=[],a=t.trim().split(ZL);let s="";for(let c=a.length-1;c>=0;c-=1){const l=a[c],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}=r(l);let y=!!f,v=n(y?h.substring(0,f):h);if(!v){if(!y){s=l+(s.length>0?" "+s:s);continue}if(v=n(h),!v){s=l+(s.length>0?" "+s:s);continue}y=!1}const g=YL(u).join(":"),_=d?g+tT:g,m=_+v;if(o.includes(m))continue;o.push(m);const w=i(v,y);for(let S=0;S<w.length;++S){const k=w[S];o.push(_+k)}s=l+(s.length>0?" "+s:s)}return s};function tI(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=rT(e))&&(n&&(n+=" "),n+=r);return n}const rT=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=rT(t[n]))&&(r&&(r+=" "),r+=e);return r};function rI(t,...e){let r,n,i,o=a;function a(c){const l=e.reduce((u,d)=>d(u),t());return r=XL(l),n=r.cache.get,i=r.cache.set,o=s,s(c)}function s(c){const l=n(c);if(l)return l;const u=eI(c,r);return i(c,u),u}return function(){return o(tI.apply(null,arguments))}}const Re=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},nT=/^\[(?:([a-z-]+):)?(.+)\]$/i,nI=/^\d+\/\d+$/,iI=new Set(["px","full","screen"]),oI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,cI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,lI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gr=t=>Zo(t)||iI.has(t)||nI.test(t),Tn=t=>Oa(t,"length",gI),Zo=t=>!!t&&!Number.isNaN(Number(t)),pf=t=>Oa(t,"number",Zo),Qa=t=>!!t&&Number.isInteger(Number(t)),uI=t=>t.endsWith("%")&&Zo(t.slice(0,-1)),fe=t=>nT.test(t),xn=t=>oI.test(t),dI=new Set(["length","size","percentage"]),fI=t=>Oa(t,dI,iT),hI=t=>Oa(t,"position",iT),pI=new Set(["image","url"]),vI=t=>Oa(t,pI,_I),mI=t=>Oa(t,"",yI),Ja=()=>!0,Oa=(t,e,r)=>{const n=nT.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},gI=t=>aI.test(t)&&!sI.test(t),iT=()=>!1,yI=t=>cI.test(t),_I=t=>lI.test(t),wI=()=>{const t=Re("colors"),e=Re("spacing"),r=Re("blur"),n=Re("brightness"),i=Re("borderColor"),o=Re("borderRadius"),a=Re("borderSpacing"),s=Re("borderWidth"),c=Re("contrast"),l=Re("grayscale"),u=Re("hueRotate"),d=Re("invert"),h=Re("gap"),f=Re("gradientColorStops"),y=Re("gradientColorStopPositions"),v=Re("inset"),g=Re("margin"),_=Re("opacity"),m=Re("padding"),w=Re("saturate"),S=Re("scale"),k=Re("sepia"),E=Re("skew"),T=Re("space"),C=Re("translate"),O=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],N=()=>["auto",fe,e],j=()=>[fe,e],D=()=>["",Gr,Tn],P=()=>["auto",Zo,fe],M=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],I=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],R=()=>["start","end","center","between","around","evenly","stretch"],L=()=>["","0",fe],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],F=()=>[Zo,fe];return{cacheSize:500,separator:":",theme:{colors:[Ja],spacing:[Gr,Tn],blur:["none","",xn,fe],brightness:F(),borderColor:[t],borderRadius:["none","","full",xn,fe],borderSpacing:j(),borderWidth:D(),contrast:F(),grayscale:L(),hueRotate:F(),invert:L(),gap:j(),gradientColorStops:[t],gradientColorStopPositions:[uI,Tn],inset:N(),margin:N(),opacity:F(),padding:j(),saturate:F(),scale:F(),sepia:L(),skew:F(),space:j(),translate:j()},classGroups:{aspect:[{aspect:["auto","square","video",fe]}],container:["container"],columns:[{columns:[xn]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...M(),fe]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qa,fe]}],basis:[{basis:N()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fe]}],grow:[{grow:L()}],shrink:[{shrink:L()}],order:[{order:["first","last","none",Qa,fe]}],"grid-cols":[{"grid-cols":[Ja]}],"col-start-end":[{col:["auto",{span:["full",Qa,fe]},fe]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Ja]}],"row-start-end":[{row:["auto",{span:[Qa,fe]},fe]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...R()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...R(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...R(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",fe,e]}],"min-w":[{"min-w":[fe,e,"min","max","fit"]}],"max-w":[{"max-w":[fe,e,"none","full","min","max","fit","prose",{screen:[xn]},xn]}],h:[{h:[fe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[fe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",xn,Tn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",pf]}],"font-family":[{font:[Ja]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fe]}],"line-clamp":[{"line-clamp":["none",Zo,pf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gr,fe]}],"list-image":[{"list-image":["none",fe]}],"list-style-type":[{list:["none","disc","decimal",fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...I(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gr,Tn]}],"underline-offset":[{"underline-offset":["auto",Gr,fe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:j()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...M(),hI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",fI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},vI]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[y]}],"gradient-via-pos":[{via:[y]}],"gradient-to-pos":[{to:[y]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...I(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:I()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...I()]}],"outline-offset":[{"outline-offset":[Gr,fe]}],"outline-w":[{outline:[Gr,Tn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:D()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[Gr,Tn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",xn,mI]}],"shadow-color":[{shadow:[Ja]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",xn,fe]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fe]}],duration:[{duration:F()}],ease:[{ease:["linear","in","out","in-out",fe]}],delay:[{delay:F()}],animate:[{animate:["none","spin","ping","pulse","bounce",fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Qa,fe]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":j()}],"scroll-mx":[{"scroll-mx":j()}],"scroll-my":[{"scroll-my":j()}],"scroll-ms":[{"scroll-ms":j()}],"scroll-me":[{"scroll-me":j()}],"scroll-mt":[{"scroll-mt":j()}],"scroll-mr":[{"scroll-mr":j()}],"scroll-mb":[{"scroll-mb":j()}],"scroll-ml":[{"scroll-ml":j()}],"scroll-p":[{"scroll-p":j()}],"scroll-px":[{"scroll-px":j()}],"scroll-py":[{"scroll-py":j()}],"scroll-ps":[{"scroll-ps":j()}],"scroll-pe":[{"scroll-pe":j()}],"scroll-pt":[{"scroll-pt":j()}],"scroll-pr":[{"scroll-pr":j()}],"scroll-pb":[{"scroll-pb":j()}],"scroll-pl":[{"scroll-pl":j()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Gr,Tn,pf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},bI=rI(wI);function Le(...t){return bI(Hk(t))}const wa="https://prime-t1.onrender.com";console.log("BASE_URL:",wa);async function oT(t,e){const r=await fetch(`${wa}${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw console.error(`POST ${t} failed`,await r.text()),new Error(`POST ${t} failed`);return r.json()}function SI(t){const e=sessionStorage.getItem("meetingUsername")||"User";return oT("/create-room",{creatorLanguage:t,creatorName:e})}function pm(t,e){const r=sessionStorage.getItem("meetingUsername")||"User";return oT("/join-room",{roomId:t,participantLanguage:e,participantName:r})}const kI=wL,aT=b.forwardRef(({className:t,...e},r)=>p.jsx($k,{ref:r,className:Le("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));aT.displayName=$k.displayName;const TI=ed("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),sT=b.forwardRef(({className:t,variant:e,...r},n)=>p.jsx(Uk,{ref:n,className:Le(TI({variant:e}),t),...r}));sT.displayName=Uk.displayName;const xI=b.forwardRef(({className:t,...e},r)=>p.jsx(Vk,{ref:r,className:Le("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));xI.displayName=Vk.displayName;const cT=b.forwardRef(({className:t,...e},r)=>p.jsx(zk,{ref:r,className:Le("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:p.jsx(fm,{className:"h-4 w-4"})}));cT.displayName=zk.displayName;const lT=b.forwardRef(({className:t,...e},r)=>p.jsx(Fk,{ref:r,className:Le("text-sm font-semibold",t),...e}));lT.displayName=Fk.displayName;const uT=b.forwardRef(({className:t,...e},r)=>p.jsx(Bk,{ref:r,className:Le("text-sm opacity-90",t),...e}));uT.displayName=Bk.displayName;function EI(){const{toasts:t}=Ju();return p.jsxs(kI,{children:[t.map(function({id:e,title:r,description:n,action:i,...o}){return p.jsxs(sT,{...o,children:[p.jsxs("div",{className:"grid gap-1",children:[r&&p.jsx(lT,{children:r}),n&&p.jsx(uT,{children:n})]}),i,p.jsx(cT,{})]},e)}),p.jsx(aT,{})]})}var Yy=["light","dark"],CI="(prefers-color-scheme: dark)",PI=b.createContext(void 0),OI={setTheme:t=>{},themes:[]},RI=()=>{var t;return(t=b.useContext(PI))!=null?t:OI};b.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:o,value:a,attrs:s,nonce:c})=>{let l=o==="system",u=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${s.map(y=>`'${y}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,d=i?Yy.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(y,v=!1,g=!0)=>{let _=a?a[y]:y,m=v?y+"|| ''":`'${_}'`,w="";return i&&g&&!v&&Yy.includes(y)&&(w+=`d.style.colorScheme = '${y}';`),r==="class"?v||_?w+=`c.add(${m})`:w+="null":_&&(w+=`d[s](n,${m})`),w},f=t?`!function(){${u}${h(t)}}()`:n?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${l})){var t='${CI}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}${l?"":"else{"+h(o,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}else{${h(o,!1,!1)};}${d}}catch(t){}}();`;return b.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var jI=t=>{switch(t){case"success":return II;case"info":return MI;case"warning":return NI;case"error":return DI;default:return null}},AI=Array(12).fill(0),LI=({visible:t,className:e})=>G.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},G.createElement("div",{className:"sonner-spinner"},AI.map((r,n)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),II=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),NI=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),MI=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),DI=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),$I=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),UI=()=>{let[t,e]=G.useState(document.hidden);return G.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},hp=1,FI=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:hp++,o=this.toasts.find(s=>s.id===i),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(s=>s.id===i?(this.publish({...s,...t,id:i,title:r}),{...s,...t,id:i,dismissible:a,title:r}):s):this.addToast({title:r,...n,dismissible:a,id:i}),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),i=r!==void 0,o,a=n.then(async c=>{if(o=["resolve",c],G.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(VI(c)&&!c.ok){i=!1;let l=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:r,type:"error",message:l,description:u})}else if(e.success!==void 0){i=!1;let l=typeof e.success=="function"?await e.success(c):e.success,u=typeof e.description=="function"?await e.description(c):e.description;this.create({id:r,type:"success",message:l,description:u})}}).catch(async c=>{if(o=["reject",c],e.error!==void 0){i=!1;let l=typeof e.error=="function"?await e.error(c):e.error,u=typeof e.description=="function"?await e.description(c):e.description;this.create({id:r,type:"error",message:l,description:u})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=e.finally)==null||c.call(e)}),s=()=>new Promise((c,l)=>a.then(()=>o[0]==="reject"?l(o[1]):c(o[1])).catch(l));return typeof r!="string"&&typeof r!="number"?{unwrap:s}:Object.assign(r,{unwrap:s})},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||hp++;return this.create({jsx:t(r),id:r,...e}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ct=new FI,BI=(t,e)=>{let r=(e==null?void 0:e.id)||hp++;return Ct.addToast({title:t,...e,id:r}),r},VI=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",zI=BI,WI=()=>Ct.toasts,HI=()=>Ct.getActiveToasts();Object.assign(zI,{success:Ct.success,info:Ct.info,warning:Ct.warning,error:Ct.error,custom:Ct.custom,message:Ct.message,promise:Ct.promise,dismiss:Ct.dismiss,loading:Ct.loading},{getHistory:WI,getToasts:HI});function qI(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}qI(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Kc(t){return t.label!==void 0}var KI=3,GI="32px",QI="16px",Xy=4e3,JI=356,YI=14,XI=20,ZI=200;function cr(...t){return t.filter(Boolean).join(" ")}function eN(t){let[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}var tN=t=>{var e,r,n,i,o,a,s,c,l,u,d;let{invert:h,toast:f,unstyled:y,interacting:v,setHeights:g,visibleToasts:_,heights:m,index:w,toasts:S,expanded:k,removeToast:E,defaultRichColors:T,closeButton:C,style:O,cancelButtonStyle:A,actionButtonStyle:N,className:j="",descriptionClassName:D="",duration:P,position:M,gap:I,loadingIcon:$,expandByDefault:R,classNames:L,icons:B,closeButtonAriaLabel:F="Close toast",pauseWhenPageIsHidden:Q}=t,[K,z]=G.useState(null),[W,ee]=G.useState(null),[V,q]=G.useState(!1),[te,ce]=G.useState(!1),[ae,ue]=G.useState(!1),[ge,Oe]=G.useState(!1),[Xe,ft]=G.useState(!1),[Fe,Cr]=G.useState(0),[tr,gn]=G.useState(0),yn=G.useRef(f.duration||P||Xy),Tc=G.useRef(null),qt=G.useRef(null),pi=w===0,xc=w+1<=_,Tt=f.type,Pr=f.dismissible!==!1,vo=f.className||"",vi=f.descriptionClassName||"",Or=G.useMemo(()=>m.findIndex(de=>de.toastId===f.id)||0,[m,f.id]),Ec=G.useMemo(()=>{var de;return(de=f.closeButton)!=null?de:C},[f.closeButton,C]),mi=G.useMemo(()=>f.duration||P||Xy,[f.duration,P]),Kr=G.useRef(0),rr=G.useRef(0),_n=G.useRef(0),Rr=G.useRef(null),[It,nr]=M.split("-"),Se=G.useMemo(()=>m.reduce((de,ke,Ie)=>Ie>=Or?de:de+ke.height,0),[m,Or]),Rg=UI(),Nd=f.invert||h,Md=Tt==="loading";rr.current=G.useMemo(()=>Or*I+Se,[Or,Se]),G.useEffect(()=>{yn.current=mi},[mi]),G.useEffect(()=>{q(!0)},[]),G.useEffect(()=>{let de=qt.current;if(de){let ke=de.getBoundingClientRect().height;return gn(ke),g(Ie=>[{toastId:f.id,height:ke,position:f.position},...Ie]),()=>g(Ie=>Ie.filter(ir=>ir.toastId!==f.id))}},[g,f.id]),G.useLayoutEffect(()=>{if(!V)return;let de=qt.current,ke=de.style.height;de.style.height="auto";let Ie=de.getBoundingClientRect().height;de.style.height=ke,gn(Ie),g(ir=>ir.find(or=>or.toastId===f.id)?ir.map(or=>or.toastId===f.id?{...or,height:Ie}:or):[{toastId:f.id,height:Ie,position:f.position},...ir])},[V,f.title,f.description,g,f.id]);let wn=G.useCallback(()=>{ce(!0),Cr(rr.current),g(de=>de.filter(ke=>ke.toastId!==f.id)),setTimeout(()=>{E(f)},ZI)},[f,E,g,rr]);G.useEffect(()=>{if(f.promise&&Tt==="loading"||f.duration===1/0||f.type==="loading")return;let de;return k||v||Q&&Rg?(()=>{if(_n.current<Kr.current){let ke=new Date().getTime()-Kr.current;yn.current=yn.current-ke}_n.current=new Date().getTime()})():yn.current!==1/0&&(Kr.current=new Date().getTime(),de=setTimeout(()=>{var ke;(ke=f.onAutoClose)==null||ke.call(f,f),wn()},yn.current)),()=>clearTimeout(de)},[k,v,f,Tt,Q,Rg,wn]),G.useEffect(()=>{f.delete&&wn()},[wn,f.delete]);function G1(){var de,ke,Ie;return B!=null&&B.loading?G.createElement("div",{className:cr(L==null?void 0:L.loader,(de=f==null?void 0:f.classNames)==null?void 0:de.loader,"sonner-loader"),"data-visible":Tt==="loading"},B.loading):$?G.createElement("div",{className:cr(L==null?void 0:L.loader,(ke=f==null?void 0:f.classNames)==null?void 0:ke.loader,"sonner-loader"),"data-visible":Tt==="loading"},$):G.createElement(LI,{className:cr(L==null?void 0:L.loader,(Ie=f==null?void 0:f.classNames)==null?void 0:Ie.loader),visible:Tt==="loading"})}return G.createElement("li",{tabIndex:0,ref:qt,className:cr(j,vo,L==null?void 0:L.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,L==null?void 0:L.default,L==null?void 0:L[Tt],(r=f==null?void 0:f.classNames)==null?void 0:r[Tt]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:T,"data-styled":!(f.jsx||f.unstyled||y),"data-mounted":V,"data-promise":!!f.promise,"data-swiped":Xe,"data-removed":te,"data-visible":xc,"data-y-position":It,"data-x-position":nr,"data-index":w,"data-front":pi,"data-swiping":ae,"data-dismissible":Pr,"data-type":Tt,"data-invert":Nd,"data-swipe-out":ge,"data-swipe-direction":W,"data-expanded":!!(k||R&&V),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${te?Fe:rr.current}px`,"--initial-height":R?"auto":`${tr}px`,...O,...f.style},onDragEnd:()=>{ue(!1),z(null),Rr.current=null},onPointerDown:de=>{Md||!Pr||(Tc.current=new Date,Cr(rr.current),de.target.setPointerCapture(de.pointerId),de.target.tagName!=="BUTTON"&&(ue(!0),Rr.current={x:de.clientX,y:de.clientY}))},onPointerUp:()=>{var de,ke,Ie,ir;if(ge||!Pr)return;Rr.current=null;let or=Number(((de=qt.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),bn=Number(((ke=qt.current)==null?void 0:ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),gi=new Date().getTime()-((Ie=Tc.current)==null?void 0:Ie.getTime()),ar=K==="x"?or:bn,Sn=Math.abs(ar)/gi;if(Math.abs(ar)>=XI||Sn>.11){Cr(rr.current),(ir=f.onDismiss)==null||ir.call(f,f),ee(K==="x"?or>0?"right":"left":bn>0?"down":"up"),wn(),Oe(!0),ft(!1);return}ue(!1),z(null)},onPointerMove:de=>{var ke,Ie,ir,or;if(!Rr.current||!Pr||((ke=window.getSelection())==null?void 0:ke.toString().length)>0)return;let bn=de.clientY-Rr.current.y,gi=de.clientX-Rr.current.x,ar=(Ie=t.swipeDirections)!=null?Ie:eN(M);!K&&(Math.abs(gi)>1||Math.abs(bn)>1)&&z(Math.abs(gi)>Math.abs(bn)?"x":"y");let Sn={x:0,y:0};K==="y"?(ar.includes("top")||ar.includes("bottom"))&&(ar.includes("top")&&bn<0||ar.includes("bottom")&&bn>0)&&(Sn.y=bn):K==="x"&&(ar.includes("left")||ar.includes("right"))&&(ar.includes("left")&&gi<0||ar.includes("right")&&gi>0)&&(Sn.x=gi),(Math.abs(Sn.x)>0||Math.abs(Sn.y)>0)&&ft(!0),(ir=qt.current)==null||ir.style.setProperty("--swipe-amount-x",`${Sn.x}px`),(or=qt.current)==null||or.style.setProperty("--swipe-amount-y",`${Sn.y}px`)}},Ec&&!f.jsx?G.createElement("button",{"aria-label":F,"data-disabled":Md,"data-close-button":!0,onClick:Md||!Pr?()=>{}:()=>{var de;wn(),(de=f.onDismiss)==null||de.call(f,f)},className:cr(L==null?void 0:L.closeButton,(i=f==null?void 0:f.classNames)==null?void 0:i.closeButton)},(o=B==null?void 0:B.close)!=null?o:$I):null,f.jsx||b.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:G.createElement(G.Fragment,null,Tt||f.icon||f.promise?G.createElement("div",{"data-icon":"",className:cr(L==null?void 0:L.icon,(a=f==null?void 0:f.classNames)==null?void 0:a.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||G1():null,f.type!=="loading"?f.icon||(B==null?void 0:B[Tt])||jI(Tt):null):null,G.createElement("div",{"data-content":"",className:cr(L==null?void 0:L.content,(s=f==null?void 0:f.classNames)==null?void 0:s.content)},G.createElement("div",{"data-title":"",className:cr(L==null?void 0:L.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},typeof f.title=="function"?f.title():f.title),f.description?G.createElement("div",{"data-description":"",className:cr(D,vi,L==null?void 0:L.description,(l=f==null?void 0:f.classNames)==null?void 0:l.description)},typeof f.description=="function"?f.description():f.description):null),b.isValidElement(f.cancel)?f.cancel:f.cancel&&Kc(f.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||A,onClick:de=>{var ke,Ie;Kc(f.cancel)&&Pr&&((Ie=(ke=f.cancel).onClick)==null||Ie.call(ke,de),wn())},className:cr(L==null?void 0:L.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,b.isValidElement(f.action)?f.action:f.action&&Kc(f.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||N,onClick:de=>{var ke,Ie;Kc(f.action)&&((Ie=(ke=f.action).onClick)==null||Ie.call(ke,de),!de.defaultPrevented&&wn())},className:cr(L==null?void 0:L.actionButton,(d=f==null?void 0:f.classNames)==null?void 0:d.actionButton)},f.action.label):null))};function Zy(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function rN(t,e){let r={};return[t,e].forEach((n,i)=>{let o=i===1,a=o?"--mobile-offset":"--offset",s=o?QI:GI;function c(l){["top","right","bottom","left"].forEach(u=>{r[`${a}-${u}`]=typeof l=="number"?`${l}px`:l})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(l=>{n[l]===void 0?r[`${a}-${l}`]=s:r[`${a}-${l}`]=typeof n[l]=="number"?`${n[l]}px`:n[l]}):c(s)}),r}var nN=b.forwardRef(function(t,e){let{invert:r,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:a,className:s,offset:c,mobileOffset:l,theme:u="light",richColors:d,duration:h,style:f,visibleToasts:y=KI,toastOptions:v,dir:g=Zy(),gap:_=YI,loadingIcon:m,icons:w,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:k}=t,[E,T]=G.useState([]),C=G.useMemo(()=>Array.from(new Set([n].concat(E.filter(Q=>Q.position).map(Q=>Q.position)))),[E,n]),[O,A]=G.useState([]),[N,j]=G.useState(!1),[D,P]=G.useState(!1),[M,I]=G.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=G.useRef(null),R=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),L=G.useRef(null),B=G.useRef(!1),F=G.useCallback(Q=>{T(K=>{var z;return(z=K.find(W=>W.id===Q.id))!=null&&z.delete||Ct.dismiss(Q.id),K.filter(({id:W})=>W!==Q.id)})},[]);return G.useEffect(()=>Ct.subscribe(Q=>{if(Q.dismiss){T(K=>K.map(z=>z.id===Q.id?{...z,delete:!0}:z));return}setTimeout(()=>{gk.flushSync(()=>{T(K=>{let z=K.findIndex(W=>W.id===Q.id);return z!==-1?[...K.slice(0,z),{...K[z],...Q},...K.slice(z+1)]:[Q,...K]})})})}),[]),G.useEffect(()=>{if(u!=="system"){I(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?I("dark"):I("light")),typeof window>"u")return;let Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:K})=>{I(K?"dark":"light")})}catch{Q.addListener(({matches:z})=>{try{I(z?"dark":"light")}catch(W){console.error(W)}})}},[u]),G.useEffect(()=>{E.length<=1&&j(!1)},[E]),G.useEffect(()=>{let Q=K=>{var z,W;i.every(ee=>K[ee]||K.code===ee)&&(j(!0),(z=$.current)==null||z.focus()),K.code==="Escape"&&(document.activeElement===$.current||(W=$.current)!=null&&W.contains(document.activeElement))&&j(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[i]),G.useEffect(()=>{if($.current)return()=>{L.current&&(L.current.focus({preventScroll:!0}),L.current=null,B.current=!1)}},[$.current]),G.createElement("section",{ref:e,"aria-label":`${S} ${R}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((Q,K)=>{var z;let[W,ee]=Q.split("-");return E.length?G.createElement("ol",{key:Q,dir:g==="auto"?Zy():g,tabIndex:-1,ref:$,className:s,"data-sonner-toaster":!0,"data-theme":M,"data-y-position":W,"data-lifted":N&&E.length>1&&!o,"data-x-position":ee,style:{"--front-toast-height":`${((z=O[0])==null?void 0:z.height)||0}px`,"--width":`${JI}px`,"--gap":`${_}px`,...f,...rN(c,l)},onBlur:V=>{B.current&&!V.currentTarget.contains(V.relatedTarget)&&(B.current=!1,L.current&&(L.current.focus({preventScroll:!0}),L.current=null))},onFocus:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||B.current||(B.current=!0,L.current=V.relatedTarget)},onMouseEnter:()=>j(!0),onMouseMove:()=>j(!0),onMouseLeave:()=>{D||j(!1)},onDragEnd:()=>j(!1),onPointerDown:V=>{V.target instanceof HTMLElement&&V.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},E.filter(V=>!V.position&&K===0||V.position===Q).map((V,q)=>{var te,ce;return G.createElement(tN,{key:V.id,icons:w,index:q,toast:V,defaultRichColors:d,duration:(te=v==null?void 0:v.duration)!=null?te:h,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:r,visibleToasts:y,closeButton:(ce=v==null?void 0:v.closeButton)!=null?ce:a,interacting:D,position:Q,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:F,toasts:E.filter(ae=>ae.position==V.position),heights:O.filter(ae=>ae.position==V.position),setHeights:A,expandByDefault:o,gap:_,loadingIcon:m,expanded:N,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const iN=({...t})=>{const{theme:e="system"}=RI();return p.jsx(nN,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var oN=Iu[" useId ".trim().toString()]||(()=>{}),aN=0;function vm(t){const[e,r]=b.useState(oN());return at(()=>{r(n=>n??String(aN++))},[t]),e?`radix-${e}`:""}const sN=["top","right","bottom","left"],ii=Math.min,Dt=Math.max,gu=Math.round,Gc=Math.floor,Vr=t=>({x:t,y:t}),cN={left:"right",right:"left",bottom:"top",top:"bottom"},lN={start:"end",end:"start"};function pp(t,e,r){return Dt(t,ii(e,r))}function un(t,e){return typeof t=="function"?t(e):t}function dn(t){return t.split("-")[0]}function Ra(t){return t.split("-")[1]}function mm(t){return t==="x"?"y":"x"}function gm(t){return t==="y"?"height":"width"}const uN=new Set(["top","bottom"]);function $r(t){return uN.has(dn(t))?"y":"x"}function ym(t){return mm($r(t))}function dN(t,e,r){r===void 0&&(r=!1);const n=Ra(t),i=ym(t),o=gm(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=yu(a)),[a,yu(a)]}function fN(t){const e=yu(t);return[vp(t),e,vp(e)]}function vp(t){return t.replace(/start|end/g,e=>lN[e])}const e_=["left","right"],t_=["right","left"],hN=["top","bottom"],pN=["bottom","top"];function vN(t,e,r){switch(t){case"top":case"bottom":return r?e?t_:e_:e?e_:t_;case"left":case"right":return e?hN:pN;default:return[]}}function mN(t,e,r,n){const i=Ra(t);let o=vN(dn(t),r==="start",n);return i&&(o=o.map(a=>a+"-"+i),e&&(o=o.concat(o.map(vp)))),o}function yu(t){return t.replace(/left|right|bottom|top/g,e=>cN[e])}function gN(t){return{top:0,right:0,bottom:0,left:0,...t}}function dT(t){return typeof t!="number"?gN(t):{top:t,right:t,bottom:t,left:t}}function _u(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function r_(t,e,r){let{reference:n,floating:i}=t;const o=$r(e),a=ym(e),s=gm(a),c=dn(e),l=o==="y",u=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,h=n[s]/2-i[s]/2;let f;switch(c){case"top":f={x:u,y:n.y-i.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-i.width,y:d};break;default:f={x:n.x,y:n.y}}switch(Ra(e)){case"start":f[a]-=h*(r&&l?-1:1);break;case"end":f[a]+=h*(r&&l?-1:1);break}return f}const yN=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:o=[],platform:a}=r,s=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let l=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=r_(l,n,c),h=n,f={},y=0;for(let v=0;v<s.length;v++){const{name:g,fn:_}=s[v],{x:m,y:w,data:S,reset:k}=await _({x:u,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:l,platform:a,elements:{reference:t,floating:e}});u=m??u,d=w??d,f={...f,[g]:{...f[g],...S}},k&&y<=50&&(y++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(l=k.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):k.rects),{x:u,y:d}=r_(l,h,c)),v=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function Us(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:o,rects:a,elements:s,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=un(e,t),y=dT(f),g=s[h?d==="floating"?"reference":"floating":d],_=_u(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(g)))==null||r?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:l,rootBoundary:u,strategy:c})),m=d==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),S=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},k=_u(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:m,offsetParent:w,strategy:c}):m);return{top:(_.top-k.top+y.top)/S.y,bottom:(k.bottom-_.bottom+y.bottom)/S.y,left:(_.left-k.left+y.left)/S.x,right:(k.right-_.right+y.right)/S.x}}const _N=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:o,platform:a,elements:s,middlewareData:c}=e,{element:l,padding:u=0}=un(t,e)||{};if(l==null)return{};const d=dT(u),h={x:r,y:n},f=ym(i),y=gm(f),v=await a.getDimensions(l),g=f==="y",_=g?"top":"left",m=g?"bottom":"right",w=g?"clientHeight":"clientWidth",S=o.reference[y]+o.reference[f]-h[f]-o.floating[y],k=h[f]-o.reference[f],E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let T=E?E[w]:0;(!T||!await(a.isElement==null?void 0:a.isElement(E)))&&(T=s.floating[w]||o.floating[y]);const C=S/2-k/2,O=T/2-v[y]/2-1,A=ii(d[_],O),N=ii(d[m],O),j=A,D=T-v[y]-N,P=T/2-v[y]/2+C,M=pp(j,P,D),I=!c.arrow&&Ra(i)!=null&&P!==M&&o.reference[y]/2-(P<j?A:N)-v[y]/2<0,$=I?P<j?P-j:P-D:0;return{[f]:h[f]+$,data:{[f]:M,centerOffset:P-M-$,...I&&{alignmentOffset:$}},reset:I}}}),wN=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:y="none",flipAlignment:v=!0,...g}=un(t,e);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const _=dn(i),m=$r(s),w=dn(s)===s,S=await(c.isRTL==null?void 0:c.isRTL(l.floating)),k=h||(w||!v?[yu(s)]:fN(s)),E=y!=="none";!h&&E&&k.push(...mN(s,v,y,S));const T=[s,...k],C=await Us(e,g),O=[];let A=((n=o.flip)==null?void 0:n.overflows)||[];if(u&&O.push(C[_]),d){const P=dN(i,a,S);O.push(C[P[0]],C[P[1]])}if(A=[...A,{placement:i,overflows:O}],!O.every(P=>P<=0)){var N,j;const P=(((N=o.flip)==null?void 0:N.index)||0)+1,M=T[P];if(M&&(!(d==="alignment"?m!==$r(M):!1)||A.every(R=>$r(R.placement)===m?R.overflows[0]>0:!0)))return{data:{index:P,overflows:A},reset:{placement:M}};let I=(j=A.filter($=>$.overflows[0]<=0).sort(($,R)=>$.overflows[1]-R.overflows[1])[0])==null?void 0:j.placement;if(!I)switch(f){case"bestFit":{var D;const $=(D=A.filter(R=>{if(E){const L=$r(R.placement);return L===m||L==="y"}return!0}).map(R=>[R.placement,R.overflows.filter(L=>L>0).reduce((L,B)=>L+B,0)]).sort((R,L)=>R[1]-L[1])[0])==null?void 0:D[0];$&&(I=$);break}case"initialPlacement":I=s;break}if(i!==I)return{reset:{placement:I}}}return{}}}};function n_(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function i_(t){return sN.some(e=>t[e]>=0)}const bN=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...i}=un(t,e);switch(n){case"referenceHidden":{const o=await Us(e,{...i,elementContext:"reference"}),a=n_(o,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:i_(a)}}}case"escaped":{const o=await Us(e,{...i,altBoundary:!0}),a=n_(o,r.floating);return{data:{escapedOffsets:a,escaped:i_(a)}}}default:return{}}}}},fT=new Set(["left","top"]);async function SN(t,e){const{placement:r,platform:n,elements:i}=t,o=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=dn(r),s=Ra(r),c=$r(r)==="y",l=fT.has(a)?-1:1,u=o&&c?-1:1,d=un(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:y}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&typeof y=="number"&&(f=s==="end"?y*-1:y),c?{x:f*u,y:h*l}:{x:h*l,y:f*u}}const kN=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:o,placement:a,middlewareData:s}=e,c=await SN(e,t);return a===((r=s.offset)==null?void 0:r.placement)&&(n=s.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:a}}}}},TN=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:g=>{let{x:_,y:m}=g;return{x:_,y:m}}},...c}=un(t,e),l={x:r,y:n},u=await Us(e,c),d=$r(dn(i)),h=mm(d);let f=l[h],y=l[d];if(o){const g=h==="y"?"top":"left",_=h==="y"?"bottom":"right",m=f+u[g],w=f-u[_];f=pp(m,f,w)}if(a){const g=d==="y"?"top":"left",_=d==="y"?"bottom":"right",m=y+u[g],w=y-u[_];y=pp(m,y,w)}const v=s.fn({...e,[h]:f,[d]:y});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[h]:o,[d]:a}}}}}},xN=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:o,middlewareData:a}=e,{offset:s=0,mainAxis:c=!0,crossAxis:l=!0}=un(t,e),u={x:r,y:n},d=$r(i),h=mm(d);let f=u[h],y=u[d];const v=un(s,e),g=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=h==="y"?"height":"width",S=o.reference[h]-o.floating[w]+g.mainAxis,k=o.reference[h]+o.reference[w]-g.mainAxis;f<S?f=S:f>k&&(f=k)}if(l){var _,m;const w=h==="y"?"width":"height",S=fT.has(dn(i)),k=o.reference[d]-o.floating[w]+(S&&((_=a.offset)==null?void 0:_[d])||0)+(S?0:g.crossAxis),E=o.reference[d]+o.reference[w]+(S?0:((m=a.offset)==null?void 0:m[d])||0)-(S?g.crossAxis:0);y<k?y=k:y>E&&(y=E)}return{[h]:f,[d]:y}}}},EN=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:o,platform:a,elements:s}=e,{apply:c=()=>{},...l}=un(t,e),u=await Us(e,l),d=dn(i),h=Ra(i),f=$r(i)==="y",{width:y,height:v}=o.floating;let g,_;d==="top"||d==="bottom"?(g=d,_=h===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(_=d,g=h==="end"?"top":"bottom");const m=v-u.top-u.bottom,w=y-u.left-u.right,S=ii(v-u[g],m),k=ii(y-u[_],w),E=!e.middlewareData.shift;let T=S,C=k;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(C=w),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(T=m),E&&!h){const A=Dt(u.left,0),N=Dt(u.right,0),j=Dt(u.top,0),D=Dt(u.bottom,0);f?C=y-2*(A!==0||N!==0?A+N:Dt(u.left,u.right)):T=v-2*(j!==0||D!==0?j+D:Dt(u.top,u.bottom))}await c({...e,availableWidth:C,availableHeight:T});const O=await a.getDimensions(s.floating);return y!==O.width||v!==O.height?{reset:{rects:!0}}:{}}}};function nd(){return typeof window<"u"}function ja(t){return hT(t)?(t.nodeName||"").toLowerCase():"#document"}function Vt(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Hr(t){var e;return(e=(hT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function hT(t){return nd()?t instanceof Node||t instanceof Vt(t).Node:!1}function Tr(t){return nd()?t instanceof Element||t instanceof Vt(t).Element:!1}function Wr(t){return nd()?t instanceof HTMLElement||t instanceof Vt(t).HTMLElement:!1}function o_(t){return!nd()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Vt(t).ShadowRoot}const CN=new Set(["inline","contents"]);function dc(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=xr(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!CN.has(i)}const PN=new Set(["table","td","th"]);function ON(t){return PN.has(ja(t))}const RN=[":popover-open",":modal"];function id(t){return RN.some(e=>{try{return t.matches(e)}catch{return!1}})}const jN=["transform","translate","scale","rotate","perspective"],AN=["transform","translate","scale","rotate","perspective","filter"],LN=["paint","layout","strict","content"];function _m(t){const e=wm(),r=Tr(t)?xr(t):t;return jN.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||AN.some(n=>(r.willChange||"").includes(n))||LN.some(n=>(r.contain||"").includes(n))}function IN(t){let e=oi(t);for(;Wr(e)&&!ba(e);){if(_m(e))return e;if(id(e))return null;e=oi(e)}return null}function wm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const NN=new Set(["html","body","#document"]);function ba(t){return NN.has(ja(t))}function xr(t){return Vt(t).getComputedStyle(t)}function od(t){return Tr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function oi(t){if(ja(t)==="html")return t;const e=t.assignedSlot||t.parentNode||o_(t)&&t.host||Hr(t);return o_(e)?e.host:e}function pT(t){const e=oi(t);return ba(e)?t.ownerDocument?t.ownerDocument.body:t.body:Wr(e)&&dc(e)?e:pT(e)}function Fs(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=pT(t),o=i===((n=t.ownerDocument)==null?void 0:n.body),a=Vt(i);if(o){const s=mp(a);return e.concat(a,a.visualViewport||[],dc(i)?i:[],s&&r?Fs(s):[])}return e.concat(i,Fs(i,[],r))}function mp(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function vT(t){const e=xr(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Wr(t),o=i?t.offsetWidth:r,a=i?t.offsetHeight:n,s=gu(r)!==o||gu(n)!==a;return s&&(r=o,n=a),{width:r,height:n,$:s}}function bm(t){return Tr(t)?t:t.contextElement}function ea(t){const e=bm(t);if(!Wr(e))return Vr(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:o}=vT(e);let a=(o?gu(r.width):r.width)/n,s=(o?gu(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const MN=Vr(0);function mT(t){const e=Vt(t);return!wm()||!e.visualViewport?MN:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function DN(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Vt(t)?!1:e}function no(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),o=bm(t);let a=Vr(1);e&&(n?Tr(n)&&(a=ea(n)):a=ea(t));const s=DN(o,r,n)?mT(o):Vr(0);let c=(i.left+s.x)/a.x,l=(i.top+s.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(o){const h=Vt(o),f=n&&Tr(n)?Vt(n):n;let y=h,v=mp(y);for(;v&&n&&f!==y;){const g=ea(v),_=v.getBoundingClientRect(),m=xr(v),w=_.left+(v.clientLeft+parseFloat(m.paddingLeft))*g.x,S=_.top+(v.clientTop+parseFloat(m.paddingTop))*g.y;c*=g.x,l*=g.y,u*=g.x,d*=g.y,c+=w,l+=S,y=Vt(v),v=mp(y)}}return _u({width:u,height:d,x:c,y:l})}function ad(t,e){const r=od(t).scrollLeft;return e?e.left+r:no(Hr(t)).left+r}function gT(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-ad(t,r),i=r.top+e.scrollTop;return{x:n,y:i}}function $N(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const o=i==="fixed",a=Hr(n),s=e?id(e.floating):!1;if(n===a||s&&o)return r;let c={scrollLeft:0,scrollTop:0},l=Vr(1);const u=Vr(0),d=Wr(n);if((d||!d&&!o)&&((ja(n)!=="body"||dc(a))&&(c=od(n)),Wr(n))){const f=no(n);l=ea(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const h=a&&!d&&!o?gT(a,c):Vr(0);return{width:r.width*l.x,height:r.height*l.y,x:r.x*l.x-c.scrollLeft*l.x+u.x+h.x,y:r.y*l.y-c.scrollTop*l.y+u.y+h.y}}function UN(t){return Array.from(t.getClientRects())}function FN(t){const e=Hr(t),r=od(t),n=t.ownerDocument.body,i=Dt(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),o=Dt(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+ad(t);const s=-r.scrollTop;return xr(n).direction==="rtl"&&(a+=Dt(e.clientWidth,n.clientWidth)-i),{width:i,height:o,x:a,y:s}}const a_=25;function BN(t,e){const r=Vt(t),n=Hr(t),i=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,s=0,c=0;if(i){o=i.width,a=i.height;const u=wm();(!u||u&&e==="fixed")&&(s=i.offsetLeft,c=i.offsetTop)}const l=ad(n);if(l<=0){const u=n.ownerDocument,d=u.body,h=getComputedStyle(d),f=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,y=Math.abs(n.clientWidth-d.clientWidth-f);y<=a_&&(o-=y)}else l<=a_&&(o+=l);return{width:o,height:a,x:s,y:c}}const VN=new Set(["absolute","fixed"]);function zN(t,e){const r=no(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,o=Wr(t)?ea(t):Vr(1),a=t.clientWidth*o.x,s=t.clientHeight*o.y,c=i*o.x,l=n*o.y;return{width:a,height:s,x:c,y:l}}function s_(t,e,r){let n;if(e==="viewport")n=BN(t,r);else if(e==="document")n=FN(Hr(t));else if(Tr(e))n=zN(e,r);else{const i=mT(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return _u(n)}function yT(t,e){const r=oi(t);return r===e||!Tr(r)||ba(r)?!1:xr(r).position==="fixed"||yT(r,e)}function WN(t,e){const r=e.get(t);if(r)return r;let n=Fs(t,[],!1).filter(s=>Tr(s)&&ja(s)!=="body"),i=null;const o=xr(t).position==="fixed";let a=o?oi(t):t;for(;Tr(a)&&!ba(a);){const s=xr(a),c=_m(a);!c&&s.position==="fixed"&&(i=null),(o?!c&&!i:!c&&s.position==="static"&&!!i&&VN.has(i.position)||dc(a)&&!c&&yT(t,a))?n=n.filter(u=>u!==a):i=s,a=oi(a)}return e.set(t,n),n}function HN(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const a=[...r==="clippingAncestors"?id(e)?[]:WN(e,this._c):[].concat(r),n],s=a[0],c=a.reduce((l,u)=>{const d=s_(e,u,i);return l.top=Dt(d.top,l.top),l.right=ii(d.right,l.right),l.bottom=ii(d.bottom,l.bottom),l.left=Dt(d.left,l.left),l},s_(e,s,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function qN(t){const{width:e,height:r}=vT(t);return{width:e,height:r}}function KN(t,e,r){const n=Wr(e),i=Hr(e),o=r==="fixed",a=no(t,!0,o,e);let s={scrollLeft:0,scrollTop:0};const c=Vr(0);function l(){c.x=ad(i)}if(n||!n&&!o)if((ja(e)!=="body"||dc(i))&&(s=od(e)),n){const f=no(e,!0,o,e);c.x=f.x+e.clientLeft,c.y=f.y+e.clientTop}else i&&l();o&&!n&&i&&l();const u=i&&!n&&!o?gT(i,s):Vr(0),d=a.left+s.scrollLeft-c.x-u.x,h=a.top+s.scrollTop-c.y-u.y;return{x:d,y:h,width:a.width,height:a.height}}function vf(t){return xr(t).position==="static"}function c_(t,e){if(!Wr(t)||xr(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Hr(t)===r&&(r=r.ownerDocument.body),r}function _T(t,e){const r=Vt(t);if(id(t))return r;if(!Wr(t)){let i=oi(t);for(;i&&!ba(i);){if(Tr(i)&&!vf(i))return i;i=oi(i)}return r}let n=c_(t,e);for(;n&&ON(n)&&vf(n);)n=c_(n,e);return n&&ba(n)&&vf(n)&&!_m(n)?r:n||IN(t)||r}const GN=async function(t){const e=this.getOffsetParent||_T,r=this.getDimensions,n=await r(t.floating);return{reference:KN(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function QN(t){return xr(t).direction==="rtl"}const JN={convertOffsetParentRelativeRectToViewportRelativeRect:$N,getDocumentElement:Hr,getClippingRect:HN,getOffsetParent:_T,getElementRects:GN,getClientRects:UN,getDimensions:qN,getScale:ea,isElement:Tr,isRTL:QN};function wT(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function YN(t,e){let r=null,n;const i=Hr(t);function o(){var s;clearTimeout(n),(s=r)==null||s.disconnect(),r=null}function a(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),o();const l=t.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=l;if(s||e(),!h||!f)return;const y=Gc(d),v=Gc(i.clientWidth-(u+h)),g=Gc(i.clientHeight-(d+f)),_=Gc(u),w={rootMargin:-y+"px "+-v+"px "+-g+"px "+-_+"px",threshold:Dt(0,ii(1,c))||1};let S=!0;function k(E){const T=E[0].intersectionRatio;if(T!==c){if(!S)return a();T?a(!1,T):n=setTimeout(()=>{a(!1,1e-7)},1e3)}T===1&&!wT(l,t.getBoundingClientRect())&&a(),S=!1}try{r=new IntersectionObserver(k,{...w,root:i.ownerDocument})}catch{r=new IntersectionObserver(k,w)}r.observe(t)}return a(!0),o}function XN(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,l=bm(t),u=i||o?[...l?Fs(l):[],...Fs(e)]:[];u.forEach(_=>{i&&_.addEventListener("scroll",r,{passive:!0}),o&&_.addEventListener("resize",r)});const d=l&&s?YN(l,r):null;let h=-1,f=null;a&&(f=new ResizeObserver(_=>{let[m]=_;m&&m.target===l&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),r()}),l&&!c&&f.observe(l),f.observe(e));let y,v=c?no(t):null;c&&g();function g(){const _=no(t);v&&!wT(v,_)&&r(),v=_,y=requestAnimationFrame(g)}return r(),()=>{var _;u.forEach(m=>{i&&m.removeEventListener("scroll",r),o&&m.removeEventListener("resize",r)}),d==null||d(),(_=f)==null||_.disconnect(),f=null,c&&cancelAnimationFrame(y)}}const ZN=kN,eM=TN,tM=wN,rM=EN,nM=bN,l_=_N,iM=xN,oM=(t,e,r)=>{const n=new Map,i={platform:JN,...r},o={...i.platform,_c:n};return yN(t,e,{...i,platform:o})};var aM=typeof document<"u",sM=function(){},Ul=aM?b.useLayoutEffect:sM;function wu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!wu(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const o=i[n];if(!(o==="_owner"&&t.$$typeof)&&!wu(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function bT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function u_(t,e){const r=bT(t);return Math.round(e*r)/r}function mf(t){const e=b.useRef(t);return Ul(()=>{e.current=t}),e}function cM(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:c,open:l}=t,[u,d]=b.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=b.useState(n);wu(h,n)||f(n);const[y,v]=b.useState(null),[g,_]=b.useState(null),m=b.useCallback(R=>{R!==E.current&&(E.current=R,v(R))},[]),w=b.useCallback(R=>{R!==T.current&&(T.current=R,_(R))},[]),S=o||y,k=a||g,E=b.useRef(null),T=b.useRef(null),C=b.useRef(u),O=c!=null,A=mf(c),N=mf(i),j=mf(l),D=b.useCallback(()=>{if(!E.current||!T.current)return;const R={placement:e,strategy:r,middleware:h};N.current&&(R.platform=N.current),oM(E.current,T.current,R).then(L=>{const B={...L,isPositioned:j.current!==!1};P.current&&!wu(C.current,B)&&(C.current=B,lo.flushSync(()=>{d(B)}))})},[h,e,r,N,j]);Ul(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(R=>({...R,isPositioned:!1})))},[l]);const P=b.useRef(!1);Ul(()=>(P.current=!0,()=>{P.current=!1}),[]),Ul(()=>{if(S&&(E.current=S),k&&(T.current=k),S&&k){if(A.current)return A.current(S,k,D);D()}},[S,k,D,A,O]);const M=b.useMemo(()=>({reference:E,floating:T,setReference:m,setFloating:w}),[m,w]),I=b.useMemo(()=>({reference:S,floating:k}),[S,k]),$=b.useMemo(()=>{const R={position:r,left:0,top:0};if(!I.floating)return R;const L=u_(I.floating,u.x),B=u_(I.floating,u.y);return s?{...R,transform:"translate("+L+"px, "+B+"px)",...bT(I.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:L,top:B}},[r,s,I.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:D,refs:M,elements:I,floatingStyles:$}),[u,D,M,I,$])}const lM=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:i}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?l_({element:n.current,padding:i}).fn(r):{}:n?l_({element:n,padding:i}).fn(r):{}}}},uM=(t,e)=>({...ZN(t),options:[t,e]}),dM=(t,e)=>({...eM(t),options:[t,e]}),fM=(t,e)=>({...iM(t),options:[t,e]}),hM=(t,e)=>({...tM(t),options:[t,e]}),pM=(t,e)=>({...rM(t),options:[t,e]}),vM=(t,e)=>({...nM(t),options:[t,e]}),mM=(t,e)=>({...lM(t),options:[t,e]});var gM="Arrow",ST=b.forwardRef((t,e)=>{const{children:r,width:n=10,height:i=5,...o}=t;return p.jsx(xe.svg,{...o,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});ST.displayName=gM;var yM=ST;function _M(t){const[e,r]=b.useState(void 0);return at(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let a,s;if("borderBoxSize"in o){const c=o.borderBoxSize,l=Array.isArray(c)?c[0]:c;a=l.inlineSize,s=l.blockSize}else a=t.offsetWidth,s=t.offsetHeight;r({width:a,height:s})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var Sm="Popper",[kT,sd]=lc(Sm),[wM,TT]=kT(Sm),xT=t=>{const{__scopePopper:e,children:r}=t,[n,i]=b.useState(null);return p.jsx(wM,{scope:e,anchor:n,onAnchorChange:i,children:r})};xT.displayName=Sm;var ET="PopperAnchor",CT=b.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...i}=t,o=TT(ET,r),a=b.useRef(null),s=ze(e,a),c=b.useRef(null);return b.useEffect(()=>{const l=c.current;c.current=(n==null?void 0:n.current)||a.current,l!==c.current&&o.onAnchorChange(c.current)}),n?null:p.jsx(xe.div,{...i,ref:s})});CT.displayName=ET;var km="PopperContent",[bM,SM]=kT(km),PT=b.forwardRef((t,e)=>{var V,q,te,ce,ae,ue;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:o="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:y,...v}=t,g=TT(km,r),[_,m]=b.useState(null),w=ze(e,ge=>m(ge)),[S,k]=b.useState(null),E=_M(S),T=(E==null?void 0:E.width)??0,C=(E==null?void 0:E.height)??0,O=n+(o!=="center"?"-"+o:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},N=Array.isArray(l)?l:[l],j=N.length>0,D={padding:A,boundary:N.filter(TM),altBoundary:j},{refs:P,floatingStyles:M,placement:I,isPositioned:$,middlewareData:R}=cM({strategy:"fixed",placement:O,whileElementsMounted:(...ge)=>XN(...ge,{animationFrame:f==="always"}),elements:{reference:g.anchor},middleware:[uM({mainAxis:i+C,alignmentAxis:a}),c&&dM({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?fM():void 0,...D}),c&&hM({...D}),pM({...D,apply:({elements:ge,rects:Oe,availableWidth:Xe,availableHeight:ft})=>{const{width:Fe,height:Cr}=Oe.reference,tr=ge.floating.style;tr.setProperty("--radix-popper-available-width",`${Xe}px`),tr.setProperty("--radix-popper-available-height",`${ft}px`),tr.setProperty("--radix-popper-anchor-width",`${Fe}px`),tr.setProperty("--radix-popper-anchor-height",`${Cr}px`)}}),S&&mM({element:S,padding:s}),xM({arrowWidth:T,arrowHeight:C}),h&&vM({strategy:"referenceHidden",...D})]}),[L,B]=jT(I),F=kr(y);at(()=>{$&&(F==null||F())},[$,F]);const Q=(V=R.arrow)==null?void 0:V.x,K=(q=R.arrow)==null?void 0:q.y,z=((te=R.arrow)==null?void 0:te.centerOffset)!==0,[W,ee]=b.useState();return at(()=>{_&&ee(window.getComputedStyle(_).zIndex)},[_]),p.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...M,transform:$?M.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[(ce=R.transformOrigin)==null?void 0:ce.x,(ae=R.transformOrigin)==null?void 0:ae.y].join(" "),...((ue=R.hide)==null?void 0:ue.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(bM,{scope:r,placedSide:L,onArrowChange:k,arrowX:Q,arrowY:K,shouldHideArrow:z,children:p.jsx(xe.div,{"data-side":L,"data-align":B,...v,ref:w,style:{...v.style,animation:$?void 0:"none"}})})})});PT.displayName=km;var OT="PopperArrow",kM={top:"bottom",right:"left",bottom:"top",left:"right"},RT=b.forwardRef(function(e,r){const{__scopePopper:n,...i}=e,o=SM(OT,n),a=kM[o.placedSide];return p.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:p.jsx(yM,{...i,ref:r,style:{...i.style,display:"block"}})})});RT.displayName=OT;function TM(t){return t!==null}var xM=t=>({name:"transformOrigin",options:t,fn(e){var g,_,m;const{placement:r,rects:n,middlewareData:i}=e,a=((g=i.arrow)==null?void 0:g.centerOffset)!==0,s=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[l,u]=jT(r),d={start:"0%",center:"50%",end:"100%"}[u],h=(((_=i.arrow)==null?void 0:_.x)??0)+s/2,f=(((m=i.arrow)==null?void 0:m.y)??0)+c/2;let y="",v="";return l==="bottom"?(y=a?d:`${h}px`,v=`${-c}px`):l==="top"?(y=a?d:`${h}px`,v=`${n.floating.height+c}px`):l==="right"?(y=`${-c}px`,v=a?d:`${f}px`):l==="left"&&(y=`${n.floating.width+c}px`,v=a?d:`${f}px`),{data:{x:y,y:v}}}});function jT(t){const[e,r="center"]=t.split("-");return[e,r]}var EM=xT,AT=CT,LT=PT,IT=RT,CM=Symbol("radix.slottable");function PM(t){const e=({children:r})=>p.jsx(p.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=CM,e}var[cd]=lc("Tooltip",[sd]),Tm=sd(),NT="TooltipProvider",OM=700,d_="tooltip.open",[RM,MT]=cd(NT),DT=t=>{const{__scopeTooltip:e,delayDuration:r=OM,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:o}=t,a=b.useRef(!0),s=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const l=c.current;return()=>window.clearTimeout(l)},[]),p.jsx(RM,{scope:e,isOpenDelayedRef:a,delayDuration:r,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,n)},[n]),isPointerInTransitRef:s,onPointerInTransitChange:b.useCallback(l=>{s.current=l},[]),disableHoverableContent:i,children:o})};DT.displayName=NT;var $T="Tooltip",[gee,ld]=cd($T),gp="TooltipTrigger",jM=b.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=ld(gp,r),o=MT(gp,r),a=Tm(r),s=b.useRef(null),c=ze(e,s,i.onTriggerChange),l=b.useRef(!1),u=b.useRef(!1),d=b.useCallback(()=>l.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(AT,{asChild:!0,...a,children:p.jsx(xe.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:c,onPointerMove:pe(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:pe(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:pe(t.onPointerDown,()=>{i.open&&i.onClose(),l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:pe(t.onFocus,()=>{l.current||i.onOpen()}),onBlur:pe(t.onBlur,i.onClose),onClick:pe(t.onClick,i.onClose)})})});jM.displayName=gp;var AM="TooltipPortal",[yee,LM]=cd(AM,{forceMount:void 0}),Sa="TooltipContent",UT=b.forwardRef((t,e)=>{const r=LM(Sa,t.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...o}=t,a=ld(Sa,t.__scopeTooltip);return p.jsx(sm,{present:n||a.open,children:a.disableHoverableContent?p.jsx(FT,{side:i,...o,ref:e}):p.jsx(IM,{side:i,...o,ref:e})})}),IM=b.forwardRef((t,e)=>{const r=ld(Sa,t.__scopeTooltip),n=MT(Sa,t.__scopeTooltip),i=b.useRef(null),o=ze(e,i),[a,s]=b.useState(null),{trigger:c,onClose:l}=r,u=i.current,{onPointerInTransitChange:d}=n,h=b.useCallback(()=>{s(null),d(!1)},[d]),f=b.useCallback((y,v)=>{const g=y.currentTarget,_={x:y.clientX,y:y.clientY},m=UM(_,g.getBoundingClientRect()),w=FM(_,m),S=BM(v.getBoundingClientRect()),k=zM([...w,...S]);s(k),d(!0)},[d]);return b.useEffect(()=>()=>h(),[h]),b.useEffect(()=>{if(c&&u){const y=g=>f(g,u),v=g=>f(g,c);return c.addEventListener("pointerleave",y),u.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",y),u.removeEventListener("pointerleave",v)}}},[c,u,f,h]),b.useEffect(()=>{if(a){const y=v=>{const g=v.target,_={x:v.clientX,y:v.clientY},m=(c==null?void 0:c.contains(g))||(u==null?void 0:u.contains(g)),w=!VM(_,a);m?h():w&&(h(),l())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,u,a,l,h]),p.jsx(FT,{...t,ref:o})}),[NM,MM]=cd($T,{isInside:!1}),DM=PM("TooltipContent"),FT=b.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:a,...s}=t,c=ld(Sa,r),l=Tm(r),{onClose:u}=c;return b.useEffect(()=>(document.addEventListener(d_,u),()=>document.removeEventListener(d_,u)),[u]),b.useEffect(()=>{if(c.trigger){const d=h=>{const f=h.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),p.jsx(Yu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(LT,{"data-state":c.stateAttribute,...l,...s,ref:e,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx(DM,{children:n}),p.jsx(NM,{scope:r,isInside:!0,children:p.jsx(rL,{id:c.contentId,role:"tooltip",children:i||n})})]})})});UT.displayName=Sa;var BT="TooltipArrow",$M=b.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=Tm(r);return MM(BT,r).isInside?null:p.jsx(IT,{...i,...n,ref:e})});$M.displayName=BT;function UM(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(r,n,i,o)){case o:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function FM(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function BM(t){const{top:e,right:r,bottom:n,left:i}=t;return[{x:i,y:e},{x:r,y:e},{x:r,y:n},{x:i,y:n}]}function VM(t,e){const{x:r,y:n}=t;let i=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const s=e[o],c=e[a],l=s.x,u=s.y,d=c.x,h=c.y;u>n!=h>n&&r<(d-l)*(n-u)/(h-u)+l&&(i=!i)}return i}function zM(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),WM(e)}function WM(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const i=t[n];for(;e.length>=2;){const o=e[e.length-1],a=e[e.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const i=t[n];for(;r.length>=2;){const o=r[r.length-1],a=r[r.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))r.pop();else break}r.push(i)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var HM=DT,VT=UT;const qM=HM,KM=b.forwardRef(({className:t,sideOffset:e=4,...r},n)=>p.jsx(VT,{ref:n,sideOffset:e,className:Le("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));KM.displayName=VT.displayName;var ud=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},GM={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},$n,uv,Qb,QM=(Qb=class{constructor(){ve(this,$n,GM);ve(this,uv,!1)}setTimeoutProvider(t){le(this,$n,t)}setTimeout(t,e){return U(this,$n).setTimeout(t,e)}clearTimeout(t){U(this,$n).clearTimeout(t)}setInterval(t,e){return U(this,$n).setInterval(t,e)}clearInterval(t){U(this,$n).clearInterval(t)}},$n=new WeakMap,uv=new WeakMap,Qb),yp=new QM;function JM(t){setTimeout(t,0)}var dd=typeof window>"u"||"Deno"in globalThis;function fr(){}function YM(t,e){return typeof t=="function"?t(e):t}function XM(t){return typeof t=="number"&&t>=0&&t!==1/0}function ZM(t,e){return Math.max(t+(e||0)-Date.now(),0)}function _p(t,e){return typeof t=="function"?t(e):t}function e2(t,e){return typeof t=="function"?t(e):t}function f_(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:o,queryKey:a,stale:s}=t;if(a){if(n){if(e.queryHash!==xm(a,e.options))return!1}else if(!Vs(e.queryKey,a))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof s=="boolean"&&e.isStale()!==s||i&&i!==e.state.fetchStatus||o&&!o(e))}function h_(t,e){const{exact:r,status:n,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(Bs(e.options.mutationKey)!==Bs(o))return!1}else if(!Vs(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function xm(t,e){return((e==null?void 0:e.queryKeyHashFn)||Bs)(t)}function Bs(t){return JSON.stringify(t,(e,r)=>wp(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function Vs(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>Vs(t[r],e[r])):!1}var t2=Object.prototype.hasOwnProperty;function zT(t,e){if(t===e)return t;const r=p_(t)&&p_(e);if(!r&&!(wp(t)&&wp(e)))return e;const i=(r?t:Object.keys(t)).length,o=r?e:Object.keys(e),a=o.length,s=r?new Array(a):{};let c=0;for(let l=0;l<a;l++){const u=r?l:o[l],d=t[u],h=e[u];if(d===h){s[u]=d,(r?l<i:t2.call(t,u))&&c++;continue}if(d===null||h===null||typeof d!="object"||typeof h!="object"){s[u]=h;continue}const f=zT(d,h);s[u]=f,f===d&&c++}return i===a&&c===i?t:s}function p_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function wp(t){if(!v_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!v_(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function v_(t){return Object.prototype.toString.call(t)==="[object Object]"}function r2(t){return new Promise(e=>{yp.setTimeout(e,t)})}function n2(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?zT(t,e):e}function i2(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function o2(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Em=Symbol();function WT(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Em?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Mi,Un,oa,Jb,a2=(Jb=class extends ud{constructor(){super();ve(this,Mi);ve(this,Un);ve(this,oa);le(this,oa,e=>{if(!dd&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){U(this,Un)||this.setEventListener(U(this,oa))}onUnsubscribe(){var e;this.hasListeners()||((e=U(this,Un))==null||e.call(this),le(this,Un,void 0))}setEventListener(e){var r;le(this,oa,e),(r=U(this,Un))==null||r.call(this),le(this,Un,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){U(this,Mi)!==e&&(le(this,Mi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof U(this,Mi)=="boolean"?U(this,Mi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Mi=new WeakMap,Un=new WeakMap,oa=new WeakMap,Jb),HT=new a2;function s2(){let t,e;const r=new Promise((i,o)=>{t=i,e=o});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var c2=JM;function l2(){let t=[],e=0,r=s=>{s()},n=s=>{s()},i=c2;const o=s=>{e?t.push(s):i(()=>{r(s)})},a=()=>{const s=t;t=[],s.length&&i(()=>{n(()=>{s.forEach(c=>{r(c)})})})};return{batch:s=>{let c;e++;try{c=s()}finally{e--,e||a()}return c},batchCalls:s=>(...c)=>{o(()=>{s(...c)})},schedule:o,setNotifyFunction:s=>{r=s},setBatchNotifyFunction:s=>{n=s},setScheduler:s=>{i=s}}}var mt=l2(),aa,Fn,sa,Yb,u2=(Yb=class extends ud{constructor(){super();ve(this,aa,!0);ve(this,Fn);ve(this,sa);le(this,sa,e=>{if(!dd&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){U(this,Fn)||this.setEventListener(U(this,sa))}onUnsubscribe(){var e;this.hasListeners()||((e=U(this,Fn))==null||e.call(this),le(this,Fn,void 0))}setEventListener(e){var r;le(this,sa,e),(r=U(this,Fn))==null||r.call(this),le(this,Fn,e(this.setOnline.bind(this)))}setOnline(e){U(this,aa)!==e&&(le(this,aa,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return U(this,aa)}},aa=new WeakMap,Fn=new WeakMap,sa=new WeakMap,Yb),bu=new u2;function d2(t){return Math.min(1e3*2**t,3e4)}function qT(t){return(t??"online")==="online"?bu.isOnline():!0}var bp=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function KT(t){let e=!1,r=0,n;const i=s2(),o=()=>i.status!=="pending",a=v=>{var g;if(!o()){const _=new bp(v);h(_),(g=t.onCancel)==null||g.call(t,_)}},s=()=>{e=!0},c=()=>{e=!1},l=()=>HT.isFocused()&&(t.networkMode==="always"||bu.isOnline())&&t.canRun(),u=()=>qT(t.networkMode)&&t.canRun(),d=v=>{o()||(n==null||n(),i.resolve(v))},h=v=>{o()||(n==null||n(),i.reject(v))},f=()=>new Promise(v=>{var g;n=_=>{(o()||l())&&v(_)},(g=t.onPause)==null||g.call(t)}).then(()=>{var v;n=void 0,o()||(v=t.onContinue)==null||v.call(t)}),y=()=>{if(o())return;let v;const g=r===0?t.initialPromise:void 0;try{v=g??t.fn()}catch(_){v=Promise.reject(_)}Promise.resolve(v).then(d).catch(_=>{var E;if(o())return;const m=t.retry??(dd?0:3),w=t.retryDelay??d2,S=typeof w=="function"?w(r,_):w,k=m===!0||typeof m=="number"&&r<m||typeof m=="function"&&m(r,_);if(e||!k){h(_);return}r++,(E=t.onFail)==null||E.call(t,r,_),r2(S).then(()=>l()?void 0:f()).then(()=>{e?h(_):y()})})};return{promise:i,status:()=>i.status,cancel:a,continue:()=>(n==null||n(),i),cancelRetry:s,continueRetry:c,canStart:u,start:()=>(u()?y():f().then(y),i)}}var Di,Xb,GT=(Xb=class{constructor(){ve(this,Di)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),XM(this.gcTime)&&le(this,Di,yp.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(dd?1/0:5*60*1e3))}clearGcTimeout(){U(this,Di)&&(yp.clearTimeout(U(this,Di)),le(this,Di,void 0))}},Di=new WeakMap,Xb),$i,ca,Kt,Ui,Ze,ec,Fi,pr,Jr,Zb,f2=(Zb=class extends GT{constructor(e){super();ve(this,pr);ve(this,$i);ve(this,ca);ve(this,Kt);ve(this,Ui);ve(this,Ze);ve(this,ec);ve(this,Fi);le(this,Fi,!1),le(this,ec,e.defaultOptions),this.setOptions(e.options),this.observers=[],le(this,Ui,e.client),le(this,Kt,U(this,Ui).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,le(this,$i,g_(this.options)),this.state=e.state??U(this,$i),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=U(this,Ze))==null?void 0:e.promise}setOptions(e){if(this.options={...U(this,ec),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=g_(this.options);r.data!==void 0&&(this.setState(m_(r.data,r.dataUpdatedAt)),le(this,$i,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&U(this,Kt).remove(this)}setData(e,r){const n=n2(this.state.data,e,this.options);return st(this,pr,Jr).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){st(this,pr,Jr).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=U(this,Ze))==null?void 0:n.promise;return(i=U(this,Ze))==null||i.cancel(e),r?r.then(fr).catch(fr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(U(this,$i))}isActive(){return this.observers.some(e=>e2(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Em||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>_p(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!ZM(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=U(this,Ze))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=U(this,Ze))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),U(this,Kt).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(U(this,Ze)&&(U(this,Fi)?U(this,Ze).cancel({revert:!0}):U(this,Ze).cancelRetry()),this.scheduleGc()),U(this,Kt).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||st(this,pr,Jr).call(this,{type:"invalidate"})}async fetch(e,r){var c,l,u,d,h,f,y,v,g,_,m,w;if(this.state.fetchStatus!=="idle"&&((c=U(this,Ze))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(U(this,Ze))return U(this,Ze).continueRetry(),U(this,Ze).promise}if(e&&this.setOptions(e),!this.options.queryFn){const S=this.observers.find(k=>k.options.queryFn);S&&this.setOptions(S.options)}const n=new AbortController,i=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(le(this,Fi,!0),n.signal)})},o=()=>{const S=WT(this.options,r),E=(()=>{const T={client:U(this,Ui),queryKey:this.queryKey,meta:this.meta};return i(T),T})();return le(this,Fi,!1),this.options.persister?this.options.persister(S,E,this):S(E)},s=(()=>{const S={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:U(this,Ui),state:this.state,fetchFn:o};return i(S),S})();(l=this.options.behavior)==null||l.onFetch(s,this),le(this,ca,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=s.fetchOptions)==null?void 0:u.meta))&&st(this,pr,Jr).call(this,{type:"fetch",meta:(d=s.fetchOptions)==null?void 0:d.meta}),le(this,Ze,KT({initialPromise:r==null?void 0:r.initialPromise,fn:s.fetchFn,onCancel:S=>{S instanceof bp&&S.revert&&this.setState({...U(this,ca),fetchStatus:"idle"}),n.abort()},onFail:(S,k)=>{st(this,pr,Jr).call(this,{type:"failed",failureCount:S,error:k})},onPause:()=>{st(this,pr,Jr).call(this,{type:"pause"})},onContinue:()=>{st(this,pr,Jr).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}));try{const S=await U(this,Ze).start();if(S===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(S),(f=(h=U(this,Kt).config).onSuccess)==null||f.call(h,S,this),(v=(y=U(this,Kt).config).onSettled)==null||v.call(y,S,this.state.error,this),S}catch(S){if(S instanceof bp){if(S.silent)return U(this,Ze).promise;if(S.revert){if(this.state.data===void 0)throw S;return this.state.data}}throw st(this,pr,Jr).call(this,{type:"error",error:S}),(_=(g=U(this,Kt).config).onError)==null||_.call(g,S,this),(w=(m=U(this,Kt).config).onSettled)==null||w.call(m,this.state.data,S,this),S}finally{this.scheduleGc()}}},$i=new WeakMap,ca=new WeakMap,Kt=new WeakMap,Ui=new WeakMap,Ze=new WeakMap,ec=new WeakMap,Fi=new WeakMap,pr=new WeakSet,Jr=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...h2(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...m_(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return le(this,ca,e.manual?i:void 0),i;case"error":const o=e.error;return{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),mt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),U(this,Kt).notify({query:this,type:"updated",action:e})})},Zb);function h2(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qT(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function m_(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function g_(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function y_(t){return{onFetch:(e,r)=>{var u,d,h,f,y;const n=e.options,i=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,o=((f=e.state.data)==null?void 0:f.pages)||[],a=((y=e.state.data)==null?void 0:y.pageParams)||[];let s={pages:[],pageParams:[]},c=0;const l=async()=>{let v=!1;const g=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},_=WT(e.options,e.fetchOptions),m=async(w,S,k)=>{if(v)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const T=(()=>{const N={client:e.client,queryKey:e.queryKey,pageParam:S,direction:k?"backward":"forward",meta:e.options.meta};return g(N),N})(),C=await _(T),{maxPages:O}=e.options,A=k?o2:i2;return{pages:A(w.pages,C,O),pageParams:A(w.pageParams,S,O)}};if(i&&o.length){const w=i==="backward",S=w?p2:__,k={pages:o,pageParams:a},E=S(n,k);s=await m(k,E,w)}else{const w=t??o.length;do{const S=c===0?a[0]??n.initialPageParam:__(n,s);if(c>0&&S==null)break;s=await m(s,S),c++}while(c<w)}return s};e.options.persister?e.fetchFn=()=>{var v,g;return(g=(v=e.options).persister)==null?void 0:g.call(v,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=l}}}function __(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function p2(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var tc,Ir,ht,Bi,Nr,On,e0,v2=(e0=class extends GT{constructor(e){super();ve(this,Nr);ve(this,tc);ve(this,Ir);ve(this,ht);ve(this,Bi);le(this,tc,e.client),this.mutationId=e.mutationId,le(this,ht,e.mutationCache),le(this,Ir,[]),this.state=e.state||m2(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){U(this,Ir).includes(e)||(U(this,Ir).push(e),this.clearGcTimeout(),U(this,ht).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){le(this,Ir,U(this,Ir).filter(r=>r!==e)),this.scheduleGc(),U(this,ht).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){U(this,Ir).length||(this.state.status==="pending"?this.scheduleGc():U(this,ht).remove(this))}continue(){var e;return((e=U(this,Bi))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,s,c,l,u,d,h,f,y,v,g,_,m,w,S,k,E,T,C,O;const r=()=>{st(this,Nr,On).call(this,{type:"continue"})},n={client:U(this,tc),meta:this.options.meta,mutationKey:this.options.mutationKey};le(this,Bi,KT({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(A,N)=>{st(this,Nr,On).call(this,{type:"failed",failureCount:A,error:N})},onPause:()=>{st(this,Nr,On).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>U(this,ht).canRun(this)}));const i=this.state.status==="pending",o=!U(this,Bi).canStart();try{if(i)r();else{st(this,Nr,On).call(this,{type:"pending",variables:e,isPaused:o}),await((s=(a=U(this,ht).config).onMutate)==null?void 0:s.call(a,e,this,n));const N=await((l=(c=this.options).onMutate)==null?void 0:l.call(c,e,n));N!==this.state.context&&st(this,Nr,On).call(this,{type:"pending",context:N,variables:e,isPaused:o})}const A=await U(this,Bi).start();return await((d=(u=U(this,ht).config).onSuccess)==null?void 0:d.call(u,A,e,this.state.context,this,n)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,A,e,this.state.context,n)),await((v=(y=U(this,ht).config).onSettled)==null?void 0:v.call(y,A,null,this.state.variables,this.state.context,this,n)),await((_=(g=this.options).onSettled)==null?void 0:_.call(g,A,null,e,this.state.context,n)),st(this,Nr,On).call(this,{type:"success",data:A}),A}catch(A){try{throw await((w=(m=U(this,ht).config).onError)==null?void 0:w.call(m,A,e,this.state.context,this,n)),await((k=(S=this.options).onError)==null?void 0:k.call(S,A,e,this.state.context,n)),await((T=(E=U(this,ht).config).onSettled)==null?void 0:T.call(E,void 0,A,this.state.variables,this.state.context,this,n)),await((O=(C=this.options).onSettled)==null?void 0:O.call(C,void 0,A,e,this.state.context,n)),A}finally{st(this,Nr,On).call(this,{type:"error",error:A})}}finally{U(this,ht).runNext(this)}}},tc=new WeakMap,Ir=new WeakMap,ht=new WeakMap,Bi=new WeakMap,Nr=new WeakSet,On=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),mt.batch(()=>{U(this,Ir).forEach(n=>{n.onMutationUpdate(e)}),U(this,ht).notify({mutation:this,type:"updated",action:e})})},e0);function m2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var en,vr,rc,t0,g2=(t0=class extends ud{constructor(e={}){super();ve(this,en);ve(this,vr);ve(this,rc);this.config=e,le(this,en,new Set),le(this,vr,new Map),le(this,rc,0)}build(e,r,n){const i=new v2({client:e,mutationCache:this,mutationId:++Cc(this,rc)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){U(this,en).add(e);const r=Qc(e);if(typeof r=="string"){const n=U(this,vr).get(r);n?n.push(e):U(this,vr).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(U(this,en).delete(e)){const r=Qc(e);if(typeof r=="string"){const n=U(this,vr).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&U(this,vr).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Qc(e);if(typeof r=="string"){const n=U(this,vr).get(r),i=n==null?void 0:n.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=Qc(e);if(typeof r=="string"){const i=(n=U(this,vr).get(r))==null?void 0:n.find(o=>o!==e&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){mt.batch(()=>{U(this,en).forEach(e=>{this.notify({type:"removed",mutation:e})}),U(this,en).clear(),U(this,vr).clear()})}getAll(){return Array.from(U(this,en))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>h_(r,n))}findAll(e={}){return this.getAll().filter(r=>h_(e,r))}notify(e){mt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return mt.batch(()=>Promise.all(e.map(r=>r.continue().catch(fr))))}},en=new WeakMap,vr=new WeakMap,rc=new WeakMap,t0);function Qc(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Mr,r0,y2=(r0=class extends ud{constructor(e={}){super();ve(this,Mr);this.config=e,le(this,Mr,new Map)}build(e,r,n){const i=r.queryKey,o=r.queryHash??xm(i,r);let a=this.get(o);return a||(a=new f2({client:e,queryKey:i,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){U(this,Mr).has(e.queryHash)||(U(this,Mr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=U(this,Mr).get(e.queryHash);r&&(e.destroy(),r===e&&U(this,Mr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){mt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return U(this,Mr).get(e)}getAll(){return[...U(this,Mr).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>f_(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>f_(e,n)):r}notify(e){mt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){mt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){mt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Mr=new WeakMap,r0),Be,Bn,Vn,la,ua,zn,da,fa,n0,_2=(n0=class{constructor(t={}){ve(this,Be);ve(this,Bn);ve(this,Vn);ve(this,la);ve(this,ua);ve(this,zn);ve(this,da);ve(this,fa);le(this,Be,t.queryCache||new y2),le(this,Bn,t.mutationCache||new g2),le(this,Vn,t.defaultOptions||{}),le(this,la,new Map),le(this,ua,new Map),le(this,zn,0)}mount(){Cc(this,zn)._++,U(this,zn)===1&&(le(this,da,HT.subscribe(async t=>{t&&(await this.resumePausedMutations(),U(this,Be).onFocus())})),le(this,fa,bu.subscribe(async t=>{t&&(await this.resumePausedMutations(),U(this,Be).onOnline())})))}unmount(){var t,e;Cc(this,zn)._--,U(this,zn)===0&&((t=U(this,da))==null||t.call(this),le(this,da,void 0),(e=U(this,fa))==null||e.call(this),le(this,fa,void 0))}isFetching(t){return U(this,Be).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return U(this,Bn).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=U(this,Be).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=U(this,Be).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(_p(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return U(this,Be).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=U(this,Be).get(n.queryHash),o=i==null?void 0:i.state.data,a=YM(e,o);if(a!==void 0)return U(this,Be).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return mt.batch(()=>U(this,Be).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=U(this,Be).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=U(this,Be);mt.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=U(this,Be);return mt.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=mt.batch(()=>U(this,Be).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(fr).catch(fr)}invalidateQueries(t,e={}){return mt.batch(()=>(U(this,Be).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=mt.batch(()=>U(this,Be).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(fr)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(fr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=U(this,Be).build(this,e);return r.isStaleByTime(_p(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(fr).catch(fr)}fetchInfiniteQuery(t){return t.behavior=y_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(fr).catch(fr)}ensureInfiniteQueryData(t){return t.behavior=y_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return bu.isOnline()?U(this,Bn).resumePausedMutations():Promise.resolve()}getQueryCache(){return U(this,Be)}getMutationCache(){return U(this,Bn)}getDefaultOptions(){return U(this,Vn)}setDefaultOptions(t){le(this,Vn,t)}setQueryDefaults(t,e){U(this,la).set(Bs(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...U(this,la).values()],r={};return e.forEach(n=>{Vs(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){U(this,ua).set(Bs(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...U(this,ua).values()],r={};return e.forEach(n=>{Vs(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...U(this,Vn).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=xm(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Em&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...U(this,Vn).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){U(this,Be).clear(),U(this,Bn).clear()}},Be=new WeakMap,Bn=new WeakMap,Vn=new WeakMap,la=new WeakMap,ua=new WeakMap,zn=new WeakMap,da=new WeakMap,fa=new WeakMap,n0),w2=b.createContext(void 0),b2=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(w2.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zs(){return zs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},zs.apply(this,arguments)}var qn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qn||(qn={}));const w_="popstate";function S2(t){t===void 0&&(t={});function e(n,i){let{pathname:o,search:a,hash:s}=n.location;return Sp("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:QT(i)}return T2(e,r,null,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Cm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function k2(){return Math.random().toString(36).substr(2,8)}function b_(t,e){return{usr:t.state,key:t.key,idx:e}}function Sp(t,e,r,n){return r===void 0&&(r=null),zs({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Aa(e):e,{state:r,key:e&&e.key||n||k2()})}function QT(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Aa(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function T2(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,s=qn.Pop,c=null,l=u();l==null&&(l=0,a.replaceState(zs({},a.state,{idx:l}),""));function u(){return(a.state||{idx:null}).idx}function d(){s=qn.Pop;let g=u(),_=g==null?null:g-l;l=g,c&&c({action:s,location:v.location,delta:_})}function h(g,_){s=qn.Push;let m=Sp(v.location,g,_);l=u()+1;let w=b_(m,l),S=v.createHref(m);try{a.pushState(w,"",S)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(S)}o&&c&&c({action:s,location:v.location,delta:1})}function f(g,_){s=qn.Replace;let m=Sp(v.location,g,_);l=u();let w=b_(m,l),S=v.createHref(m);a.replaceState(w,"",S),o&&c&&c({action:s,location:v.location,delta:0})}function y(g){let _=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof g=="string"?g:QT(g);return m=m.replace(/ $/,"%20"),Ke(_,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,_)}let v={get action(){return s},get location(){return t(i,a)},listen(g){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(w_,d),c=g,()=>{i.removeEventListener(w_,d),c=null}},createHref(g){return e(i,g)},createURL:y,encodeLocation(g){let _=y(g);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:h,replace:f,go(g){return a.go(g)}};return v}var S_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(S_||(S_={}));function x2(t,e,r){return r===void 0&&(r="/"),E2(t,e,r)}function E2(t,e,r,n){let i=typeof e=="string"?Aa(e):e,o=XT(i.pathname||"/",r);if(o==null)return null;let a=JT(t);C2(a);let s=null;for(let c=0;s==null&&c<a.length;++c){let l=U2(o);s=M2(a[c],l)}return s}function JT(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,a,s)=>{let c={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Ke(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let l=Wi([n,c.relativePath]),u=r.concat(c);o.children&&o.children.length>0&&(Ke(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),JT(o.children,e,u,l)),!(o.path==null&&!o.index)&&e.push({path:l,score:I2(l,o.index),routesMeta:u})};return t.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let c of YT(o.path))i(o,a,c)}),e}function YT(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=YT(n.join("/")),s=[];return s.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&s.push(...a),s.map(c=>t.startsWith("/")&&c===""?"/":c)}function C2(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:N2(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const P2=/^:[\w-]+$/,O2=3,R2=2,j2=1,A2=10,L2=-2,k_=t=>t==="*";function I2(t,e){let r=t.split("/"),n=r.length;return r.some(k_)&&(n+=L2),e&&(n+=R2),r.filter(i=>!k_(i)).reduce((i,o)=>i+(P2.test(o)?O2:o===""?j2:A2),n)}function N2(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function M2(t,e,r){let{routesMeta:n}=t,i={},o="/",a=[];for(let s=0;s<n.length;++s){let c=n[s],l=s===n.length-1,u=o==="/"?e:e.slice(o.length)||"/",d=D2({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:Wi([o,d.pathname]),pathnameBase:W2(Wi([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=Wi([o,d.pathnameBase]))}return a}function D2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=$2(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let v=s[d]||"";a=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const y=s[d];return f&&!y?l[h]=void 0:l[h]=(y||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:a,pattern:t}}function $2(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Cm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,c)=>(n.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function U2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Cm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function XT(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const F2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,B2=t=>F2.test(t);function V2(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?Aa(t):t,o;if(r)if(B2(r))o=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),Cm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?o=T_(r.substring(1),"/"):o=T_(r,e)}else o=e;return{pathname:o,search:H2(n),hash:q2(i)}}function T_(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function gf(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function z2(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function ZT(t,e){let r=z2(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function ex(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=Aa(t):(i=zs({},t),Ke(!i.pathname||!i.pathname.includes("?"),gf("?","pathname","search",i)),Ke(!i.pathname||!i.pathname.includes("#"),gf("#","pathname","hash",i)),Ke(!i.search||!i.search.includes("#"),gf("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=r;else{let d=e.length-1;if(!n&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}s=d>=0?e[d]:"/"}let c=V2(i,s),l=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Wi=t=>t.join("/").replace(/\/\/+/g,"/"),W2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),H2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,q2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function K2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const tx=["post","put","patch","delete"];new Set(tx);const G2=["get",...tx];new Set(G2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ws(){return Ws=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ws.apply(this,arguments)}const Pm=b.createContext(null),Q2=b.createContext(null),fc=b.createContext(null),fd=b.createContext(null),li=b.createContext({outlet:null,matches:[],isDataRoute:!1}),rx=b.createContext(null);function hc(){return b.useContext(fd)!=null}function hd(){return hc()||Ke(!1),b.useContext(fd).location}function nx(t){b.useContext(fc).static||b.useLayoutEffect(t)}function hn(){let{isDataRoute:t}=b.useContext(li);return t?cD():J2()}function J2(){hc()||Ke(!1);let t=b.useContext(Pm),{basename:e,future:r,navigator:n}=b.useContext(fc),{matches:i}=b.useContext(li),{pathname:o}=hd(),a=JSON.stringify(ZT(i,r.v7_relativeSplatPath)),s=b.useRef(!1);return nx(()=>{s.current=!0}),b.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){n.go(l);return}let d=ex(l,JSON.parse(a),o,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Wi([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,a,o,t])}function ix(){let{matches:t}=b.useContext(li),e=t[t.length-1];return e?e.params:{}}function Y2(t,e){return X2(t,e)}function X2(t,e,r,n){hc()||Ke(!1);let{navigator:i}=b.useContext(fc),{matches:o}=b.useContext(li),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let l=hd(),u;if(e){var d;let g=typeof e=="string"?Aa(e):e;c==="/"||(d=g.pathname)!=null&&d.startsWith(c)||Ke(!1),u=g}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let g=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let y=x2(t,{pathname:f}),v=nD(y&&y.map(g=>Object.assign({},g,{params:Object.assign({},s,g.params),pathname:Wi([c,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Wi([c,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,r,n);return e&&v?b.createElement(fd.Provider,{value:{location:Ws({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:qn.Pop}},v):v}function Z2(){let t=sD(),e=K2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),r?b.createElement("pre",{style:i},r):null,null)}const eD=b.createElement(Z2,null);class tD extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?b.createElement(li.Provider,{value:this.props.routeContext},b.createElement(rx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rD(t){let{routeContext:e,match:r,children:n}=t,i=b.useContext(Pm);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(li.Provider,{value:e},n)}function nD(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=(i=r)==null?void 0:i.errors;if(s!=null){let u=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);u>=0||Ke(!1),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,l=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=r,y=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||y){c=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((u,d,h)=>{let f,y=!1,v=null,g=null;r&&(f=s&&d.route.id?s[d.route.id]:void 0,v=d.route.errorElement||eD,c&&(l<0&&h===0?(lD("route-fallback"),y=!0,g=null):l===h&&(y=!0,g=d.route.hydrateFallbackElement||null)));let _=e.concat(a.slice(0,h+1)),m=()=>{let w;return f?w=v:y?w=g:d.route.Component?w=b.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,b.createElement(rD,{match:d,routeContext:{outlet:u,matches:_,isDataRoute:r!=null},children:w})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?b.createElement(tD,{location:r.location,revalidation:r.revalidation,component:v,error:f,children:m(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):m()},null)}var ox=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ox||{}),ax=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ax||{});function iD(t){let e=b.useContext(Pm);return e||Ke(!1),e}function oD(t){let e=b.useContext(Q2);return e||Ke(!1),e}function aD(t){let e=b.useContext(li);return e||Ke(!1),e}function sx(t){let e=aD(),r=e.matches[e.matches.length-1];return r.route.id||Ke(!1),r.route.id}function sD(){var t;let e=b.useContext(rx),r=oD(),n=sx();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function cD(){let{router:t}=iD(ox.UseNavigateStable),e=sx(ax.UseNavigateStable),r=b.useRef(!1);return nx(()=>{r.current=!0}),b.useCallback(function(i,o){o===void 0&&(o={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ws({fromRouteId:e},o)))},[t,e])}const x_={};function lD(t,e,r){x_[t]||(x_[t]=!0)}function uD(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function cx(t){let{to:e,replace:r,state:n,relative:i}=t;hc()||Ke(!1);let{future:o,static:a}=b.useContext(fc),{matches:s}=b.useContext(li),{pathname:c}=hd(),l=hn(),u=ex(e,ZT(s,o.v7_relativeSplatPath),c,i==="path"),d=JSON.stringify(u);return b.useEffect(()=>l(JSON.parse(d),{replace:r,state:n,relative:i}),[l,d,i,r,n]),null}function Rn(t){Ke(!1)}function dD(t){let{basename:e="/",children:r=null,location:n,navigationType:i=qn.Pop,navigator:o,static:a=!1,future:s}=t;hc()&&Ke(!1);let c=e.replace(/^\/*/,"/"),l=b.useMemo(()=>({basename:c,navigator:o,static:a,future:Ws({v7_relativeSplatPath:!1},s)}),[c,s,o,a]);typeof n=="string"&&(n=Aa(n));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:y="default"}=n,v=b.useMemo(()=>{let g=XT(u,c);return g==null?null:{location:{pathname:g,search:d,hash:h,state:f,key:y},navigationType:i}},[c,u,d,h,f,y,i]);return v==null?null:b.createElement(fc.Provider,{value:l},b.createElement(fd.Provider,{children:r,value:v}))}function fD(t){let{children:e,location:r}=t;return Y2(kp(e),r)}new Promise(()=>{});function kp(t,e){e===void 0&&(e=[]);let r=[];return b.Children.forEach(t,(n,i)=>{if(!b.isValidElement(n))return;let o=[...e,i];if(n.type===b.Fragment){r.push.apply(r,kp(n.props.children,o));return}n.type!==Rn&&Ke(!1),!n.props.index||!n.props.children||Ke(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=kp(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const hD="6";try{window.__reactRouterVersion=hD}catch{}const pD="startTransition",E_=Iu[pD];function vD(t){let{basename:e,children:r,future:n,window:i}=t,o=b.useRef();o.current==null&&(o.current=S2({window:i,v5Compat:!0}));let a=o.current,[s,c]=b.useState({action:a.action,location:a.location}),{v7_startTransition:l}=n||{},u=b.useCallback(d=>{l&&E_?E_(()=>c(d)):c(d)},[c,l]);return b.useLayoutEffect(()=>a.listen(u),[a,u]),b.useEffect(()=>uD(n),[n]),b.createElement(dD,{basename:e,children:r,location:s.location,navigationType:s.action,navigator:a,future:n})}var C_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(C_||(C_={}));var P_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(P_||(P_={}));const mD=()=>p.jsx(cx,{to:"/landing",replace:!0});var gD=Symbol.for("react.lazy"),Su=Iu[" use ".trim().toString()];function yD(t){return typeof t=="object"&&t!==null&&"then"in t}function lx(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===gD&&"_payload"in t&&yD(t._payload)}function ux(t){const e=wD(t),r=b.forwardRef((n,i)=>{let{children:o,...a}=n;lx(o)&&typeof Su=="function"&&(o=Su(o._payload));const s=b.Children.toArray(o),c=s.find(SD);if(c){const l=c.props.children,u=s.map(d=>d===c?b.Children.count(l)>1?b.Children.only(null):b.isValidElement(l)?l.props.children:null:d);return p.jsx(e,{...a,ref:i,children:b.isValidElement(l)?b.cloneElement(l,void 0,u):null})}return p.jsx(e,{...a,ref:i,children:o})});return r.displayName=`${t}.Slot`,r}var _D=ux("Slot");function wD(t){const e=b.forwardRef((r,n)=>{let{children:i,...o}=r;if(lx(i)&&typeof Su=="function"&&(i=Su(i._payload)),b.isValidElement(i)){const a=TD(i),s=kD(o,i.props);return i.type!==b.Fragment&&(s.ref=n?cc(n,a):a),b.cloneElement(i,s)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var bD=Symbol("radix.slottable");function SD(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===bD}function kD(t,e){const r={...e};for(const n in e){const i=t[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...s)=>{const c=o(...s);return i(...s),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...t,...r}}function TD(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}const xD=ed("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),me=b.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...i},o)=>{const a=n?_D:"button";return p.jsx(a,{className:Le(xD({variant:e,size:r,className:t})),ref:o,...i})});me.displayName="Button";var Tp=function(t,e){return Tp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Tp(t,e)};function dx(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Tp(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Jt=function(){return Jt=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Jt.apply(this,arguments)};function ui(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function fx(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,r,o):a(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function hx(t,e){return function(r,n){e(r,n,t)}}function px(t,e,r,n,i,o){function a(_){if(_!==void 0&&typeof _!="function")throw new TypeError("Function expected");return _}for(var s=n.kind,c=s==="getter"?"get":s==="setter"?"set":"value",l=!e&&t?n.static?t:t.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),d,h=!1,f=r.length-1;f>=0;f--){var y={};for(var v in n)y[v]=v==="access"?{}:n[v];for(var v in n.access)y.access[v]=n.access[v];y.addInitializer=function(_){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(_||null))};var g=(0,r[f])(s==="accessor"?{get:u.get,set:u.set}:u[c],y);if(s==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(d=a(g.get))&&(u.get=d),(d=a(g.set))&&(u.set=d),(d=a(g.init))&&i.unshift(d)}else(d=a(g))&&(s==="field"?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,n.name,u),h=!0}function vx(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function mx(t){return typeof t=="symbol"?t:"".concat(t)}function gx(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function yx(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function X(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})}function _x(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var pd=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function wx(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&pd(e,t,r)}function ku(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Om(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function bx(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Om(arguments[e]));return t}function Sx(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function Rm(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function ka(t){return this instanceof ka?(this.v=t,this):new ka(t)}function kx(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(f){return function(y){return Promise.resolve(y).then(f,d)}}function s(f,y){n[f]&&(i[f]=function(v){return new Promise(function(g,_){o.push([f,v,g,_])>1||c(f,v)})},y&&(i[f]=y(i[f])))}function c(f,y){try{l(n[f](y))}catch(v){h(o[0][3],v)}}function l(f){f.value instanceof ka?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,y){f(y),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Tx(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=t[i]?function(a){return(r=!r)?{value:ka(t[i](a)),done:!1}:o?o(a):a}:o}}function xx(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof ku=="function"?ku(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(s,c){a=t[o](a),i(s,c,a.done,a.value)})}}function i(o,a,s,c){Promise.resolve(c).then(function(l){o({value:l,done:s})},a)}}function Ex(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var ED=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},xp=function(t){return xp=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},xp(t)};function Cx(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=xp(t),n=0;n<r.length;n++)r[n]!=="default"&&pd(e,t,r[n]);return ED(e,t),e}function Px(t){return t&&t.__esModule?t:{default:t}}function Ox(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function Rx(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function jx(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function Ax(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var CD=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function Lx(t){function e(o){t.error=t.hasError?new CD(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(i,function(a){return e(a),i()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function Ix(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,o,a){return n?e?".jsx":".js":i&&(!o||!a)?r:i+o+"."+a.toLowerCase()+"js"}):t}const PD={__extends:dx,__assign:Jt,__rest:ui,__decorate:fx,__param:hx,__esDecorate:px,__runInitializers:vx,__propKey:mx,__setFunctionName:gx,__metadata:yx,__awaiter:X,__generator:_x,__createBinding:pd,__exportStar:wx,__values:ku,__read:Om,__spread:bx,__spreadArrays:Sx,__spreadArray:Rm,__await:ka,__asyncGenerator:kx,__asyncDelegator:Tx,__asyncValues:xx,__makeTemplateObject:Ex,__importStar:Cx,__importDefault:Px,__classPrivateFieldGet:Ox,__classPrivateFieldSet:Rx,__classPrivateFieldIn:jx,__addDisposableResource:Ax,__disposeResources:Lx,__rewriteRelativeImportExtension:Ix},OD=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Ax,get __assign(){return Jt},__asyncDelegator:Tx,__asyncGenerator:kx,__asyncValues:xx,__await:ka,__awaiter:X,__classPrivateFieldGet:Ox,__classPrivateFieldIn:jx,__classPrivateFieldSet:Rx,__createBinding:pd,__decorate:fx,__disposeResources:Lx,__esDecorate:px,__exportStar:wx,__extends:dx,__generator:_x,__importDefault:Px,__importStar:Cx,__makeTemplateObject:Ex,__metadata:yx,__param:hx,__propKey:mx,__read:Om,__rest:ui,__rewriteRelativeImportExtension:Ix,__runInitializers:vx,__setFunctionName:gx,__spread:bx,__spreadArray:Rm,__spreadArrays:Sx,__values:ku,default:PD},Symbol.toStringTag,{value:"Module"})),RD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class jm extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class jD extends jm{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class O_ extends jm{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class R_ extends jm{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ep;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Ep||(Ep={}));class AD{constructor(e,{headers:r={},customFetch:n,region:i=Ep.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=RD(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return X(this,arguments,void 0,function*(r,n={}){var i;let o,a;try{const{headers:s,method:c,body:l,signal:u,timeout:d}=n;let h={},{region:f}=n;f||(f=this.region);const y=new URL(`${this.url}/${r}`);f&&f!=="any"&&(h["x-region"]=f,y.searchParams.set("forceFunctionRegion",f));let v;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=l):typeof l=="string"?(h["Content-Type"]="text/plain",v=l):typeof FormData<"u"&&l instanceof FormData?v=l:(h["Content-Type"]="application/json",v=JSON.stringify(l)):v=l;let g=u;d&&(a=new AbortController,o=setTimeout(()=>a.abort(),d),u?(g=a.signal,u.addEventListener("abort",()=>a.abort())):g=a.signal);const _=yield this.fetch(y.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:v,signal:g}).catch(k=>{throw new jD(k)}),m=_.headers.get("x-relay-error");if(m&&m==="true")throw new O_(_);if(!_.ok)throw new R_(_);let w=((i=_.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield _.json():w==="application/octet-stream"||w==="application/pdf"?S=yield _.blob():w==="text/event-stream"?S=_:w==="multipart/form-data"?S=yield _.formData():S=yield _.text(),{data:S,error:null,response:_}}catch(s){return{data:null,error:s,response:s instanceof R_||s instanceof O_?s.context:void 0}}finally{o&&clearTimeout(o)}})}}var gt={};const La=Q1(OD);var Jc={},Yc={},Xc={},Zc={},el={},tl={},j_;function Nx(){if(j_)return tl;j_=1,Object.defineProperty(tl,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return tl.default=t,tl}var A_;function Mx(){if(A_)return el;A_=1,Object.defineProperty(el,"__esModule",{value:!0});const e=La.__importDefault(Nx());class r{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let s=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var l,u,d,h;let f=null,y=null,v=null,g=c.status,_=c.statusText;if(c.ok){if(this.method!=="HEAD"){const k=await c.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?y=k:y=JSON.parse(k))}const w=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),S=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");w&&S&&S.length>1&&(v=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(f={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,v=null,g=406,_="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const w=await c.text();try{f=JSON.parse(w),Array.isArray(f)&&c.status===404&&(y=[],f=null,g=200,_="OK")}catch{c.status===404&&w===""?(g=204,_="No Content"):f={message:w}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,g=200,_="OK"),f&&this.shouldThrowOnError)throw new e.default(f)}return{error:f,data:y,count:v,status:g,statusText:_}});return this.shouldThrowOnError||(s=s.catch(c=>{var l,u,d,h,f,y;let v="";const g=c==null?void 0:c.cause;if(g){const _=(l=g==null?void 0:g.message)!==null&&l!==void 0?l:"",m=(u=g==null?void 0:g.code)!==null&&u!==void 0?u:"";v=`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,v+=`

Caused by: ${(h=g==null?void 0:g.name)!==null&&h!==void 0?h:"Error"}: ${_}`,m&&(v+=` (${m})`),g!=null&&g.stack&&(v+=`
${g.stack}`)}else v=(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:"";return{error:{message:`${(y=c==null?void 0:c.name)!==null&&y!==void 0?y:"FetchError"}: ${c==null?void 0:c.message}`,details:v,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(i,o)}returns(){return this}overrideTypes(){return this}}return el.default=r,el}var L_;function Dx(){if(L_)return Zc;L_=1,Object.defineProperty(Zc,"__esModule",{value:!0});const e=La.__importDefault(Mx());class r extends e.default{select(i){let o=!1;const a=(i??"*").split("").map(s=>/\s/.test(s)&&!o?"":(s==='"'&&(o=!o),s)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:a,foreignTable:s,referencedTable:c=s}={}){const l=c?`${c}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${i}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:a=o}={}){const s=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,o,{foreignTable:a,referencedTable:s=a}={}){const c=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(l,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:a=!1,buffers:s=!1,wal:c=!1,format:l="text"}={}){var u;const d=[i?"analyze":null,o?"verbose":null,a?"settings":null,s?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${h}"; options=${d};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Zc.default=r,Zc}var I_;function Am(){if(I_)return Xc;I_=1,Object.defineProperty(Xc,"__esModule",{value:!0});const e=La.__importDefault(Dx()),r=new RegExp("[,()]");class n extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}regexMatch(o,a){return this.url.searchParams.append(o,`match.${a}`),this}regexIMatch(o,a){return this.url.searchParams.append(o,`imatch.${a}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}isDistinct(o,a){return this.url.searchParams.append(o,`isdistinct.${a}`),this}in(o,a){const s=Array.from(new Set(a)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${s})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:s,type:c}={}){let l="";c==="plain"?l="pl":c==="phrase"?l="ph":c==="websearch"&&(l="w");const u=s===void 0?"":`(${s})`;return this.url.searchParams.append(o,`${l}fts${u}.${a}`),this}match(o){return Object.entries(o).forEach(([a,s])=>{this.url.searchParams.append(a,`eq.${s}`)}),this}not(o,a,s){return this.url.searchParams.append(o,`not.${a}.${s}`),this}or(o,{foreignTable:a,referencedTable:s=a}={}){const c=s?`${s}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,a,s){return this.url.searchParams.append(o,`${a}.${s}`),this}}return Xc.default=n,Xc}var N_;function $x(){if(N_)return Yc;N_=1,Object.defineProperty(Yc,"__esModule",{value:!0});const e=La.__importDefault(Am());class r{constructor(i,{headers:o={},schema:a,fetch:s}){this.url=i,this.headers=new Headers(o),this.schema=a,this.fetch=s}select(i,o){const{head:a=!1,count:s}=o??{},c=a?"HEAD":"GET";let l=!1;const u=(i??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:a=!0}={}){var s;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const l=i.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:a=!1,count:s,defaultToNull:c=!0}={}){var l;const u="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),s&&this.headers.append("Prefer",`count=${s}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(i,{count:o}={}){var a;const s="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var o;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Yc.default=r,Yc}var M_;function LD(){if(M_)return Jc;M_=1,Object.defineProperty(Jc,"__esModule",{value:!0});const t=La,e=t.__importDefault($x()),r=t.__importDefault(Am());class n{constructor(o,{headers:a={},schema:s,fetch:c}={}){this.url=o,this.headers=new Headers(a),this.schemaName=s,this.fetch=c}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:s=!1,get:c=!1,count:l}={}){var u;let d;const h=new URL(`${this.url}/rpc/${o}`);let f;s||c?(d=s?"HEAD":"GET",Object.entries(a).filter(([v,g])=>g!==void 0).map(([v,g])=>[v,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([v,g])=>{h.searchParams.append(v,g)})):(d="POST",f=a);const y=new Headers(this.headers);return l&&y.set("Prefer",`count=${l}`),new r.default({method:d,url:h,headers:y,schema:this.schemaName,body:f,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Jc.default=n,Jc}Object.defineProperty(gt,"__esModule",{value:!0});var Ux=gt.PostgrestError=Qx=gt.PostgrestBuilder=Kx=gt.PostgrestTransformBuilder=Hx=gt.PostgrestFilterBuilder=zx=gt.PostgrestQueryBuilder=Bx=gt.PostgrestClient=void 0;const Ia=La,Fx=Ia.__importDefault(LD());var Bx=gt.PostgrestClient=Fx.default;const Vx=Ia.__importDefault($x());var zx=gt.PostgrestQueryBuilder=Vx.default;const Wx=Ia.__importDefault(Am());var Hx=gt.PostgrestFilterBuilder=Wx.default;const qx=Ia.__importDefault(Dx());var Kx=gt.PostgrestTransformBuilder=qx.default;const Gx=Ia.__importDefault(Mx());var Qx=gt.PostgrestBuilder=Gx.default;const Jx=Ia.__importDefault(Nx());Ux=gt.PostgrestError=Jx.default;var Yx=gt.default={PostgrestClient:Fx.default,PostgrestQueryBuilder:Vx.default,PostgrestFilterBuilder:Wx.default,PostgrestTransformBuilder:qx.default,PostgrestBuilder:Gx.default,PostgrestError:Jx.default};const ID=i0({__proto__:null,get PostgrestBuilder(){return Qx},get PostgrestClient(){return Bx},get PostgrestError(){return Ux},get PostgrestFilterBuilder(){return Hx},get PostgrestQueryBuilder(){return zx},get PostgrestTransformBuilder(){return Kx},default:Yx},[gt]),{PostgrestClient:ND,PostgrestQueryBuilder:_ee,PostgrestFilterBuilder:wee,PostgrestTransformBuilder:bee,PostgrestBuilder:See,PostgrestError:kee}=Yx||ID;class MD{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const DD="2.86.0",$D=`realtime-js/${DD}`,Xx="1.0.0",UD="2.0.0",D_=Xx,Cp=1e4,FD=1e3,BD=100;var Pi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Pi||(Pi={}));var Ge;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ge||(Ge={}));var gr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gr||(gr={}));var Pp;(function(t){t.websocket="websocket"})(Pp||(Pp={}));var Oi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Oi||(Oi={}));class VD{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,r,n){var i,o;const a=e.topic,s=(i=e.ref)!==null&&i!==void 0?i:"",c=(o=e.join_ref)!==null&&o!==void 0?o:"",l=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+s.length+a.length+l.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let y=new DataView(f),v=0;y.setUint8(v++,this.KINDS.userBroadcastPush),y.setUint8(v++,c.length),y.setUint8(v++,s.length),y.setUint8(v++,a.length),y.setUint8(v++,l.length),y.setUint8(v++,d.length),y.setUint8(v++,r),Array.from(c,_=>y.setUint8(v++,_.charCodeAt(0))),Array.from(s,_=>y.setUint8(v++,_.charCodeAt(0))),Array.from(a,_=>y.setUint8(v++,_.charCodeAt(0))),Array.from(l,_=>y.setUint8(v++,_.charCodeAt(0))),Array.from(d,_=>y.setUint8(v++,_.charCodeAt(0)));var g=new Uint8Array(f.byteLength+n.byteLength);return g.set(new Uint8Array(f),0),g.set(new Uint8Array(n),f.byteLength),g.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,o,a,s,c]=n;return r({join_ref:i,ref:o,topic:a,event:s,payload:c})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,i)}}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3),s=r.getUint8(4);let c=this.HEADER_LENGTH+4;const l=n.decode(e.slice(c,c+i));c=c+i;const u=n.decode(e.slice(c,c+o));c=c+o;const d=n.decode(e.slice(c,c+a));c=c+a;const h=e.slice(c,e.byteLength),f=s===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,y={type:this.BROADCAST_EVENT,event:u,payload:f};return a>0&&(y.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}let Zx=class{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Ce;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ce||(Ce={}));const $_=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=zD(a,t,e,i),o),{}):{}},zD=(t,e,r,n)=>{const i=e.find(s=>s.name===t),o=i==null?void 0:i.type,a=r[t];return o&&!n.includes(o)?eE(o,a):Op(a)},eE=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return KD(e,r)}switch(t){case Ce.bool:return WD(e);case Ce.float4:case Ce.float8:case Ce.int2:case Ce.int4:case Ce.int8:case Ce.numeric:case Ce.oid:return HD(e);case Ce.json:case Ce.jsonb:return qD(e);case Ce.timestamp:return GD(e);case Ce.abstime:case Ce.date:case Ce.daterange:case Ce.int4range:case Ce.int8range:case Ce.money:case Ce.reltime:case Ce.text:case Ce.time:case Ce.timestamptz:case Ce.timetz:case Ce.tsrange:case Ce.tstzrange:return Op(e);default:return Op(e)}},Op=t=>t,WD=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},HD=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},qD=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},KD=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const a=t.slice(1,r);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>eE(e,s))}return t},GD=t=>typeof t=="string"?t.replace(" ","T"):t,tE=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class yf{constructor(e,r,n={},i=Cp){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var U_;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(U_||(U_={}));class _s{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_s.syncState(this.state,i,o,a),this.pendingDiffs.forEach(c=>{this.state=_s.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=_s.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const o=this.cloneDeep(e),a=this.transformState(r),s={},c={};return this.map(o,(l,u)=>{a[l]||(c[l]=u)}),this.map(a,(l,u)=>{const d=o[l];if(d){const h=u.map(g=>g.presence_ref),f=d.map(g=>g.presence_ref),y=u.filter(g=>f.indexOf(g.presence_ref)<0),v=d.filter(g=>h.indexOf(g.presence_ref)<0);y.length>0&&(s[l]=y),v.length>0&&(c[l]=v)}else s[l]=u}),this.syncDiff(o,{joins:s,leaves:c},n,i)}static syncDiff(e,r,n,i){const{joins:o,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(s,c)=>{var l;const u=(l=e[s])!==null&&l!==void 0?l:[];if(e[s]=this.cloneDeep(c),u.length>0){const d=e[s].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[s].unshift(...h)}n(s,u,c)}),this.map(a,(s,c)=>{let l=e[s];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[s]=l,i(s,l,c),l.length===0&&delete e[s]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var F_;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(F_||(F_={}));var ws;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(ws||(ws={}));var Xr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Xr||(Xr={}));class Lm{constructor(e,r={config:{}},n){var i,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new yf(this,gr.join,this.params,this.timeout),this.rejoinTimer=new Zx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gr.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new _s(this),this.broadcastEndpointURL=tE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ge.closed){const{config:{broadcast:a,presence:s,private:c}}=this.params,l=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[ws.PRESENCE]&&this.bindings[ws.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(Xr.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(Xr.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var y;if(this.socket.setAuth(),f===void 0){e==null||e(Xr.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,g=(y=v==null?void 0:v.length)!==null&&y!==void 0?y:0,_=[];for(let m=0;m<g;m++){const w=v[m],{filter:{event:S,schema:k,table:E,filter:T}}=w,C=f&&f[m];if(C&&C.event===S&&C.schema===k&&C.table===E&&C.filter===T)_.push(Object.assign(Object.assign({},w),{id:C.id}));else{this.unsubscribe(),this.state=Ge.errored,e==null||e(Xr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,e&&e(Xr.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ge.errored,e==null||e(Xr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Xr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Ge.joined&&e===ws.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let c=s.statusText;try{const l=await s.json();c=l.error||l.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,c;const l=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),l.receive("ok",()=>o("ok")),l.receive("error",()=>o("error")),l.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ge.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new yf(this,gr.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ge.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(o),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new yf(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>BD){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,o;const a=e.toLocaleLowerCase(),{close:s,error:c,leave:l,join:u}=gr;if(n&&[s,c,l,u].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var y,v,g;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((g=(v=f.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===a}).map(f=>f.callback(h,n)):(o=this.bindings[a])===null||o===void 0||o.filter(f=>{var y,v,g,_,m,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const S=f.id,k=(y=f.filter)===null||y===void 0?void 0:y.event;return S&&((v=r.ids)===null||v===void 0?void 0:v.includes(S))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const S=(m=(_=f==null?void 0:f.filter)===null||_===void 0?void 0:_.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return S==="*"||S===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof h=="object"&&"ids"in h){const y=h.data,{schema:v,table:g,commit_timestamp:_,type:m,errors:w}=y;h=Object.assign(Object.assign({},{schema:v,table:g,commit_timestamp:_,eventType:m,new:{},old:{},errors:w}),this._getPayloadRecords(y))}f.callback(h,n)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),o={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Lm.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gr.close,{},e)}_onError(e){this._on(gr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=$_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=$_(e.columns,e.old_record)),r}}const _f=()=>{},rl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},QD=[1e3,2e3,5e3,1e4],JD=1e4,YD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class XD{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Cp,this.transport=null,this.heartbeatIntervalMs=rl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=_f,this.ref=0,this.reconnectTimer=null,this.vsn=D_,this.logger=_f,this.conn=null,this.sendBuffer=[],this.serializer=new VD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Pp.websocket}`,this.httpEndpoint=tE(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=MD.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Pi.connecting:return Oi.Connecting;case Pi.open:return Oi.Open;case Pi.closing:return Oi.Closing;default:return Oi.Closed}}isConnected(){return this.connectionState()===Oi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===n);if(i)return i;{const o=new Lm(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:i,ref:o}=e,a=()=>{this.encode(e,s=>{var c;(c=this.conn)===null||c===void 0||c.send(s)})};this.log("push",`${r} ${n} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(FD,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},rl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(l){this.log("error","error in heartbeat callback",l)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:o,ref:a}=r,s=a?`(${a})`:"",c=o.status||"";this.log("receive",`${c} ${n} ${i} ${s}`.trim(),o),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(i,o,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Pi.open||this.conn.readyState===Pi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([YD],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:$D};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(gr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Zx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},rl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,o,a,s,c,l,u,d,h,f;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Cp,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:rl.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:_f,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:D_,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:y=>QD[y-1]||JD,this.vsn){case Xx:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(y,v)=>v(JSON.stringify(y)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(y,v)=>v(JSON.parse(y));break;case UD:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class vd extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Me(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class ZD extends vd{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Rp extends vd{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Im=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),e$=()=>Response,jp=t=>{if(Array.isArray(t))return t.map(r=>jp(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=jp(n)}),e},t$=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},r$=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),wf=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},n$=(t,e,r)=>X(void 0,void 0,void 0,function*(){const n=yield e$();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const o=t.status||500,a=(i==null?void 0:i.statusCode)||o+"";e(new ZD(wf(i),o,a))}).catch(i=>{e(new Rp(wf(i),i))}):e(new Rp(wf(t),t))}),i$=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(t$(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function pc(t,e,r,n,i,o){return X(this,void 0,void 0,function*(){return new Promise((a,s)=>{t(r,i$(e,n,i,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>n$(c,s,n))})})}function Hs(t,e,r,n){return X(this,void 0,void 0,function*(){return pc(t,"GET",e,r,n)})}function hr(t,e,r,n,i){return X(this,void 0,void 0,function*(){return pc(t,"POST",e,n,i,r)})}function Ap(t,e,r,n,i){return X(this,void 0,void 0,function*(){return pc(t,"PUT",e,n,i,r)})}function o$(t,e,r,n){return X(this,void 0,void 0,function*(){return pc(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Nm(t,e,r,n,i){return X(this,void 0,void 0,function*(){return pc(t,"DELETE",e,n,i,r)})}class a${constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return X(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Me(e))return{data:null,error:e};throw e}})}}var rE;class s${constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[rE]="BlobDownloadBuilder",this.promise=null}asStream(){return new a$(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return X(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Me(e))return{data:null,error:e};throw e}})}}rE=Symbol.toStringTag;const c$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},B_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class l${constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Im(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return X(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},B_),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),c&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(c))):(o=n,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,c&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(s=Object.assign(Object.assign({},s),i.headers));const l=this._removeEmptyFolders(r),u=this._getFinalPath(l),d=yield(e=="PUT"?Ap:hr)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:s},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Me(o))return{data:null,error:o};throw o}})}upload(e,r,n){return X(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return X(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),s=new URL(this.url+`/object/upload/sign/${a}`);s.searchParams.set("token",r);try{let c;const l=Object.assign({upsert:B_.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",l.cacheControl)):(c=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield Ap(this.fetch,s.toString(),c,{headers:u});return{data:{path:o,fullPath:d.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Me(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return X(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const o=yield hr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),a=new URL(this.url+o.url),s=a.searchParams.get("token");if(!s)throw new vd("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:s},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}})}update(e,r,n){return X(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return X(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}copy(e,r,n){return X(this,void 0,void 0,function*(){try{return{data:{path:(yield hr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return X(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield hr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return X(this,void 0,void 0,function*(){try{const i=yield hr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=o?`?${o}`:"",s=this._getFinalPath(e),c=()=>Hs(this.fetch,`${this.url}/${i}/${s}${a}`,{headers:this.headers,noResolveJson:!0});return new s$(c,this.shouldThrowOnError)}info(e){return X(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Hs(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:jp(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}})}exists(e){return X(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield o$(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Me(n)&&n instanceof Rp){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&i.push(o);const s=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let l=i.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${l}`)}}}remove(e){return X(this,void 0,void 0,function*(){try{return{data:yield Nm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}list(e,r,n){return X(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},c$),r),{prefix:e||""});return{data:yield hr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}listV2(e,r){return X(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield hr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const nE="2.86.0",iE={"X-Client-Info":`storage-js/${nE}`};class u${constructor(e,r={},n,i){this.shouldThrowOnError=!1;const o=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},iE),r),this.fetch=Im(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return X(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield Hs(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}getBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield Hs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}createBucket(e){return X(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield hr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return X(this,void 0,void 0,function*(){try{return{data:yield Ap(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}})}emptyBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}deleteBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield Nm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var qs=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function d$(t,e,r){const n=new URL(e,t);if(r)for(const[i,o]of Object.entries(r))o!==void 0&&n.searchParams.set(i,o);return n.toString()}async function f$(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function h$(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:o,headers:a}){const s=d$(t.baseUrl,n,i),c=await f$(t.auth),l=await e(s,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...c,...a},body:o?JSON.stringify(o):void 0}),u=await l.text(),d=(l.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!l.ok){const f=d?h:void 0,y=f==null?void 0:f.error;throw new qs((y==null?void 0:y.message)??`Request failed with status ${l.status}`,{status:l.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:f})}return{status:l.status,headers:l.headers,data:h}}}}function nl(t){return t.join("")}var p$=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:nl(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${nl(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${nl(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${nl(t.namespace)}`}),!0}catch(e){if(e instanceof qs&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof qs&&r.status===409)return;throw r}}};function go(t){return t.join("")}var v$=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${go(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${go(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${go(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${go(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${go(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${go(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof qs&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof qs&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},m$=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=h$({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new p$(this.client,e),this.tableOps=new v$(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class g${constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},iE),r),this.fetch=Im(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}listBuckets(e){return X(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield Hs(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}deleteBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield Nm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}from(e){if(!r$(e))throw new vd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new m$({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>X(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Mm={"X-Client-Info":`storage-js/${nE}`,"Content-Type":"application/json"};class oE extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function $t(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class bf extends oE{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class y$ extends oE{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var V_;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(V_||(V_={}));const Dm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),_$=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},z_=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),w$=(t,e,r)=>X(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const i=t.status||500,o=t;if(typeof o.json=="function")o.json().then(a=>{const s=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";e(new bf(z_(a),i,s))}).catch(()=>{const a=i+"",s=o.statusText||`HTTP ${i} error`;e(new bf(s,i,a))});else{const a=i+"",s=o.statusText||`HTTP ${i} error`;e(new bf(s,i,a))}}else e(new y$(z_(t),t))}),b$=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(_$(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function S$(t,e,r,n,i,o){return X(this,void 0,void 0,function*(){return new Promise((a,s)=>{t(r,b$(e,n,i,o)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const l=c.headers.get("content-type");return!l||!l.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>w$(c,s,n))})})}function Ut(t,e,r,n,i){return X(this,void 0,void 0,function*(){return S$(t,"POST",e,n,i,r)})}class k${constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mm),r),this.fetch=Dm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return X(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}getIndex(e,r){return X(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}listIndexes(e){return X(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return X(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}}class T${constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mm),r),this.fetch=Dm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return X(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ut(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}getVectors(e){return X(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}listVectors(e){return X(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ut(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}queryVectors(e){return X(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}deleteVectors(e){return X(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ut(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}}class x${constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Mm),r),this.fetch=Dm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return X(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}getBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield Ut(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}listBuckets(){return X(this,arguments,void 0,function*(e={}){try{return{data:yield Ut(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}deleteBucket(e){return X(this,void 0,void 0,function*(){try{return{data:(yield Ut(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}}class E$ extends x${constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new C$(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return X(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return X(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return X(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return X(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class C$ extends k${constructor(e,r,n,i){super(e,r,i),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return X(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return X(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return X(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return X(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new P$(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class P$ extends T${constructor(e,r,n,i,o){super(e,r,o),this.vectorBucketName=n,this.indexName=i}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return X(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return X(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return X(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return X(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return X(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class O$ extends u${constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new l$(this.url,this.headers,e,this.fetch)}get vectors(){return new E$(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new g$(this.url+"/iceberg",this.headers,this.fetch)}}const R$="2.86.0";let is="";typeof Deno<"u"?is="deno":typeof document<"u"?is="web":typeof navigator<"u"&&navigator.product==="ReactNative"?is="react-native":is="node";const j$={"X-Client-Info":`supabase-js-${is}/${R$}`},A$={headers:j$},L$={schema:"public"},I$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},N$={},M$=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),D$=()=>Headers,$$=(t,e,r)=>{const n=M$(r),i=D$();return async(o,a)=>{var s;const c=(s=await e())!==null&&s!==void 0?s:t;let l=new i(a==null?void 0:a.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},a),{headers:l}))}};function U$(t){return t.endsWith("/")?t:t+"/"}function F$(t,e){var r,n;const{db:i,auth:o,realtime:a,global:s}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},l),o),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=s==null?void 0:s.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function B$(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(U$(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const aE="2.86.0",Oo=30*1e3,Lp=3,Sf=Lp*Oo,V$="http://localhost:9999",z$="supabase.auth.token",W$={"X-Client-Info":`gotrue-js/${aE}`},Ip="X-Supabase-Api-Version",sE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},H$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,q$=10*60*1e3;class Ks extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class K$ extends Ks{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function G$(t){return re(t)&&t.name==="AuthApiError"}class Ri extends Ks{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class di extends Ks{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Nt extends di{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Q$(t){return re(t)&&t.name==="AuthSessionMissingError"}class yo extends di{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class il extends di{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ol extends di{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function J$(t){return re(t)&&t.name==="AuthImplicitGrantRedirectError"}class W_ extends di{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Np extends di{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function kf(t){return re(t)&&t.name==="AuthRetryableFetchError"}class H_ extends di{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Mp extends di{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),q_=` 	
\r=`.split(""),Y$=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<q_.length;e+=1)t[q_[e].charCodeAt(0)]=-2;for(let e=0;e<Tu.length;e+=1)t[Tu[e].charCodeAt(0)]=e;return t})();function K_(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Tu[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Tu[n]),e.queuedBits-=6}}function cE(t,e,r){const n=Y$[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function G_(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{eU(a,n,r)};for(let a=0;a<t.length;a+=1)cE(t.charCodeAt(a),i,o);return e.join("")}function X$(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Z$(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}X$(n,e)}}function eU(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ta(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)cE(t.charCodeAt(i),r,n);return new Uint8Array(e)}function tU(t){const e=[];return Z$(t,r=>e.push(r)),new Uint8Array(e)}function Ni(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>K_(i,r,n)),K_(null,r,n),e.join("")}function rU(t){return Math.round(Date.now()/1e3)+t}function nU(){return Symbol("auth-callback")}const rt=()=>typeof window<"u"&&typeof document<"u",yi={tested:!1,writable:!1},lE=()=>{if(!rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yi.tested)return yi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),yi.tested=!0,yi.writable=!0}catch{yi.tested=!0,yi.writable=!1}return yi.writable};function iU(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const uE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),oU=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ro=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},_i=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},En=async(t,e)=>{await t.removeItem(e)};class md{constructor(){this.promise=new md.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}md.promiseConstructor=Promise;function Tf(t){const e=t.split(".");if(e.length!==3)throw new Mp("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!H$.test(e[n]))throw new Mp("JWT not in base64url format");return{header:JSON.parse(G_(e[0])),payload:JSON.parse(G_(e[1])),signature:ta(e[2]),raw:{header:e[0],payload:e[1]}}}async function aU(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function sU(t,e){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){n(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function cU(t){return("0"+t.toString(16)).substr(-2)}function lU(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let o=0;o<56;o++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,cU).join("")}async function uU(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function dU(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await uU(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _o(t,e,r=!1){const n=lU();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Ro(t,`${e}-code-verifier`,i);const o=await dU(n);return[o,n===o?"plain":"s256"]}const fU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function hU(t){const e=t.headers.get(Ip);if(!e||!e.match(fU))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function pU(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function vU(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wo(t){if(!mU.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function xf(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function gU(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function Q_(t){return JSON.parse(JSON.stringify(t))}const Ci=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),yU=[502,503,504];async function J_(t){var e;if(!oU(t))throw new Np(Ci(t),0);if(yU.includes(t.status))throw new Np(Ci(t),t.status);let r;try{r=await t.json()}catch(o){throw new Ri(Ci(o),o)}let n;const i=hU(t);if(i&&i.getTime()>=sE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new H_(Ci(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Nt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new H_(Ci(r),t.status,r.weak_password.reasons);throw new K$(Ci(r),t.status||500,n)}const _U=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function se(t,e,r,n){var i;const o=Object.assign({},n==null?void 0:n.headers);o[Ip]||(o[Ip]=sE["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const a=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await wU(t,e,r+s,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function wU(t,e,r,n,i,o){const a=_U(e,n,i,o);let s;try{s=await t(r,Object.assign({},a))}catch(c){throw console.error(c),new Np(Ci(c),0)}if(s.ok||await J_(s),n!=null&&n.noResolveJson)return s;try{return await s.json()}catch(c){await J_(c)}}function lr(t){var e;let r=null;kU(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=rU(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function Y_(t){const e=lr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Dn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function bU(t){return{data:t,error:null}}function SU(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o}=t,a=ui(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o},c=Object.assign({},a);return{data:{properties:s,user:c},error:null}}function X_(t){return t}function kU(t){return t.access_token&&t.refresh_token&&t.expires_in}const Ef=["global","local","others"];class TU{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=uE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Ef[0]){if(Ef.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ef.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Dn})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=ui(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:SU,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(re(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Dn})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,o,a,s,c;try{const l={nextPage:null,lastPage:0,total:0},u=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:X_});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(c=(s=u.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(y.split(";")[1].split("=")[1]);l[`${g}Page`]=v}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(re(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){wo(e);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Dn})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){wo(e);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Dn})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){wo(e);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Dn})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){wo(e.userId);try{const{data:r,error:n}=await se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _deleteFactor(e){wo(e.userId),wo(e.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,o,a,s,c;try{const l={nextPage:null,lastPage:0,total:0},u=await se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:X_});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(c=(s=u.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(y=>{const v=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(y.split(";")[1].split("=")[1]);l[`${g}Page`]=v}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(re(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}}function Z_(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const bo={debug:!!(globalThis&&lE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class dE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class xU extends dE{}async function EU(t,e,r){bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),bo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new xU(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(bo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function CU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function fE(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function PU(t){return parseInt(t,16)}function OU(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function RU(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:c,resources:l,scheme:u,uri:d,version:h}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=fE(t.address),y=u?`${u}://${n}`:n,v=t.statement?`${t.statement}
`:"",g=`${y} wants you to sign in with your Ethereum account:
${f}

${v}`;let _=`URI: ${d}
Version: ${h}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(_+=`
Expiration Time: ${i.toISOString()}`),s&&(_+=`
Not Before: ${s.toISOString()}`),c&&(_+=`
Request ID: ${c}`),l){let m=`
Resources:`;for(const w of l){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);m+=`
- ${w}`}_+=m}return`${g}
${_}`}class He extends Error{constructor({message:e,code:r,cause:n,name:i}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=i??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class xu extends He{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function jU({error:t,options:e}){var r,n,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new He({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new He({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new He({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new He({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new He({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new He({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new He({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new He({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(hE(a)){if(o.rp.id!==a)return new He({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new He({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new He({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new He({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new He({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function AU({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new He({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new He({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(hE(n)){if(r.rpId!==n)return new He({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new He({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new He({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new He({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class LU{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const IU=new LU;function NU(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=ui(t,["challenge","user","excludeCredentials"]),o=ta(e).buffer,a=Object.assign(Object.assign({},r),{id:ta(r.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:o,user:a});if(n&&n.length>0){s.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const l=n[c];s.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:ta(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function MU(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=ui(t,["challenge","allowCredentials"]),i=ta(e).buffer,o=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const s=r[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:ta(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function DU(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ni(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ni(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function $U(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ni(new Uint8Array(i.authenticatorData)),clientDataJSON:Ni(new Uint8Array(i.clientDataJSON)),signature:Ni(new Uint8Array(i.signature)),userHandle:i.userHandle?Ni(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function hE(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function ew(){var t,e;return!!(rt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function UU(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xu("Browser returned unexpected credential type",e)}:{data:null,error:new xu("Empty credential response",e)}}catch(e){return{data:null,error:jU({error:e,options:t})}}}async function FU(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xu("Browser returned unexpected credential type",e)}:{data:null,error:new xu("Empty credential response",e)}}catch(e){return{data:null,error:AU({error:e,options:t})}}}const BU={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},VU={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Eu(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))n[o]=a;else if(r(a))n[o]=a;else if(e(a)){const s=n[o];e(s)?n[o]=Eu(s,a):n[o]=Eu(a)}else n[o]=a}return n}function zU(t,e){return Eu(BU,t,e||{})}function WU(t,e){return Eu(VU,t,e||{})}class HU{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},o){try{const{data:a,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:s};const c=i??IU.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:l}=a.webauthn.credential_options.publicKey;l.name||(l.name=`${l.id}:${n}`),l.displayName||(l.displayName=l.name)}switch(a.webauthn.type){case"create":{const l=zU(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:u,error:d}=await UU({publicKey:l,signal:c});return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const l=WU(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:u,error:d}=await FU(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:l,signal:c}));return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(a){return re(a)?{data:null,error:a}:{data:null,error:new Ri("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!r)return{data:null,error:new Ks("rpId is required for WebAuthn authentication")};try{if(!ew())return{data:null,error:new Ri("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:o});if(!a)return{data:null,error:s};const{webauthn:c}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(a){return re(a)?{data:null,error:a}:{data:null,error:new Ri("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!r)return{data:null,error:new Ks("rpId is required for WebAuthn registration")};try{if(!ew())return{data:null,error:new Ri("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:s};const{data:c,error:l}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:o});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:l}}catch(a){return re(a)?{data:null,error:a}:{data:null,error:new Ri("Unexpected error in register",a)}}}}CU();const qU={url:V$,storageKey:z$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:W$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function tw(t,e,r){return await r()}const So={};class Gs{get jwks(){var e,r;return(r=(e=So[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){So[this.storageKey]=Object.assign(Object.assign({},So[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=So[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){So[this.storageKey]=Object.assign(Object.assign({},So[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},qU),e);if(this.storageKey=o.storageKey,this.instanceID=(r=Gs.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Gs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&rt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new TU({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=uE(o.fetch),this.lock=o.lock||tw,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:rt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=EU:this.lock=tw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new HU(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:lE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Z_(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Z_(this.memoryStorage)),rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${aE}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(rt()&&(r=iU(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),rt()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),J$(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return re(r)?this._returnResult({error:r}):this._returnResult({error:new Ri("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const o=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:lr}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const c=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(o){if(re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var r,n,i;try{let o;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,y=null;this.flowType==="pkce"&&([f,y]=await _o(this.storage,this.storageKey)),o=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:y},xform:lr})}else if("phone"in e){const{phone:u,password:d,options:h}=e;o=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:lr})}else throw new il("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const c=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(o){if(re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:a,options:s}=e;r=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Y_})}else if("phone"in e){const{phone:o,password:a,options:s}=e;r=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Y_})}else throw new il("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const o=new yo;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,o,a,s,c,l,u,d,h;let f,y;if("message"in e)f=e.message,y=e.signature;else{const{chain:v,wallet:g,statement:_,options:m}=e;let w;if(rt())if(typeof g=="object")w=g;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")w=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}const S=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),k=await w.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=fE(k[0]);let T=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!T){const O=await w.request({method:"eth_chainId"});T=PU(O)}const C={domain:S.host,address:E,statement:_,uri:S.href,version:"1",chainId:T,nonce:(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=m==null?void 0:m.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=RU(C),y=await w.request({method:"personal_sign",params:[OU(f),E]})}try{const{data:v,error:g}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:y},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:lr});if(g)throw g;if(!v||!v.session||!v.user){const _=new yo;return this._returnResult({data:{user:null,session:null},error:_})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:g})}catch(v){if(re(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var r,n,i,o,a,s,c,l,u,d,h,f;let y,v;if("message"in e)y=e.message,v=e.signature;else{const{chain:g,wallet:_,statement:m,options:w}=e;let S;if(rt())if(typeof _=="object")S=_;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))S=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=_}const k=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const E=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),m?{statement:m}:null));let T;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")T=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)T=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in T&&"signature"in T&&(typeof T.signedMessage=="string"||T.signedMessage instanceof Uint8Array)&&T.signature instanceof Uint8Array)y=typeof T.signedMessage=="string"?T.signedMessage:new TextDecoder().decode(T.signedMessage),v=T.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${k.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(i=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((d=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...w.signInWithSolana.resources.map(T=>`- ${T}`)]:[]].join(`
`);const E=await S.signMessage(new TextEncoder().encode(y),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=E}}try{const{data:g,error:_}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Ni(v)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:lr});if(_)throw _;if(!g||!g.session||!g.user){const m=new yo;return this._returnResult({data:{user:null,session:null},error:m})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:_})}catch(g){if(re(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(e){const r=await _i(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:o,error:a}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:lr});if(await En(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new yo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(re(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:o,nonce:a}=e,s=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:lr}),{data:c,error:l}=s;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c||!c.session||!c.user){const u=new yo;return this._returnResult({data:{user:null,session:null},error:u})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:l})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,o,a;try{if("email"in e){const{email:s,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await _o(this.storage,this.storageKey));const{error:d}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:s,options:c}=e,{data:l,error:u}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new il("You must provide either an email or phone number.")}catch(s){if(re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var r,n;try{let i,o;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:s}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:lr});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,l=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(i){if(re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,o,a;try{let s=null,c=null;this.flowType==="pkce"&&([s,c]=await _o(this.storage,this.storageKey));const l=await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:c}),headers:this.headers,xform:bU});return!((o=l.data)===null||o===void 0)&&o.url&&rt()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Nt;const{error:i}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(re(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:o}=e,{error:a}=await se(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:i,options:o}=e,{data:a,error:s}=await se(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:s})}throw new il("You must provide either an email or phone number and a type")}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await _i(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Sf:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await _i(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=xf()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=gU(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Dn}):await this._useSession(async r=>{var n,i,o;const{data:a,error:s}=r;if(s)throw s;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nt}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Dn})})}catch(r){if(re(r))return Q$(r)&&(await this._removeSession(),await En(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new Nt;const a=i.session;let s=null,c=null;this.flowType==="pkce"&&e.email!=null&&([s,c]=await _o(this.storage,this.storageKey));const{data:l,error:u}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:c}),jwt:a.access_token,xform:Dn});if(u)throw u;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(re(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Nt;const r=Date.now()/1e3;let n=r,i=!0,o=null;const{payload:a}=Tf(e.access_token);if(a.exp&&(n=a.exp,i=n<=r),i){const{data:s,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(re(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:s}=r;if(s)throw s;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Nt;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!rt())throw new ol("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ol(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new W_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ol("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new W_("No code detected.");const{data:m,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:c,token_type:l}=e;if(!o||!s||!a||!l)throw new ol("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(s);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=Oo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const y=h-d;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,h,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,h,u);const{data:v,error:g}=await this._getUser(o);if(g)throw g;const _={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:d,expires_at:h,refresh_token:a,token_type:l,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:_,redirectType:e.type},error:null})}catch(n){if(re(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await _i(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({error:o});const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&!(G$(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await En(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=nU(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:o},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await _o(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async o=>{var a,s,c,l,u;const{data:d,error:h}=o;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return rt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(re(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:o}}=r;if(i)throw i;const{options:a,provider:s,token:c,access_token:l,nonce:u}=e,d=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:s,id_token:c,access_token:l,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:lr}),{data:h,error:f}=d;return f?this._returnResult({data:{user:null,session:null},error:f}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new yo}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:f}))}catch(i){if(re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:o,error:a}=r;if(a)throw a;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await sU(async i=>(i>0&&await aU(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:lr})),(i,o)=>{const a=200*Math.pow(2,i);return o&&kf(o)&&Date.now()+a-n<Oo})}catch(n){if(this._debug(r,"error",n),re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),rt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await _i(this.storage,this.storageKey);if(i&&this.userStorage){let a=await _i(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Ro(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:xf()}else if(i&&!i.user&&!i.user){const a=await _i(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await En(this.storage,this.storageKey+"-user"),await Ro(this.storage,this.storageKey,i)):i.user=xf()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const o=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Sf;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Sf}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),kf(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(i.access_token);!s&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Nt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new md;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Nt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),re(o)){const a={data:null,error:o};return kf(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,r)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ro(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const o=Q_(i);await Ro(this.storage,this.storageKey,o)}else{const i=Q_(r);await Ro(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await En(this.storage,this.storageKey),await En(this.storage,this.storageKey+"-code-verifier"),await En(this.storage,this.storageKey+"-user"),this.userStorage&&await En(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Oo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Oo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Oo}ms, refresh threshold is ${Lp} ticks`),i<=Lp&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof dE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,a]=await _o(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;return o?this._returnResult({data:null,error:o}):await se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:l}=await se(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(e.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?DU(e.webauthn.credential_response):$U(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:c}=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:c}))})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:NU(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:MU(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Tf(n.access_token);let a=null;o.aal&&(a=o.aal);let s=a;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(s="aal2");const l=o.amr||[];return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:l},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await se(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Nt})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Nt});const a=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&rt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Nt});const a=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&rt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Nt})})}catch(e){if(re(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Nt})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(s=>s.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(s=>s.kid===e),n&&this.jwks_cached_at+q$>i)return n;const{data:o,error:a}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,n=o.keys.find(s=>s.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:f,error:y}=await this.getSession();if(y||!f.session)return this._returnResult({data:null,error:y});n=f.session.access_token}const{header:i,payload:o,signature:a,raw:{header:s,payload:c}}=Tf(n);r!=null&&r.allowExpired||pU(o.exp);const l=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!l){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:o,header:i,signature:a},error:null}}const u=vU(i.alg),d=await crypto.subtle.importKey("jwk",l,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,a,tU(`${s}.${c}`)))throw new Mp("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}}Gs.nextInstanceID={};const KU=Gs;class GU extends KU{constructor(e){super(e)}}class QU{constructor(e,r,n){var i,o,a;this.supabaseUrl=e,this.supabaseKey=r;const s=B$(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const c=`sb-${s.hostname.split(".")[0]}-auth-token`,l={db:L$,realtime:N$,auth:Object.assign(Object.assign({},I$),{storageKey:c}),global:A$},u=F$(n??{},l);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=u.auth)!==null&&a!==void 0?a:{},this.headers,u.global.fetch),this.fetch=$$(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new ND(new URL("rest/v1",s).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new O$(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new AD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:o,storageKey:a,flowType:s,lock:c,debug:l,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new GU({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:o,flowType:s,lock:c,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new XD(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const JU=(t,e,r)=>new QU(t,e,r);function YU(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}YU()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const XU=" https://klfkaebvuqdjgljomglo.supabase.co",ZU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtsZmthZWJ2dXFkamdsam9tZ2xvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5MTA3MjgsImV4cCI6MjA4MDQ4NjcyOH0.AIyXiiHwEkqcorP08LBxC1po7Qx8B6uDM1FibjpxTwU",vt=JU(XU,ZU,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Hi=()=>{const t=hn();return p.jsx("footer",{className:"border-t border-border bg-card/80 backdrop-blur-sm",children:p.jsxs("div",{className:"container mx-auto px-4 py-8 sm:py-12",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 sm:gap-10",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{onClick:()=>t("/landing"),className:"flex items-center gap-2 cursor-pointer w-fit",children:p.jsx("img",{src:"/logo.png",alt:"PrimeTalker Logo",className:"w-36 h-auto object-contain"})}),p.jsx("p",{className:"text-muted-foreground text-sm max-w-sm leading-relaxed",children:"Break language barriers in real-time. Connect with anyone, anywhere with instant voice translation during calls."})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("h4",{className:"text-foreground font-semibold text-lg",children:"Contact Us"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-start gap-3 group",children:[p.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0 group-hover:bg-primary/20 transition-colors",children:p.jsx(AL,{className:"w-4 h-4 text-primary"})}),p.jsxs("div",{className:"text-sm text-muted-foreground leading-relaxed",children:[p.jsx("p",{className:"font-medium text-foreground",children:"Catalina Business Solutions Inc (CBS Inc)"}),p.jsx("p",{children:"8888 Keystone Crossing, Suite 1373"}),p.jsx("p",{children:"Indianapolis, IN 46240"})]})]}),p.jsxs("a",{href:"tel:+13175754181",className:"flex items-center gap-3 group hover:translate-x-1 transition-transform",children:[p.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0 group-hover:bg-primary/20 transition-colors",children:p.jsx(Xk,{className:"w-4 h-4 text-primary"})}),p.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-foreground transition-colors",children:"+1-317-575-4181"})]}),p.jsxs("a",{href:"mailto:info@cbs-corp.com",className:"flex items-center gap-3 group hover:translate-x-1 transition-transform",children:[p.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0 group-hover:bg-primary/20 transition-colors",children:p.jsx(Jk,{className:"w-4 h-4 text-primary"})}),p.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-foreground transition-colors",children:"info@cbs-corp.com"})]})]})]})]}),p.jsx("div",{className:"mt-6 sm:mt-10 pt-4 sm:pt-6 border-t border-border/50",children:p.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm text-center",children:" 2025 PrimeTalker by Catalina Business Solutions Inc. All rights reserved."})})]})})},eF=()=>{const t=hn(),[e,r]=b.useState(null),[n,i]=b.useState(!1);b.useEffect(()=>{vt.auth.getUser().then(({data:a})=>{r((a==null?void 0:a.user)||null)})},[]);const o=({user:a})=>{var s;return p.jsx("img",{src:((s=a.user_metadata)==null?void 0:s.avatar_url)||"/default-avatar.svg",className:"w-10 h-10 rounded-full border cursor-pointer hover:scale-105 transition",onClick:()=>i(!0)})};return p.jsxs("div",{className:"min-h-screen bg-gradient-hero",children:[p.jsx("nav",{className:"border-b border-border bg-background/80 backdrop-blur-sm sticky top-0 z-50",children:p.jsxs("div",{className:"container mx-auto px-4 py-3 sm:py-4 flex items-center justify-between",children:[p.jsx("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>t("/landing"),children:p.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-28 sm:w-40 h-auto object-contain select-none"})}),e?p.jsx(o,{user:e}):p.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[p.jsx(me,{variant:"ghost",size:"sm",onClick:()=>t("/auth"),className:"text-sm",children:"Sign In"}),p.jsx(me,{onClick:()=>t("/auth"),size:"sm",className:"shadow-primary text-sm",children:"Get Started"})]})]})}),p.jsx("section",{className:"container mx-auto px-4 py-12 sm:py-20 text-center animate-fade-in",children:p.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[p.jsxs("h2",{className:"text-3xl sm:text-5xl md:text-6xl font-bold text-foreground leading-tight",children:["Break Language Barriers in",p.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-primary",children:[" ","Real-Time"]})]}),p.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Connect with anyone, anywhere. PrimeTalker provides instant translation during calls, making global communication seamless."}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center pt-4",children:[p.jsx(me,{size:"lg",onClick:()=>t(e?"/rooms":"/auth"),className:"shadow-primary text-lg px-8",children:"Start Meeting"}),p.jsx("a",{href:"/PrimeTalker-User-Guide.html",download:"PrimeTalker-User-Guide.html",className:"inline-flex",children:p.jsxs(me,{size:"lg",variant:"outline",className:"text-lg px-8 gap-2",children:[p.jsx(RL,{className:"w-5 h-5"}),"Download Guide"]})})]})]})}),p.jsx("section",{className:"container mx-auto px-4 py-20",children:p.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[p.jsx(al,{icon:p.jsx(rd,{className:"w-8 h-8"}),title:"HD Voice Calls",description:"Crystal clear quality powered by Twilio Voice SDK."}),p.jsx(al,{icon:p.jsx(td,{className:"w-8 h-8"}),title:"Real-Time Translation",description:"Instant translation in 100+ languages."}),p.jsx(al,{icon:p.jsx(dm,{className:"w-8 h-8"}),title:"Voice Recognition",description:"Advanced STT using Deepgram/Google Cloud."}),p.jsx(al,{icon:p.jsx($L,{className:"w-8 h-8"}),title:"Secure Platform",description:"Encrypted communication for safe meetings."})]})}),p.jsx("section",{className:"container mx-auto px-4 py-20",children:p.jsxs("div",{className:"bg-card rounded-2xl p-12 text-center shadow-primary border border-border",children:[p.jsx("h3",{className:"text-3xl md:text-4xl font-bold text-foreground mb-4",children:"Ready to Connect Globally?"}),p.jsx("p",{className:"text-lg text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of users breaking language barriers every day."}),p.jsx(me,{size:"lg",onClick:()=>t(e?"/rooms":"/auth"),className:"shadow-primary text-lg px-8",children:"Get Started Free"})]})}),p.jsx(Hi,{}),e&&p.jsx(tF,{user:e,open:n,onClose:()=>i(!1)})]})},al=({icon:t,title:e,description:r})=>p.jsxs("div",{className:"bg-card rounded-xl p-6 border border-border hover:shadow-primary transition-all duration-300 hover:-translate-y-1",children:[p.jsx("div",{className:"w-14 h-14 rounded-lg bg-primary/10 flex items-center justify-center text-primary mb-4",children:t}),p.jsx("h4",{className:"text-xl font-semibold text-foreground mb-2",children:e}),p.jsx("p",{className:"text-muted-foreground",children:r})]}),tF=({user:t,open:e,onClose:r})=>{var S,k,E,T,C;const n=hn(),[i,o]=b.useState(!1),[a,s]=b.useState(((S=t.user_metadata)==null?void 0:S.full_name)||((k=t.user_metadata)==null?void 0:k.username)||t.email.split("@")[0]),[c,l]=b.useState(((E=t.user_metadata)==null?void 0:E.avatar_url)||"/default-avatar.svg"),[u,d]=b.useState(null),[h,f]=b.useState(!1),[y,v]=b.useState(null),g=async()=>{await vt.auth.signOut(),localStorage.removeItem("prime_user"),localStorage.removeItem("username"),window.location.href="/landing"},_=O=>{var N;const A=(N=O.target.files)==null?void 0:N[0];if(A){if(A.size>2*1024*1024){v("Image must be less than 2MB");return}v(null),d(A),l(URL.createObjectURL(A))}},m=async()=>{var O;try{f(!0),v(null);let A=(O=t.user_metadata)==null?void 0:O.avatar_url;if(u){const j=u.name.split(".").pop(),D=`${t.id}/${Date.now()}.${j}`,{error:P}=await vt.storage.from("avatars").upload(D,u,{upsert:!0});if(P)throw P.message.includes("bucket")||P.message.includes("not found")?new Error("Storage bucket not configured. Please create 'avatars' bucket in Supabase."):P;const{data:M}=vt.storage.from("avatars").getPublicUrl(D);A=M.publicUrl}const{error:N}=await vt.auth.updateUser({data:{full_name:a,avatar_url:A}});if(N)throw N;o(!1),d(null),window.location.reload()}catch(A){v(A.message||"Failed to update profile")}finally{f(!1)}},w=()=>{var O,A,N;o(!1),d(null),l(((O=t.user_metadata)==null?void 0:O.avatar_url)||"/default-avatar.svg"),s(((A=t.user_metadata)==null?void 0:A.full_name)||((N=t.user_metadata)==null?void 0:N.username)||t.email.split("@")[0]),v(null)};return p.jsxs(p.Fragment,{children:[p.jsx("div",{className:`
          fixed inset-0 bg-black/60 backdrop-blur-sm transition-opacity duration-300 z-40
          ${e?"opacity-100 pointer-events-auto":"opacity-0 pointer-events-none"}
        `,onClick:r}),p.jsxs("div",{className:`
          fixed top-0 right-0 h-full w-[340px] bg-white dark:bg-slate-900 
          shadow-2xl z-50 rounded-l-3xl border-l border-gray-100 dark:border-slate-800
          transform transition-transform duration-300 ease-out flex flex-col
          ${e?"translate-x-0":"translate-x-full"}
        `,children:[p.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 dark:border-slate-800 flex items-center justify-between",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white tracking-tight",children:i?"Edit Profile":"Account"}),p.jsx("button",{onClick:r,className:"w-9 h-9 rounded-full bg-gray-100 dark:bg-slate-800 hover:bg-gray-200 dark:hover:bg-slate-700 flex items-center justify-center transition-colors",children:p.jsx(fm,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]}),p.jsxs("div",{className:"px-6 py-8 flex flex-col items-center text-center bg-gradient-to-b from-gray-50 to-white dark:from-slate-800/50 dark:to-slate-900",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"w-20 h-20 rounded-full ring-4 ring-white dark:ring-slate-800 shadow-xl overflow-hidden",children:p.jsx("img",{src:c,alt:"Profile",className:"w-full h-full object-cover",onError:O=>{O.target.src="/default-avatar.svg"}})}),i&&p.jsxs("label",{className:"absolute -bottom-1 -right-1 w-8 h-8 rounded-full bg-blue-600 hover:bg-blue-700 flex items-center justify-center cursor-pointer shadow-lg transition-colors",children:[p.jsx(EL,{className:"w-4 h-4 text-white"}),p.jsx("input",{type:"file",className:"hidden",accept:"image/png,image/jpeg,image/webp",onChange:_})]})]}),i?p.jsxs("div",{className:"mt-5 w-full",children:[p.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1.5 text-left uppercase tracking-wider",children:"Display Name"}),p.jsx("input",{value:a,onChange:O=>s(O.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",placeholder:"Enter your name"})]}):p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:((T=t.user_metadata)==null?void 0:T.full_name)||((C=t.user_metadata)==null?void 0:C.username)||t.email.split("@")[0]}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:t.email})]})]}),y&&p.jsx("div",{className:"mx-6 mt-4 px-4 py-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/50 rounded-xl",children:p.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:y})}),p.jsx("div",{className:"flex-1 px-4 py-4 overflow-y-auto",children:i?p.jsxs("div",{className:"space-y-3 pt-2",children:[p.jsx("button",{onClick:m,disabled:h,className:"w-full py-3.5 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-xl font-medium text-sm transition-colors flex items-center justify-center gap-2",children:h?p.jsxs(p.Fragment,{children:[p.jsx(jL,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):p.jsxs(p.Fragment,{children:[p.jsx(NL,{className:"w-4 h-4"}),"Save Changes"]})}),p.jsx("button",{onClick:w,disabled:h,className:"w-full py-3.5 bg-gray-100 dark:bg-slate-800 hover:bg-gray-200 dark:hover:bg-slate-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium text-sm transition-colors",children:"Cancel"})]}):p.jsxs("div",{className:"space-y-1",children:[p.jsxs("button",{className:"w-full px-4 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-slate-800/50 rounded-xl transition-colors text-left group",onClick:()=>o(!0),children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center group-hover:bg-blue-100 dark:group-hover:bg-blue-900/30 transition-colors",children:p.jsx(IL,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Edit Profile"}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Update name and photo"})]})]}),p.jsxs("button",{className:"w-full px-4 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-slate-800/50 rounded-xl transition-colors text-left group",onClick:()=>{r(),n("/rooms")},children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 flex items-center justify-center group-hover:bg-emerald-100 dark:group-hover:bg-emerald-900/30 transition-colors",children:p.jsx(rd,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"My Rooms"}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Create or join meetings"})]})]}),p.jsxs("a",{href:"/PrimeTalker-User-Guide.html",target:"_blank",className:"w-full px-4 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-slate-800/50 rounded-xl transition-colors text-left group block",children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-50 dark:bg-amber-900/20 flex items-center justify-center group-hover:bg-amber-100 dark:group-hover:bg-amber-900/30 transition-colors",children:p.jsx(xL,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"User Guide"}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Learn how to use the app"})]})]}),p.jsxs("button",{className:"w-full px-4 py-3.5 flex items-center gap-4 rounded-xl text-left opacity-50 cursor-not-allowed",disabled:!0,children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-slate-800 flex items-center justify-center",children:p.jsx(ML,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Settings"}),p.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Coming soon"})]})]})]})}),!i&&p.jsx("div",{className:"px-4 py-4 border-t border-gray-100 dark:border-slate-800",children:p.jsxs("button",{onClick:g,className:"w-full py-3 flex items-center justify-center gap-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl font-medium text-sm transition-colors",children:[p.jsx(Qk,{className:"w-4 h-4"}),"Sign Out"]})})]})]})},rF=ed("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Dp({className:t,variant:e,...r}){return p.jsx("div",{className:Le(rF({variant:e}),t),...r})}function nF({roomId:t,userType:e,myLanguage:r,myName:n,onPartnerJoined:i,onPartnerLeft:o}){const[a,s]=b.useState("Disconnected"),[c,l]=b.useState(!1),[u,d]=b.useState(!0),[h,f]=b.useState(0),[y,v]=b.useState(0),[g,_]=b.useState([]),[m,w]=b.useState(""),S=b.useRef(null),k=b.useRef(null),E=b.useRef(null),T=b.useRef(null),C=b.useRef([]),O=b.useRef(null),A=b.useRef(null),N=b.useRef(null),j=b.useRef([]),D=b.useRef(!1),P=b.useRef(!0),M=b.useRef(null);b.useEffect(()=>{P.current=u},[u]);const I=b.useCallback(()=>{const K=new URL(wa);return`${K.protocol==="https:"?"wss:":"ws:"}//${K.host}/audio-stream`},[]),$=b.useCallback(async()=>{if(D.current||j.current.length===0)return;D.current=!0;const K=j.current.shift();try{const z=atob(K),W=new Uint8Array(z.length);for(let te=0;te<z.length;te++)W[te]=z.charCodeAt(te);const ee=new Blob([W],{type:"audio/wav"}),V=URL.createObjectURL(ee),q=new Audio(V);q.volume=1,q.onended=()=>{URL.revokeObjectURL(V),D.current=!1,$()},q.onerror=()=>{D.current=!1,$()},await q.play(),console.log(" Playing translated audio")}catch(z){console.error("Error playing audio:",z),D.current=!1,$()}},[]),R=b.useCallback(K=>{try{const z=JSON.parse(K.data);switch(z.event){case"user_joined":console.log(" Partner joined:",z.name),i==null||i(z.name,z.language);break;case"user_left":console.log(" Partner left"),o==null||o();break;case"transcript_interim":w(z.text||"");break;case"translation":w("");const W={id:`${Date.now()}-${Math.random()}`,originalText:z.originalText,translatedText:z.translatedText,fromUser:z.fromUser,fromLanguage:z.fromLanguage,toLanguage:z.toLanguage,timestamp:Date.now()};_(ee=>[...ee,W]);break;case"audio_playback":j.current.push(z.audio),$(),v(50),M.current&&clearTimeout(M.current),M.current=window.setTimeout(()=>v(0),2e3);break}}catch(z){console.error("Error parsing message:",z)}},[i,o,$]),L=b.useCallback(async()=>{try{const K=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:48e3,channelCount:1}});E.current=K;const z=new AudioContext({sampleRate:48e3});k.current=z;const W=z.createMediaStreamSource(K),ee=z.createAnalyser();ee.fftSize=256,N.current=ee,W.connect(ee);const V=new Uint8Array(ee.frequencyBinCount),q=()=>{if(!N.current)return;N.current.getByteFrequencyData(V);let ce=0;for(let ge=0;ge<V.length;ge++)ce+=V[ge];const ae=ce/V.length,ue=Math.min(100,Math.round(ae/255*100));f(ue),A.current=requestAnimationFrame(q)};A.current=requestAnimationFrame(q);const te=z.createScriptProcessor(8192,1,1);T.current=te,te.onaudioprocess=ce=>{if(!P.current)return;const ae=ce.inputBuffer.getChannelData(0),ue=new Int16Array(ae.length);for(let ge=0;ge<ae.length;ge++){const Oe=Math.max(-1,Math.min(1,ae[ge]));ue[ge]=Oe<0?Oe*32768:Oe*32767}C.current.push(ue)},W.connect(te),te.connect(z.destination),O.current=window.setInterval(()=>{const ce=S.current;if(!ce||ce.readyState!==WebSocket.OPEN)return;if(!P.current){C.current=[];return}if(C.current.length===0)return;const ae=C.current.reduce((Fe,Cr)=>Fe+Cr.length,0),ue=new Int16Array(ae);let ge=0;for(const Fe of C.current)ue.set(Fe,ge),ge+=Fe.length;C.current=[];const Oe=new Uint8Array(ue.buffer);let Xe="";for(let Fe=0;Fe<Oe.length;Fe++)Xe+=String.fromCharCode(Oe[Fe]);const ft=btoa(Xe);ce.send(JSON.stringify({event:"audio",audio:ft}))},200),console.log(" Audio capture started")}catch(K){console.error("Error starting audio:",K),s("Microphone Error")}},[u]),B=b.useCallback(async()=>{var W;if(((W=S.current)==null?void 0:W.readyState)===WebSocket.OPEN)return;s("Connecting...");const K=I();console.log(" Connecting to:",K);const z=new WebSocket(K);S.current=z,z.onopen=()=>{console.log(" WebSocket connected"),s("Connected"),l(!0),z.send(JSON.stringify({event:"connected",roomId:t,userType:e,myLanguage:r,myName:n})),L()},z.onmessage=R,z.onclose=()=>{console.log(" WebSocket closed"),s("Disconnected"),l(!1)},z.onerror=ee=>{console.error("WebSocket error:",ee),s("Connection Error")}},[t,e,r,n,I,R,L]),F=b.useCallback(()=>{O.current&&(clearInterval(O.current),O.current=null),A.current&&(cancelAnimationFrame(A.current),A.current=null),T.current&&(T.current.disconnect(),T.current=null),k.current&&(k.current.close(),k.current=null),E.current&&(E.current.getTracks().forEach(K=>K.stop()),E.current=null),N.current=null,S.current&&(S.current.readyState===WebSocket.OPEN&&S.current.send(JSON.stringify({event:"disconnect"})),S.current.close(),S.current=null),l(!1),s("Disconnected"),f(0)},[]),Q=b.useCallback(()=>{d(K=>{const z=!K;return P.current=z,E.current&&E.current.getAudioTracks().forEach(W=>{W.enabled=z}),z||(C.current=[]),console.log(` Mute toggled: ${z?"UNMUTED":"MUTED"}`),z})},[]);return b.useEffect(()=>()=>{F()},[F]),{status:a,isConnected:c,isAudioOn:u,localLevel:h,partnerLevel:y,transcripts:g,interimText:m,connect:B,disconnect:F,toggleMute:Q,setIsAudioOn:d}}var $m={exports:{}},Um={},vc={},Fm={},iF=function(t){var e=t.location,r=t.URL;return[e,r].some(function(n){return!n})?function(i){return Promise.reject(new Error("Failed to import: ".concat(i,": dynamicImport is not supported")))}:(t.__twilioVideoImportedModules={},function(i){return i in t.__twilioVideoImportedModules?Promise.resolve(t.__twilioVideoImportedModules[i]):new Function("scope","return import('".concat(new r(i,e),"').then(m => scope.__twilioVideoImportedModules['").concat(i,"'] = m);"))(t)})}(globalThis),pE=function(){},Ur="undefined",oF=typeof window!==Ur&&typeof window.navigator!==Ur&&/Trident\/|MSIE /.test(window.navigator.userAgent),$p=["trace","debug","info","warn","error"];function rw(t,e){var r=t[e];if(typeof r.bind=="function")return r.bind(t);try{return Function.prototype.bind.call(r,t)}catch{return function(){return Function.prototype.apply.apply(r,[t,arguments])}}}function aF(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function sF(t){return t==="debug"&&(t="log"),typeof console===Ur?!1:t==="trace"&&oF?aF:console[t]!==void 0?rw(console,t):console.log!==void 0?rw(console,"log"):pE}function vE(t,e){for(var r=0;r<$p.length;r++){var n=$p[r];this[n]=r<t?pE:this.methodFactory(n,t,e)}this.log=this.debug}function cF(t,e,r){return function(){typeof console!==Ur&&(vE.call(this,e,r),this[t].apply(this,arguments))}}function lF(t,e,r){return sF(t)||cF.apply(this,arguments)}function mE(t,e,r){var n=this,i,o="loglevel";typeof t=="string"?o+=":"+t:typeof t=="symbol"&&(o=void 0);function a(l){var u=($p[l]||"silent").toUpperCase();if(!(typeof window===Ur||!o)){try{window.localStorage[o]=u;return}catch{}try{window.document.cookie=encodeURIComponent(o)+"="+u+";"}catch{}}}function s(){var l;if(!(typeof window===Ur||!o)){try{l=window.localStorage[o]}catch{}if(typeof l===Ur)try{var u=window.document.cookie,d=u.indexOf(encodeURIComponent(o)+"=");d!==-1&&(l=/^([^;]+)/.exec(u.slice(d))[1])}catch{}return n.levels[l]===void 0&&(l=void 0),l}}n.name=t,n.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},n.methodFactory=r||lF,n.getLevel=function(){return i},n.setLevel=function(l,u){if(typeof l=="string"&&n.levels[l.toUpperCase()]!==void 0&&(l=n.levels[l.toUpperCase()]),typeof l=="number"&&l>=0&&l<=n.levels.SILENT){if(i=l,u!==!1&&a(l),vE.call(n,l,t),typeof console===Ur&&l<n.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+l},n.setDefaultLevel=function(l){s()||n.setLevel(l,!1)},n.enableAll=function(l){n.setLevel(n.levels.TRACE,l)},n.disableAll=function(l){n.setLevel(n.levels.SILENT,l)};var c=s();c==null&&(c=e??"WARN"),n.setLevel(c,!1)}var zr=new mE,Up={};zr.getLogger=function(e){if(typeof e!="symbol"&&typeof e!="string"||e==="")throw new TypeError("You must supply a name when creating a logger.");var r=Up[e];return r||(r=Up[e]=new mE(e,zr.getLevel(),zr.methodFactory)),r};var uF=typeof window!==Ur?window.log:void 0;zr.noConflict=function(){return typeof window!==Ur&&window.log===zr&&(window.log=uF),zr};zr.getLoggers=function(){return Up};zr.default=zr;var gE=zr,Bm={exports:{}};const dF="twilio-video",fF="2.33.0",yE={name:dF,version:fF};Bm.exports;(function(t){var e=yE;t.exports.SDK_NAME="".concat(e.name,".js"),t.exports.SDK_VERSION=e.version,t.exports.SDP_FORMAT="unified",t.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},t.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},t.exports.DEFAULT_ENVIRONMENT="prod",t.exports.DEFAULT_REALM="us1",t.exports.DEFAULT_REGION="gll",t.exports.DEFAULT_LOG_LEVEL="warn",t.exports.DEFAULT_LOGGER_NAME="twilio-video",t.exports.WS_SERVER=function(n,i){return i=i==="gll"?"global":encodeURIComponent(i),n==="prod"?"wss://".concat(i,".vss.twilio.com/signaling"):"wss://".concat(i,".vss.").concat(n,".twilio.com/signaling")},t.exports.PUBLISH_MAX_ATTEMPTS=5,t.exports.PUBLISH_BACKOFF_JITTER=10,t.exports.PUBLISH_BACKOFF_MS=20;function r(n){return["a","e","i","o","u"].includes(n.toLowerCase()[0])?"an":"a"}t.exports.typeErrors={ILLEGAL_INVOKE:function(n,i){return new TypeError("Illegal call to ".concat(n,": ").concat(i))},INVALID_TYPE:function(n,i){return new TypeError("".concat(n," must be ").concat(r(i)," ").concat(i))},INVALID_VALUE:function(n,i){return new RangeError("".concat(n," must be one of ").concat(i.join(", ")))},REQUIRED_ARGUMENT:function(n){return new TypeError("".concat(n," must be specified"))}},t.exports.DEFAULT_FRAME_RATE=24,t.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,t.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,t.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,t.exports.DEFAULT_NQ_LEVEL_LOCAL=1,t.exports.DEFAULT_NQ_LEVEL_REMOTE=0,t.exports.MAX_NQ_LEVEL=3,t.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,t.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,t.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:t.exports.DEFAULT_SESSION_TIMEOUT_SEC*1e3,jitter:1},t.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},t.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},t.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},t.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},t.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},t.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}})(Bm);var Ee=Bm.exports,hF=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},pF=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},vF=gE.getLogger,_E=Ee,nw=_E.DEFAULT_LOG_LEVEL,mF=_E.DEFAULT_LOGGER_NAME,Fl=Ee.typeErrors,Ya;function gF(t){if(Ya=Ya||new Map,Ya.has(t))return Ya.get(t);var e=new Set;return Ya.set(t,e),e}var Vm=function(){function t(e,r,n,i,o){if(typeof e!="string")throw Fl.INVALID_TYPE("moduleName","string");if(!r)throw Fl.REQUIRED_ARGUMENT("component");typeof n!="object"&&(n={}),o=o||vF,iw(n),Object.defineProperties(this,{_component:{value:r},_logLevels:{value:n},_warnings:{value:new Set},_loggerName:{get:function(){var s=i&&typeof i=="string"?i:mF;return this._logLevelsEqual||(s="".concat(s,"-").concat(e)),s}},_logger:{get:function(){var s=o(this._loggerName),c=this._logLevels[e]||nw;return c=c==="off"?"silent":c,s.setDefaultLevel(c),s}},_logLevelsEqual:{get:function(){return new Set(Object.values(this._logLevels)).size===1}},logLevel:{get:function(){return t.getLevelByName(n[e]||nw)}},name:{get:r.toString.bind(r)}})}return t.getLevelByName=function(e){return isNaN(e)?(e=e.toUpperCase(),SE(e),t[e]):parseInt(e,10)},t.prototype.createLog=function(e,r){var n=this._loggerName;return this._logLevelsEqual||(n=n.substring(0,n.lastIndexOf("-"))),new t(e,r,this._logLevels,n)},t.prototype.setLevels=function(e){return iw(e),Object.assign(this._logLevels,e),this},t.prototype.log=function(e,r){var n=t._levels[e];if(!n)throw Fl.INVALID_VALUE("logLevel",bE);n=n.toLowerCase();var i=[new Date().toISOString(),n,this.name];return(this._logger[n]||function(){}).apply(void 0,pF([],hF(i.concat(r)),!1)),this},t.prototype.debug=function(){return this.log(t.DEBUG,[].slice.call(arguments))},t.prototype.deprecated=function(e){var r=gF(this._component.constructor);return r.has(e)?this:(r.add(e),this.warn(e))},t.prototype.info=function(){return this.log(t.INFO,[].slice.call(arguments))},t.prototype.warn=function(){return this.log(t.WARN,[].slice.call(arguments))},t.prototype.warnOnce=function(e){return this._warnings.has(e)?this:(this._warnings.add(e),this.warn(e))},t.prototype.error=function(){return this.log(t.ERROR,[].slice.call(arguments))},t.prototype.throw=function(e,r){throw e.clone&&(e=e.clone(r)),this.log(t.ERROR,e),e},t}();Object.defineProperties(Vm,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var wE={},bE=[],yF=Vm._levels.map(function(t,e){return wE[t]=!0,bE.push(e),t});function SE(t){if(!(t in wE))throw Fl.INVALID_VALUE("level",yF)}function iw(t){Object.keys(t).forEach(function(e){SE(t[e].toUpperCase())})}var pn=Vm,_F=x&&x.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},wF=x&&x.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(Fm,"__esModule",{value:!0});Fm.createNoiseCancellationAudioProcessor=TF;var bF=iF,SF={krisp:{supportedVersion:"1.0.0",pluginFile:"krispsdk.mjs"},rnnoise:{supportedVersion:"0.6.0",pluginFile:"rnnoise_sdk.mjs"}},kF=function(t){var e=t.supportedVersion,r=t.plugin,n=t.log;if(!r.getVersion||!r.isSupported)throw new Error("Plugin does not export getVersion/isSupported api. Are you using old version of the plugin ?");var i=r.getVersion();n.debug("Plugin Version = ".concat(i));var o=e.split(".").map(function(l){return Number(l)}),a=i.split(".").map(function(l){return Number(l)});if(o.length!==3||a.length!==3)throw new Error("Unsupported Plugin version format: ".concat(e,", ").concat(i));if(o[0]!==a[0])throw new Error("Major version mismatch: [Plugin version ".concat(i,"],  [Supported Version ").concat(e,"]"));if(a[1]<o[1])throw new Error("Minor version mismatch: [Plugin version ".concat(i,"] < [Supported Version ").concat(e,"]"));var s=new AudioContext,c=r.isSupported(s);if(s.close(),!c)throw new Error("Noise Cancellation plugin is not supported on your browser")},ow=new Map;function TF(t,e){return _F(this,void 0,void 0,function(){var r,n,i,o,a,s,c,l,u;return wF(this,function(d){switch(d.label){case 0:if(r=ow.get(t.vendor),r)return[3,6];if(n=SF[t.vendor],!n)throw new Error("Unsupported NoiseCancellationOptions.vendor: ".concat(t.vendor));i=n.supportedVersion,o=n.pluginFile,a=t.sdkAssetsPath,s="".concat(a,"/").concat(o),d.label=1;case 1:return d.trys.push([1,5,,6]),e.debug("loading noise cancellation sdk: ",s),[4,bF(s)];case 2:return c=d.sent(),e.debug("Loaded noise cancellation sdk:",c),l=c.default,kF({supportedVersion:i,plugin:l,log:e}),l.isInitialized()?[3,4]:(e.debug("initializing noise cancellation sdk: ",a),[4,l.init({rootDir:a})]);case 3:d.sent(),e.debug("noise cancellation sdk initialized!"),d.label=4;case 4:return r={vendor:t.vendor,isInitialized:function(){return l.isInitialized()},isConnected:function(){return l.isConnected()},isEnabled:function(){return l.isEnabled()},disconnect:function(){return l.disconnect()},enable:function(){return l.enable()},disable:function(){return l.disable()},destroy:function(){return l.destroy()},setLogging:function(h){return l.setLogging(h)},connect:function(h){e.debug("connect: ",h.id),l.isConnected()&&l.disconnect();var f=l.connect(new MediaStream([h]));if(!f)throw new Error("Error connecting with noise cancellation sdk");var y=f.getAudioTracks()[0];if(!y)throw new Error("Error getting clean track from noise cancellation sdk");return l.enable(),y}},ow.set(t.vendor,r),[3,6];case 5:throw u=d.sent(),e.error("Error loading noise cancellation sdk:".concat(s),u),u;case 6:return[2,r]}})})}var kE=x&&x.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},TE=x&&x.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(vc,"__esModule",{value:!0});vc.NoiseCancellationImpl=void 0;vc.applyNoiseCancellation=EF;var xF=Fm,xE=function(){function t(e,r){this._processor=e,this._sourceTrack=r,this._disabledPermanent=!1}return Object.defineProperty(t.prototype,"vendor",{get:function(){return this._processor.vendor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sourceTrack",{get:function(){return this._sourceTrack},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._processor.isEnabled()},enumerable:!1,configurable:!0}),t.prototype.enable=function(){if(this._disabledPermanent)throw new Error("".concat(this.vendor," noise cancellation is disabled permanently for this track"));return this._processor.enable(),Promise.resolve()},t.prototype.disable=function(){return this._processor.disable(),Promise.resolve()},t.prototype.reacquireTrack=function(e){return kE(this,void 0,void 0,function(){var r,n,i;return TE(this,function(o){switch(o.label){case 0:return r=this._processor.isEnabled(),this._processor.disconnect(),[4,e()];case 1:return n=o.sent(),this._sourceTrack=n,[4,this._processor.connect(n)];case 2:return i=o.sent(),r?this._processor.enable():this._processor.disable(),[2,i]}})})},t.prototype.disablePermanently=function(){return this._disabledPermanent=!0,this.disable()},t.prototype.stop=function(){this._processor.disconnect(),this._sourceTrack.stop()},t}();vc.NoiseCancellationImpl=xE;function EF(t,e,r){return kE(this,void 0,void 0,function(){var n,i,o,a;return TE(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(0,xF.createNoiseCancellationAudioProcessor)(e,r)];case 1:return n=s.sent(),i=n.connect(t),o=new xE(n,t),[2,{cleanTrack:i,noiseCancellation:o}];case 2:return a=s.sent(),r.warn("Failed to create noise cancellation. Returning normal audio track: ".concat(a)),[2,{cleanTrack:t}];case 3:return[2]}})})}var J={},be={},EE=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},CF=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};function PF(){var t={};return t.promise=new Promise(function(e,r){t.resolve=e,t.reject=r}),t}function OF(t,e,r,n){if(!(n in e)&&!n.match(/^on[a-z]+$/)){var i=!1;try{var o=Object.getOwnPropertyDescriptor(t,n);i=o&&!!o.get}catch{}if(!i){var a;try{a=typeof t[n]}catch{}a==="function"&&(e[n]=function(){return this[r][n].apply(this[r],arguments)})}}}function RF(t,e,r){for(var n in t)OF(t,e,r,n)}function jF(t,e){t=Array.isArray(t)?new Set(t):new Set(t.values()),e=Array.isArray(e)?new Set(e):new Set(e.values());var r=new Set;return t.forEach(function(n){e.has(n)||r.add(n)}),r}function AF(t,e){var r=t instanceof Map||t instanceof Set?Array.from(t.values()):t;return r.reduce(function(n,i){return n.concat(e(i))},[])}function zm(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:null}function Wm(t){return typeof t>"u"&&(t=zm()),/Chrome|CriOS/.test(t)?"chrome":/Firefox|FxiOS/.test(t)?"firefox":/Safari|iPhone|iPad|iPod/.test(t)?"safari":null}function LF(t){typeof t>"u"&&(t=zm());var e={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[Wm(t)];if(!e)return null;var r=new RegExp("(".concat(e,")/([^\\s]+)")),n=EE(t.match(r)||[],3),i=n[2];if(!i)return null;var o=i.split(".").map(Number);return{major:isNaN(o[0])?null:o[0],minor:isNaN(o[1])?null:o[1]}}function IF(t){return typeof t>"u"&&(t=zm()),/Mobi/.test(t)&&Wm()==="chrome"&&/iPad|iPhone|iPod/.test(t)}function NF(t,e){var r=null;Object.defineProperty(t,"on"+e,{get:function(){return r},set:function(n){r&&this.removeEventListener(e,r),typeof n=="function"?(r=n,this.addEventListener(e,r)):r=null}})}function MF(t,e,r){return e?t.then(e,r):t}function DF(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t==="x"?e:e&3|8;return r.toString(16)})}function $F(t,e,r){Object.getOwnPropertyNames(t).forEach(function(n){UF(t,e,r,n)})}function UF(t,e,r,n){if(!(n in e)){if(n.match(/^on[a-z]+$/)){Object.defineProperty(e,n,{value:null,writable:!0}),r.addEventListener(n.slice(2),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return e.dispatchEvent.apply(e,CF([],EE(i),!1))});return}Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[n]}})}}function FF(){return typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"&&typeof RTCPeerConnection=="function"}function BF(t){if(typeof RTCRtpSender<"u"&&typeof RTCRtpSender.getCapabilities=="function")return Promise.resolve(new Set(RTCRtpSender.getCapabilities(t).codecs.map(function(r){var n=r.mimeType;return n.split("/")[1].toLowerCase()})));if(typeof RTCPeerConnection>"u"||typeof RTCPeerConnection.prototype>"u"||typeof RTCPeerConnection.prototype.addTransceiver!="function"||typeof RTCPeerConnection.prototype.close!="function"||typeof RTCPeerConnection.prototype.createOffer!="function")return Promise.resolve(new Set);var e=new RTCPeerConnection;return e.addTransceiver(t),e.createOffer().then(function(r){var n=r.sdp;return e.close(),new Set((n.match(/^a=rtpmap:.+$/gm)||[]).map(function(i){return i.match(/^a=rtpmap:.+ ([^/]+)/)[1].toLowerCase()}))},function(){return e.close(),new Set})}var Fp=new Map;function VF(t,e){var r=Fp.get(e);return r?Promise.resolve(r.has(t.toLowerCase())):BF(e).then(function(n){return Fp.set(e,n),n.has(t.toLowerCase())})}function zF(){Fp.clear()}be.clearCachedSupportedCodecs=zF;be.defer=PF;be.delegateMethods=RF;be.difference=jF;be.flatMap=AF;be.guessBrowser=Wm;be.guessBrowserVersion=LF;be.isCodecSupported=VF;be.isIOSChrome=IF;be.interceptEvent=NF;be.legacyPromise=MF;be.makeUUID=DF;be.proxyProperties=$F;be.support=FF;var gd={},aw="1234567890abcdef",WF=32;function CE(t){for(var e="",r=0;r<WF;r++)e+=aw.charAt(Math.floor(Math.random()*aw.length));return"".concat(t).concat(e)}gd.sessionSID=CE("SS");gd.createSID=CE;var HF={recordingMediaLost:"recording-media-lost"},PE=HF,qF=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yt=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},io=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Hm=Ee,KF=Hm.typeErrors,Cf=Hm.trackPriority,GF=be,QF=gd.sessionSID,JF=PE;function YF(t,e){if(t instanceof e.LocalAudioTrack||t instanceof e.LocalVideoTrack||t instanceof e.LocalDataTrack)return t;if(t instanceof e.MediaStreamTrack)return t.kind==="audio"?new e.LocalAudioTrack(t,e):new e.LocalVideoTrack(t,e);throw KF.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function XF(t,e,r,n){var i={audio:n.LocalAudioTrackPublication,video:n.LocalVideoTrackPublication,data:n.LocalDataTrackPublication}[t.kind];return new i(e,t,r,n)}function ZF(t){return t[0].toUpperCase()+t.slice(1)}function e3(t,e,r,n){var i=new Set;e.on("newListener",function o(a){r.has(a)&&!i.has(a)&&(n.deprecated("".concat(t,"#").concat(a," has been deprecated and scheduled for removal in twilio-video.js@2.0.0.").concat(r.get(a)?" Use ".concat(t,"#").concat(r.get(a)," instead."):"")),i.add(a)),i.size>=r.size&&e.removeListener("newListener",o)})}function t3(t,e){t=Array.isArray(t)?new Set(t):new Set(t.values()),e=Array.isArray(e)?new Set(e):new Set(e.values());var r=new Set;return t.forEach(function(n){e.has(n)||r.add(n)}),r}function r3(t,e){return Object.keys(t).reduce(function(r,n){return t[n]!==e&&(r[n]=t[n]),r},{})}function n3(t,e){var r=t instanceof Map||t instanceof Set?Array.from(t.values()):t;return e=e||function(i){return i},r.reduce(function(n,i){var o=e(i);return n.concat(o)},[])}function OE(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function i3(){var t=OE(),e=yt(t.match(/\(([^)]+)\)/)||[],2),r=e[1],n=r===void 0?"unknown":r,i=yt(n.split(";").map(function(a){return a.trim()}),1),o=i[0];return o.toLowerCase()}function o3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t==="x"?e:e&3|8;return r.toString(16)})}function a3(t){var e=null;function r(){e=null,t()}return function(){e&&clearTimeout(e),e=setTimeout(r)}}function s3(t,e,r,n){return new Promise(function(i,o){function a(){var c=[].slice.call(arguments);n&&e.removeListener(n,s),i.apply(void 0,io([],yt(c),!1))}function s(){var c=[].slice.call(arguments);e.removeListener(r,a),o.apply(void 0,io([],yt(c),!1))}e.once(r,a),n&&e.once(n,s),t()})}function c3(t,e){return e.split(".").reduce(function(r,n){return r?r[n]:null},t)}function l3(){var t={};return t.promise=new Promise(function(e,r){t.resolve=e,t.reject=r}),t}function u3(t,e,r,n){if(!(n in e)&&!n.match(/^on[a-z]+$/)){var i;try{i=typeof t[n]}catch{}i==="function"&&(e[n]=function(){for(var o,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return(o=this[r])[n].apply(o,io([],yt(a),!1))})}}function d3(t,e,r){for(var n in t)u3(t,e,r,n)}function Bl(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(t===null)return e===null;if(e===null)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(i,o){return Bl(i,e[o])});if(typeof t=="object"){var r=Object.keys(t).sort(),n=Object.keys(e).sort();return!Array.isArray(e)&&Bl(r,n)&&r.every(function(i){return Bl(t[i],e[i])})}return!1}function RE(t){return typeof t=="object"&&!Array.isArray(t)}function f3(t,e,r){Object.getOwnPropertyNames(t).forEach(function(n){h3(t,e,r,n)})}function h3(t,e,r,n){if(!(n in e)){if(n.match(/^on[a-z]+$/)){Object.defineProperty(e,n,{value:null,writable:!0}),r.addEventListener(n.slice(2),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e.dispatchEvent.apply(e,io([],yt(i),!1))});return}Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[n]}})}}function p3(t,e,r){return e?t.then(function(n){e(n)},function(n){r(n)}):t}function v3(t){return typeof t=="string"?{default:t,media:t,signaling:t,webrtc:t}:t}function m3(t,e){return e=e?"Local":"","".concat(e+(t.kind||"").replace(/\w{1}/,function(r){return r.toUpperCase()}),"Track")}function g3(t,e){return e=e?"Local":"","".concat(e+(t.kind||"").replace(/\w{1}/,function(r){return r.toUpperCase()}),"TrackPublication")}function jE(t){Object.getOwnPropertyNames(t).forEach(function(e){e.startsWith("_")&&AE(t,e)})}function y3(t,e){return function(r){qF(n,r);function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=r.apply(this,io([],yt(i),!1))||this;return jE(a),_3(a,e),a}return n}(t)}function AE(t,e){var r=Object.getOwnPropertyDescriptor(t,e);r.enumerable=!1,Object.defineProperty(t,e,r)}function _3(t,e){e===void 0&&(e=[]),e.forEach(function(r){t.hasOwnProperty(r)&&AE(t,r)})}function LE(t){return t.map(yd)}function w3(t){return LE(io([],yt(t),!1))}function b3(t){return io([],yt(t.entries()),!1).reduce(function(e,r){var n,i=yt(r,2),o=i[0],a=i[1];return Object.assign((n={},n[o]=yd(a),n),e)},{})}function S3(t){return Object.entries(t).reduce(function(e,r){var n,i=yt(r,2),o=i[0],a=i[1];return Object.assign((n={},n[o]=yd(a),n),e)},{})}function yd(t){return Array.isArray(t)?LE(t):t instanceof Set?w3(t):t instanceof Map?b3(t):t&&typeof t=="object"?S3(t):t}function Vl(t){return t?"true":"false"}function k3(t){var e={sessionSID:QF,iceServers:(t.iceServers||[]).length,audioTracks:(t.tracks||[]).filter(function(i){return i.kind==="audio"}).length,videoTracks:(t.tracks||[]).filter(function(i){return i.kind==="video"}).length,dataTracks:(t.tracks||[]).filter(function(i){return i.kind==="data"}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(i){var o=yt(i,2),a=o[0],s=o[1];s=s||a,e[s]=Vl(!!t[a])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(i){var o=yt(i,2),a=o[0],s=o[1];s=s||a,typeof t[a]=="number"?e[s]=t[a]:isNaN(Number(t[a]))||(e[s]=Number(t[a]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(i){var o=yt(i,2),a=o[0],s=o[1];s=s||a,typeof t[a]=="string"?e[s]=t[a]:typeof t[a]=="number"&&a==="name"&&(e[s]=t[a].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(i){i in t&&(e[i]=JSON.stringify(t[i]))}),"networkQuality"in t&&(e.networkQualityConfiguration={},RE(t.networkQuality)?["local","remote"].forEach(function(i){typeof t.networkQuality[i]=="number"&&(e.networkQualityConfiguration[i]=t.networkQuality[i])}):(e.networkQualityConfiguration.remote=0,e.networkQualityConfiguration.local=t.networkQuality?1:0)),t.bandwidthProfile&&t.bandwidthProfile.video){var r=t.bandwidthProfile.video||{};e.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(i){typeof r[i]=="number"||typeof r[i]=="string"?e.bandwidthProfileOptions[i]=r[i]:typeof r[i]=="boolean"?e.bandwidthProfileOptions[i]=Vl(r[i]):typeof r[i]=="object"&&(e.bandwidthProfileOptions[i]=JSON.stringify(r[i]))})}var n={RTCPeerConnection:"customRTCPeerConnectionImpl",MediaStream:"customMediaStreamImpl",getUserMedia:"customGetUserMediaImpl",enumerateDevices:"customEnumerateDevicesImpl"};return Object.entries(n).forEach(function(i){var o=yt(i,2),a=o[0],s=o[1];e[s]=Vl(typeof t[a]<"u")}),{group:"room",name:"connecting",level:"info",payload:e}}function T3(){return{group:"room",name:"connected",level:"info"}}function x3(t){return _d(t,[{prop:"video",type:"object",transform:E3}])}function E3(t){return _d(t,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:P3},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function C3(t,e,r,n,i,o,a){var s={transports:[{type:"data-channel"}]};return Object.assign(t?{active_speaker:s}:{},e?{network_quality:s}:{},o?{render_hints:s}:{},i?{publisher_hints:s}:{},r?{track_priority:s}:{},n?{track_switch_off:s}:{},a?{extension_transcriptions:s}:{})}function Pf(t){return _d(t,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function P3(t){var e=Cf.PRIORITY_HIGH,r=Cf.PRIORITY_LOW,n=Cf.PRIORITY_STANDARD;return _d(t,[{prop:e,type:"object",transform:Pf},{prop:r,type:"object",transform:Pf},{prop:n,type:"object",transform:Pf}])}function _d(t,e){return e.reduce(function(r,n){var i,o=n.prop,a=n.type,s=n.payloadProp,c=s===void 0?o:s,l=n.transform,u=l===void 0?function(d){return d}:l;return typeof t[o]===a?Object.assign((i={},i[c]=u(t[o]),i),r):r},{})}function O3(t){return{rules:[{type:t?"include":"exclude",all:!0}],revision:1}}function R3(t){var e,r=(e={},e[JF.recordingMediaLost]="recordings",e);return t.map(function(n){return r[n]}).filter(function(n){return!!n})}function j3(t,e){var r=Math.random();return t-e+Math.floor(2*e*r+.5)}function A3(t,e,r){return e<=t&&t<=r}function L3(t){return GF.guessBrowser()==="chrome"&&t.kind==="video"&&"displaySurface"in t.getSettings()}function I3(t){return t===void 0&&(t=10),new Promise(function(e){return setTimeout(e,t)})}function N3(t,e){return new Promise(function(r){t.addEventListener(e,function n(i){t.removeEventListener(e,n),r(i)})})}J.constants=Hm;J.createBandwidthProfilePayload=x3;J.createMediaSignalingPayload=C3;J.createMediaWarningsPayload=R3;J.createRoomConnectingEventPayload=k3;J.createRoomConnectedEventPayload=T3;J.boolToString=Vl;J.createSubscribePayload=O3;J.asLocalTrack=YF;J.asLocalTrackPublication=XF;J.capitalize=ZF;J.deprecateEvents=e3;J.difference=t3;J.filterObject=r3;J.flatMap=n3;J.getPlatform=i3;J.getUserAgent=OE;J.hidePrivateProperties=jE;J.hidePrivateAndCertainPublicPropertiesInClass=y3;J.isDeepEqual=Bl;J.isNonArrayObject=RE;J.inRange=A3;J.makeUUID=o3;J.oncePerTick=a3;J.promiseFromEvents=s3;J.getOrNull=c3;J.defer=l3;J.delegateMethods=d3;J.proxyProperties=f3;J.legacyPromise=p3;J.buildLogLevels=v3;J.trackClass=m3;J.trackPublicationClass=g3;J.valueToJSON=yd;J.withJitter=j3;J.isChromeScreenShareTrack=L3;J.waitForSometime=I3;J.waitForEvent=N3;var Lt={},IE=be,M3=IE.flatMap,D3=IE.guessBrowser,wi=null;function $3(){if(typeof wi=="boolean")return wi;if(typeof RTCPeerConnection>"u")return wi=!1,wi;try{new RTCPeerConnection({sdpSemantics:"foo"}),wi=!1}catch{wi=!0}return wi}var jo=null;function U3(){jo=null}function F3(){if(!jo)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype){var t=new RTCPeerConnection;try{t.addTransceiver("audio"),jo="unified"}catch{jo="planb"}t.close()}else jo="planb";return jo}function B3(t){return!t||!$3()?F3():{"plan-b":"planb","unified-plan":"unified"}[t]}function V3(){return typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}function z3(t){return{chrome:B3(t),firefox:"unified",safari:V3()}[D3()]||null}function qm(t,e){var r=e.match(new RegExp(t,"gm"))||[];return r.reduce(function(n,i){var o=i.match(new RegExp(t));return o?n.add(o[1]):n},new Set)}function NE(t,e){return qm(t,e)}function ME(t){return NE("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",t)}function DE(t){return NE("^a=msid:.+ +(.+) *$",t)}function $E(t,e){var r="^a=ssrc:([0-9]+) +msid:[^ ]+ +".concat(e," *$");return qm(r,t)}function UE(t,e,r){return e===void 0&&(e=".*"),r===void 0&&(r=".*"),t.split(`\r
m=`).slice(1).map(function(n){return"m=".concat(n)}).filter(function(n){var i=new RegExp("m=".concat(e),"gm"),o=new RegExp("a=".concat(r),"gm");return i.test(n)&&o.test(n)})}function W3(t){return Array.from(qm("^a=ssrc:([0-9]+) +.*$",t))}function FE(t,e){var r=UE(t),n=new RegExp("^a=msid:[^ ]+ +".concat(e," *$"),"gm"),i=r.filter(function(o){return o.match(n)});return new Set(M3(i,W3))}function BE(t,e,r){return new Map(Array.from(t(r)).map(function(n){return[n,e(r,n)]}))}function H3(t){return BE(ME,$E,t)}function q3(t){return BE(DE,FE,t)}function VE(t,e,r){var n=t(r),i=new Map;n.forEach(function(s,c){if(!e.has(c)){e.set(c,s);return}var l=Array.from(e.get(c)),u=Array.from(s);l.forEach(function(d,h){var f=u[h];i.set(f,d);var y="^a=ssrc:".concat(f," (.*)$"),v="a=ssrc:".concat(d," $1");r=r.replace(new RegExp(y,"gm"),v)})});var o="^(a=ssrc-group:[^ ]+ +)(.*)$",a=r.match(new RegExp(o,"gm"))||[];return a.forEach(function(s){var c=s.match(new RegExp(o));if(c){var l=c[1],u=c[2],d=u.split(" ").map(function(h){var f=i.get(h);return f||h}).join(" ");r=r.replace(c[0],l+d)}}),r}function K3(t,e){return VE(H3,t,e)}function G3(t,e){return VE(q3,t,e)}Lt.clearChromeCachedSdpFormat=U3;Lt.getSdpFormat=z3;Lt.getMediaSections=UE;Lt.getPlanBTrackIds=ME;Lt.getUnifiedPlanTrackIds=DE;Lt.getPlanBSSRCs=$E;Lt.getUnifiedPlanSSRCs=FE;Lt.updatePlanBTrackIdsToSSRCs=K3;Lt.updateUnifiedPlanTrackIdsToSSRCs=G3;var xt=x&&x.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jn=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Km=be,zE=Km.flatMap,Q3=Km.guessBrowser,J3=Km.guessBrowserVersion,Y3=Lt.getSdpFormat,Gm=Q3(),X3=J3(),Qm=Gm==="chrome",WE=Gm==="firefox",HE=Gm==="safari",sw=Qm?X3.major:null,Z3=32767;function Ta(t,e){return typeof t.get=="function"?t.get(e):t.find(function(r){return r.id===e})}function eB(t,e,r){var n,i,o,a,s,c,l,u,d,h,f,y,v,g,_,m,w,S,k,E,T,C;r===void 0&&(r=!1);var O;if(Array.isArray(t))O=new Map(t.map(function(Se){return[Se.id||String(Math.random()),Se]}));else if(t instanceof Map)O=t;else if(typeof t=="object"&&t!==null){var A=new Map;Object.keys(t).forEach(function(Se){A.set(Se,t[Se])}),O=A}else return new Map;if(!O||!e)return new Map;var N=new Map,j=e.id,D=e.kind,P=null,M=null,I=null;try{for(var $=xt(O),R=$.next();!R.done;R=$.next()){var L=jn(R.value,2),B=L[0],F=L[1];if(r&&F.type==="inbound-rtp"&&F.trackIdentifier===j){P=F,M=B,I=F.ssrc;break}else if(!r&&F.type==="media-source"&&F.trackIdentifier===j){P=F,M=B;break}else F.type==="track"&&F.trackIdentifier===j&&(P||(P=F,M=B))}}catch(Se){n={error:Se}}finally{try{R&&!R.done&&(i=$.return)&&i.call($)}finally{if(n)throw n.error}}if(!P)if(r){var Q=[];try{for(var K=xt(O),z=K.next();!z.done;z=K.next()){var W=jn(z.value,2),B=W[0],F=W[1];F.type==="inbound-rtp"&&(F.kind===D||F.mediaType===D)&&Q.push({id:B,stat:F})}}catch(Se){o={error:Se}}finally{try{z&&!z.done&&(a=K.return)&&a.call(K)}finally{if(o)throw o.error}}(Q.length===1||Q.length>1)&&(P=Q[0].stat,M=Q[0].id,I=P.ssrc)}else try{for(var ee=xt(O),V=ee.next();!V.done;V=ee.next()){var q=jn(V.value,2),B=q[0],F=q[1];if(F.type==="media-source"&&F.kind===D){P=F,M=B;break}}}catch(Se){s={error:Se}}finally{try{V&&!V.done&&(c=ee.return)&&c.call(ee)}finally{if(s)throw s.error}}if(!P)return N;N.set(M,P);var te=new Set;if(r){if(P.codecId&&te.add(P.codecId),P.transportId&&te.add(P.transportId),P.remoteId&&te.add(P.remoteId),I)try{for(var ce=xt(O),ae=ce.next();!ae.done;ae=ce.next()){var ue=jn(ae.value,2),B=ue[0],F=ue[1];F.type==="remote-outbound-rtp"&&F.ssrc===I&&te.add(B)}}catch(Se){l={error:Se}}finally{try{ae&&!ae.done&&(u=ce.return)&&u.call(ce)}finally{if(l)throw l.error}}try{for(var ge=xt(te),Oe=ge.next();!Oe.done;Oe=ge.next()){var Xe=Oe.value;O.has(Xe)&&N.set(Xe,O.get(Xe))}}catch(Se){d={error:Se}}finally{try{Oe&&!Oe.done&&(h=ge.return)&&h.call(ge)}finally{if(d)throw d.error}}try{for(var ft=xt(O),Fe=ft.next();!Fe.done;Fe=ft.next()){var Cr=jn(Fe.value,2),B=Cr[0],F=Cr[1];F.type==="track"&&F.trackIdentifier===j&&N.set(B,F)}}catch(Se){f={error:Se}}finally{try{Fe&&!Fe.done&&(y=ft.return)&&y.call(ft)}finally{if(f)throw f.error}}}else{try{for(var tr=xt(O),gn=tr.next();!gn.done;gn=tr.next()){var yn=jn(gn.value,2),B=yn[0],F=yn[1];if(F.type==="outbound-rtp"&&F.mediaSourceId===M){N.set(B,F),F.codecId&&te.add(F.codecId),F.transportId&&te.add(F.transportId);var Tc=B;try{for(var qt=(_=void 0,xt(O)),pi=qt.next();!pi.done;pi=qt.next()){var xc=jn(pi.value,2),Tt=xc[0],Pr=xc[1];Pr.type==="remote-inbound-rtp"&&Pr.localId===Tc&&N.set(Tt,Pr)}}catch(Nd){_={error:Nd}}finally{try{pi&&!pi.done&&(m=qt.return)&&m.call(qt)}finally{if(_)throw _.error}}}}}catch(Se){v={error:Se}}finally{try{gn&&!gn.done&&(g=tr.return)&&g.call(tr)}finally{if(v)throw v.error}}try{for(var vo=xt(te),vi=vo.next();!vi.done;vi=vo.next()){var Xe=vi.value;O.has(Xe)&&N.set(Xe,O.get(Xe))}}catch(Se){w={error:Se}}finally{try{vi&&!vi.done&&(S=vo.return)&&S.call(vo)}finally{if(w)throw w.error}}}var Or=null,Ec=new Set;try{for(var mi=xt(N.values()),Kr=mi.next();!Kr.done;Kr=mi.next()){var F=Kr.value;F.transportId&&Ec.add(F.transportId)}}catch(Se){k={error:Se}}finally{try{Kr&&!Kr.done&&(E=mi.return)&&E.call(mi)}finally{if(k)throw k.error}}try{for(var rr=xt(Ec),_n=rr.next();!_n.done;_n=rr.next()){var Rr=_n.value;if(O.has(Rr)){var It=O.get(Rr);N.set(Rr,It),It.selectedCandidatePairId&&(Or=It.selectedCandidatePairId),It.localCertificateId&&O.has(It.localCertificateId)&&N.set(It.localCertificateId,O.get(It.localCertificateId)),It.remoteCertificateId&&O.has(It.remoteCertificateId)&&N.set(It.remoteCertificateId,O.get(It.remoteCertificateId))}}}catch(Se){T={error:Se}}finally{try{_n&&!_n.done&&(C=rr.return)&&C.call(rr)}finally{if(T)throw T.error}}if(Or&&O.has(Or)){var nr=O.get(Or);N.set(Or,nr),nr.localCandidateId&&O.has(nr.localCandidateId)&&N.set(nr.localCandidateId,O.get(nr.localCandidateId)),nr.remoteCandidateId&&O.has(nr.remoteCandidateId)&&N.set(nr.remoteCandidateId,O.get(nr.remoteCandidateId))}return N}function tB(t,e){return t&&typeof t.getStats=="function"?rB(t,e):Promise.reject(new Error("Given PeerConnection does not support getStats"))}function rB(t,e){var r=sl(t,"audio","local"),n=sl(t,"video","local"),i=sl(t,"audio"),o=sl(t,"video"),a={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},s=zE([[r,"localAudioTrackStats",!1],[n,"localVideoTrackStats",!1],[i,"remoteAudioTrackStats",!0],[o,"remoteVideoTrackStats",!0]],function(c){var l=jn(c,3),u=l[0],d=l[1],h=l[2];return u.map(function(f){return sB(t,f,Object.assign({isRemote:h},e)).then(function(y){y.forEach(function(v){v.trackId=f.id,a[d].push(v)})})})});return Promise.all(s).then(function(){return nB(t,e)}).then(function(c){return a.activeIceCandidatePair=c,a})}function nB(t,e){return e===void 0&&(e={}),typeof e.testForChrome<"u"||Qm||typeof e.testForSafari<"u"||HE?t.getStats().then(iB):typeof e.testForFirefox<"u"||WE?t.getStats().then(oB):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function iB(t){var e=Array.from(t.values()).find(function(c){var l=c.nominated,u=c.type;return u==="candidate-pair"&&l});if(!e)return null;var r=Ta(t,e.localCandidateId),n=Ta(t,e.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],o=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"},{key:"networkType",type:"string"}]),a=r?o.reduce(function(c,l){var u=l.key,d=l.type;return c[u]=typeof r[u]===d?r[u]:u==="deleted"?!1:null,c},{}):null,s=n?i.reduce(function(c,l){var u=l.key,d=l.type;return c[u]=typeof n[u]===d?n[u]:null,c},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(c){return c==="inprogress"?"in-progress":c}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(c,l){var u=l.key,d=l.type,h=l.fixup;return c[u]=typeof e[u]===d?h?h(e[u]):e[u]:null,c},{localCandidate:a,remoteCandidate:s})}function oB(t){var e=Array.from(t.values()).find(function(l){var u=l.nominated,d=l.type;return d==="candidate-pair"&&u});if(!e)return null;var r=Ta(t,e.localCandidateId),n=Ta(t,e.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],o=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),a={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},s=r?o.reduce(function(l,u){var d=u.ffKeys,h=u.key,f=u.type,y=d&&d.find(function(v){return v in r})||h;return l[h]=typeof r[y]===f?y==="candidateType"&&a[r[y]]||r[y]:y==="deleted"?!1:null,l},{}):null,c=n?i.reduce(function(l,u){var d=u.ffKeys,h=u.key,f=u.type,y=d&&d.find(function(v){return v in n})||h;return l[h]=typeof n[y]===f?y==="candidateType"&&a[n[y]]||n[y]:null,l},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(l,u){var d=u.key,h=u.type;return l[d]=typeof e[d]===h?e[d]:null,l},{localCandidate:s,remoteCandidate:c})}function sl(t,e,r){var n=r==="local"?"getSenders":"getReceivers";if(t[n])return t[n]().map(function(a){var s=a.track;return s}).filter(function(a){return a&&a.kind===e});var i=r==="local"?"getLocalStreams":"getRemoteStreams",o=e==="audio"?"getAudioTracks":"getVideoTracks";return zE(t[i](),function(a){return a[o]()})}function aB(t,e){var r,n,i,o,a,s;if(!t||!e)return!1;if(t.getReceivers){var c=t.getReceivers();try{for(var l=xt(c),u=l.next();!u.done;u=l.next()){var d=u.value;if(d.track&&d.track.id===e.id)return!0}}catch(S){r={error:S}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}if(t.getRemoteStreams){var h=t.getRemoteStreams();try{for(var f=xt(h),y=f.next();!y.done;y=f.next()){var v=y.value,g=v.getTracks();try{for(var _=(a=void 0,xt(g)),m=_.next();!m.done;m=_.next()){var w=m.value;if(w.id===e.id)return!0}}catch(S){a={error:S}}finally{try{m&&!m.done&&(s=_.return)&&s.call(_)}finally{if(a)throw a.error}}}}catch(S){i={error:S}}finally{try{y&&!y.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}}return!1}function sB(t,e,r){return r===void 0&&(r={}),typeof r.testForChrome<"u"||Qm?cw(t,e,r):typeof r.testForFirefox<"u"||WE?cB(t,e,r):typeof r.testForSafari<"u"||HE?typeof r.testForSafari<"u"||Y3()==="unified"?cw(t,e,r):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function cw(t,e,r){var n=r.log;return sw&&sw<67?new Promise(function(i,o){t.getStats(function(a){i([lB(a,e)])},null,o)}):t.getStats(e).then(function(i){return n.info("getStats by track successful"),lw(i,r)}).catch(function(){return n.warn("getStats by track failed. Getting default stats"),t.getStats().then(function(i){n.info("getStats by default successful");var o=aB(t,e);n.info("Starting filtering stats for ".concat(o?"remote":"local"," track"));var a=eB(i,e,o);return n.info("Completed filtering stats for ".concat(o?"remote":"local"," track")),lw(a,r)})})}function cB(t,e,r){return t.getStats(e).then(function(n){return[uB(n,r)]})}function lB(t,e){var r=t.result().find(function(i){return i.type==="ssrc"&&i.stat("googTrackId")===e.id}),n={};return r&&(n.timestamp=Math.round(Number(r.timestamp)),n=r.names().reduce(function(i,o){switch(o){case"googCodecName":i.codecName=r.stat(o);break;case"googRtt":i.roundTripTime=Number(r.stat(o));break;case"googJitterReceived":i.jitter=Number(r.stat(o));break;case"googFrameWidthInput":i.frameWidthInput=Number(r.stat(o));break;case"googFrameHeightInput":i.frameHeightInput=Number(r.stat(o));break;case"googFrameWidthSent":i.frameWidthSent=Number(r.stat(o));break;case"googFrameHeightSent":i.frameHeightSent=Number(r.stat(o));break;case"googFrameWidthReceived":i.frameWidthReceived=Number(r.stat(o));break;case"googFrameHeightReceived":i.frameHeightReceived=Number(r.stat(o));break;case"googFrameRateInput":i.frameRateInput=Number(r.stat(o));break;case"googFrameRateSent":i.frameRateSent=Number(r.stat(o));break;case"googFrameRateReceived":i.frameRateReceived=Number(r.stat(o));break;case"ssrc":i[o]=r.stat(o);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":i[o]=Number(r.stat(o));break}return i},n)),n}function lw(t,e){var r=e.simulateExceptionWhileStandardizingStats,n=r===void 0?!1:r;if(n)throw new Error("Error while gathering stats");var i=null,o=[],a=null,s=null,c=null,l=null,u=null;t.forEach(function(v){var g=v.type;switch(g){case"inbound-rtp":i=v;break;case"outbound-rtp":o.push(v);break;case"media-source":u=v;break;case"track":c=v;break;case"codec":l=v;break;case"remote-inbound-rtp":a=v;break;case"remote-outbound-rtp":s=v;break}});var d=c?c.remoteSource:!u,h=d?[i]:o,f=[],y=d?s:a;return h.forEach(function(v){var g={},_=[v,u,c,l,y&&y.ssrc===v.ssrc?y:null];function m(V){var q=_.find(function(te){return te&&typeof te[V]<"u"})||null;return q?q[V]:null}var w=m("ssrc");typeof w=="number"&&(g.ssrc=String(w));var S=m("timestamp");g.timestamp=Math.round(S);var k=m("mimeType");typeof k=="string"&&(k=k.split("/"),g.codecName=k[k.length-1]);var E=m("roundTripTime");typeof E=="number"&&(g.roundTripTime=Math.round(E*1e3));var T=m("jitter");typeof T=="number"&&(g.jitter=Math.round(T*1e3));var C=m("frameWidth");typeof C=="number"&&(d?g.frameWidthReceived=C:(g.frameWidthSent=C,g.frameWidthInput=c?c.frameWidth:u.width));var O=m("frameHeight");typeof O=="number"&&(d?g.frameHeightReceived=O:(g.frameHeightSent=O,g.frameHeightInput=c?c.frameHeight:u.height));var A=m("framesPerSecond");(typeof A=="number"||A===null)&&(g[d?"frameRateReceived":"frameRateSent"]=A);var N=m("qualityLimitationReason");typeof N=="string"&&(g.qualityLimitationReason=N);var j=m("bytesReceived");typeof j=="number"&&(g.bytesReceived=j);var D=m("bytesSent");typeof D=="number"&&(g.bytesSent=D);var P=m("packetsLost");typeof P=="number"&&(g.packetsLost=P);var M=m("packetsReceived");typeof M=="number"&&(g.packetsReceived=M);var I=m("packetsSent");typeof I=="number"&&(g.packetsSent=I);var $=m("audioLevel");typeof $=="number"&&($=Math.round($*Z3),d?g.audioOutputLevel=$:g.audioInputLevel=$);var R=m("totalPacketSendDelay");typeof R=="number"&&(g.totalPacketSendDelay=R);var L=m("totalEncodeTime");typeof L=="number"&&(g.totalEncodeTime=L);var B=m("framesEncoded");typeof B=="number"&&(g.framesEncoded=B);var F=m("estimatedPlayoutTimestamp");typeof F=="number"&&(g.estimatedPlayoutTimestamp=F);var Q=m("totalDecodeTime");typeof Q=="number"&&(g.totalDecodeTime=Q);var K=m("framesDecoded");typeof K=="number"&&(g.framesDecoded=K);var z=m("jitterBufferDelay");typeof z=="number"&&(g.jitterBufferDelay=z);var W=m("jitterBufferEmittedCount");typeof W=="number"&&(g.jitterBufferEmittedCount=W);var ee=m("freezeCount");typeof ee=="number"&&(g.freezeCount=ee),f.push(g)}),f}function uB(t,e){t===void 0&&(t=new Map);var r=e.isRemote,n=e.simulateExceptionWhileStandardizingStats,i=n===void 0?!1:n;if(i)throw new Error("Error while gathering stats");var o=null,a=null;t.forEach(function(M){var I=M.isRemote,$=M.remoteId,R=M.type;if(!I)switch(R){case"inbound-rtp":o=M,a=Ta(t,$);break;case"outbound-rtp":a=M,o=Ta(t,$);break}});var s=r?o:a,c=r?a:o;function l(M){return s&&typeof s[M]<"u"?s[M]:c&&typeof c[M]<"u"?c[M]:null}var u={},d=l("timestamp");u.timestamp=Math.round(d);var h=l("ssrc");typeof h=="number"&&(u.ssrc=String(h));var f=l("bytesSent");typeof f=="number"&&(u.bytesSent=f);var y=l("packetsLost");typeof y=="number"&&(u.packetsLost=y);var v=l("packetsSent");typeof v=="number"&&(u.packetsSent=v);var g=l("roundTripTime");typeof g=="number"&&(u.roundTripTime=Math.round(g*1e3));var _=l("jitter");typeof _=="number"&&(u.jitter=Math.round(_*1e3));var m=l("framesPerSecond");(typeof m=="number"||m===null)&&(u.frameRateSent=m);var w=l("bytesReceived");typeof w=="number"&&(u.bytesReceived=w);var S=l("packetsReceived");typeof S=="number"&&(u.packetsReceived=S);var k=l("framesPerSecond");(typeof k=="number"||k===null)&&(u.frameRateReceived=k);var E=l("totalPacketSendDelay");typeof E=="number"&&(u.totalPacketSendDelay=E);var T=l("totalEncodeTime");typeof T=="number"&&(u.totalEncodeTime=T);var C=l("framesEncoded");typeof C=="number"&&(u.framesEncoded=C);var O=l("estimatedPlayoutTimestamp");typeof O=="number"&&(u.estimatedPlayoutTimestamp=O);var A=l("totalDecodeTime");typeof A=="number"&&(u.totalDecodeTime=A);var N=l("framesDecoded");typeof N=="number"&&(u.framesDecoded=N);var j=l("jitterBufferDelay");typeof j=="number"&&(u.jitterBufferDelay=j);var D=l("jitterBufferEmittedCount");typeof D=="number"&&(u.jitterBufferEmittedCount=D);var P=l("freezeCount");return typeof P=="number"&&(u.freezeCount=P),u}var dB=tB;function fB(t){return t===void 0&&(t={audio:!0,video:!0}),typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"?navigator.mediaDevices.getUserMedia(t):Promise.reject(new Error("getUserMedia is not supported"))}var hB=fB,Bp={exports:{}};typeof MediaStream=="function"?Bp.exports=MediaStream:Bp.exports=function(){throw new Error("MediaStream is not supported")};var qE=Bp.exports,Vp={exports:{}};typeof MediaStreamTrack=="function"?Vp.exports=MediaStreamTrack:Vp.exports=function(){throw new Error("MediaStreamTrack is not supported")};var pB=Vp.exports,zp={exports:{}};typeof RTCIceCandidate=="function"?zp.exports=RTCIceCandidate:zp.exports=function(){throw new Error("RTCIceCandidate is not supported")};var vB=zp.exports,Ao={exports:{}},Of,uw;function KE(){if(uw)return Of;uw=1;var t=function(){function e(r){this.descriptionInitDict=r;var n=r&&r.type==="rollback"?null:new RTCSessionDescription(r);Object.defineProperties(this,{_description:{get:function(){return n}}})}return Object.defineProperty(e.prototype,"sdp",{get:function(){return this._description?this._description.sdp:this.descriptionInitDict.sdp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._description?this._description.type:this.descriptionInitDict.type},enumerable:!1,configurable:!0}),e}();return Of=t,Of}var Jm={exports:{}},ra=typeof Reflect=="object"?Reflect:null,dw=ra&&typeof ra.apply=="function"?ra.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},zl;ra&&typeof ra.ownKeys=="function"?zl=ra.ownKeys:Object.getOwnPropertySymbols?zl=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:zl=function(e){return Object.getOwnPropertyNames(e)};function mB(t){console&&console.warn&&console.warn(t)}var GE=Number.isNaN||function(e){return e!==e};function Te(){Te.init.call(this)}Jm.exports=Te;Jm.exports.once=wB;Te.EventEmitter=Te;Te.prototype._events=void 0;Te.prototype._eventsCount=0;Te.prototype._maxListeners=void 0;var fw=10;function wd(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Te,"defaultMaxListeners",{enumerable:!0,get:function(){return fw},set:function(t){if(typeof t!="number"||t<0||GE(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");fw=t}});Te.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Te.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||GE(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function QE(t){return t._maxListeners===void 0?Te.defaultMaxListeners:t._maxListeners}Te.prototype.getMaxListeners=function(){return QE(this)};Te.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")dw(c,this,r);else for(var l=c.length,u=eC(c,l),n=0;n<l;++n)dw(u[n],this,r);return!0};function JE(t,e,r,n){var i,o,a;if(wd(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),a===void 0)a=o[e]=r,++t._eventsCount;else if(typeof a=="function"?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=QE(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,mB(s)}return t}Te.prototype.addListener=function(e,r){return JE(this,e,r,!1)};Te.prototype.on=Te.prototype.addListener;Te.prototype.prependListener=function(e,r){return JE(this,e,r,!0)};function gB(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function YE(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=gB.bind(n);return i.listener=r,n.wrapFn=i,i}Te.prototype.once=function(e,r){return wd(r),this.on(e,YE(this,e,r)),this};Te.prototype.prependOnceListener=function(e,r){return wd(r),this.prependListener(e,YE(this,e,r)),this};Te.prototype.removeListener=function(e,r){var n,i,o,a,s;if(wd(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){s=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():yB(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};Te.prototype.off=Te.prototype.removeListener;Te.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function XE(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?_B(i):eC(i,i.length)}Te.prototype.listeners=function(e){return XE(this,e,!0)};Te.prototype.rawListeners=function(e){return XE(this,e,!1)};Te.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):ZE.call(t,e)};Te.prototype.listenerCount=ZE;function ZE(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}Te.prototype.eventNames=function(){return this._eventsCount>0?zl(this._events):[]};function eC(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function yB(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function _B(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function wB(t,e){return new Promise(function(r,n){function i(a){t.removeListener(e,o),n(a)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}tC(t,e,o,{once:!0}),e!=="error"&&bB(t,i,{once:!0})})}function bB(t,e,r){typeof t.on=="function"&&tC(t,"error",e,r)}function tC(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var St=Jm.exports,Rf,hw;function Ym(){if(hw)return Rf;hw=1;var t=x&&x.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var s=a.call(i),c,l=[],u;try{for(;(o===void 0||o-- >0)&&!(c=s.next()).done;)l.push(c.value)}catch(d){u={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(u)throw u.error}}return l},e=x&&x.__spreadArray||function(i,o,a){if(a||arguments.length===2)for(var s=0,c=o.length,l;s<c;s++)(l||!(s in o))&&(l||(l=Array.prototype.slice.call(o,0,s)),l[s]=o[s]);return i.concat(l||Array.prototype.slice.call(o))},r=St.EventEmitter,n=function(){function i(){Object.defineProperties(this,{_eventEmitter:{value:new r}})}return i.prototype.dispatchEvent=function(o){return this._eventEmitter.emit(o.type,o)},i.prototype.addEventListener=function(){var o;return(o=this._eventEmitter).addListener.apply(o,e([],t(arguments),!1))},i.prototype.removeEventListener=function(){var o;return(o=this._eventEmitter).removeListener.apply(o,e([],t(arguments),!1))},i}();return Rf=n,Rf}var jf,pw;function rC(){if(pw)return jf;pw=1;var t=be.defer,e={high:new Set(["low"]),low:new Set(["high"])},r=function(){function i(o){o===void 0&&(o="low");var a=o;Object.defineProperties(this,{_state:{set:function(s){var c=this;if(a!==s){a=s;var l=this._whenDeferreds.get(a);l.forEach(function(u){return u.resolve(c)}),l.clear()}},get:function(){return a}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])}})}return Object.defineProperty(i.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),i.prototype.lower=function(){return this.transition("low")},i.prototype.raise=function(){return this.transition("high")},i.prototype.transition=function(o){if(!e[this.state].has(o))throw n(this.state,o);return this._state=o,this},i.prototype.when=function(o){if(this.state===o)return Promise.resolve(this);if(!e[this.state].has(o))return Promise.reject(n(this.state,o));var a=t();return this._whenDeferreds.get(o).add(a),a.promise},i}();function n(i,o){return new Error('Cannot transition from "'.concat(i,'" to "').concat(o,'"'))}return jf=r,jf}var Af,vw;function SB(){if(vw)return Af;vw=1;var t=function(){function e(r){Object.defineProperties(this,{track:{enumerable:!0,value:r,writable:!0}})}return e}();return Af=t,Af}var Lf,mw;function kB(){if(mw)return Lf;mw=1;var t=x&&x.__extends||function(){var j=function(D,P){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,I){M.__proto__=I}||function(M,I){for(var $ in I)Object.prototype.hasOwnProperty.call(I,$)&&(M[$]=I[$])},j(D,P)};return function(D,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");j(D,P);function M(){this.constructor=D}D.prototype=P===null?Object.create(P):(M.prototype=P.prototype,new M)}}(),e=x&&x.__read||function(j,D){var P=typeof Symbol=="function"&&j[Symbol.iterator];if(!P)return j;var M=P.call(j),I,$=[],R;try{for(;(D===void 0||D-- >0)&&!(I=M.next()).done;)$.push(I.value)}catch(L){R={error:L}}finally{try{I&&!I.done&&(P=M.return)&&P.call(M)}finally{if(R)throw R.error}}return $},r=x&&x.__spreadArray||function(j,D,P){if(P||arguments.length===2)for(var M=0,I=D.length,$;M<I;M++)($||!(M in D))&&($||($=Array.prototype.slice.call(D,0,M)),$[M]=D[M]);return j.concat($||Array.prototype.slice.call(D))},n=KE(),i=Ym(),o=rC(),a=qE,s=SB(),c=Lt,l=c.getSdpFormat,u=c.updatePlanBTrackIdsToSSRCs,d=c.updateUnifiedPlanTrackIdsToSSRCs,h=be,f=h.delegateMethods,y=h.interceptEvent,v=h.isIOSChrome,g=h.legacyPromise,_=h.proxyProperties,m=l()==="unified",w=function(j){t(D,j);function D(P,M){P===void 0&&(P={});var I=j.call(this)||this,$=Object.assign(P.iceTransportPolicy?{iceTransports:P.iceTransportPolicy}:{},P);y(I,"datachannel"),y(I,"signalingstatechange");var R=l($.sdpSemantics),L=new RTCPeerConnection($,M);return Object.defineProperties(I,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new a},_peerConnection:{value:L},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:R},_senders:{value:new Map},_signalingStateLatch:{value:new o},_tracksToSSRCs:{value:new Map,writable:!0}}),L.addEventListener("datachannel",function(B){A(B.channel),I.dispatchEvent(B)}),L.addEventListener("signalingstatechange",function(){for(var B=[],F=0;F<arguments.length;F++)B[F]=arguments[F];L.signalingState==="stable"&&(I._appliedTracksToSSRCs=new Map(I._tracksToSSRCs)),!I._pendingLocalOffer&&!I._pendingRemoteOffer&&I.dispatchEvent.apply(I,r([],e(B),!1))}),L.ontrack=function(){},typeof L.addTrack!="function"&&L.addStream(I._localStream),_(RTCPeerConnection.prototype,I,L),I}return Object.defineProperty(D.prototype,"localDescription",{get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(D.prototype,"signalingState",{get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),D.prototype.addTrack=function(P){for(var M,I=[],$=1;$<arguments.length;$++)I[$-1]=arguments[$];if(typeof this._peerConnection.addTrack=="function")return(M=this._peerConnection).addTrack.apply(M,r([P],e(I),!1));if(this._peerConnection.signalingState==="closed")throw new Error("Cannot add MediaStreamTrack [".concat(P.id,`, 
        `).concat(P.kind,"]: RTCPeerConnection is closed"));var R=this._senders.get(P);if(R&&R.track)throw new Error("Cannot add MediaStreamTrack ['".concat(P.id,`, 
        `).concat(P.kind,"]: RTCPeerConnection already has it"));return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(P),this._peerConnection.addStream(this._localStream),R=new s(P),this._senders.set(P,R),R},D.prototype.removeTrack=function(P){if(this._peerConnection.signalingState==="closed")throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");if(typeof this._peerConnection.addTrack=="function")try{return this._peerConnection.removeTrack(P)}catch{}else{var M=P.track;if(!M)return;P=this._senders.get(M),P&&P.track&&(P.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(M),this._peerConnection.addStream(this._localStream))}},D.prototype.getSenders=function(){return typeof this._peerConnection.addTrack=="function"?this._peerConnection.getSenders():Array.from(this._senders.values())},D.prototype.addIceCandidate=function(P){for(var M=this,I=[],$=1;$<arguments.length;$++)I[$-1]=arguments[$];var R;return this.signalingState==="have-remote-offer"?R=this._signalingStateLatch.when("low").then(function(){return M._peerConnection.addIceCandidate(P)}):R=this._peerConnection.addIceCandidate(P),I.length>0?g.apply(void 0,r([R],e(I),!1)):R},D.prototype.close=function(){this.signalingState!=="closed"&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},D.prototype.createAnswer=function(){for(var P=this,M=[],I=0;I<arguments.length;I++)M[I]=arguments[I];var $;return this._pendingRemoteOffer?$=this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return P._signalingStateLatch.lower(),P._peerConnection.createAnswer()}).then(function(R){return P._pendingRemoteOffer=null,P._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:N(P._sdpFormat,P._tracksToSSRCs,R.sdp)})},function(R){throw P._pendingRemoteOffer=null,R}):$=this._peerConnection.createAnswer().then(function(R){return P._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:N(P._sdpFormat,P._tracksToSSRCs,R.sdp)})}),M.length>1?g.apply(void 0,r([$],e(M),!1)):$},D.prototype.createOffer=function(){for(var P=this,M=[],I=0;I<arguments.length;I++)M[I]=arguments[I];var $=e(M,3),R=$[0],L=$[1],B=$[2],F=B||R||{};if(v()){if(F.offerToReceiveVideo&&!this._audioTransceiver&&!(m&&E(this,"audio"))){delete F.offerToReceiveAudio;try{this._audioTransceiver=m?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(K){return Promise.reject(K)}}if(F.offerToReceiveVideo&&!this._videoTransceiver&&!(m&&E(this,"video"))){delete F.offerToReceiveVideo;try{this._videoTransceiver=m?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(K){return Promise.reject(K)}}}var Q=this._peerConnection.createOffer(F).then(function(K){return P._rolledBackTracksToSSRCs.clear(),new n({type:K.type,sdp:N(P._sdpFormat,P._tracksToSSRCs,K.sdp)})});return M.length>1?g(Q,R,L):Q},D.prototype.createDataChannel=function(P,M){M=O(M);var I=this._peerConnection.createDataChannel(P,M);return A(I),I},D.prototype.setLocalDescription=function(){for(var P=[],M=0;M<arguments.length;M++)P[M]=arguments[M];var I=e(P,3),$=I[0],R=I[1],L=I[2];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var B=S(this,!0,$);return P.length>1?g(B,R,L):B},D.prototype.setRemoteDescription=function(){for(var P=[],M=0;M<arguments.length;M++)P[M]=arguments[M];var I=e(P,3),$=I[0],R=I[1],L=I[2];this._rolledBackTracksToSSRCs.clear();var B=S(this,!1,$);return P.length>1?g(B,R,L):B},D}(i);f(RTCPeerConnection.prototype,w.prototype,"_peerConnection");function S(j,D,P){function M(K){D?j._pendingLocalOffer=K:j._pendingRemoteOffer=K}function I(){D?j._pendingLocalOffer=null:j._pendingRemoteOffer=null}var $=D?j._pendingLocalOffer:j._pendingRemoteOffer,R=D?j._pendingRemoteOffer:j._pendingLocalOffer,L=D?"have-local-offer":"have-remote-offer",B=D?"setLocalDescription":"setRemoteDescription",F;if(!D&&R&&P.type==="answer")F=k(j,P);else if(P.type==="offer"){if(j.signalingState!==L&&j.signalingState!=="stable")return Promise.reject(new Error("Cannot set ".concat(D?"local":"remote"," offer in state ").concat(j.signalingState)));!$&&j._signalingStateLatch.state==="low"&&j._signalingStateLatch.raise();var Q=j.signalingState;M(T(P)),F=Promise.resolve(),j.signalingState!==Q&&F.then(function(){return j.dispatchEvent(new Event("signalingstatechange"))})}else P.type==="rollback"&&(j.signalingState!==L?F=Promise.reject(new Error("Cannot rollback ".concat(D?"local":"remote"," description in ").concat(j.signalingState))):(I(),j._rolledBackTracksToSSRCs=new Map(j._tracksToSSRCs),j._tracksToSSRCs=new Map(j._appliedTracksToSSRCs),F=Promise.resolve(),F.then(function(){return j.dispatchEvent(new Event("signalingstatechange"))})));return F||j._peerConnection[B](T(P))}function k(j,D){var P=j._pendingLocalOffer;return j._peerConnection.setLocalDescription(P).then(function(){return j._pendingLocalOffer=null,j.setRemoteDescription(D)}).then(function(){j._signalingStateLatch.lower()})}function E(j,D){return!!j.getTransceivers().find(function(P){var M=P.receiver,I=M===void 0?{}:M,$=I.track,R=$===void 0?{}:$;return R.kind===D})}function T(j){return j instanceof n&&j._description?j._description:new RTCSessionDescription(j)}function C(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function O(j){return j=Object.assign({},j),C()&&"maxPacketLifeTime"in j&&(j.maxRetransmitTime=j.maxPacketLifeTime),j}function A(j){return Object.defineProperty(j,"maxRetransmits",{value:j.maxRetransmits===65535?null:j.maxRetransmits}),C()&&Object.defineProperty(j,"maxPacketLifeTime",{value:j.maxRetransmitTime===65535?null:j.maxRetransmitTime}),j}function N(j,D,P){return j==="unified"?d(D,P):u(D,P)}return Lf=w,Lf}var If,gw;function nC(){return gw||(gw=1,If=RTCSessionDescription),If}var Nf,yw;function TB(){if(yw)return Nf;yw=1;var t=x&&x.__extends||function(){var v=function(g,_){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,w){m.__proto__=w}||function(m,w){for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(m[S]=w[S])},v(g,_)};return function(g,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");v(g,_);function m(){this.constructor=g}g.prototype=_===null?Object.create(_):(m.prototype=_.prototype,new m)}}(),e=x&&x.__read||function(v,g){var _=typeof Symbol=="function"&&v[Symbol.iterator];if(!_)return v;var m=_.call(v),w,S=[],k;try{for(;(g===void 0||g-- >0)&&!(w=m.next()).done;)S.push(w.value)}catch(E){k={error:E}}finally{try{w&&!w.done&&(_=m.return)&&_.call(m)}finally{if(k)throw k.error}}return S},r=x&&x.__spreadArray||function(v,g,_){if(_||arguments.length===2)for(var m=0,w=g.length,S;m<w;m++)(S||!(m in g))&&(S||(S=Array.prototype.slice.call(g,0,m)),S[m]=g[m]);return v.concat(S||Array.prototype.slice.call(g))},n=Ym(),i=nC(),o=Lt.updateUnifiedPlanTrackIdsToSSRCs,a=be,s=a.delegateMethods,c=a.interceptEvent,l=a.legacyPromise,u=a.proxyProperties,d=function(v){t(g,v);function g(_){var m=v.call(this)||this;c(m,"signalingstatechange");var w=new RTCPeerConnection(_);Object.defineProperties(m,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:w},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},peerIdentity:{enumerable:!0,value:Promise.resolve({idp:"",name:""})}});var S;return w.addEventListener("signalingstatechange",function(){for(var k=[],E=0;E<arguments.length;E++)k[E]=arguments[E];!m._rollingBack&&m.signalingState!==S&&(S=m.signalingState,m._isClosed?setTimeout(function(){return m.dispatchEvent.apply(m,r([],e(k),!1))}):m.dispatchEvent.apply(m,r([],e(k),!1)))}),u(RTCPeerConnection.prototype,m,w),m}return Object.defineProperty(g.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"localDescription",{get:function(){return y(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),g.prototype.createAnswer=function(){for(var _=this,m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];var S;return S=this._peerConnection.createAnswer().then(function(k){return f(_,k),y(k,_._initiallyNegotiatedDtlsRole)}),typeof m[0]=="function"?l.apply(void 0,r([S],e(m),!1)):S},g.prototype.createOffer=function(){for(var _=this,m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];var S=e(m,3),k=S[0],E=S[1],T=S[2],C=T||k||{},O;if(this.signalingState==="have-local-offer"||this.signalingState==="have-remote-offer"){var A=this.signalingState==="have-local-offer";O=h(this,A,function(){return _.createOffer(C)})}else O=this._peerConnection.createOffer(C);return O=O.then(function(N){return new i({type:N.type,sdp:o(_._tracksToSSRCs,N.sdp)})}),m.length>1?l(O,k,E):O},g.prototype.setLocalDescription=function(){for(var _,m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];var S=e(m),k=S[0],E=S.slice(1),T;return k&&k.type==="answer"&&this.signalingState==="have-local-offer"&&(T=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),T?m.length>1?l.apply(void 0,r([T],e(E),!1)):T:(_=this._peerConnection).setLocalDescription.apply(_,r([],e(m),!1))},g.prototype.setRemoteDescription=function(){for(var _=this,m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];var S=e(m),k=S[0],E=S.slice(1),T;return k&&this.signalingState==="have-remote-offer"&&(k.type==="answer"?T=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):k.type==="offer"&&(T=h(this,!1,function(){return _._peerConnection.setRemoteDescription(k)}))),T||(T=this._peerConnection.setRemoteDescription(k)),T=T.then(function(){return f(_,k,!0)}),m.length>1?l.apply(void 0,r([T],e(E),!1)):T},g.prototype.close=function(){this.signalingState!=="closed"&&(this._isClosed=!0,this._peerConnection.close())},g}(n);s(RTCPeerConnection.prototype,d.prototype,"_peerConnection");function h(v,g,_){var m=g?"setLocalDescription":"setRemoteDescription";return v._rollingBack=!0,v._peerConnection[m](new i({type:"rollback"})).then(_).then(function(w){return v._rollingBack=!1,w},function(w){throw v._rollingBack=!1,w})}function f(v,g,_){if(!(v._initiallyNegotiatedDtlsRole||g.type==="offer")){var m=g.sdp.match(/a=setup:([a-z]+)/);if(m){var w=m[1];v._initiallyNegotiatedDtlsRole=_?{active:"passive",passive:"active"}[w]:w}}}function y(v,g){return v&&v.type==="answer"&&g?new i({type:v.type,sdp:v.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+g)}):v}return Nf=d,Nf}var Mf,_w;function xB(){if(_w)return Mf;_w=1;var t=x&&x.__extends||function(){var S=function(k,E){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,C){T.__proto__=C}||function(T,C){for(var O in C)Object.prototype.hasOwnProperty.call(C,O)&&(T[O]=C[O])},S(k,E)};return function(k,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");S(k,E);function T(){this.constructor=k}k.prototype=E===null?Object.create(E):(T.prototype=E.prototype,new T)}}(),e=x&&x.__read||function(S,k){var E=typeof Symbol=="function"&&S[Symbol.iterator];if(!E)return S;var T=E.call(S),C,O=[],A;try{for(;(k===void 0||k-- >0)&&!(C=T.next()).done;)O.push(C.value)}catch(N){A={error:N}}finally{try{C&&!C.done&&(E=T.return)&&E.call(T)}finally{if(A)throw A.error}}return O},r=x&&x.__spreadArray||function(S,k,E){if(E||arguments.length===2)for(var T=0,C=k.length,O;T<C;T++)(O||!(T in k))&&(O||(O=Array.prototype.slice.call(k,0,T)),O[T]=k[T]);return S.concat(O||Array.prototype.slice.call(k))},n=Ym(),i=rC(),o=Lt,a=o.getSdpFormat,s=o.updatePlanBTrackIdsToSSRCs,c=o.updateUnifiedPlanTrackIdsToSSRCs,l=be,u=l.delegateMethods,d=l.interceptEvent,h=l.proxyProperties,f=a()==="unified",y=f?c:s,v=function(S){t(k,S);function k(E){var T=S.call(this)||this;d(T,"datachannel"),d(T,"iceconnectionstatechange"),d(T,"signalingstatechange"),d(T,"track");var C=new RTCPeerConnection(E);return Object.defineProperties(T,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:C},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new i},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0}}),C.addEventListener("datachannel",function(O){w(O.channel),T.dispatchEvent(O)}),C.addEventListener("iceconnectionstatechange",function(){for(var O=[],A=0;A<arguments.length;A++)O[A]=arguments[A];T._isClosed||T.dispatchEvent.apply(T,r([],e(O),!1))}),C.addEventListener("signalingstatechange",function(){for(var O=[],A=0;A<arguments.length;A++)O[A]=arguments[A];T._isClosed||(C.signalingState==="stable"&&(T._appliedTracksToSSRCs=new Map(T._tracksToSSRCs)),!T._pendingLocalOffer&&!T._pendingRemoteOffer&&T.dispatchEvent.apply(T,r([],e(O),!1)))}),C.addEventListener("track",function(O){T._pendingRemoteOffer=null,T.dispatchEvent(O)}),h(RTCPeerConnection.prototype,T,C),T}return Object.defineProperty(k.prototype,"localDescription",{get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"iceConnectionState",{get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),k.prototype.addIceCandidate=function(E){var T=this;return this.signalingState==="have-remote-offer"?this._signalingStateLatch.when("low").then(function(){return T._peerConnection.addIceCandidate(E)}):this._peerConnection.addIceCandidate(E)},k.prototype.createOffer=function(E){var T=this;if(E=Object.assign({},E),E.offerToReceiveVideo&&!this._audioTransceiver&&!(f&&m(this,"audio"))){delete E.offerToReceiveAudio;try{this._audioTransceiver=f?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(C){return Promise.reject(C)}}if(E.offerToReceiveVideo&&!this._videoTransceiver&&!(f&&m(this,"video"))){delete E.offerToReceiveVideo;try{this._videoTransceiver=f?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(C){return Promise.reject(C)}}return this._peerConnection.createOffer(E).then(function(C){return T._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:C.type,sdp:y(T._tracksToSSRCs,C.sdp)})})},k.prototype.createAnswer=function(E){var T=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return T._signalingStateLatch.lower(),T._peerConnection.createAnswer()}).then(function(C){return T._pendingRemoteOffer=null,T._rolledBackTracksToSSRCs.clear(),f?new RTCSessionDescription({type:C.type,sdp:y(T._tracksToSSRCs,C.sdp)}):C},function(C){throw T._pendingRemoteOffer=null,C}):this._peerConnection.createAnswer(E).then(function(C){return T._rolledBackTracksToSSRCs.clear(),f?new RTCSessionDescription({type:C.type,sdp:y(T._tracksToSSRCs,C.sdp)}):C})},k.prototype.createDataChannel=function(E,T){var C=this._peerConnection.createDataChannel(E,T);return w(C),C},k.prototype.removeTrack=function(E){E.replaceTrack(null),this._peerConnection.removeTrack(E)},k.prototype.setLocalDescription=function(E){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),g(this,!0,E)},k.prototype.setRemoteDescription=function(E){return this._rolledBackTracksToSSRCs.clear(),g(this,!1,E)},k.prototype.close=function(){var E=this;this._isClosed||(this._isClosed=!0,this._peerConnection.close(),setTimeout(function(){E.dispatchEvent(new Event("iceconnectionstatechange")),E.dispatchEvent(new Event("signalingstatechange"))}))},k}(n);u(RTCPeerConnection.prototype,v.prototype,"_peerConnection");function g(S,k,E){function T(P){k?S._pendingLocalOffer=P:S._pendingRemoteOffer=P}function C(){k?S._pendingLocalOffer=null:S._pendingRemoteOffer=null}var O=k?S._pendingLocalOffer:S._pendingRemoteOffer,A=k?S._pendingRemoteOffer:S._pendingLocalOffer,N=k?"have-local-offer":"have-remote-offer",j=k?"setLocalDescription":"setRemoteDescription";if(!k&&A&&E.type==="answer")return _(S,E);if(E.type==="offer"){if(S.signalingState!==N&&S.signalingState!=="stable")return Promise.reject(new Error("Cannot set ".concat(k?"local":"remote",`
        offer in state `).concat(S.signalingState)));!O&&S._signalingStateLatch.state==="low"&&S._signalingStateLatch.raise();var D=S.signalingState;return T(E),S.signalingState!==D?Promise.resolve().then(function(){return S.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}else if(E.type==="rollback")return S.signalingState!==N?Promise.reject(new Error(`Cannot rollback 
        `.concat(k?"local":"remote"," description in ").concat(S.signalingState))):(C(),S._rolledBackTracksToSSRCs=new Map(S._tracksToSSRCs),S._tracksToSSRCs=new Map(S._appliedTracksToSSRCs),Promise.resolve().then(function(){return S.dispatchEvent(new Event("signalingstatechange"))}));return S._peerConnection[j](E)}function _(S,k){var E=S._pendingLocalOffer;return S._peerConnection.setLocalDescription(E).then(function(){return S._pendingLocalOffer=null,S.setRemoteDescription(k)}).then(function(){return S._signalingStateLatch.lower()})}function m(S,k){return!!S.getTransceivers().find(function(E){var T=E.receiver,C=T===void 0?{}:T,O=C.track,A=O===void 0?{}:O;return A.kind===k})}function w(S){return Object.defineProperties(S,{maxPacketLifeTime:{value:S.maxPacketLifeTime===65535?null:S.maxPacketLifeTime},maxRetransmits:{value:S.maxRetransmits===65535?null:S.maxRetransmits}})}return Mf=v,Mf}if(typeof RTCPeerConnection=="function"){var EB=be.guessBrowser;switch(EB()){case"chrome":Ao.exports=kB();break;case"firefox":Ao.exports=TB();break;case"safari":Ao.exports=xB();break;default:Ao.exports=RTCPeerConnection;break}}else Ao.exports=function(){throw new Error("RTCPeerConnection is not supported")};var CB=Ao.exports,os={exports:{}};if(typeof RTCSessionDescription=="function"){var PB=be.guessBrowser;switch(PB()){case"chrome":os.exports=KE();break;case"firefox":os.exports=nC();break;default:os.exports=RTCSessionDescription;break}}else os.exports=function(){throw new Error("RTCSessionDescription is not supported")};var OB=os.exports,iC={};Object.defineProperties(iC,{getStats:{enumerable:!0,value:dB},getUserMedia:{enumerable:!0,value:hB},MediaStream:{enumerable:!0,value:qE},MediaStreamTrack:{enumerable:!0,value:pB},RTCIceCandidate:{enumerable:!0,value:vB},RTCPeerConnection:{enumerable:!0,value:CB},RTCSessionDescription:{enumerable:!0,value:OB}});var uo=iC,Xm=function(e,r){if(e&&r)if(e.super_=r,typeof Object.create=="function")e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});else{var n=function(){function i(){}return i}();n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}},RB=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o};function jB(){return/Android/.test(navigator.userAgent)}function oC(){return!!(navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)}function aC(){return oC()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))}function sC(){return oC()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))}function AB(){return aC()||sC()}function LB(){return/Mobi/.test(navigator.userAgent)}function IB(t){return t==="chrome"&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")}function NB(t){if(t!=="chrome")return null;if("brave"in navigator)return"brave";var e=DB(navigator.userAgent),r=e.reduce(function(a,s){return a.replace(s,"")},navigator.userAgent),n=r.match(/[^\s]+/g)||[],i=RB(n.map(function(a){return a.split("/")[0].toLowerCase()})),o=i.slice(2);return o.find(function(a){return!["chrome","mobile","safari"].includes(a)})||null}function MB(t){return t!=="safari"?null:"brave"in navigator?"brave":["edge","edg"].find(function(e){return navigator.userAgent.toLowerCase().includes(e)})||null}function DB(t){for(var e=[],r=[],n=0;n<t.length;n++)if(t[n]==="(")e.push(n);else if(t[n]===")"&&e.length>0){var i=e.pop();e.length===0&&r.push(t.substring(i,n+1))}return r}var fo={isAndroid:jB,isIOS:AB,isIpad:aC,isIphone:sC,isMobile:LB,isNonChromiumEdge:IB,mobileWebKitBrowser:MB,rebrandedChromeBrowser:NB};function $B(t){return t=typeof t=="number"?t:0,new Promise(function(e){return setTimeout(e,t)})}function UB(t,e,r){r=typeof r=="number"?r:250;var n=t.createMediaStreamSource(e),i=t.createAnalyser();i.fftSize=2048,n.connect(i);var o=new Uint8Array(i.fftSize),a=!1;setTimeout(function(){a=!0},r);function s(){return a?Promise.resolve(!0):(i.getByteTimeDomainData(o),o.some(function(c){return c!==128&&c!==0})?Promise.resolve(!1):$B().then(s))}return s().then(function(c){return n.disconnect(),c},function(c){throw n.disconnect(),c})}var cC=UB,Df,ww;function bd(){if(ww)return Df;ww=1;var t=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,e=function(){function r(n){n=Object.assign({AudioContext:t},n),Object.defineProperties(this,{_AudioContext:{value:n.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:r}})}return r.prototype.getOrCreate=function(n){if(!this._holders.has(n)&&(this._holders.add(n),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},r.prototype.release=function(n){this._holders.has(n)&&(this._holders.delete(n),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},r}();return Df=new e,Df}var FB=cC,BB=3,VB=250;function zB(t){var e=bd(),r={},n=e.getOrCreate(r),i=BB;function o(){return i--,FB(n,t.srcObject,VB).then(function(a){return a?i>0?o():!0:!1}).catch(function(){return!0})}return o().finally(function(){e.release(r)})}var lC=zB,cl=J.defer,WB=function(){function t(){Object.defineProperties(this,{_audio:{value:cl(),writable:!0},_video:{value:cl(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return t.prototype.resolveDeferred=function(e){e==="audio"?this._audio.resolve():this._video.resolve()},t.prototype.startDeferred=function(e){e==="audio"?this._audio=cl():this._video=cl()},t.prototype.whenResolved=function(e){return e==="audio"?this._audio.promise:this._video.promise},t}(),uC=new WB,HB=St.EventEmitter,qB=J.hidePrivateAndCertainPublicPropertiesInClass,mc=qB(HB,["domain"]),KB=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GB=mc,dC=J,QB=dC.buildLogLevels,JB=dC.valueToJSON,YB=Ee.DEFAULT_LOG_LEVEL,XB=pn,ZB=0,e4=function(t){KB(e,t);function e(r,n,i){var o=this;i=Object.assign({name:r,log:null,logLevel:YB},i),o=t.call(this)||this;var a=String(i.name),s=QB(i.logLevel),c=i.log?i.log.createLog("media",o):new XB("media",o,s,i.loggerName);return Object.defineProperties(o,{_instanceId:{value:++ZB},_log:{value:c},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:a}}),o}return e.prototype.toJSON=function(){return JB(this)},e}(GB),Zm=e4,t4=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r4=fo.isIOS,n4=uo.MediaStream,fC=J,i4=fC.waitForEvent,o4=fC.waitForSometime,a4=uC,s4=Zm,c4=function(t){t4(e,t);function e(r,n){var i=this;n=Object.assign({playPausedElementsIfNotBackgrounded:r4()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},n),i=t.call(this,r.id,r.kind,n)||this;var o=!1;if(n=Object.assign({MediaStream:n4},n),typeof n.MediaStream!="function")throw new Error("MediaTrack received an invalid MediaStream constructor: "+n.MediaStream);return Object.defineProperties(i,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return o},set:function(a){o=a}},_playPausedElementsIfNotBackgrounded:{value:n.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:n.workaroundWebKitBug212780||n.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:n.MediaStream},_mapMediaElement:{value:n.mapMediaElement},_disposeMediaElement:{value:n.disposeMediaElement},isStarted:{enumerable:!0,get:function(){return o}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||r.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),i._initialize(),i}return e.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},e.prototype._initialize=function(){var r=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack&&this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("ended",function n(){r._end(),r.mediaStreamTrack.removeEventListener("ended",n)}):this.mediaStreamTrack&&(this.mediaStreamTrack.onended=function(){r._end(),r.mediaStreamTrack.onended=null}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},e.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},e.prototype.attach=function(r){var n=this;if(typeof r=="string"?r=this._selectElement(r):r||(r=this._createElement()),this._log.debug("Attempting to attach to element:",r),r=this._attach(r),this._shouldShimAttachedElements&&!this._elShims.has(r)){var i=this._playPausedElementsIfNotBackgrounded?function(){return l4(r,n._log)}:null;this._elShims.set(r,u4(r,i))}return r},e.prototype._attach=function(r,n){n===void 0&&(n=this.processedTrack||this.mediaStreamTrack);var i=r.srcObject;i instanceof this._MediaStream||(i=new this._MediaStream);var o=n.kind==="audio"?"getAudioTracks":"getVideoTracks";return i[o]().forEach(function(a){i.removeTrack(a)}),i.addTrack(n),this._mapMediaElement&&(this._log.debug("Mapping element using mapMediaElement before attaching media to element"),this._mapMediaElement(r)),r.srcObject=i,r.autoplay=!0,r.playsInline=!0,this._attachments.has(r)||this._attachments.add(r),r},e.prototype._selectElement=function(r){var n=document.querySelector(r);if(!n)throw new Error("Selector matched no element: ".concat(r));return n},e.prototype._updateElementsMediaStreamTrack=function(){var r=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(n){return r._attach(n)})},e.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},e.prototype.detach=function(r){var n;return typeof r=="string"?n=[this._selectElement(r)]:r?n=[r]:n=this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",n),this._detachElements(n),r?n[0]:n},e.prototype._detachElements=function(r){return r.map(this._detachElement.bind(this))},e.prototype._detachElement=function(r){if(!this._attachments.has(r))return r;var n=r.srcObject;if(n instanceof this._MediaStream&&n.removeTrack(this.processedTrack||this.mediaStreamTrack),this._disposeMediaElement&&(this._log.debug("Disposing element using disposeMediaElement after removing media from element"),this._disposeMediaElement(r)),this._attachments.delete(r),this._shouldShimAttachedElements&&this._elShims.has(r)){var i=this._elShims.get(r);i.unShim(),this._elShims.delete(r)}return r},e.prototype._getAllAttachedElements=function(){var r=[];return this._attachments.forEach(function(n){r.push(n)}),r},e}(s4);function l4(t,e){var r=t.tagName.toLowerCase();e.warn("Unintentionally paused:",t),Promise.race([i4(document,"visibilitychange"),o4(1e3)]).then(function(){document.visibilityState==="visible"&&a4.whenResolved("audio").then(function(){return e.info("Playing unintentionally paused <".concat(r,"> element")),e.debug("Element:",t),t.play()}).then(function(){e.info("Successfully played unintentionally paused <".concat(r,"> element")),e.debug("Element:",t)}).catch(function(n){e.warn("Error while playing unintentionally paused <".concat(r,"> element:"),{error:n,el:t})})})}function u4(t,e){e===void 0&&(e=null);var r=t.pause,n=t.play,i=!1;t.pause=function(){return i=!0,r.call(t)},t.play=function(){return i=!1,n.call(t)};var o=e?function(){i||e()}:null;return o&&t.addEventListener("pause",o),{pausedIntentionally:function(){return i},unShim:function(){t.pause=r,t.play=n,o&&t.removeEventListener("pause",o)}}}var hC=c4,d4=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),f4=hC,h4=function(t){d4(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.attach=function(){return t.prototype.attach.apply(this,arguments)},e.prototype.detach=function(){return t.prototype.detach.apply(this,arguments)},e}(f4),pC=h4,Wp=null,p4=3,bw=50,Sw=250,kw=50;function v4(t){try{var e=Wp.getContext("2d");e.drawImage(t,0,0,kw,bw);var r=e.getImageData(0,0,kw,bw),n=r.data.filter(function(o,a){return(a+1)%4}),i=Math.max.apply(Math,n);return i===0}catch(o){return console.log("Error checking silence: ",o),!1}}function m4(t){return Wp=Wp||document.createElement("canvas"),new Promise(function(e){var r=p4;setTimeout(function n(){return r--,v4(t)?r>0?setTimeout(n,Sw):e(!0):e(!1)},Sw)})}var vC=m4,g4=function(){function t(e){e===void 0&&(e=1);var r=this;Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){r._emitVisible(document.visibilityState==="visible")}}});for(var n=0;n<e;n++)this._listeners.push([])}return t.prototype.clear=function(){for(var e=this._listeners.length,r=0;r<e;r++)this._listeners[r]=[]},t.prototype._listenerCount=function(){return this._listeners.reduce(function(e,r){return e+r.length},0)},t.prototype._emitVisible=function(e){for(var r=this,n=Promise.resolve(),i=function(a){n=n.then(function(){return r._emitVisiblePhase(a,e)})},o=1;o<=this._listeners.length;o++)i(o);return n},t.prototype._emitVisiblePhase=function(e,r){var n=this._listeners[e-1];return Promise.all(n.map(function(i){var o=i(r);return o instanceof Promise?o:Promise.resolve(o)}))},t.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},t.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},t.prototype.onVisibilityChange=function(e,r){if(typeof e!="number"||e<=0||e>this._listeners.length)throw new Error("invalid phase: ",e);var n=this._listeners[e-1];return n.push(r),this._listenerCount()===1&&this._start(),this},t.prototype.offVisibilityChange=function(e,r){if(typeof e!="number"||e<=0||e>this._listeners.length)throw new Error("invalid phase: ",e);var n=this._listeners[e-1],i=n.indexOf(r);return i!==-1&&(n.splice(i,1),this._listenerCount()===0&&this._stop()),this},t}(),Sd=new g4(2),y4=cC;function _4(t,e,r,n,i){n=typeof n=="number"?n:3;var o=0,a=bd(),s={},c=a.getOrCreate(s);function l(){return e(r).then(function(u){var d=r.audio?y4(c,u,i).catch(function(h){return t.warn("Encountered an error while detecting silence",h),!0}):Promise.resolve(!1);return d.then(function(h){if(h){if(n<=0)return t.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),u}else return t.info("Got a non-silent audio MediaStreamTrack; returning it."),u;return t.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #".concat(++o,".")),u.getTracks().forEach(function(f){return f.stop()}),n--,l()})})}return l().then(function(u){return a.release(s),u},function(u){throw a.release(s),u})}var mC=_4,w4=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tw=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},xw=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},b4=St.EventEmitter,S4=function(t){w4(e,t);function e(){var r=t.call(this)||this;return Object.defineProperties(r,{_queuedEvents:{value:new Map}}),r}return e.prototype.dequeue=function(r){var n=this,i=!0;if(!r)return this._queuedEvents.forEach(function(a,s){i=this.dequeue(s)&&i},this),i;var o=this._queuedEvents.get(r)||[];return this._queuedEvents.delete(r),o.reduce(function(a,s){return n.emit.apply(n,xw([],Tw([r].concat(s)),!1))&&a},i)},e.prototype.queue=function(){var r=[].slice.call(arguments);if(this.emit.apply(this,xw([],Tw(r),!1)))return!0;var n=r[0];return this._queuedEvents.has(n)||this._queuedEvents.set(n,[]),this._queuedEvents.get(n).push(r.slice(1)),!1},e}(b4),gC=S4,k4=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T4=gC,x4=function(t){k4(e,t);function e(r,n){var i=t.call(this)||this;return Object.defineProperties(i,{id:{enumerable:!0,value:r},kind:{enumerable:!0,value:n}}),i}return e.prototype.stop=function(){this.emit("stopped")},e}(T4),yC=x4,E4=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),C4=yC,P4=function(t){E4(e,t);function e(r,n){var i=t.call(this,r,n.kind)||this;return Object.defineProperties(i,{_track:{value:n,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),i}return e.prototype.stop=function(){this.track.stop(),t.prototype.stop.call(this)},e}(C4),_C=P4,O4=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R4=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},j4=_C,A4=function(t){O4(e,t);function e(r){var n=t.call(this,r.id,r)||this;return Object.defineProperties(n,{_clones:{value:new Set},_eventsToReemitters:{value:new Map([["mute",function(){return n.queue("muted")}],["unmute",function(){return n.queue("unmuted")}]])},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{enumerable:!0,get:function(){return!!this._clones.size}},muted:{enumerable:!0,get:function(){return this._track.muted}}}),n._reemitMediaStreamTrackEvents(),n}return e.prototype._reemitMediaStreamTrackEvents=function(r){r===void 0&&(r=this._track);var n=this,i=n._eventsToReemitters,o=n._track;if(r.addEventListener?i.forEach(function(s,c){return r.addEventListener(c,s)}):i.forEach(function(s,c){r["on".concat(c)]=s}),o!==r&&(i.forEach(function(s,c){return o.removeEventListener(c,s)}),o.muted!==r.muted)){var a=i.get(r.muted?"mute":"unmute");a()}},e.prototype.clone=function(){var r=new e(this.track.clone());return this._clones.add(r),r},e.prototype.removeClone=function(r){this._clones.delete(r)},e.prototype.setMediaStreamTrack=function(r){var n=this,i=Array.from(this._clones),o=Array.from(this._senders);return Promise.all(i.map(function(a){return a.setMediaStreamTrack(r.clone())}).concat(o.map(function(a){return n._replaceTrack(a,r)}))).finally(function(){n._reemitMediaStreamTrackEvents(r),n._track=r})},e.prototype.addSender=function(r,n){return this._senders.add(r),n&&this._senderToPublisherHintCallbacks.set(r,n),this},e.prototype.removeSender=function(r){return this._senders.delete(r),this._senderToPublisherHintCallbacks.delete(r),this},e.prototype.setPublisherHint=function(r){var n=R4(Array.from(this._senderToPublisherHintCallbacks.values()),1),i=n[0];return i?i(r):Promise.resolve("COULD_NOT_APPLY_HINT")},e.prototype._replaceTrack=function(r,n){var i=this;return r.replaceTrack(n).then(function(o){return i.setPublisherHint(null).catch(function(){}),i.emit("replaced"),o})},e}(j4),wC=A4,L4=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I4=uo.getUserMedia,N4=fo.isIOS,kd=J,Ew=kd.capitalize,M4=kd.defer,D4=kd.waitForSometime,$4=kd.waitForEvent,U4=Ee.typeErrors.ILLEGAL_INVOKE,F4=lC,B4=vC,Cw=Sd,Pw=uC,V4=mC,z4=wC;function W4(t){return function(e){L4(r,e);function r(n,i){var o=this,a=N4()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string";i=Object.assign({getUserMedia:I4,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:a,gUMSilentTrackWorkaround:V4},i);var s=new z4(n),c=s.kind;return o=e.call(this,s,i)||this,Object.defineProperties(o,{_constraints:{value:typeof i[c]=="object"?i[c]:{},writable:!0},_getUserMedia:{value:i.getUserMedia},_gUMSilentTrackWorkaround:{value:i.gUMSilentTrackWorkaround},_eventsToReemitters:{value:new Map([["muted",function(){return o.emit("muted",o)}],["unmuted",function(){return o.emit("unmuted",o)}]])},_workaroundWebKitBug1208516:{value:i.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:i.isCreatedByCreateLocalTracks},_noiseCancellation:{value:i.noiseCancellation||null},_trackSender:{value:s},id:{enumerable:!0,value:s.id},isEnabled:{enumerable:!0,get:function(){return s.enabled}},isMuted:{enumerable:!0,get:function(){return s.muted}},isStopped:{enumerable:!0,get:function(){return s.readyState==="ended"}}}),o._workaroundWebKitBug1208516&&(o._workaroundWebKitBug1208516Cleanup=Ow(o)),o._reemitTrackSenderEvents(),o}return r.prototype._end=function(){var n=this;this._didCallEnd||(e.prototype._end.call(this),this._didCallEnd=!0,this._eventsToReemitters.forEach(function(i,o){return n._trackSender.removeListener(o,i)}),this.emit("stopped",this))},r.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),this._eventsToReemitters&&this._reemitTrackSenderEvents(),e.prototype._initialize.call(this)},r.prototype._reacquireTrack=function(n){var i,o=this,a=o._getUserMedia,s=o._gUMSilentTrackWorkaround,c=o._log,l=o.mediaStreamTrack.kind;c.info("Re-acquiring the MediaStreamTrack"),c.debug("Constraints:",n);var u=Object.assign({audio:!1,video:!1},(i={},i[l]=n,i)),d=this._workaroundWebKitBug1208516Cleanup?s(c,a,u):a(u);return d.then(function(h){return h.getTracks()[0]})},r.prototype._reemitTrackSenderEvents=function(){var n=this;this._eventsToReemitters.forEach(function(i,o){return n._trackSender.on(o,i)}),this._trackSender.dequeue("muted"),this._trackSender.dequeue("unmuted")},r.prototype._restart=function(n){var i=this,o=this._log;return n=n||this._constraints,this._stop(),this._reacquireTrack(n).catch(function(a){throw o.error("Failed to re-acquire the MediaStreamTrack:",{error:a,constraints:n}),a}).then(function(a){return o.info("Re-acquired the MediaStreamTrack"),o.debug("MediaStreamTrack:",a),i._constraints=Object.assign({},n),i._setMediaStreamTrack(a)})},r.prototype._setMediaStreamTrack=function(n){var i=this;return n.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){i._unprocessedTrack=n}):this._trackSender.setMediaStreamTrack(n).catch(function(o){i._log.warn("setMediaStreamTrack failed:",{error:o,mediaStreamTrack:n})})).then(function(){i._initialize(),i._getAllAttachedElements().forEach(function(o){return i._attach(o)})})},r.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},r.prototype.enable=function(n){return n=typeof n=="boolean"?n:!0,n!==this.mediaStreamTrack.enabled&&(this._log.info("".concat(n?"En":"Dis","abling")),this.mediaStreamTrack.enabled=n,this.emit(n?"enabled":"disabled",this)),this},r.prototype.disable=function(){return this.enable(!1)},r.prototype.restart=function(n){var i=this,o=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(U4("restart","can only be called on a"+" Local".concat(Ew(o),"Track that is created using createLocalTracks")+" or createLocal".concat(Ew(o),"Track.")));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var a=this._restart(n);return this._workaroundWebKitBug1208516&&(a=a.finally(function(){i._workaroundWebKitBug1208516Cleanup=Ow(i)})),a},r.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},r}(t)}function Ow(t){var e=t._log,r=t.kind,n=t._noiseCancellation,i={audio:F4,video:B4}[r],o=function(){return n?n.sourceTrack:t.mediaStreamTrack},a=t._dummyEl,s=o(),c=null;function l(){return a.play().then(function(){return i(a)}).then(function(g){return g?e.warn("Silence detected"):e.info("Non-silence detected"),g}).catch(function(g){e.warn("Failed to detect silence:",g)}).finally(function(){t.processedTrack||a.pause()})}function u(){var g=t._workaroundWebKitBug1208516Cleanup,_=t.isStopped,m=_&&!!g,w=o().muted;return Promise.resolve().then(function(){return document.visibilityState==="visible"&&!c&&(w||m||l())})}function d(){return Promise.race([$4(s,"unmute"),D4(50)]).then(function(){return u()}).then(function(g){g&&!c&&(c=M4(),t._restart().finally(function(){a=t._dummyEl,y(),s=o(),f(),c.resolve(),c=null}).catch(function(m){e.error("failed to restart track: ",m)}));var _=c&&c.promise||Promise.resolve();return _.finally(function(){return Pw.resolveDeferred(r)})}).catch(function(g){e.error("error in maybeRestart: ".concat(g.message))})}function h(){var g=t._log,_=t.kind;g.info("Muted"),g.debug("LocalMediaTrack:",t),Pw.startDeferred(_)}function f(){s.addEventListener?(s.addEventListener("ended",d),s.addEventListener("mute",h),s.addEventListener("unmute",d)):(s.onended=d,s.onmute=h,s.onunmute=d)}function y(){s.removeEventListener?(s.removeEventListener("ended",d),s.removeEventListener("mute",h),s.removeEventListener("unmute",d)):(s.onended=null,s.onmute=null,s.onunmute=null)}var v=function(g){return g?d():!1};return Cw.onVisibilityChange(1,v),f(),function(){Cw.offVisibilityChange(1,v),y()}}var bC=W4,H4=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q4=fo.isIOS,K4=lC,G4=be.isIOSChrome,Q4=pC,J4=bC,Y4=J4(Q4),X4=function(t){H4(e,t);function e(r,n){var i=this,o=(n==null?void 0:n.noiseCancellation)||null;i=t.call(this,r,n)||this;var a=i._log,s=r.label,c=s===void 0?"":s,l=r.getSettings(),u=l.deviceId,d=u===void 0?"":u,h=l.groupId,f=h===void 0?"":h;return Object.defineProperties(i,{_currentDefaultDeviceInfo:{value:{deviceId:d,groupId:f,label:c},writable:!0},_enumerateDevices:{value:typeof(n==null?void 0:n.enumerateDevices)=="function"?n.enumerateDevices:navigator.mediaDevices.enumerateDevices},_defaultDeviceCaptureMode:{value:(!q4()||o)&&i._isCreatedByCreateLocalTracks&&typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.addEventListener=="function"&&(typeof(n==null?void 0:n.enumerateDevices)=="function"||typeof navigator.mediaDevices.enumerateDevices=="function")?(n==null?void 0:n.defaultDeviceCaptureMode)||"auto":"manual"},_onDeviceChange:{value:function(){i._enumerateDevices().then(function(y){var v=y.find(function(g){var _=g.deviceId,m=g.kind;return m==="audioinput"&&_!=="default"});v&&["deviceId","groupId"].some(function(g){return v[g]!==i._currentDefaultDeviceInfo[g]})&&(a.info("Default device changed, restarting the LocalAudioTrack"),a.debug('Old default device: "'.concat(i._currentDefaultDeviceInfo.deviceId,'" => "').concat(i._currentDefaultDeviceInfo.label,'"')),a.debug('New default device: "'.concat(v.deviceId,'" => "').concat(v.label,'"')),i._currentDefaultDeviceInfo=v,i._restartDefaultDevice().catch(function(g){return a.warn("Failed to restart: ".concat(g.message))}))},function(y){a.warn("Failed to run enumerateDevices(): ".concat(y.message))})}},_restartOnDefaultDeviceChangeCleanup:{value:null,writable:!0},noiseCancellation:{enumerable:!0,value:o,writable:!1}}),a.debug("defaultDeviceCaptureMode:",i._defaultDeviceCaptureMode),i._maybeRestartOnDefaultDeviceChange(),i}return e.prototype.toString=function(){return"[LocalAudioTrack #".concat(this._instanceId,": ").concat(this.id,"]")},e.prototype.attach=function(r){return r=t.prototype.attach.call(this,r),r.muted=!0,r},e.prototype._end=function(){return t.prototype._end.apply(this,arguments)},e.prototype._maybeRestartOnDefaultDeviceChange=function(){var r=this,n=this,i=n._constraints,o=n._defaultDeviceCaptureMode,a=n._log,s=this.noiseCancellation?this.noiseCancellation.sourceTrack:this.mediaStreamTrack,c=s.getSettings().deviceId,l=function(d){return d!==c||d==="default"},u=function d(h){return h===void 0&&(h={}),typeof h=="string"?l(h):Array.isArray(h)?h.every(l):h.exact?d(h.exact):h.ideal?d(h.ideal):!0}(i.deviceId);o==="auto"&&u?this._restartOnDefaultDeviceChangeCleanup||(a.info("LocalAudioTrack will be restarted if the default device changes"),navigator.mediaDevices.addEventListener("devicechange",this._onDeviceChange),this._restartOnDefaultDeviceChangeCleanup=function(){a.info("Cleaning up the listener to restart the LocalAudioTrack if the default device changes"),navigator.mediaDevices.removeEventListener("devicechange",r._onDeviceChange),r._restartOnDefaultDeviceChangeCleanup=null}):(a.info("LocalAudioTrack will NOT be restarted if the default device changes"),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup())},e.prototype._reacquireTrack=function(r){var n=this;return this._log.debug("_reacquireTrack: ",r),this.noiseCancellation?this.noiseCancellation.reacquireTrack(function(){return t.prototype._reacquireTrack.call(n,r)}):t.prototype._reacquireTrack.call(this,r)},e.prototype._restartDefaultDevice=function(){var r=this,n=Object.assign({},this._constraints),i=Object.assign({},n,{deviceId:this._currentDefaultDeviceInfo.deviceId});return this.restart(i).then(function(){r._constraints=n,r._maybeRestartOnDefaultDeviceChange()})},e.prototype._setMediaStreamTrack=function(r){var n=this,i=this,o=i._log,a=i.noiseCancellation,s=t.prototype._setMediaStreamTrack.call(this,r);return G4()&&a&&(o.debug("iOS Chrome detected, checking if the restarted Krisp audio is silent"),s=s.then(function(){return K4(n._dummyEl)}).then(function(c){return o.debug("Krisp audio is ".concat(c?"silent, using source audio":"not silent")),c&&a.disablePermanently().then(function(){return t.prototype._setMediaStreamTrack.call(n,a.sourceTrack)})})),s},e.prototype.disable=function(){return t.prototype.disable.apply(this,arguments)},e.prototype.enable=function(){return t.prototype.enable.apply(this,arguments)},e.prototype.restart=function(){return t.prototype.restart.apply(this,arguments)},e.prototype.stop=function(){return this.noiseCancellation&&this.noiseCancellation.stop(),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup(),t.prototype.stop.apply(this,arguments)},e}(Y4),Z4=X4,eV=Xm,SC=Z4;function eg(t,e){var r=new SC(t,e);return Object.setPrototypeOf(r,eg.prototype),r}eV(eg,SC);var tV=eg,kC=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},rV=Ee.DEFAULT_FRAME_RATE;function nV(t,e){var r=kC(t.srcObject.getVideoTracks(),1),n=r[0],i=n.getSettings().frameRate,o=i===void 0?rV:i,a,s=new ReadableStream({start:function(l){a=setInterval(function(){return l.enqueue()},1e3/o)}}),c=new TransformStream({transform:function(){return e()}});return s.pipeThrough(c).pipeTo(new WritableStream).then(function(){}),function(){clearInterval(a)}}function iV(t,e,r){var n=kC(t.srcObject.getVideoTracks(),1),i=n[0],o=new MediaStreamTrackProcessor({track:i}).readable,a=new MediaStreamTrackGenerator({kind:"video"}),s=!1,c=new TransformStream({transform:function(l,u){var d=r==="videoframe"?e(l):Promise.resolve(l.close()).then(e);return d.finally(function(){s&&u.terminate()})}});return o.pipeThrough(c).pipeTo(a.writable).then(function(){}),function(){s=!0}}var oV=typeof MediaStreamTrackGenerator=="function"&&typeof MediaStreamTrackProcessor=="function"?iV:nV,aV=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sV=St.EventEmitter,cV=Ee.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,lV=function(t){aV(e,t);function e(r){var n=t.call(this)||this;return Object.defineProperties(n,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:r},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),n.on("add",function(i){n._lastStatsSaveTime=Date.now(),n._lastStatsPublishTime=Date.now(),n._processorInfo=i,n._stats=[],n._reemitEvent("add",n._getEventData())}),n.on("remove",function(){var i=n._getEventData();n._lastStatsSaveTime=null,n._lastStatsPublishTime=null,n._processorInfo=null,n._stats=null,n._reemitEvent("remove",i)}),n.on("start",function(){n._reemitEvent("start",n._getEventData())}),n.on("stop",function(i){n._reemitEvent("stop",Object.assign({message:i},n._getEventData()))}),n.on("stats",function(){return n._maybeEmitStats()}),n}return e.prototype._getEventData=function(){if(!this._processorInfo)return{};var r=this._processorInfo,n=r.processor,i=r.captureHeight,o=r.captureWidth,a=r.inputFrameRate,s=r.isRemoteVideoTrack,c=r.inputFrameBufferType,l=r.outputFrameBufferContextType,u={captureHeight:i,captureWidth:o,inputFrameRate:a,isRemoteVideoTrack:s,inputFrameBufferType:c,outputFrameBufferContextType:l};return u.name=n._name||"VideoProcessor",["assetsPath","blurFilterRadius","debounce","fitType","isSimdEnabled","maskBlurRadius","pipeline","version"].forEach(function(d){var h=n["_".concat(d)];typeof h<"u"&&(u[d]=h)}),Object.keys(u).forEach(function(d){var h=u[d];typeof h=="boolean"&&(u[d]=h?"true":"false")}),u},e.prototype._maybeEmitStats=function(){if(!(!this._stats||!this._processorInfo)){var r=this._processorInfo.processor._benchmark;if(r){var n=Date.now();if(!(n-this._lastStatsSaveTime<1e3)){var i={outputFrameRate:r.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(s){i[s]=r.getAverageDelay(s)}),this._lastStatsSaveTime=n,this._stats.push(i),!(n-this._lastStatsPublishTime<cV)){this._lastStatsPublishTime=n;var o=this._stats.splice(0),a=o.reduce(function(s,c,l){return Object.keys(i).forEach(function(u){s[u]||(s[u]=0),s[u]=(s[u]*l+c[u])/(l+1)}),s},{});Object.keys(a).forEach(function(s){a[s]=parseFloat(a[s].toFixed(2))}),this._reemitEvent("stats",Object.assign({},a,this._getEventData()))}}}}},e.prototype._reemitEvent=function(r,n){this._log.debug("VideoProcessor:".concat(r),n),this.emit("event",{name:r,data:n})},e}(sV),uV=lV,dV=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fV=hC,hV=oV,pV=uV,vV=Ee.DEFAULT_FRAME_RATE,tg=function(t){dV(e,t);function e(r,n){var i=t.call(this,r,n)||this;return Object.defineProperties(i,{_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_processorOptions:{value:{},writable:!0},_stopCapture:{value:function(){},writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0},_documentPipWindow:{value:null,writable:!0},_documentPipEnterListener:{value:null,writable:!0},_documentPipExitListener:{value:null,writable:!0}}),i._processorEventObserver=new(n.VideoProcessorEventObserver||pV)(i._log),i}return e.prototype._checkIfCanCaptureFrames=function(r){r===void 0&&(r=!1);var n=!0,i="",o=this.mediaStreamTrack,a=o.enabled,s=o.readyState;return a||(n=!1,i="MediaStreamTrack is disabled"),s==="ended"&&(n=!1,i="MediaStreamTrack is ended"),this.processor||(n=!1,i="VideoProcessor not detected."),!this._attachments.size&&!r&&(n=!1,i="VideoTrack is not publishing and there is no attached element."),i&&this._log.debug(i),{canCaptureFrames:n,message:i}},e.prototype._captureFrames=function(){var r=this;if(this._isCapturing){this._log.debug("Ignoring captureFrames call. Capture is already in progress");return}if(!this._checkIfCanCaptureFrames().canCaptureFrames){this._isCapturing=!1,this._log.debug("Cannot capture frames. Ignoring captureFrames call.");return}this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var n=this._processorOptions.inputFrameBufferType;this._dummyEl.play().then(function(){var i=function(o){var a=r._checkIfCanCaptureFrames();if(!a.canCaptureFrames)return o&&o.close(),r._isCapturing=!1,r._stopCapture(),r._processorEventObserver.emit("stop",a.message),r._log.debug("Cannot capture frames. Stopping capturing frames."),Promise.resolve();var s=r.mediaStreamTrack.getSettings(),c=s.width,l=c===void 0?0:c,u=s.height,d=u===void 0?0:u;r._outputFrame&&r._outputFrame.width!==l&&(r._outputFrame.width=l,r._outputFrame.height=d),r._inputFrame&&(r._inputFrame.width!==l&&(r._inputFrame.width=l,r._inputFrame.height=d),r._inputFrame.getContext("2d").drawImage(r._dummyEl,0,0,l,d));var h=o||(["video","videoframe"].includes(n)?r._dummyEl:r._inputFrame),f=null;try{f=r.processor.processFrame(h,r._outputFrame)}catch(y){r._log.debug("Exception detected after calling processFrame.",y)}return(f instanceof Promise?f:Promise.resolve(f)).then(function(){r._outputFrame&&(typeof r.processedTrack.requestFrame=="function"&&r.processedTrack.requestFrame(),r._processorEventObserver.emit("stats"))})};r._stopCapture=hV(r._dummyEl,i,n)}).catch(function(i){return r._log.error("Video element cannot be played",{error:i,track:r})})},e.prototype._initialize=function(){var r=this;t.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){Rw(r,r._dummyEl)&&(r.dimensions.width=r._dummyEl.videoWidth,r.dimensions.height=r._dummyEl.videoHeight)},this._dummyEl.onresize=function(){Rw(r,r._dummyEl)&&(r.dimensions.width=r._dummyEl.videoWidth,r.dimensions.height=r._dummyEl.videoHeight,r.isStarted&&(r._log.debug("Dimensions changed:",r.dimensions),r.emit(e.DIMENSIONS_CHANGED,r)))})},e.prototype._restartProcessor=function(){var r=this.processor;if(r){var n=Object.assign({},this._processorOptions);this.removeProcessor(r),this.addProcessor(r,n)}},e.prototype._start=function(r){return this.dimensions.width=r.videoWidth,this.dimensions.height=r.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(e.DIMENSIONS_CHANGED,this),t.prototype._start.call(this,r)},e.prototype.addProcessor=function(r,n){var i=this;if(!r||typeof r.processFrame!="function")throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",r),this._unmuteHandler||(this._unmuteHandler=function(){i._log.debug("mediaStreamTrack unmuted"),i.processedTrack.muted&&(i._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),i._restartProcessor())},this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler):this.mediaStreamTrack.onunmute=this._unmuteHandler.bind(this)),this._processorOptions=n||{};var o=this._processorOptions,a=o.inputFrameBufferType,s=o.outputFrameBufferContextType;if(typeof OffscreenCanvas>"u"&&a==="offscreencanvas")throw new Error("OffscreenCanvas is not supported by this browser.");if(a&&a!=="videoframe"&&a!=="video"&&a!=="canvas"&&a!=="offscreencanvas")throw new Error("Invalid inputFrameBufferType of ".concat(a));a||(a=typeof OffscreenCanvas>"u"?"canvas":"offscreencanvas");var c=this.mediaStreamTrack.getSettings(),l=c.width,u=l===void 0?0:l,d=c.height,h=d===void 0?0:d,f=c.frameRate,y=f===void 0?vV:f;a==="offscreencanvas"&&(this._inputFrame=new OffscreenCanvas(u,h)),a==="canvas"&&(this._inputFrame=document.createElement("canvas")),this._inputFrame&&(this._inputFrame.width=u,this._inputFrame.height=h),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=u,this._outputFrame.height=h,s=s||"2d";var v=this._outputFrame.getContext(s);if(!v)throw new Error("Cannot get outputFrameBufferContextType: ".concat(s,"."));var g=typeof CanvasCaptureMediaStreamTrack<"u"&&CanvasCaptureMediaStreamTrack.prototype&&typeof CanvasCaptureMediaStreamTrack.prototype.requestFrame=="function"?0:void 0;return this.processedTrack=this._outputFrame.captureStream(g).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=r,this._processorEventObserver.emit("add",{processor:r,captureHeight:h,captureWidth:u,inputFrameRate:y,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack"),inputFrameBufferType:a,outputFrameBufferContextType:s}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},e.prototype.attach=function(){var r=t.prototype.attach.apply(this,arguments);return this._attachments.size===1&&mV(this),this.processor&&this._captureFrames(),r},e.prototype.detach=function(){var r=t.prototype.detach.apply(this,arguments);return this._attachments.size===0&&gV(this),r},e.prototype.removeProcessor=function(r){if(!r)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(r!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",r),this._stopCapture(),this._stopCapture=function(){},this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._processorOptions={},this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},e}(fV);tg.DIMENSIONS_CHANGED="dimensionsChanged";function Rw(t,e){return t.dimensions.width!==e.videoWidth||t.dimensions.height!==e.videoHeight}function mV(t){!t._documentPipEnterListener&&"documentPictureInPicture"in globalThis&&globalThis.documentPictureInPicture&&typeof globalThis.documentPictureInPicture.addEventListener=="function"&&(t._documentPipEnterListener=function(e){t._log.debug("document pip entered"),t._documentPipWindow=e.window,t._documentPipExitListener=function(){t._log.debug("document pip exited"),t._documentPipWindow=null,typeof t._onDocumentPipExit=="function"&&t._onDocumentPipExit()},e.window&&typeof e.window.addEventListener=="function"&&e.window.addEventListener("pagehide",t._documentPipExitListener),TC(t),typeof t._onDocumentPipEnter=="function"&&t._onDocumentPipEnter(e)},globalThis.documentPictureInPicture.addEventListener("enter",t._documentPipEnterListener))}function gV(t){t._documentPipEnterListener&&(globalThis.documentPictureInPicture&&typeof globalThis.documentPictureInPicture.removeEventListener=="function"&&globalThis.documentPictureInPicture.removeEventListener("enter",t._documentPipEnterListener),t._documentPipWindow&&t._documentPipExitListener&&typeof t._documentPipWindow.removeEventListener=="function"&&t._documentPipWindow.removeEventListener("pagehide",t._documentPipExitListener),t._documentPipEnterListener=null,t._documentPipExitListener=null,t._documentPipWindow=null)}function TC(t){if(t._documentPipWindow)try{var e=new WeakSet(t._documentPipWindow.document.querySelectorAll("video"));t._attachments.forEach(function(r){e.has(r)&&r.paused&&r.play().then(function(){t._log.debug("Successfully played inadvertently paused video element in document PiP window")}).catch(function(n){t._log.debug("Failed to play inadvertently paused video element in document PiP window",n)})})}catch(r){t._log.debug("Error checking document PiP video playback:",r)}}tg._ensureDocumentPipVideosPlaying=TC;var xC=tg,yV=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_V=fo.isIOS,wV=vC,bV=bC,EC=xC,SV=bV(EC),kV=function(t){yV(e,t);function e(r,n){var i=this;return n=Object.assign({workaroundSilentLocalVideo:_V()&&typeof document<"u"&&typeof document.createElement=="function"},n),i=t.call(this,r,n)||this,Object.defineProperties(i,{_workaroundSilentLocalVideo:{value:n.workaroundSilentLocalVideo?TV:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0},_pipIntersectionObserver:{value:null,writable:!0}}),i._workaroundSilentLocalVideo&&(i._workaroundSilentLocalVideoCleanup=i._workaroundSilentLocalVideo(i,document)),i}return e.prototype.toString=function(){return"[LocalVideoTrack #".concat(this._instanceId,": ").concat(this.id,"]")},e.prototype._onDocumentPipEnter=function(){this._log.debug("LocalVideoTrack: Setting up PiP intersection observer"),this._setupPipIntersectionObserver()},e.prototype._onDocumentPipExit=function(){this._log.debug("LocalVideoTrack: Cleaning up PiP intersection observer"),this._cleanupPipIntersectionObserver()},e.prototype._setupPipIntersectionObserver=function(){var r=this;!this._pipIntersectionObserver&&this._documentPipWindow&&(this._log.debug("LocalVideoTrack: Creating PiP intersection observer"),this._pipIntersectionObserver=new IntersectionObserver(function(n){var i=n.some(function(o){return o.isIntersecting});i&&(r._log.debug("LocalVideoTrack: Element visible in PiP, ensuring videos are playing"),EC._ensureDocumentPipVideosPlaying(r))},{threshold:.25}),this._attachments.forEach(function(n){r._log.debug("LocalVideoTrack: Observing element for PiP visibility"),r._pipIntersectionObserver.observe(n)}))},e.prototype._cleanupPipIntersectionObserver=function(){this._pipIntersectionObserver&&(this._log.debug("LocalVideoTrack: Disconnecting PiP intersection observer"),this._pipIntersectionObserver.disconnect(),this._pipIntersectionObserver=null)},e.prototype.attach=function(){var r=t.prototype.attach.apply(this,arguments);return this._pipIntersectionObserver&&(this._log.debug("LocalVideoTrack: Observing newly attached element for PiP visibility"),this._pipIntersectionObserver.observe(r)),r},e.prototype.detach=function(){var r=this,n=t.prototype.detach.apply(this,arguments),i=Array.isArray(n)?n:[n];return this._pipIntersectionObserver&&i.forEach(function(o){r._log.debug("LocalVideoTrack: Unobserving detached element from PiP visibility"),r._pipIntersectionObserver.unobserve(o)}),n},e.prototype._checkIfCanCaptureFrames=function(){return t.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},e.prototype._end=function(){return t.prototype._end.apply(this,arguments)},e.prototype._setSenderMediaStreamTrack=function(r){var n=this,i=this.mediaStreamTrack,o=r?this.processedTrack:i;return this._trackSender.setMediaStreamTrack(o).catch(function(a){return n._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:a,mediaStreamTrack:o})}).then(function(){n._unprocessedTrack=r?i:null})},e.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var r=t.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),r):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},e.prototype.removeProcessor=function(){var r=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var n=t.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return r._updateElementsMediaStreamTrack()}),n},e.prototype.disable=function(){var r=t.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),r},e.prototype.enable=function(r){r===void 0&&(r=!0);var n=t.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=r,r&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),n},e.prototype.restart=function(){var r=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var n=t.prototype.restart.apply(this,arguments);return this.processor&&(n=n.then(function(){return r._restartProcessor()})),this._workaroundSilentLocalVideo&&n.finally(function(){r._workaroundSilentLocalVideoCleanup=r._workaroundSilentLocalVideo(r,document)}),n},e.prototype._restartProcessor=function(){var r=this.processor,n=Object.assign({},this._processorOptions);return t.prototype.removeProcessor.apply(this,[r]),t.prototype.addProcessor.apply(this,[r,n]),this._setSenderMediaStreamTrack(!0)},e.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),this._cleanupPipIntersectionObserver(),t.prototype.stop.apply(this,arguments)},e}(SV);function TV(t,e){var r=t._log,n=t._dummyEl,i=t.mediaStreamTrack;function o(){t.isEnabled&&(r.info("Unmuted, checking silence"),n.play().then(function(){return wV(n)}).then(function(a){if(!a){r.info("Non-silent frames detected, so no need to restart");return}return r.warn("Silence detected, restarting"),t._stop(),t._restart()}).catch(function(a){r.warn("Failed to detect silence and restart:",a)}).finally(function(){n=t._dummyEl,n&&!n.paused&&!t.processedTrack&&n.pause(),i.removeEventListener("unmute",o),i=t.mediaStreamTrack,i.addEventListener?i.addEventListener("unmute",o):i.onunmute=o}))}return i.addEventListener?i.addEventListener("unmute",o):i.onunmute=o,function(){i.removeEventListener?i.removeEventListener("unmute",o):i.onunmute=null}}var xV=kV,EV=Xm,CC=xV;function rg(t,e){var r=new CC(t,e);return Object.setPrototypeOf(r,rg.prototype),r}EV(rg,CC);var CV=rg,PV=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OV=yC,RV=function(t){PV(e,t);function e(r,n,i,o){var a=t.call(this,r,"data")||this;return Object.defineProperties(a,{maxPacketLifeTime:{enumerable:!0,value:n},maxRetransmits:{enumerable:!0,value:i},ordered:{enumerable:!0,value:o}}),a}return e}(OV),PC=RV,jV=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AV=PC,LV=J.makeUUID,IV=function(t){jV(e,t);function e(r,n,i){var o=t.call(this,LV(),r,n,i)||this;return Object.defineProperties(o,{_clones:{value:new Set},_dataChannels:{value:new Set}}),o}return e.prototype._addClone=function(r){this._clones.add(r)},e.prototype.removeClone=function(r){this._clones.delete(r)},e.prototype.addDataChannel=function(r){return this._dataChannels.add(r),this},e.prototype.clone=function(){var r=this,n=new e(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(n),n.once("stopped",function(){return r.removeClone(n)}),n},e.prototype.removeDataChannel=function(r){return this._dataChannels.delete(r),this},e.prototype.send=function(r){return this._dataChannels.forEach(function(n){try{n.send(r)}catch{}}),this._clones.forEach(function(n){try{n.send(r)}catch{}}),this},e.prototype.stop=function(){this._dataChannels.forEach(function(r){return r.close()}),this._clones.forEach(function(r){return r.stop()}),t.prototype.stop.call(this)},e}(AV),NV=IV,MV=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DV=Zm,$V=NV,UV=function(t){MV(e,t);function e(r){var n=this;r=Object.assign({DataTrackSender:$V,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},r);var i=r.DataTrackSender,o=new i(r.maxPacketLifeTime,r.maxRetransmits,r.ordered);return n=t.call(this,o.id,"data",r)||this,Object.defineProperties(n,{_trackSender:{value:o},id:{enumerable:!0,value:o.id},maxPacketLifeTime:{enumerable:!0,value:r.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:r.maxRetransmits},ordered:{enumerable:!0,value:r.ordered},reliable:{enumerable:!0,value:r.maxPacketLifeTime===null&&r.maxRetransmits===null}}),n}return e.prototype.send=function(r){this._trackSender.send(r)},e}(DV),FV=UV,BV=Xm,OC=FV;function ng(t){var e=new OC(t);return Object.setPrototypeOf(e,ng.prototype),e}BV(ng,OC);var VV=ng,na={LocalAudioTrack:tV,LocalVideoTrack:CV,LocalDataTrack:VV},zV=function(){function t(e){this._telemetry=e}return t.prototype.typeChanged=function(e){this._telemetry.info({group:"network",name:"network-type-changed",payload:{networkType:e}})},t.prototype.informationChanged=function(e){var r=e.downlink,n=e.downlinkMax,i=e.effectiveType,o=e.rtt,a=e.saveData,s=e.type;this._telemetry.info({group:"network",name:"network-information-changed",payload:{downlink:r,downlinkMax:n,effectiveType:i,rtt:o,saveData:a,type:s}})},t}(),WV=zV,HV=function(){function t(e){this._telemetry=e}return t.prototype.succeeded=function(){this._telemetry.info({group:"get-user-media",name:"succeeded"})},t.prototype.denied=function(){this._telemetry.info({group:"get-user-media",name:"denied"})},t.prototype.failed=function(e){this._telemetry.info({group:"get-user-media",name:"failed",payload:{name:e.name,message:e.message}})},t}(),qV=HV,KV=function(){function t(e){this._telemetry=e}return t.prototype.limitationChanged=function(e,r){this._telemetry.info({group:"quality",name:"quality-limitation-state-changed",payload:{trackSid:e,qualityLimitationReason:r}})},t.prototype.statsReport=function(e){this._telemetry.info({group:"quality",name:"stats-report",payload:e})},t.prototype.iceCandidatePair=function(e){this._telemetry.info({group:"quality",name:"active-ice-candidate-pair",payload:e})},t}(),GV=KV,QV=function(){function t(e){this._telemetry=e}return t.prototype.stalled=function(e,r,n,i){i===void 0&&(i="video"),this._telemetry.warning({group:"track-warning-raised",name:"track-stalled",payload:{trackSid:e,frameRate:r,threshold:n,trackType:i}})},t.prototype.resumed=function(e,r,n,i){i===void 0&&(i="video"),this._telemetry.info({group:"track-warning-cleared",name:"track-stalled",payload:{trackSid:e,frameRate:r,threshold:n,trackType:i}})},t}(),JV=QV,YV=function(){function t(e){this._telemetry=e}return t.prototype.resumed=function(){this._telemetry.info({group:"application",name:"resumed"})},t.prototype.backgrounded=function(){this._telemetry.info({group:"application",name:"backgrounded"})},t.prototype.terminated=function(){this._telemetry.info({group:"application",name:"terminated"})},t}(),XV=YV,ZV=function(){function t(e){this._telemetry=e}return t.prototype.cpuPressureChanged=function(e){this._telemetry.info({group:"system",name:"cpu-pressure-changed",payload:{resourceType:"cpu",pressure:e}})},t}(),e5=ZV,t5=WV,r5=qV,n5=GV,i5=JV,o5=XV,a5=e5,s5=function(){function t(){this._publisher=null,this._connectTimestamp=null,this._log=null,this.network=new t5(this),this.getUserMedia=new r5(this),this.quality=new n5(this),this.track=new i5(this),this.application=new o5(this),this.system=new a5(this)}return t.prototype.configure=function(e){var r=e.publisher,n=e.log,i=e.connectTimestamp;if(!r||!n||typeof i!="number")throw new Error("Telemetry.configure requires publisher, log, and connectTimestamp");return this._publisher&&this.reset(),this._publisher=r,this._log=n,this._connectTimestamp=i,this},t.prototype.reset=function(){return this._publisher=null,this._connectTimestamp=null,this._log=null,this},Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._publisher!==null},enumerable:!1,configurable:!0}),t.prototype._emit=function(e,r,n,i){if(!(!this._publisher||!this._log||this._connectTimestamp===null)){var o=Date.now(),a=o-this._connectTimestamp,s=Object.assign({elapsedTime:a,level:n},i||{});this._publisher.publish(e,r,s);var c=Object.assign({elapsedTime:a,group:e,level:n,name:r,timestamp:o},i?{payload:i}:{}),l={debug:"debug",error:"error",info:"info",warning:"warn"}[n];this._log[l]("telemetry",c)}},t.prototype.info=function(e){var r=e.group,n=e.name,i=e.payload;return this._emit(r,n,"info",i)},t.prototype.warning=function(e){var r=e.group,n=e.name,i=e.payload;return this._emit(r,n,"warning",i)},t.prototype.error=function(e){var r=e.group,n=e.name,i=e.payload;return this._emit(r,n,"error",i)},t}(),Na=new s5,Lr=x&&x.__assign||function(){return Lr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Lr.apply(this,arguments)},jw=x&&x.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},Aw=x&&x.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Lw=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Iw=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Um,"__esModule",{value:!0});Um.createLocalTracks=b5;var c5=vc,l5=J.buildLogLevels,RC=uo,u5=RC.getUserMedia,d5=RC.MediaStreamTrack,ig=na,f5=ig.LocalAudioTrack,h5=ig.LocalDataTrack,p5=ig.LocalVideoTrack,v5=pn,og=Ee,m5=og.DEFAULT_LOG_LEVEL,g5=og.DEFAULT_LOGGER_NAME,y5=og.typeErrors.INVALID_VALUE,_5=mC,$f=Na,w5=0;function b5(t){return jw(this,void 0,void 0,function(){var e,r,n,i,o,a,s,c,l,u,d,h,f,y=this;return Aw(this,function(v){switch(v.label){case 0:if(e=!(t&&("audio"in t||"video"in t)),r=Lr({audio:e,getUserMedia:u5,loggerName:g5,logLevel:m5,LocalAudioTrack:f5,LocalDataTrack:h5,LocalVideoTrack:p5,MediaStreamTrack:d5,Log:v5,video:e},t),n="[createLocalTracks #".concat(++w5,"]"),i=l5(r.logLevel),o=new r.Log("default",n,i,r.loggerName),a=Object.assign({log:o},r),delete a.name,r.audio===!1&&r.video===!1)return o.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(r.tracks)return o.info("Adding user-provided LocalTracks"),o.debug("LocalTracks:",r.tracks),[2,r.tracks];if(s={audio:typeof r.audio=="object"&&r.audio.name?{name:r.audio.name}:{defaultDeviceCaptureMode:"auto"},video:typeof r.video=="object"&&r.video.name?{name:r.video.name}:{}},s.audio.isCreatedByCreateLocalTracks=!0,s.video.isCreatedByCreateLocalTracks=!0,typeof r.audio=="object")if(typeof r.audio.workaroundWebKitBug1208516=="boolean"&&(s.audio.workaroundWebKitBug1208516=r.audio.workaroundWebKitBug1208516),"noiseCancellationOptions"in r.audio&&(c=r.audio.noiseCancellationOptions,delete r.audio.noiseCancellationOptions),!("defaultDeviceCaptureMode"in r.audio))s.audio.defaultDeviceCaptureMode="auto";else{if(["auto","manual"].every(function(g){return g!==r.audio.defaultDeviceCaptureMode}))throw y5("CreateLocalAudioTrackOptions.defaultDeviceCaptureMode",["auto","manual"]);s.audio.defaultDeviceCaptureMode=r.audio.defaultDeviceCaptureMode}typeof r.video=="object"&&typeof r.video.workaroundWebKitBug1208516=="boolean"&&(s.video.workaroundWebKitBug1208516=r.video.workaroundWebKitBug1208516),typeof r.audio=="object"&&delete r.audio.name,typeof r.video=="object"&&delete r.video.name,l={audio:r.audio,video:r.video},u=typeof r.audio=="object"&&r.audio.workaroundWebKitBug180748,v.label=1;case 1:return v.trys.push([1,4,,5]),[4,u?_5(o,r.getUserMedia,l):r.getUserMedia(l)];case 2:return d=v.sent(),$f.getUserMedia.succeeded(),h=Iw(Iw([],Lw(d.getAudioTracks()),!1),Lw(d.getVideoTracks()),!1),o.info("Call to getUserMedia successful; got tracks:",h),[4,Promise.all(h.map(function(g){return jw(y,void 0,void 0,function(){var _,m,w;return Aw(this,function(S){switch(S.label){case 0:return g.kind==="audio"&&c?[4,(0,c5.applyNoiseCancellation)(g,c,o)]:[3,2];case 1:return _=S.sent(),m=_.cleanTrack,w=_.noiseCancellation,[2,new a.LocalAudioTrack(m,Lr(Lr(Lr({},s.audio),a),{noiseCancellation:w}))];case 2:if(g.kind==="audio")return[2,new a.LocalAudioTrack(g,Lr(Lr({},s.audio),a))];S.label=3;case 3:return[2,new a.LocalVideoTrack(g,Lr(Lr({},s.video),a))]}})})}))];case 3:return[2,v.sent()];case 4:throw f=v.sent(),f.name==="NotAllowedError"||f.name==="PermissionDeniedError"?$f.getUserMedia.denied():$f.getUserMedia.failed(f),o.warn("Call to getUserMedia failed:",f),f;case 5:return[2]}})})}var gc={},Td={};Object.defineProperty(Td,"__esModule",{value:!0});Td.Timer=void 0;var S5=function(){function t(){this._end=void 0,this.start()}return t.prototype.start=function(){return this._start=Date.now(),this},t.prototype.stop=function(){return this._end=Date.now(),this},t.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:this._end===void 0?void 0:this._end-this._start}},t}();Td.Timer=S5;var xd={};Object.defineProperty(xd,"__esModule",{value:!0});xd.calculateMOS=k5;xd.mosToScore=T5;var Nw=94.768;function k5(t,e,r){var n=t+e*2+10,i=0;switch(!0){case n<160:i=Nw-n/40;break;case n<1e3:i=Nw-(n-120)/10;break}switch(!0){case r<=i/2.5:i=Math.max(i-r*2.5,6.52);break;default:i=0;break}var o=1+.035*i+7e-6*i*(i-60)*(100-i);return o}function T5(t){var e=0;return t?t>4.2?e=5:t>4?e=4:t>3.6?e=3:t>3?e=2:e=1:e=0,e}var ag={},x5=x&&x.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},E5=x&&x.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},C5=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(ag,"__esModule",{value:!0});ag.getCombinedConnectionStats=P5;function Cn(t,e,r,n){var i=[];return t.forEach(function(o){(n.length===0||n.includes(o.type))&&(r.length===0||r.includes(o.kind))&&typeof o[e]=="number"&&i.push(o[e])}),i}function P5(t){return x5(this,arguments,void 0,function(e){var r,n,i,o,a,s,c,l,u,d,h,f,y,v,g,_=e.publisher,m=e.subscriber;return E5(this,function(w){switch(w.label){case 0:return[4,Promise.all([_,m].map(function(S){return S.getStats()}))];case 1:return r=C5.apply(void 0,[w.sent(),2]),n=r[0],i=r[1],o=Cn(i,"timestamp",["audio"],["inbound-rtp"]),a=o.length>0?o[0]:0,s=Cn(i,"jitter",["audio"],["inbound-rtp"]).reduce(function(S,k){return Math.max(S,k)},0),c=Cn(i,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(S,k){return S+k},0),l=Cn(i,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(S,k){return S+k},0),u=Cn(n,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(S,k){return Math.max(S,k)},0),d=Cn(i,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(S,k){return Math.max(S,k)},0),h=(d||u)*1e3,f=Cn(n,"bytesSent",[],["candidate-pair"]).reduce(function(S,k){return S+k},0),y=Cn(i,"bytesReceived",[],["candidate-pair"]).reduce(function(S,k){return S+k},0),v=O5(i),g=[],i.forEach(function(S){(S.type==="local-candidate"||S.type==="remote-candidate")&&g.push(Hp(S))}),[2,{timestamp:a,jitter:s,packets:c,packetsLost:l,roundTripTime:h,bytesSent:f,bytesReceived:y,selectedIceCandidatePairStats:v,iceCandidateStats:g}]}})})}function Hp(t){var e=[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}];return e.reduce(function(r,n){var i=[n.key];n.altKeys&&(i=i.concat(n.altKeys));var o=i.find(function(a){return a in t});return o&&typeof t[o]===n.type&&(r[n.key]=t[o]),r},{})}function O5(t){var e=null,r=[];t.forEach(function(s){s.type==="transport"&&s.selectedCandidatePairId?e=s.selectedCandidatePairId:s.type==="candidate-pair"&&r.push(s)});var n=r.find(function(s){return s.selected||e&&s.id===e});if(!n)return null;var i=n,o=t.get(i.localCandidateId),a=t.get(i.remoteCandidateId);return!o||!a?null:{localCandidate:Hp(o),remoteCandidate:Hp(a)}}var sg={},R5=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),j5=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},A5=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},L5=St.EventEmitter,jC=J,I5=function(t){R5(e,t);function e(r,n){var i=t.call(this)||this,o=null,a=r;return n=D5(n),Object.defineProperties(i,{_lock:{get:function(){return o},set:function(s){o=s}},_reachableStates:{value:M5(n)},_state:{get:function(){return a},set:function(s){a=s}},_states:{value:n},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return o!==null}},state:{enumerable:!0,get:function(){return a}}}),i.on("stateChanged",function(s){i._whenDeferreds.forEach(function(c){c.when(s,c.resolve,c.reject)})}),i}return e.prototype._whenPromise=function(r){var n=this;if(typeof r!="function")return Promise.reject(new Error("when() executor must be a function"));var i=jC.defer();return i.when=r,this._whenDeferreds.add(i),i.promise.then(function(o){return n._whenDeferreds.delete(i),o},function(o){throw n._whenDeferreds.delete(i),o})},e.prototype.bracket=function(r,n){var i,o=this;function a(s){if(o.hasLock(i)&&o.releaseLockCompletely(i),s)throw s}return this.takeLock(r).then(function(c){return i=c,n(i)}).then(function(c){return a(),c},a)},e.prototype.hasLock=function(r){return this._lock===r},e.prototype.preempt=function(r,n,i){if(!ll(this._states,this.state,r))throw new Error('Cannot transition from "'.concat(this.state,'" to "').concat(r,'"'));var o;this.isLocked&&(o=this._lock,this._lock=null);var a=null;n&&(a=this.takeLockSync(n));var s=a?null:this.takeLockSync("preemption");return this.transition(r,a||s,i),o&&o.resolve(),s&&this.releaseLock(s),a},e.prototype.releaseLock=function(r){if(this.isLocked){if(!this.hasLock(r))throw new Error("Could not release the lock for ".concat(r.name," because ").concat(this._lock.name," has the lock"))}else throw new Error("Could not release the lock for ".concat(r.name," because the StateMachine is not locked"));r.depth===0?(this._lock=null,r.resolve()):r.depth--},e.prototype.releaseLockCompletely=function(r){if(this.isLocked){if(!this.hasLock(r))throw new Error("Could not release the lock for ".concat(r.name," because ").concat(this._lock.name," has the lock"))}else throw new Error("Could not release the lock for ".concat(r.name," because the StateMachine is not locked"));r.depth=0,this._lock=null,r.resolve()},e.prototype.takeLock=function(r){var n=this;if(typeof r=="object"){var i=r;return new Promise(function(s){s(n.takeLockSync(i))})}var o=r;if(this.isLocked){var a=this.takeLock.bind(this,o);return this._lock.promise.then(a)}return Promise.resolve(this.takeLockSync(o))},e.prototype.takeLockSync=function(r){var n=typeof r=="string"?null:r,i=n?n.name:r;if(n&&!this.hasLock(n)||!n&&this.isLocked)throw new Error("Could not take the lock for ".concat(i," because the lock for ").concat(this._lock.name," was not released"));if(n)return n.depth++,n;var o=N5(i);return this._lock=o,o},e.prototype.transition=function(r,n,i){if(i=i||[],this.isLocked)if(n){if(!this.hasLock(n))throw new Error("Could not transition using the key for ".concat(n.name," because ").concat(this._lock.name," has the lock"))}else throw new Error("You must provide the key in order to transition");else if(n)throw new Error("Key provided for ".concat(n.name,", but the StateMachine was not locked (possibly due to preemption)"));if(!ll(this._states,this.state,r))throw new Error('Cannot transition from "'.concat(this.state,'" to "').concat(r,'"'));this._state=r,this.emit.apply(this,A5([],j5(["stateChanged",r].concat(i)),!1))},e.prototype.tryTransition=function(r,n,i){try{this.transition(r,n,i)}catch{return!1}return!0},e.prototype.when=function(r){var n=this;return this.state===r?Promise.resolve(this):ll(this._reachableStates,this.state,r)?this._whenPromise(function(i,o,a){i===r?o(n):ll(n._reachableStates,i,r)||a(Mw(i,r))}):Promise.reject(Mw(this.state,r))},e}(L5);function ll(t,e,r){return t.get(e).has(r)}function N5(t){var e=jC.defer();return e.name=t,e.depth=0,e}function M5(t){return Array.from(t.keys()).reduce(function(e,r){return e.set(r,AC(t,r))},new Map)}function AC(t,e,r){return r=r||new Set,t.get(e).forEach(function(n){r.has(n)||(r.add(n),AC(t,n,r).forEach(r.add,r))}),r}function D5(t){var e=new Map;for(var r in t)e.set(r,new Set(t[r]));return e}function Mw(t,e){return new Error('"'.concat(e,'" cannot be reached from "').concat(t,'"'))}var Ma=I5,$5=function(){function t(e,r){var n=this;r=Object.assign({navigator,window},r);var i=r.navigator,o=i.connection||{type:null},a=o.type,s=o.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var d=a!==n.type&&n.isOnline;a=n.type,d&&e()}},_target:{value:o}}:{_events:{value:["online"]},_listener:{value:e},_target:{value:r.window}},c=s._events,l=s._listener,u=s._target;Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return typeof i.onLine=="boolean"?i.onLine:!0}},type:{enumerable:!0,get:function(){return o.type||null}},_listener:l,_events:c,_target:u})}return t.prototype.start=function(){var e=this;this._events.forEach(function(r){e._target.addEventListener(r,e._listener)})},t.prototype.stop=function(){var e=this;this._events.forEach(function(r){e._target.removeEventListener(r,e._listener)})},t}(),U5=$5,F5=function(){function t(e,r,n){n===void 0&&(n=!0),Object.defineProperties(this,{_delay:{value:r,writable:!0},_fn:{value:e},_timeout:{value:null,writable:!0}}),n&&this.start()}return Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),t.prototype.setDelay=function(e){this._delay=e},t.prototype.start=function(){var e=this;this.isSet||(this._timeout=setTimeout(function(){var r=e._fn;e.clear(),r()},this._delay))},t.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},t.prototype.reset=function(){this.clear(),this.start()},t}(),ho=F5,Uf,Dw;function LC(){return Dw||(Dw=1,Uf=WebSocket),Uf}var B5=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$w=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},V5=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},z5=Ma,IC=J,W5=IC.buildLogLevels,H5=IC.makeUUID,q5=pn,K5=U5,ko=ho,G5=0,Q5={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},Uw={closed:"close",open:"open",waiting:"waiting"},J5=2,Y5=3,X5=3,Z5=5e3,ez=15e3,tz=5e3,rz=200,Fw=1e3,qp=3e3,Kp=3001,Gp=3002,Qp=3003,NC=3004,ul=3005,Jp=3006,MC=3007,Bw=globalThis,nz=Bw.WebSocket?Bw.WebSocket:LC(),yr={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},iz=new Map([[qp,yr.TIMEOUT],[Kp,yr.TIMEOUT],[Gp,yr.FAILED],[Qp,yr.FAILED],[NC,yr.TIMEOUT],[Jp,yr.BUSY],[MC,yr.TIMEOUT]]),DC=function(t){B5(e,t);function e(r,n){var i=t.call(this,"early",Q5)||this;n=Object.assign({helloBody:null,maxConsecutiveFailedHellos:X5,maxConsecutiveMissedHeartbeats:Y5,requestedHeartbeatTimeout:Z5,openTimeout:ez,welcomeTimeout:tz,Log:q5,WebSocket:nz},n);var o=W5(n.logLevel),a=new n.Log("default",i,o,n.loggerName),s=n.networkMonitor?new K5(function(){var l=s.type,u="Network changed".concat(l?" to ".concat(l):"");a.debug(u),i._close({code:NC,reason:u})}):null;Object.defineProperties(i,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:n.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:n.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++G5},_log:{value:a},_messageQueue:{value:[]},_networkMonitor:{value:s},_options:{value:n},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:r},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var c={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return i.on("stateChanged",function(l){for(var u=[],d=1;d<arguments.length;d++)u[d-1]=arguments[d];l in Uw&&i.emit.apply(i,V5([Uw[l]],$w(u),!1));var h={name:l,group:"signaling",level:c[i.state]};if(l==="closed"){var f=$w(u,1),y=f[0];h.payload={reason:y},h.level=y===yr.LOCAL?"info":"error"}i._eventObserver.emit("event",h)}),i._eventObserver.emit("event",{name:i.state,group:"signaling",level:c[i.state]}),i._connect(),i}return e.prototype.toString=function(){return"[TwilioConnection #".concat(this._instanceId,": ").concat(this._ws.url,"]")},e.prototype._close=function(r){var n=r.code,i=r.reason;if(this.state!=="closed"){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&n!==ul&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var o=this._log;n===Fw?(o.debug("Closed"),this.transition("closed",null,[yr.LOCAL])):(o.warn("Closed: ".concat(n," - ").concat(i)),n!==ul&&this.transition("closed",null,[iz.get(n)||yr.REMOTE]));var a=this._ws.readyState,s=this._options.WebSocket;a!==s.CLOSING&&a!==s.CLOSED&&this._ws.close(n,i)}},e.prototype._connect=function(){var r=this,n=this._log;if(this.state==="waiting")this.transition("early");else if(this.state!=="early"){n.warn('Unexpected state "'.concat(this.state,'" for connecting to the')+" TCMP server.");return}this._ws=new this._options.WebSocket(this._serverUrl);var i=this._ws;n.debug("Created a new WebSocket:",i),i.addEventListener("close",function(a){return r._close(a)});var o=this._options.openTimeout;this._openTimeout=new ko(function(){var a="Failed to open in ".concat(o," ms");r._close({code:MC,reason:a})},o),i.addEventListener("open",function(){n.debug("WebSocket opened:",i),r._openTimeout.clear(),r._startHandshake(),r._networkMonitor&&r._networkMonitor.start()}),i.addEventListener("message",function(a){n.debug("Incoming: ".concat(a.data));try{a=JSON.parse(a.data)}catch(s){r.emit("error",s);return}switch(a.type){case"bad":r._handleBad(a);break;case"busy":r._handleBusy(a);break;case"bye":break;case"msg":r._handleMessage(a);case"heartbeat":r._handleHeartbeat();break;case"welcome":r._handleWelcome(a);break;default:r._log.debug("Unknown message type: ".concat(a.type)),r.emit("error",new Error("Unknown message type: ".concat(a.type)));break}})},e.prototype._handleBad=function(r){var n=r.reason,i=this._log;if(!["connecting","open"].includes(this.state)){i.warn('Unexpected state "'.concat(this.state,'" for handling a "bad" message')+" from the TCMP server.");return}if(this.state==="connecting"){i.warn("Closing: ".concat(Gp," - ").concat(n)),this._close({code:Gp,reason:n});return}i.debug("Error: ".concat(n)),this.emit("error",new Error(n))},e.prototype._handleBusy=function(r){var n=this,i=r.cookie,o=r.keepAlive,a=r.retryAfter,s=this._log;if(!["connecting","waiting"].includes(this.state)){s.warn('Unexpected state "'.concat(this.state,'" for handling a "busy" message')+" from the TCMP server.");return}this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var c=a<0?'Received terminal "busy" message':'Received "busy" message, retrying after '.concat(a," ms");if(a<0){s.warn("Closing: ".concat(Jp," - ").concat(c)),this._close({code:Jp,reason:c});return}var l=this._options.maxConsecutiveFailedHellos;this._hellosLeft=l,this._cookie=i||null,o?(s.warn(c),this._busyWaitTimeout=new ko(function(){return n._startHandshake()},a)):(s.warn("Closing: ".concat(ul," - ").concat(c)),this._close({code:ul,reason:c}),this._busyWaitTimeout=new ko(function(){return n._connect()},a)),this.transition("waiting",null,[o,a])},e.prototype._handleHeartbeat=function(){if(this.state!=="open"){this._log.warn('Unexpected state "'.concat(this.state,'" for handling a "heartbeat"')+" message from the TCMP server.");return}this._heartbeatTimeout.reset()},e.prototype._handleHeartbeatTimeout=function(){if(this.state==="open"){var r=this._log,n=this._options.maxConsecutiveMissedHeartbeats;r.debug("Consecutive heartbeats missed: ".concat(n));var i="Missed ".concat(n,' "heartbeat" messages');r.warn("Closing: ".concat(Kp," - ").concat(i)),this._close({code:Kp,reason:i})}},e.prototype._handleMessage=function(r){var n=r.body;if(this.state!=="open"){this._log.warn('Unexpected state "'.concat(this.state,'" for handling a "msg" message')+" from the TCMP server.");return}this.emit("message",n)},e.prototype._handleWelcome=function(r){var n=this,i=r.negotiatedTimeout,o=this._log;if(!["connecting","waiting"].includes(this.state)){o.warn('Unexpected state "'.concat(this.state,'" for handling a "welcome"')+" message from the TCMP server.");return}this.state==="waiting"&&(o.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var a=this._options.maxConsecutiveMissedHeartbeats,s=i*a,c=i-rz;this._welcomeTimeout.clear(),this._heartbeatTimeout=new ko(function(){return n._handleHeartbeatTimeout()},s),this._messageQueue.splice(0).forEach(function(l){return n._send(l)}),this._sendHeartbeatTimeout=new ko(function(){return n._sendHeartbeat()},c),this.transition("open")},e.prototype._handleWelcomeTimeout=function(){if(this.state==="connecting"){var r=this._log;if(this._hellosLeft<=0){var n="All handshake attempts failed";r.warn("Closing: ".concat(qp," - ").concat(n)),this._close({code:qp,reason:n});return}var i=this._options.maxConsecutiveFailedHellos;r.warn("Handshake attempt ".concat(i-this._hellosLeft," failed")),this._startHandshake()}},e.prototype._send=function(r){var n=this._ws.readyState,i=this._options.WebSocket;if(n===i.OPEN){var o=JSON.stringify(r);this._log.debug("Outgoing: ".concat(o));try{this._ws.send(o),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var a="Failed to send message";this._log.warn("Closing: ".concat(Qp," - ").concat(a)),this._close({code:Qp,reason:a})}}},e.prototype._sendHeartbeat=function(){this.state!=="closed"&&this._send({type:"heartbeat"})},e.prototype._sendHello=function(){var r=this._options,n=r.helloBody,i=r.requestedHeartbeatTimeout,o={id:H5(),timeout:i,type:"hello",version:J5};this._cookie&&(o.cookie=this._cookie),n&&(o.body=n),this._send(o)},e.prototype._sendOrEnqueue=function(r){var n=this;if(this.state!=="closed"){var i=this.state==="open"?function(o){return n._send(o)}:function(o){return n._messageQueue.push(o)};i(r)}},e.prototype._startHandshake=function(){var r=this;if(["early","waiting"].includes(this.state)&&this.transition("connecting"),this.state==="connecting"){this._hellosLeft--,this._sendHello();var n=this._options.welcomeTimeout;this._welcomeTimeout=new ko(function(){return r._handleWelcomeTimeout()},n)}},e.prototype.close=function(){this.state!=="closed"&&(this._sendOrEnqueue({type:"bye"}),this._close({code:Fw,reason:"Normal"}))},e.prototype.sendMessage=function(r){this._sendOrEnqueue({body:r,type:"msg"})},e}(z5);DC.CloseReason=yr;var $C=DC,Z={},oz=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),az=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},sz=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},cz=function(t){oz(e,t);function e(r){var n=this,i=[].slice.call(arguments,1);n=t.apply(this,sz([],az(i),!1))||this,Object.setPrototypeOf(n,e.prototype);var o=Error.apply(n,i);return o.name="TwilioError",Object.defineProperty(n,"code",{value:r,enumerable:!0}),Object.getOwnPropertyNames(o).forEach(function(a){Object.defineProperty(this,a,{value:o[a],enumerable:!0})},n),n}return e.prototype.toString=function(){var r=this.message?": ".concat(this.message):"";return"".concat(this.name," ").concat(this.code).concat(r)},e}(Error),lz=cz,oe=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ie=lz,ne={};Z.createTwilioError=function(e,r){return e=typeof e=="number"?e:0,r=typeof r=="string"&&r?r:"Unknown error",ne[e]?new ne[e]:new ie(e,r)};var UC=function(t){oe(e,t);function e(){var r=t.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenInvalidError=UC;Object.defineProperty(ne,20101,{value:UC});var FC=function(t){oe(e,t);function e(){var r=t.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenHeaderInvalidError=FC;Object.defineProperty(ne,20102,{value:FC});var BC=function(t){oe(e,t);function e(){var r=t.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenIssuerInvalidError=BC;Object.defineProperty(ne,20103,{value:BC});var VC=function(t){oe(e,t);function e(){var r=t.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenExpiredError=VC;Object.defineProperty(ne,20104,{value:VC});var zC=function(t){oe(e,t);function e(){var r=t.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenNotYetValidError=zC;Object.defineProperty(ne,20105,{value:zC});var WC=function(t){oe(e,t);function e(){var r=t.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenGrantsInvalidError=WC;Object.defineProperty(ne,20106,{value:WC});var HC=function(t){oe(e,t);function e(){var r=t.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenSignatureInvalidError=HC;Object.defineProperty(ne,20107,{value:HC});var qC=function(t){oe(e,t);function e(){var r=t.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.SignalingConnectionError=qC;Object.defineProperty(ne,53e3,{value:qC});var KC=function(t){oe(e,t);function e(){var r=t.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.SignalingConnectionDisconnectedError=KC;Object.defineProperty(ne,53001,{value:KC});var GC=function(t){oe(e,t);function e(){var r=t.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.SignalingConnectionTimeoutError=GC;Object.defineProperty(ne,53002,{value:GC});var QC=function(t){oe(e,t);function e(){var r=t.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.SignalingIncomingMessageInvalidError=QC;Object.defineProperty(ne,53003,{value:QC});var JC=function(t){oe(e,t);function e(){var r=t.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.SignalingOutgoingMessageInvalidError=JC;Object.defineProperty(ne,53004,{value:JC});var YC=function(t){oe(e,t);function e(){var r=t.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.SignalingServerBusyError=YC;Object.defineProperty(ne,53006,{value:YC});var XC=function(t){oe(e,t);function e(){var r=t.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomNameInvalidError=XC;Object.defineProperty(ne,53100,{value:XC});var ZC=function(t){oe(e,t);function e(){var r=t.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomNameTooLongError=ZC;Object.defineProperty(ne,53101,{value:ZC});var eP=function(t){oe(e,t);function e(){var r=t.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomNameCharsInvalidError=eP;Object.defineProperty(ne,53102,{value:eP});var tP=function(t){oe(e,t);function e(){var r=t.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomCreateFailedError=tP;Object.defineProperty(ne,53103,{value:tP});var rP=function(t){oe(e,t);function e(){var r=t.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomConnectFailedError=rP;Object.defineProperty(ne,53104,{value:rP});var nP=function(t){oe(e,t);function e(){var r=t.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomMaxParticipantsExceededError=nP;Object.defineProperty(ne,53105,{value:nP});var iP=function(t){oe(e,t);function e(){var r=t.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomNotFoundError=iP;Object.defineProperty(ne,53106,{value:iP});var oP=function(t){oe(e,t);function e(){var r=t.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomMaxParticipantsOutOfRangeError=oP;Object.defineProperty(ne,53107,{value:oP});var aP=function(t){oe(e,t);function e(){var r=t.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomTypeInvalidError=aP;Object.defineProperty(ne,53108,{value:aP});var sP=function(t){oe(e,t);function e(){var r=t.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomTimeoutOutOfRangeError=sP;Object.defineProperty(ne,53109,{value:sP});var cP=function(t){oe(e,t);function e(){var r=t.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomStatusCallbackMethodInvalidError=cP;Object.defineProperty(ne,53110,{value:cP});var lP=function(t){oe(e,t);function e(){var r=t.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomStatusCallbackInvalidError=lP;Object.defineProperty(ne,53111,{value:lP});var uP=function(t){oe(e,t);function e(){var r=t.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomStatusInvalidError=uP;Object.defineProperty(ne,53112,{value:uP});var dP=function(t){oe(e,t);function e(){var r=t.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomRoomExistsError=dP;Object.defineProperty(ne,53113,{value:dP});var fP=function(t){oe(e,t);function e(){var r=t.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomInvalidParametersError=fP;Object.defineProperty(ne,53114,{value:fP});var hP=function(t){oe(e,t);function e(){var r=t.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomMediaRegionInvalidError=hP;Object.defineProperty(ne,53115,{value:hP});var pP=function(t){oe(e,t);function e(){var r=t.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomMediaRegionUnavailableError=pP;Object.defineProperty(ne,53116,{value:pP});var vP=function(t){oe(e,t);function e(){var r=t.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomSubscriptionOperationNotSupportedError=vP;Object.defineProperty(ne,53117,{value:vP});var mP=function(t){oe(e,t);function e(){var r=t.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomCompletedError=mP;Object.defineProperty(ne,53118,{value:mP});var gP=function(t){oe(e,t);function e(){var r=t.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomAudioOnlyFlagNotSupportedError=gP;Object.defineProperty(ne,53124,{value:gP});var yP=function(t){oe(e,t);function e(){var r=t.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomTrackKindNotSupportedError=yP;Object.defineProperty(ne,53125,{value:yP});var _P=function(t){oe(e,t);function e(){var r=t.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ParticipantIdentityInvalidError=_P;Object.defineProperty(ne,53200,{value:_P});var wP=function(t){oe(e,t);function e(){var r=t.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ParticipantIdentityTooLongError=wP;Object.defineProperty(ne,53201,{value:wP});var bP=function(t){oe(e,t);function e(){var r=t.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ParticipantIdentityCharsInvalidError=bP;Object.defineProperty(ne,53202,{value:bP});var SP=function(t){oe(e,t);function e(){var r=t.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ParticipantMaxTracksExceededError=SP;Object.defineProperty(ne,53203,{value:SP});var kP=function(t){oe(e,t);function e(){var r=t.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ParticipantNotFoundError=kP;Object.defineProperty(ne,53204,{value:kP});var TP=function(t){oe(e,t);function e(){var r=t.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ParticipantDuplicateIdentityError=TP;Object.defineProperty(ne,53205,{value:TP});var xP=function(t){oe(e,t);function e(){var r=t.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.TrackInvalidError=xP;Object.defineProperty(ne,53300,{value:xP});var EP=function(t){oe(e,t);function e(){var r=t.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.TrackNameInvalidError=EP;Object.defineProperty(ne,53301,{value:EP});var CP=function(t){oe(e,t);function e(){var r=t.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.TrackNameTooLongError=CP;Object.defineProperty(ne,53302,{value:CP});var PP=function(t){oe(e,t);function e(){var r=t.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.TrackNameCharsInvalidError=PP;Object.defineProperty(ne,53303,{value:PP});var OP=function(t){oe(e,t);function e(){var r=t.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.TrackNameIsDuplicatedError=OP;Object.defineProperty(ne,53304,{value:OP});var RP=function(t){oe(e,t);function e(){var r=t.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.TrackServerTrackCapacityReachedError=RP;Object.defineProperty(ne,53305,{value:RP});var jP=function(t){oe(e,t);function e(){var r=t.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaClientLocalDescFailedError=jP;Object.defineProperty(ne,53400,{value:jP});var AP=function(t){oe(e,t);function e(){var r=t.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaServerLocalDescFailedError=AP;Object.defineProperty(ne,53401,{value:AP});var LP=function(t){oe(e,t);function e(){var r=t.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaClientRemoteDescFailedError=LP;Object.defineProperty(ne,53402,{value:LP});var IP=function(t){oe(e,t);function e(){var r=t.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaServerRemoteDescFailedError=IP;Object.defineProperty(ne,53403,{value:IP});var NP=function(t){oe(e,t);function e(){var r=t.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaNoSupportedCodecError=NP;Object.defineProperty(ne,53404,{value:NP});var MP=function(t){oe(e,t);function e(){var r=t.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaConnectionError=MP;Object.defineProperty(ne,53405,{value:MP});var DP=function(t){oe(e,t);function e(){var r=t.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaDTLSTransportFailedError=DP;Object.defineProperty(ne,53407,{value:DP});var $P=function(t){oe(e,t);function e(){var r=t.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ConfigurationAcquireFailedError=$P;Object.defineProperty(ne,53500,{value:$P});var UP=function(t){oe(e,t);function e(){var r=t.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ConfigurationAcquireTurnFailedError=UP;Object.defineProperty(ne,53501,{value:UP});Object.defineProperty(sg,"__esModule",{value:!0});sg.getTurnCredentials=vz;var uz=$C,dz=Ee.ICE_VERSION,FP=Z,fz=FP.createTwilioError,hz=FP.SignalingConnectionError,pz=St;function vz(t,e){return new Promise(function(r,n){var i=new pz.EventEmitter,o={networkMonitor:null,eventObserver:i,helloBody:{edge:"roaming",preflight:!0,token:t,type:"ice",version:dz}},a=new uz(e,o),s=!1;a.once("close",function(){s||(s=!0,n(new hz))}),a.on("message",function(c){var l=c.code,u=c.message,d=c.ice_servers,h=c.type;(h==="iced"||h==="error")&&!s&&(s=!0,h==="iced"?r(d):n(fz(l,u)),a.close())})})}var cg={},Vw=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},zw=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(cg,"__esModule",{value:!0});cg.makeStat=mz;function mz(t){if(t&&t.length){var e=Math.min.apply(Math,zw([],Vw(t),!1)),r=Math.max.apply(Math,zw([],Vw(t),!1)),n=t.reduce(function(i,o){return i+o},0)/t.length;return{min:e,max:r,average:n}}return null}var lg={};Object.defineProperty(lg,"__esModule",{value:!0});lg.syntheticAudio=gz;function gz(){var t=bd(),e={},r=t.getOrCreate(e),n=r.createOscillator(),i=n.connect(r.createMediaStreamDestination());n.start();var o=i.stream.getAudioTracks()[0],a=o.stop;return o.stop=function(){a.call(o),t.release(e)},o}var ug={};Object.defineProperty(ug,"__esModule",{value:!0});ug.syntheticVideo=yz;function yz(t){var e=t===void 0?{}:t,r=e.width,n=r===void 0?640:r,i=e.height,o=i===void 0?480:i,a=Object.assign(document.createElement("canvas"),{width:n,height:o}),s=a.getContext("2d");s.fillStyle="green",s.fillRect(0,0,a.width,a.height);var c=!1;requestAnimationFrame(function h(){if(!c){var f=Math.round(Math.random()*255),y=Math.round(Math.random()*255),v=Math.round(Math.random()*255),g=Math.round(Math.random()*255);s.fillStyle="rgba(".concat(f,", ").concat(y,", ").concat(v,", ").concat(g,")"),s.fillRect(Math.random()*n,Math.random()*o,50,50),requestAnimationFrame(h)}});var l=a.captureStream(30),u=l.getTracks()[0],d=u.stop;return u.stop=function(){c=!0,d.call(u)},u}var _z=function(){function t(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return t.prototype.get=function(){var e=this._samples,r=e[1].denominator-e[0].denominator||1/0,n=e[1].numerator-e[0].numerator;return n/r},t.prototype.putSample=function(e,r){var n=this._samples;n.shift(),n.push({denominator:r,numerator:e})},t}(),BP=_z,wz=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bz=St.EventEmitter,Sz=["signaling","room","media","quality","video-processor","preflight"],kz=["debug","error","info","warning"],Tz=function(t){wz(e,t);function e(r,n,i,o){o===void 0&&(o=null);var a=t.call(this)||this;return a.on("event",function(s){var c=s.name,l=s.group,u=s.level,d=s.payload;if(typeof c!="string")throw i.error("Unexpected name: ",c),new Error("Unexpected name: ",c);if(!Sz.includes(l))throw i.error("Unexpected group: ",l),new Error("Unexpected group: ",l);if(!kz.includes(u))throw i.error("Unexpected level: ",u),new Error("Unexpected level: ",u);var h=Date.now(),f=h-n,y=Object.assign({elapsedTime:f,level:u},d||{});r.publish(l,c,y);var v=Object.assign({elapsedTime:f,group:l,level:u,name:c,timestamp:h},d?{payload:d}:{}),g={debug:"debug",error:"error",info:"info",warning:"warn"}[u];i[g]("event",v),o&&l==="signaling"&&o.emit("event",v)}),a}return e}(bz),VP=Tz,xz=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qo=x&&x.__assign||function(){return qo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qo.apply(this,arguments)},Ez=St.EventEmitter,Cz=J.getUserAgent,Pz=5,Oz=50,Rz=1e3,Ww=globalThis,jz=Ww.WebSocket?Ww.WebSocket:LC(),zP=Ee,Az=zP.hardwareDevicePublisheriPad,Lz=zP.hardwareDevicePublisheriPhone,Iz=J,Hw=fo,Nz=function(t){xz(e,t);function e(r,n,i,o,a,s){var c=t.call(this)||this;return s=Object.assign({gateway:"".concat(Mz(o,a),"/v1/VideoEvents"),maxReconnectAttempts:Pz,reconnectIntervalMs:Oz,userAgent:Cz(),WebSocket:jz},s),Object.defineProperties(c,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:Iz.defer()},_reconnectAttemptsLeft:{value:s.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:s.WebSocket}}),c._readyToConnect.promise.then(function(l){var u=l.roomSid,d=l.participantSid,h=c;c.on("disconnected",function f(y){if(h._session=null,y&&h._reconnectAttemptsLeft>0){h.emit("reconnecting"),$z(h,r,n,i,u,d,s);return}h.removeListener("disconnected",f)}),Yp(c,r,n,i,u,d,s)}).catch(function(){}),c}return e.prototype.connect=function(r,n){this._readyToConnect.resolve({roomSid:r,participantSid:n})},e.prototype._publish=function(r){r.session=this._session,this._ws.send(JSON.stringify(r))},e.prototype.disconnect=function(){if(this._ws===null||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},e.prototype.publish=function(r,n,i){if(this._ws!==null&&(this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED))return!1;var o=typeof this._session=="string"?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue);return o({group:r,name:n,payload:i,timestamp:Date.now(),type:"event",version:1}),!0},e}(Ez);function Yp(t,e,r,n,i,o,a){t._connectTimestamp=Date.now(),t._reconnectAttemptsLeft--,t._ws=new a.WebSocket(a.gateway);var s=t._ws;s.addEventListener("close",function(c){if(c.code===Rz){t.emit("disconnected");return}t.emit("disconnected",new Error("WebSocket Error ".concat(c.code,": ").concat(c.reason)))}),s.addEventListener("message",function(c){Dz(t,JSON.parse(c.data),a)}),s.addEventListener("open",function(){var c={type:"connect",token:e,version:1};c.publisher={name:r,sdkVersion:n,userAgent:a.userAgent,participantSid:o,roomSid:i},Hw.isIpad()?c.publisher=qo(qo({},c.publisher),Az):Hw.isIphone()&&(c.publisher=qo(qo({},c.publisher),Lz)),s.send(JSON.stringify(c))})}function Mz(t,e){return t==="prod"?"wss://sdkgw.".concat(e,".twilio.com"):"wss://sdkgw.".concat(t,"-").concat(e,".twilio.com")}function Dz(t,e,r){switch(e.type){case"connected":t._session=e.session,t._reconnectAttemptsLeft=r.maxReconnectAttempts,t._eventQueue.splice(0).forEach(t._publish,t),t.emit("connected");break;case"error":t._ws.close(),t.emit("disconnected",new Error(e.message));break}}function $z(t,e,r,n,i,o,a){var s=Date.now()-t._connectTimestamp,c=a.reconnectIntervalMs-s;if(c>0){setTimeout(function(){Yp(t,e,r,n,i,o,a)},c);return}Yp(t,e,r,n,i,o,a)}var WP=Nz,Uz=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cu=x&&x.__assign||function(){return Cu=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Cu.apply(this,arguments)},Xa=x&&x.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},Za=x&&x.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(gc,"__esModule",{value:!0});gc.PreflightTest=void 0;gc.runPreflight=iW;var To=Ee,xo=Td,Fz=xd,Bz=ag,Vz=sg,dl=cg,zz=lg,Wz=ug,Hz=J,qz=Ee.WS_SERVER,Kz=pn,Gz=mc,Ff=BP,Qz=VP,Jz=WP,HP=gd,Yz=HP.createSID,Xz=HP.sessionSID,qP=Z,Zz=qP.SignalingConnectionTimeoutError,qw=qP.MediaConnectionError,KP=1e3,eW=10*KP,bi={mediaAcquired:"mediaAcquired",connected:"connected",mediaSubscribed:"mediaSubscribed",mediaStarted:"mediaStarted",dtlsConnected:"dtlsConnected",peerConnectionConnected:"peerConnectionConnected",iceConnected:"iceConnected"};function tW(t){return t!==null&&typeof t<"u"}var rW=0,GP=function(t){Uz(e,t);function e(r,n){var i=t.call(this)||this;i._testTiming=new xo.Timer,i._dtlsTiming=new xo.Timer,i._iceTiming=new xo.Timer,i._peerConnectionTiming=new xo.Timer,i._mediaTiming=new xo.Timer,i._connectTiming=new xo.Timer,i._sentBytesMovingAverage=new Ff,i._packetLossMovingAverage=new Ff,i._progressEvents=[],i._receivedBytesMovingAverage=new Ff;var o=n,a=o.environment,s=a===void 0?"prod":a,c=o.region,l=c===void 0?"gll":c,u=o.duration,d=u===void 0?eW:u,h=o.wsServer||qz(s,l);return i._log=new Kz("default",i,To.DEFAULT_LOG_LEVEL,To.DEFAULT_LOGGER_NAME),i._testDuration=d,i._instanceId=rW++,i._testTiming.start(),i._runPreflightTest(r,s,h),i}return e.prototype.toString=function(){return"[Preflight #".concat(this._instanceId,"]")},e.prototype.stop=function(){this._stopped=!0},e.prototype._generatePreflightReport=function(r){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:(0,dl.makeStat)(r==null?void 0:r.jitter),rtt:(0,dl.makeStat)(r==null?void 0:r.rtt),packetLoss:(0,dl.makeStat)(r==null?void 0:r.packetLoss)},selectedIceCandidatePairStats:r?r.selectedIceCandidatePairStats:null,iceCandidateStats:r?r.iceCandidateStats:[],progressEvents:this._progressEvents,mos:(0,dl.makeStat)(r==null?void 0:r.mos)}},e.prototype._executePreflightStep=function(r,n,i){return Xa(this,void 0,void 0,function(){var o,a,s,c,l;return Za(this,function(u){switch(u.label){case 0:if(this._log.debug("Executing step: ",r),o=this._testDuration+10*KP,this._stopped)throw new Error("stopped");a=Promise.resolve().then(n),s=null,c=new Promise(function(d,h){s=setTimeout(function(){h(i||new Error("".concat(r," timeout.")))},o)}),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,Promise.race([c,a])];case 2:return l=u.sent(),[2,l];case 3:return s!==null&&clearTimeout(s),[7];case 4:return[2]}})})},e.prototype._collectNetworkTimings=function(r){var n=this;return new Promise(function(i){var o;r.addEventListener("iceconnectionstatechange",function(){r.iceConnectionState==="checking"&&n._iceTiming.start(),r.iceConnectionState==="connected"&&(n._iceTiming.stop(),n._updateProgress(bi.iceConnected),(!o||o&&o.state==="connected")&&i())}),r.addEventListener("connectionstatechange",function(){r.connectionState==="connecting"&&n._peerConnectionTiming.start(),r.connectionState==="connected"&&(n._peerConnectionTiming.stop(),n._updateProgress(bi.peerConnectionConnected))});var a=r.getSenders(),s=a.map(function(c){return c.transport}).find(tW);typeof s<"u"&&(o=s,o.addEventListener("statechange",function(){o.state==="connecting"&&n._dtlsTiming.start(),o.state==="connected"&&(n._dtlsTiming.stop(),n._updateProgress(bi.dtlsConnected),r.iceConnectionState==="connected"&&i())}))})},e.prototype._setupInsights=function(r){var n=r.token,i=r.environment,o=i===void 0?To.DEFAULT_ENVIRONMENT:i,a=r.realm,s=a===void 0?To.DEFAULT_REALM:a,c={},l=new Jz(n,To.SDK_NAME,To.SDK_VERSION,o,s,c);l.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var u=new Qz(l,Date.now(),this._log),d=void 0;return{reportToInsights:function(h){var f,y,v=h.report,g=v.stats.jitter||d,_=v.stats.rtt||d,m=v.stats.packetLoss||d,w=v.mos||d,S=new Map;v.iceCandidateStats.forEach(function(T){if(T.candidateType&&T.protocol){var C=S.get(T.candidateType)||[];C.indexOf(T.protocol)<0&&C.push(T.protocol),S.set(T.candidateType,C)}});var k=JSON.stringify(Object.fromEntries(S)),E={name:"report",group:"preflight",level:v.error?"error":"info",payload:{sessionSID:Xz,preflightSID:Yz("PF"),progressEvents:JSON.stringify(v.progressEvents),testTiming:v.testTiming,dtlsTiming:v.networkTiming.dtls,iceTiming:v.networkTiming.ice,peerConnectionTiming:v.networkTiming.peerConnection,connectTiming:v.networkTiming.connect,mediaTiming:v.networkTiming.media,selectedLocalCandidate:(f=v.selectedIceCandidatePairStats)===null||f===void 0?void 0:f.localCandidate,selectedRemoteCandidate:(y=v.selectedIceCandidatePairStats)===null||y===void 0?void 0:y.remoteCandidate,iceCandidateStats:k,jitterStats:g,rttStats:_,packetLossStats:m,mosStats:w,error:v.error}};u.emit("event",E),setTimeout(function(){return l.disconnect()},2e3)}}},e.prototype._runPreflightTest=function(r,n,i){return Xa(this,void 0,void 0,function(){var o,a,s,c,l,u,d,h,f,y,v,g,_=this;return Za(this,function(m){switch(m.label){case 0:o=[],a=[],s=this._setupInsights({token:r,environment:n}).reportToInsights,m.label=1;case 1:return m.trys.push([1,8,9,10]),c=[],[4,this._executePreflightStep("Acquire media",function(){return[(0,zz.syntheticAudio)(),(0,Wz.syntheticVideo)({width:640,height:480})]})];case 2:return o=m.sent(),this._updateProgress(bi.mediaAcquired),this.emit("debug",{localTracks:o}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return(0,Vz.getTurnCredentials)(r,i)},new Zz)];case 3:return l=m.sent(),this._connectTiming.stop(),this._updateProgress(bi.connected),u=new RTCPeerConnection({iceServers:l,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),d=new RTCPeerConnection({iceServers:l,bundlePolicy:"max-bundle"}),a.push(u),a.push(d),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return Xa(_,void 0,void 0,function(){var w,S,k,E;return Za(this,function(T){switch(T.label){case 0:return u.addEventListener("icecandidate",function(C){return C.candidate&&d.addIceCandidate(C.candidate)}),d.addEventListener("icecandidate",function(C){return C.candidate&&u.addIceCandidate(C.candidate)}),o.forEach(function(C){return u.addTrack(C)}),w=new Promise(function(C){var O=[];d.addEventListener("track",function(A){O.push(A.track),O.length===o.length&&C(O)})}),[4,u.createOffer()];case 1:return S=T.sent(),k=S,[4,u.setLocalDescription(k)];case 2:return T.sent(),[4,d.setRemoteDescription(k)];case 3:return T.sent(),[4,d.createAnswer()];case 4:return E=T.sent(),[4,d.setLocalDescription(E)];case 5:return T.sent(),[4,u.setRemoteDescription(E)];case 6:return T.sent(),[4,this._collectNetworkTimings(u)];case 7:return T.sent(),[2,w]}})})},new qw)];case 4:return h=m.sent(),this.emit("debug",{remoteTracks:h}),h.forEach(function(w){w.addEventListener("ended",function(){return _._log.warn(w.kind+":ended")}),w.addEventListener("mute",function(){return _._log.warn(w.kind+":muted")}),w.addEventListener("unmute",function(){return _._log.warn(w.kind+":unmuted")})}),this._updateProgress(bi.mediaSubscribed),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(w){var S=document.createElement("video");S.autoplay=!0,S.playsInline=!0,S.muted=!0,S.srcObject=new MediaStream(h),c.push(S),_.emit("debugElement",S),S.oncanplay=w})},new qw)];case 5:return m.sent(),this._mediaTiming.stop(),this._updateProgress(bi.mediaStarted),[4,this._executePreflightStep("Collect stats for duration",function(){return _._collectRTCStatsForDuration(_._testDuration,nW(),u,d)})];case 6:return f=m.sent(),[4,this._executePreflightStep("Generate report",function(){return _._generatePreflightReport(f)})];case 7:return y=m.sent(),s({report:y}),this.emit("completed",y),[3,10];case 8:return v=m.sent(),g=this._generatePreflightReport(),s({report:Cu(Cu({},g),{error:v==null?void 0:v.toString()})}),this.emit("failed",v,g),[3,10];case 9:return a.forEach(function(w){return w.close()}),o.forEach(function(w){return w.stop()}),[7];case 10:return[2]}})})},e.prototype._collectRTCStats=function(r,n,i){return Xa(this,void 0,void 0,function(){var o,a,s,c,l,u,d,h,f,y,v,g,_,m;return Za(this,function(w){switch(w.label){case 0:return[4,(0,Bz.getCombinedConnectionStats)({publisher:n,subscriber:i})];case 1:return o=w.sent(),a=o.timestamp,s=o.bytesSent,c=o.bytesReceived,l=o.packets,u=o.packetsLost,d=o.roundTripTime,h=o.jitter,f=o.selectedIceCandidatePairStats,y=o.iceCandidateStats,v=r.jitter.length>0,r.jitter.push(h),r.rtt.push(d),this._sentBytesMovingAverage.putSample(s,a),this._receivedBytesMovingAverage.putSample(c,a),this._packetLossMovingAverage.putSample(u,l),v&&(r.outgoingBitrate.push(this._sentBytesMovingAverage.get()*1e3*8),r.incomingBitrate.push(this._receivedBytesMovingAverage.get()*1e3*8),g=this._packetLossMovingAverage.get(),_=Math.min(100,g*100),r.packetLoss.push(_),m=(0,Fz.calculateMOS)(d,h,g),r.mos.push(m)),r.selectedIceCandidatePairStats||(r.selectedIceCandidatePairStats=f),r.iceCandidateStats.length===0&&(r.iceCandidateStats=y),[2]}})})},e.prototype._collectRTCStatsForDuration=function(r,n,i,o){return Xa(this,void 0,void 0,function(){var a,s,c;return Za(this,function(l){switch(l.label){case 0:return a=Date.now(),s=Math.min(1e3,r),[4,(0,Hz.waitForSometime)(s)];case 1:return l.sent(),[4,this._collectRTCStats(n,i,o)];case 2:return l.sent(),c=r-(Date.now()-a),c>0?[4,this._collectRTCStatsForDuration(c,n,i,o)]:[3,4];case 3:n=l.sent(),l.label=4;case 4:return[2,n]}})})},e.prototype._updateProgress=function(r){var n=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:n,name:r}),this.emit("progress",r)},e}(Gz);gc.PreflightTest=GP;function nW(){return{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]}}function iW(t,e){e===void 0&&(e={});var r=new GP(t,e);return r}var Bf=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Vf=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},oW=function(){function t(e,r){var n=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:r}}),Object.defineProperty(this,"_promise",{value:new Promise(function(i,o){e(function(a){n._isCancelable=!1,i(a)},function(a){n._isCancelable=!1,o(a)},function(){return n._isCanceled})})})}return t.reject=function(e){return new t(function(n,i){i(e)},function(){})},t.resolve=function(e){return new t(function(n){n(e)},function(){})},t.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},t.prototype.catch=function(){var e=[].slice.call(arguments),r=this._promise;return new t(function(i,o){r.catch.apply(r,Vf([],Bf(e),!1)).then(i,o)},this._onCancel)},t.prototype.then=function(){var e=[].slice.call(arguments),r=this._promise;return new t(function(i,o){r.then.apply(r,Vf([],Bf(e),!1)).then(i,o)},this._onCancel)},t.prototype.finally=function(){var e=[].slice.call(arguments),r=this._promise;return new t(function(i,o){r.finally.apply(r,Vf([],Bf(e),!1)).then(i,o)},this._onCancel)},t}(),dg=oW,Kw=dg;function aW(t,e,r,n){var i,o=new Error("Canceled");return new Kw(function(s,c,l){var u;t(function(h){return l()?Kw.reject(o):(u=e(h),r(u).then(function(y){if(l())throw o;return i=y(),i}))}).then(function(h){if(l())throw h.disconnect(),o;s(n(u,h))}).catch(function(h){c(h)})},function(){i&&i.cancel()})}var sW=aW,cW=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lW=St.EventEmitter,uW=function(t){cW(e,t);function e(r,n){var i=t.call(this)||this;return r=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},r),Object.defineProperties(i,{maxAudioBitrate:{value:r.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:r.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:n}}),i}return e.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},e.prototype.update=function(r){var n=this;r=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},r);var i=["maxAudioBitrate","maxVideoBitrate"].reduce(function(o,a){return n[a]!==r[a]&&(n[a]=r[a],o=!0),o},!1);i&&this.emit("changed")},e}(lW),dW=uW,yc={},fW=J.isNonArrayObject,Da=Ee,as=Da.typeErrors,hW=Da.clientTrackSwitchOffControl,pW=Da.videoContentPreferencesMode,vW=Da.subscriptionMode,QP=Da.trackPriority,mW=Da.trackSwitchOffMode;function gW(t){var e=Qs(t,"options.bandwidthProfile");return!t||e||(e=Qs(t.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(pW)},{prop:"dominantSpeakerPriority",values:Object.values(QP)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(vW)},{prop:"clientTrackSwitchOffControl",values:Object.values(hW)},{prop:"trackSwitchOffMode",values:Object.values(mW)}]),e)?e:t.video?"maxTracks"in t.video&&"clientTrackSwitchOffControl"in t.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in t.video&&"contentPreferencesMode"in t.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):_W(t.video.renderDimensions):null}function yW(t,e){if(!(t instanceof e.LocalAudioTrack||t instanceof e.LocalDataTrack||t instanceof e.LocalVideoTrack||t instanceof e.MediaStreamTrack))throw as.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function Qs(t,e,r){return r===void 0&&(r=[]),typeof t>"u"?null:t===null||!fW(t)?as.INVALID_TYPE(e,"object"):r.reduce(function(n,i){var o=i.prop,a=i.type,s=i.values;if(n||!(o in t))return n;var c=t[o];return a&&typeof c!==a||a==="number"&&isNaN(c)?as.INVALID_TYPE("".concat(e,".").concat(o),a):Array.isArray(s)&&!s.includes(c)?as.INVALID_VALUE("".concat(e,".").concat(o),s):n},null)}function _W(t){var e="options.bandwidthProfile.video.renderDimensions",r=Qs(t,e);return t?r||Object.values(QP).reduce(function(n,i){return n||Qs(t[i],"".concat(e,".").concat(i),[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):r}yc.validateBandwidthProfile=gW;yc.validateLocalTrack=yW;yc.validateObject=Qs;var wW=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bW=mc,JP=J,SW=JP.buildLogLevels,kW=JP.valueToJSON,TW=Ee.DEFAULT_LOG_LEVEL,xW=pn,EW=0,CW=function(t){wW(e,t);function e(r,n,i){var o=t.call(this)||this;i=Object.assign({logLevel:TW},i);var a=SW(i.logLevel);return Object.defineProperties(o,{_instanceId:{value:EW++},_log:{value:i.log?i.log.createLog("default",o):new xW("default",o,a,i.loggerName)},trackName:{enumerable:!0,value:r},trackSid:{enumerable:!0,value:n}}),o}return e.prototype.toJSON=function(){return kW(this)},e.prototype.toString=function(){return"[TrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}(bW),YP=CW,PW=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OW=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},RW=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},jW=YP,XP=Ee,AW=XP.typeErrors,LW=XP.trackPriority,IW=function(t){PW(e,t);function e(r,n,i,o){var a=t.call(this,n.name,r.sid,o)||this;return Object.defineProperties(a,{_reemitSignalingEvent:{value:function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return a.emit.apply(a,RW([s&&s.length?"warning":"warningsCleared"],OW(s),!1))}},_reemitTrackEvent:{value:function(){return a.emit(a.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:r},_unpublish:{value:i},isTrackEnabled:{enumerable:!0,get:function(){return this.track.kind==="data"?!0:this.track.isEnabled}},kind:{enumerable:!0,value:n.kind},priority:{enumerable:!0,get:function(){return r.updatedPriority}},track:{enumerable:!0,value:n}}),["disabled","enabled"].forEach(function(s){return n.on(s,a._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(s){return r.on(s,a._reemitSignalingEvent)}),a}return e.prototype.toString=function(){return"[LocalTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e.prototype.setPriority=function(r){var n=Object.values(LW);if(!n.includes(r))throw AW.INVALID_VALUE("priority",n);return this._signaling.setPriority(r),this},e.prototype.unpublish=function(){var r=this;return["disabled","enabled"].forEach(function(n){return r.track.removeListener(n,r._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(n){return r._signaling.removeListener(n,r._reemitSignalingEvent)}),this._unpublish(this),this},e}(jW),fg=IW,NW=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MW=fg,DW=function(t){NW(e,t);function e(r,n,i,o){return t.call(this,r,n,i,o)||this}return e.prototype.toString=function(){return"[LocalAudioTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}(MW),$W=DW,UW=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FW=fg,BW=function(t){UW(e,t);function e(r,n,i,o){return t.call(this,r,n,i,o)||this}return e.prototype.toString=function(){return"[LocalDataTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}(FW),VW=BW,zW=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WW=fg,HW=function(t){zW(e,t);function e(r,n,i,o){return t.call(this,r,n,i,o)||this}return e.prototype.toString=function(){return"[LocalVideoTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}(WW),qW=HW,KW=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GW=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},QW=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},ZP=Ee,JW=ZP.typeErrors,YW=ZP.trackPriority,XW=fo.isIOS,Gw=Sd;function ZW(t){return function(e){KW(r,e);function r(n,i,o,a,s,c,l){var u=this;return l=Object.assign({workaroundWebKitBug212780:XW()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},l),u=e.call(this,i,l)||this,Object.defineProperties(u,{_isEnabled:{value:o,writable:!0},_isSwitchedOff:{value:a,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:s},_setRenderHint:{value:function(d){u._log.debug("updating render hint:",d),c(d)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:n},_workaroundWebKitBug212780:{value:l.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),u}return r.prototype.setPriority=function(n){var i=QW([null],GW(Object.values(YW)),!1);if(!i.includes(n))throw JW.INVALID_VALUE("priority",i);return this._priority!==n&&(this._priority=n,this._setPriority(n)),this},r.prototype._setEnabled=function(n){this._isEnabled!==n&&(this._isEnabled=n,this.emit(this._isEnabled?"enabled":"disabled",this))},r.prototype._setSwitchedOff=function(n){this._isSwitchedOff!==n&&(this._isSwitchedOff=n,this.emit(n?"switchedOff":"switchedOn",this))},r.prototype.attach=function(n){var i=e.prototype.attach.call(this,n);return this.mediaStreamTrack.enabled!==!0&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||e8(this)),i},r.prototype.detach=function(n){var i=e.prototype.detach.call(this,n);return this._attachments.size===0&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),i},r}(t)}function e8(t){var e=t._log,r=t.kind;function n(i){i&&t._attachments.forEach(function(o){var a=t._elShims.get(o),s=o.paused&&a&&!a.pausedIntentionally();s&&(e.info("Playing inadvertently paused <".concat(r,"> element")),e.debug("Element:",o),e.debug("RemoteMediaTrack:",t),o.play().then(function(){e.info("Successfully played inadvertently paused <".concat(r,"> element")),e.debug("Element:",o),e.debug("RemoteMediaTrack:",t)}).catch(function(c){e.warn("Error while playing inadvertently paused <".concat(r,"> element:"),{err:c,el:o,remoteMediaTrack:t})}))})}return Gw.onVisibilityChange(2,n),function(){Gw.offVisibilityChange(2,n)}}var eO=ZW,t8=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r8=pC,n8=eO,i8=n8(r8),o8=function(t){t8(e,t);function e(r,n,i,o,a,s,c){return t.call(this,r,n,i,o,a,s,c)||this}return e.prototype.toString=function(){return"[RemoteAudioTrack #".concat(this._instanceId,": ").concat(this.sid,"]")},e.prototype._start=function(){t.prototype._start.call(this),this._dummyEl&&(this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl=null)},e.prototype.setPriority=function(r){return t.prototype.setPriority.call(this,r)},e}(i8),a8=o8,s8=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),c8=YP,l8=function(t){s8(e,t);function e(r,n){var i=t.call(this,r.name,r.sid,n)||this;Object.defineProperties(i,{_signaling:{value:r},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return r.isEnabled}},kind:{enumerable:!0,value:r.kind},publishPriority:{enumerable:!0,get:function(){return r.priority}},track:{enumerable:!0,get:function(){return this._track}}});var o=r.error,a=r.isEnabled,s=r.isSwitchedOff,c=r.priority;return r.on("updated",function(){if(o!==r.error){o=r.error,i.emit("subscriptionFailed",r.error);return}a!==r.isEnabled&&(a=r.isEnabled,i.track&&i.track._setEnabled(r.isEnabled),i.emit(r.isEnabled?"trackEnabled":"trackDisabled")),s!==r.isSwitchedOff&&(i._log.debug("".concat(i.trackSid,": ").concat(s?"OFF":"ON"," => ").concat(r.isSwitchedOff?"OFF":"ON")),s=r.isSwitchedOff,i.track?(i.track._setSwitchedOff(r.isSwitchedOff),i.emit(s?"trackSwitchedOff":"trackSwitchedOn",i.track)):s&&i._log.warn("Track was not subscribed when switched Off.")),c!==r.priority&&(c=r.priority,i.emit("publishPriorityChanged",c))}),i}return e.prototype.toString=function(){return"[RemoteTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e.prototype._subscribed=function(r){!this._track&&r&&(this._track=r,this.emit("subscribed",r))},e.prototype._unsubscribe=function(){if(this._track){var r=this._track;this._track=null,this.emit("unsubscribed",r)}},e}(c8),hg=l8,u8=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d8=hg,f8=function(t){u8(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.toString=function(){return"[RemoteAudioTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}(d8),h8=f8,p8=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v8=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},m8=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},g8=Zm,tO=Ee,y8=tO.typeErrors,_8=tO.trackPriority,w8=function(t){p8(e,t);function e(r,n,i){var o=t.call(this,n.id,"data",i)||this;return Object.defineProperties(o,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:n.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:n.maxRetransmits},ordered:{enumerable:!0,value:n.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:n.maxPacketLifeTime===null&&n.maxRetransmits===null},sid:{enumerable:!0,value:r}}),n.on("message",function(a){o.emit("message",a,o)}),o}return e.prototype.setPriority=function(r){var n=m8([null],v8(Object.values(_8)),!1);if(!n.includes(r))throw y8.INVALID_VALUE("priority",n);return this._priority=r,this},e.prototype._setEnabled=function(){},e.prototype._setSwitchedOff=function(r){this._isSwitchedOff!==r&&(this._isSwitchedOff=r,this.emit(r?"switchedOff":"switchedOn",this))},e}(g8),b8=w8,S8=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k8=hg,T8=function(t){S8(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.toString=function(){return"[RemoteDataTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}(k8),x8=T8,rO=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pg=function(){function t(e){Object.defineProperties(this,{_callback:{value:e}})}return t.prototype.observe=function(){},t.prototype.unobserve=function(){},t.prototype.makeVisible=function(e){var r=this._makeFakeEntry(e,!0);this._callback([r])},t.prototype.makeInvisible=function(e){var r=this._makeFakeEntry(e,!1);this._callback([r])},t.prototype._makeFakeEntry=function(e,r){return{target:e,isIntersecting:r}},t}();(function(t){rO(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(pg);(function(t){rO(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.resize=function(r){var n=this._makeFakeEntry(r,!0);this._callback([n])},e})(pg);var E8={NullObserver:pg},C8=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P8=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},O8=eO,nO=xC,Qw=Sd,Jw=E8.NullObserver,R8=ho,j8=O8(nO),A8=50,L8=function(t){C8(e,t);function e(r,n,i,o,a,s,c){var l=this;return c=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},c),c=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||c.clientTrackSwitchOffControl!=="auto"?Jw:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||c.contentPreferencesMode!=="auto"?Jw:ResizeObserver},c),l=t.call(this,r,n,i,o,a,s,c)||this,Object.defineProperties(l,{_enableDocumentVisibilityTurnOff:{value:c.enableDocumentVisibilityTurnOff===!0&&c.clientTrackSwitchOffControl==="auto"},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:c.clientTrackSwitchOffControl},_contentPreferencesMode:{value:c.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new R8(function(){l._setRenderHint({enabled:!1})},A8,!1)},_resizeObserver:{value:new c.ResizeObserver(function(u){var d=u.find(function(h){return!l._invisibleElements.has(h.target)});d&&fl(l)})},_intersectionObserver:{value:new c.IntersectionObserver(function(u){var d=!1;u.forEach(function(h){var f=!l._invisibleElements.has(h.target);f!==h.isIntersecting&&(h.isIntersecting?(l._log.debug("intersectionObserver detected: Off => On"),l._invisibleElements.delete(h.target)):(l._log.debug("intersectionObserver detected: On => Off"),l._invisibleElements.add(h.target)),d=!0)}),d&&(Lo(l),fl(l))},{threshold:.25})}}),l}return e.prototype._start=function(r){var n=t.prototype._start.call(this,r);return Lo(this),n},e.prototype.switchOn=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},e.prototype.switchOff=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},e.prototype.setContentPreferences=function(r){if(this._contentPreferencesMode!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return r.renderDimensions&&this._setRenderHint({renderDimensions:r.renderDimensions}),this},e.prototype._unObservePip=function(r){var n=this._elToPipCallbacks.get(r);n&&(r.removeEventListener("enterpictureinpicture",n.onEnterPip),r.removeEventListener("leavepictureinpicture",n.onLeavePip),this._elToPipCallbacks.delete(r))},e.prototype._observePip=function(r){var n=this,i=this._elToPipCallbacks.get(r);if(!i){var o=function(c){return n._onEnterPip(c,r)},a=function(c){return n._onLeavePip(c,r)},s=function(c){return n._onResizePip(c,r)};r.addEventListener("enterpictureinpicture",o),r.addEventListener("leavepictureinpicture",a),this._elToPipCallbacks.set(r,{onEnterPip:o,onLeavePip:a,onResizePip:s})}},e.prototype._onEnterPip=function(r,n){this._log.debug("onEnterPip");var i=r.pictureInPictureWindow;this._elToPipWindows.set(n,i);var o=this._elToPipCallbacks.get(n).onResizePip;i.addEventListener("resize",o),Lo(this)},e.prototype._onLeavePip=function(r,n){this._log.debug("onLeavePip"),this._elToPipWindows.delete(n);var i=this._elToPipCallbacks.get(n).onResizePip,o=r.pictureInPictureWindow;o.removeEventListener("resize",i),Lo(this)},e.prototype._onResizePip=function(){fl(this)},e.prototype.attach=function(r){var n=t.prototype.attach.call(this,r);return this._clientTrackSwitchOffControl==="auto"&&this._invisibleElements.add(n),this._intersectionObserver.observe(n),this._resizeObserver.observe(n),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||N8(this)),this._observePip(n),n},e.prototype.detach=function(r){var n=this,i=t.prototype.detach.call(this,r),o=Array.isArray(i)?i:[i];return o.forEach(function(a){n._intersectionObserver.unobserve(a),n._resizeObserver.unobserve(a),n._invisibleElements.delete(a),n._unObservePip(a)}),this._attachments.size===0&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),Lo(this),fl(this),i},e.prototype.addProcessor=function(){return t.prototype.addProcessor.apply(this,arguments)},e.prototype.removeProcessor=function(){return t.prototype.removeProcessor.apply(this,arguments)},e.prototype.toString=function(){return"[RemoteVideoTrack #".concat(this._instanceId,": ").concat(this.sid,"]")},e.prototype.setPriority=function(r){return t.prototype.setPriority.call(this,r)},e}(j8);function I8(t){if(!("documentPictureInPicture"in globalThis))return!1;var e=globalThis.documentPictureInPicture.window;if(!e)return!1;var r=new WeakSet(e.document.querySelectorAll("video"));return t._getAllAttachedElements().some(function(n){return r.has(n)})}function Lo(t){if(t._clientTrackSwitchOffControl==="auto"){var e=t._getAllAttachedElements().filter(function(i){return!t._invisibleElements.has(i)}),r=t._getAllAttachedElements().filter(function(i){return t._elToPipWindows.has(i)}),n=r.length>0||I8(t)||document.visibilityState==="visible"&&e.length>0;n===!0?(t._turnOffTimer.clear(),t._setRenderHint({enabled:!0}),nO._ensureDocumentPipVideosPlaying(t)):t._turnOffTimer.isSet||t._turnOffTimer.start()}}function fl(t){if(t._contentPreferencesMode==="auto"){var e=t._getAllAttachedElements().filter(function(l){return!t._invisibleElements.has(l)}),r=t._getAllAttachedElements().map(function(l){var u=t._elToPipWindows.get(l);return u?{clientHeight:u.height,clientWidth:u.width}:{clientHeight:0,clientWidth:0}}),n=e.concat(r);if(n.length>0){var i=P8(n.sort(function(l,u){return u.clientHeight+u.clientWidth-l.clientHeight-l.clientWidth-1}),1),o=i[0],a=o.clientHeight,s=o.clientWidth,c={height:a,width:s};t._setRenderHint({renderDimensions:c})}}}function N8(t){function e(){Lo(t)}return Qw.onVisibilityChange(1,e),function(){Qw.offVisibilityChange(1,e)}}var M8=L8,D8=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$8=hg,U8=function(t){D8(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.toString=function(){return"[RemoteVideoTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}($8),F8=U8,B8=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Js=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Xp=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},V8=mc,z8=a8,W8=h8,H8=b8,q8=x8,K8=M8,G8=F8,Qr=J,Q8=0,J8=function(t){B8(e,t);function e(r,n){var i=t.call(this)||this;n=Object.assign({RemoteAudioTrack:z8,RemoteAudioTrackPublication:W8,RemoteDataTrack:H8,RemoteDataTrackPublication:q8,RemoteVideoTrack:K8,RemoteVideoTrackPublication:G8,tracks:[]},n);var o=Y8(n.tracks),a=n.log.createLog("default",i),s=new Map(o.audioTracks),c=new Map(o.dataTracks),l=new Map(o.tracks),u=new Map(o.videoTracks);return Object.defineProperties(i,{_RemoteAudioTrack:{value:n.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:n.RemoteAudioTrackPublication},_RemoteDataTrack:{value:n.RemoteDataTrack},_RemoteDataTrackPublication:{value:n.RemoteDataTrackPublication},_RemoteVideoTrack:{value:n.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:n.RemoteVideoTrackPublication},_audioTracks:{value:s},_dataTracks:{value:c},_instanceId:{value:++Q8},_clientTrackSwitchOffControl:{value:n.clientTrackSwitchOffControl},_contentPreferencesMode:{value:n.contentPreferencesMode},_log:{value:a},_signaling:{value:r},_tracks:{value:l},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:u},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return r.identity}},networkQualityLevel:{enumerable:!0,get:function(){return r.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return r.networkQualityStats}},sid:{enumerable:!0,get:function(){return r.sid}},state:{enumerable:!0,get:function(){return r.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map},_MediaStream:{value:n.MediaStream},_mapMediaElement:{value:n.mapMediaElement},_disposeMediaElement:{value:n.disposeMediaElement}}),i._tracks.forEach(Yw.bind(null,i)),r.on("networkQualityLevelChanged",function(){return i.emit("networkQualityLevelChanged",i.networkQualityLevel,i.networkQualityStats&&(i.networkQualityStats.audio||i.networkQualityStats.video)?i.networkQualityStats:null)}),X8(i,r),a.info("Created a new Participant".concat(i.identity?": ".concat(i.identity):"")),i}return e.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},e.prototype._getTrackPublicationEvents=function(){return[]},e.prototype.toString=function(){return"[Participant #".concat(this._instanceId,": ").concat(this.sid,"]")},e.prototype._addTrack=function(r,n){var i=this._log;if(this._tracks.has(n))return null;this._tracks.set(n,r);var o={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[r.kind];return o.set(n,r),Yw(this,r,n),i.info("Added a new ".concat(Qr.trackClass(r),":"),n),i.debug("".concat(Qr.trackClass(r),":"),r),r},e.prototype._addTrackPublication=function(r){var n=this._log;if(this.tracks.has(r.trackSid))return null;this.tracks.set(r.trackSid,r);var i={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[r.kind];return i.set(r.trackSid,r),Z8(this,r),n.info("Added a new ".concat(Qr.trackPublicationClass(r),":"),r.trackSid),n.debug("".concat(Qr.trackPublicationClass(r),":"),r),r},e.prototype._handleTrackSignalingEvents=function(){var r=this,n=r._log,i=r._clientTrackSwitchOffControl,o=r._contentPreferencesMode,a=r._MediaStream,s=r._mapMediaElement,c=r._disposeMediaElement,l=this;if(this.state==="disconnected")return;var u=this._RemoteAudioTrack,d=this._RemoteAudioTrackPublication,h=this._RemoteVideoTrack,f=this._RemoteVideoTrackPublication,y=this._RemoteDataTrack,v=this._RemoteDataTrackPublication,g=this._signaling;function _(k){var E={audio:d,data:v,video:f}[k.kind],T=new E(k,{log:n});l._addTrackPublication(T);var C=k.isSubscribed;C&&w(k),l._trackSignalingUpdatedEventCallbacks.set(k.sid,function(){if(C!==k.isSubscribed){if(C=k.isSubscribed,C){w(k);return}S(k)}}),k.on("updated",l._trackSignalingUpdatedEventCallbacks.get(k.sid))}function m(k){k.isSubscribed&&k.setTrackTransceiver(null);var E=l._trackSignalingUpdatedEventCallbacks.get(k.sid);E&&(k.removeListener("updated",E),l._trackSignalingUpdatedEventCallbacks.delete(k.sid));var T=l.tracks.get(k.sid);T&&l._removeTrackPublication(T)}function w(k){var E=k.isEnabled,T=k.name,C=k.kind,O=k.sid,A=k.trackTransceiver,N=k.isSwitchedOff,j={audio:u,video:h,data:y}[C],D=l.tracks.get(O);if(!(!j||C!==A.kind)){var P={log:n,name:T,clientTrackSwitchOffControl:i,contentPreferencesMode:o,mapMediaElement:s,disposeMediaElement:c};a&&(P.MediaStream=a);var M=function(R){return g.updateSubscriberTrackPriority(O,R)},I=function(R){k.isSubscribed&&g.updateTrackRenderHint(O,R)},$=C==="data"?new j(O,A,P):new j(O,A,E,N,M,I,P);l._addTrack($,D,A.id)}}function S(k){var E=Js(Array.from(l._tracks.entries()).find(function(A){var N=Js(A,2),j=N[1];return j.sid===k.sid}),2),T=E[0],C=E[1],O=l.tracks.get(k.sid);C&&l._removeTrack(C,O,T)}g.on("trackAdded",_),g.on("trackRemoved",m),g.tracks.forEach(_),g.on("stateChanged",function k(E){E==="disconnected"?(n.debug("Removing event listeners"),g.removeListener("stateChanged",k),g.removeListener("trackAdded",_),g.removeListener("trackRemoved",m)):E==="connected"&&(n.info("reconnected"),setTimeout(function(){return l.emit("reconnected")},0))})},e.prototype._removeTrack=function(r,n){if(!this._tracks.has(n))return null;this._tracks.delete(n);var i={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[r.kind];i.delete(n);var o=this._trackEventReemitters.get(n)||new Map;o.forEach(function(s,c){r.removeListener(c,s)});var a=this._log;return a.info("Removed a ".concat(Qr.trackClass(r),":"),n),a.debug("".concat(Qr.trackClass(r),":"),r),r},e.prototype._removeTrackPublication=function(r){if(r=this.tracks.get(r.trackSid),!r)return null;this.tracks.delete(r.trackSid);var n={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[r.kind];n.delete(r.trackSid);var i=this._trackPublicationEventReemitters.get(r.trackSid)||new Map;i.forEach(function(a,s){r.removeListener(s,a)});var o=this._log;return o.info("Removed a ".concat(Qr.trackPublicationClass(r),":"),r.trackSid),o.debug("".concat(Qr.trackPublicationClass(r),":"),r),r},e.prototype.toJSON=function(){return Qr.valueToJSON(this)},e}(V8);function Y8(t){var e=t.map(function(o){return[o.id,o]}),r=e.filter(function(o){return o[1].kind==="audio"}),n=e.filter(function(o){return o[1].kind==="video"}),i=e.filter(function(o){return o[1].kind==="data"});return{audioTracks:r,dataTracks:i,tracks:e,videoTracks:n}}function X8(t,e){var r=t._log;t.state!=="disconnected"&&e.on("stateChanged",function n(i){r.debug("Transitioned to state:",i),t.emit(i,t),i==="disconnected"&&(r.debug("Removing Track event reemitters"),e.removeListener("stateChanged",n),t._tracks.forEach(function(o){var a=t._trackEventReemitters.get(o.id);o&&a&&a.forEach(function(s,c){o.removeListener(c,s)})}),e.tracks.forEach(function(o){var a=t._tracks.get(o.id),s=t._trackEventReemitters.get(o.id);a&&s&&s.forEach(function(c,l){a.removeListener(l,c)})}),t._trackEventReemitters.clear(),t.tracks.forEach(function(o){t._trackPublicationEventReemitters.get(o.trackSid).forEach(function(a,s){o.removeListener(s,a)})}),t._trackPublicationEventReemitters.clear())})}function Yw(t,e,r){var n=new Map;t.state!=="disconnected"&&(t._getTrackEvents().forEach(function(i){var o=i[0],a=i[1];n.set(o,function(){var s=[a].concat([].slice.call(arguments));return t.emit.apply(t,Xp([],Js(s),!1))}),e.on(o,n.get(o))}),t._trackEventReemitters.set(r,n))}function Z8(t,e){var r=new Map;t.state!=="disconnected"&&(t._getTrackPublicationEvents().forEach(function(n){var i=Js(n,2),o=i[0],a=i[1];r.set(o,function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];t.emit.apply(t,Xp(Xp([a],Js(s),!1),[e],!1))}),e.on(o,r.get(o))}),t._trackPublicationEventReemitters.set(e.trackSid,r))}var iO=J8,e6=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t6=uo.MediaStreamTrack,vg=J,r6=vg.asLocalTrack,n6=vg.asLocalTrackPublication,Si=vg.trackClass,oO=Ee,Pn=oO.typeErrors,zf=oO.trackPriority,i6=yc.validateLocalTrack,mg=na,o6=mg.LocalAudioTrack,a6=mg.LocalDataTrack,s6=mg.LocalVideoTrack,c6=$W,l6=VW,u6=qW,d6=iO,f6=function(t){e6(e,t);function e(r,n,i){var o=this;i=Object.assign({LocalAudioTrack:o6,LocalVideoTrack:s6,LocalDataTrack:a6,MediaStreamTrack:t6,LocalAudioTrackPublication:c6,LocalVideoTrackPublication:u6,LocalDataTrackPublication:l6,shouldStopLocalTracks:!1,tracks:n},i);var a=i.shouldStopLocalTracks?new Set(n.filter(function(s){return s.kind!=="data"})):new Set;return o=t.call(this,r,i)||this,Object.defineProperties(o,{_eventObserver:{value:i.eventObserver},_LocalAudioTrack:{value:i.LocalAudioTrack},_LocalDataTrack:{value:i.LocalDataTrack},_LocalVideoTrack:{value:i.LocalVideoTrack},_MediaStreamTrack:{value:i.MediaStreamTrack},_LocalAudioTrackPublication:{value:i.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:i.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:i.LocalVideoTrackPublication},_tracksToStop:{value:a},signalingRegion:{enumerable:!0,get:function(){return r.signalingRegion}}}),o._handleTrackSignalingEvents(),o}return e.prototype._addTrack=function(r,n,i){var o=t.prototype._addTrack.call(this,r,n);return o&&this.state!=="disconnected"&&this._addLocalTrack(r,i),o},e.prototype._addLocalTrack=function(r,n){var i,o=(i=r.noiseCancellation)===null||i===void 0?void 0:i.vendor;this._signaling.addTrack(r._trackSender,r.name,n,o),this._log.info("Added a new ".concat(Si(r,!0),":"),r.id),this._log.debug("".concat(Si(r,!0),":"),r)},e.prototype._removeTrack=function(r,n){var i=t.prototype._removeTrack.call(this,r,n);return i&&this.state!=="disconnected"&&(this._signaling.removeTrack(r._trackSender),this._log.info("Removed a ".concat(Si(r,!0),":"),r.id),this._log.debug("".concat(Si(r,!0),":"),r)),i},e.prototype._getTrackEvents=function(){return t.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},e.prototype.toString=function(){return"[LocalParticipant #".concat(this._instanceId).concat(this.sid?": ".concat(this.sid):"","]")},e.prototype._handleTrackSignalingEvents=function(){var r=this,n=this._log;if(this.state!=="disconnected"){var i=function(c){var l=r._signaling.getPublication(c._trackSender);l&&(l.disable(),n.debug("Disabled the ".concat(Si(c,!0),":"),c.id))},o=function(c){var l=r._signaling.getPublication(c._trackSender);l&&(l.enable(),n.debug("Enabled the ".concat(Si(c,!0),":"),c.id))},a=function(c){var l=r._signaling.getPublication(c._trackSender);return l&&l.stop(),l},s=function(c){n.debug("Transitioned to state:",c),c==="disconnected"?(n.debug("Removing LocalTrack event listeners"),r._signaling.removeListener("stateChanged",s),r.removeListener("trackDisabled",i),r.removeListener("trackEnabled",o),r.removeListener("trackStopped",a),r._tracks.forEach(function(l){var u=a(l);u&&l._trackSender.removeClone(u._trackTransceiver)}),n.info("LocalParticipant disconnected. Stopping ".concat(r._tracksToStop.size," automatically-acquired LocalTracks")),r._tracksToStop.forEach(function(l){l.stop()})):c==="connected"&&(n.info("reconnected"),setTimeout(function(){return r.emit("reconnected")},0))};this.on("trackDisabled",i),this.on("trackEnabled",o),this.on("trackStopped",a),this._signaling.on("stateChanged",s),this._tracks.forEach(function(c){r._addLocalTrack(c,zf.PRIORITY_STANDARD),r._getOrCreateLocalTrackPublication(c).catch(function(l){n.warn("Failed to get or create LocalTrackPublication for ".concat(c,":"),l)})})}},e.prototype._getOrCreateLocalTrackPublication=function(r){var n=hl(this.tracks,r);if(n)return Promise.resolve(n);var i=this._log,o=this,a=this._signaling.getPublication(r._trackSender);return a?new Promise(function(s,c){function l(){var u=a.error;if(u){a.removeListener("updated",l),i.warn("Failed to publish the ".concat(Si(r,!0),": ").concat(u.message)),o._removeTrack(r,r.id),setTimeout(function(){o.emit("trackPublicationFailed",u,r)}),c(u);return}if(!o._tracks.has(r.id)){a.removeListener("updated",l),c(new Error("The ".concat(r," was unpublished")));return}var d=a.sid;if(d){a.removeListener("updated",l);var h={log:i,LocalAudioTrackPublication:o._LocalAudioTrackPublication,LocalDataTrackPublication:o._LocalDataTrackPublication,LocalVideoTrackPublication:o._LocalVideoTrackPublication};n=hl(o.tracks,r);var f=function(_){return o.emit("trackWarning",_,n)},y=function(){return o.emit("trackWarningsCleared",n)},v=function(_){n.removeListener("trackWarning",f),n.removeListener("trackWarningsCleared",y),o.unpublishTrack(_.track)};n||(n=n6(r,a,v,h),o._addTrackPublication(n)),n.on("warning",f),n.on("warningsCleared",y);var g=o._signaling.state;(g==="connected"||g==="connecting")&&(r._processorEventObserver&&r._processorEventObserver.on("event",function(_){o._eventObserver.emit("event",{name:_.name,payload:_.data,group:"video-processor",level:"info"})}),r.processedTrack&&(r._captureFrames(),r._setSenderMediaStreamTrack(!0))),g==="connected"&&setTimeout(function(){o.emit("trackPublished",n)}),s(n)}}a.on("updated",l)}):Promise.reject(new Error("Unexpected error: The ".concat(r," cannot be published")))},e.prototype.publishTrack=function(r,n){var i=hl(this.tracks,r);if(i)return Promise.resolve(i);n=Object.assign({log:this._log,priority:zf.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},n);var o;try{o=r6(r,n)}catch(u){return Promise.reject(u)}var a=o.noiseCancellation,s=this._signaling.audioProcessors;a&&!s.includes(a.vendor)&&(this._log.warn("".concat(a.vendor," is not supported in this room. disabling it permanently")),a.disablePermanently());var c=Object.values(zf);if(!c.includes(n.priority))return Promise.reject(Pn.INVALID_VALUE("LocalTrackPublishOptions.priority",c));var l=this._addTrack(o,o.id,n.priority)||this._tracks.get(o.id);return this._getOrCreateLocalTrackPublication(l)},e.prototype.publishTracks=function(r){if(!Array.isArray(r))throw Pn.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(r.map(this.publishTrack,this))},e.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},e.prototype.setNetworkQualityConfiguration=function(r){if(typeof r!="object"||r===null)throw Pn.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(n){if(n in r&&(typeof r[n]!="number"||isNaN(r[n])))throw Pn.INVALID_TYPE("networkQualityConfiguration.".concat(n),"number")}),this._signaling.setNetworkQualityConfiguration(r),this},e.prototype.setParameters=function(r){if(typeof r<"u"&&typeof r!="object")throw Pn.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(r){if(this._signaling.getParameters().adaptiveSimulcast&&r.maxVideoBitrate)throw Pn.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(n){if(typeof r[n]<"u"&&typeof r[n]!="number"&&r[n]!==null)throw Pn.INVALID_TYPE("encodingParameters.".concat(n),"number, null or undefined")})}else r===null&&(r={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(r),this},e.prototype.unpublishTrack=function(r){i6(r,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var n=this._tracks.get(r.id);if(!n)return null;var i=this._signaling.getPublication(n._trackSender);if(i.publishFailed(new Error("The ".concat(n," was unpublished"))),n=this._removeTrack(n,n.id),!n)return null;var o=hl(this.tracks,n);return o&&this._removeTrackPublication(o),o},e.prototype.unpublishTracks=function(r){var n=this;if(!Array.isArray(r))throw Pn.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return r.reduce(function(i,o){var a=n.unpublishTrack(o);return a?i.concat(a):i},[])},e}(d6);function hl(t,e){return Array.from(t.values()).find(function(r){return r.track===e||r.track.mediaStreamTrack===e})||null}var h6=f6,p6=function(){function t(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return t.prototype.connect=function(){},t.prototype.disconnect=function(){return this._connected?(this._connected=!1,!0):!1},t.prototype.publish=function(){return this._connected},t}(),v6=p6,m6=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g6=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},y6=St.EventEmitter,gg=Ee,pl=gg.DEFAULT_NQ_LEVEL_LOCAL,vl=gg.DEFAULT_NQ_LEVEL_REMOTE,Xw=gg.MAX_NQ_LEVEL,Wf=J.inRange,_6=function(t){m6(e,t);function e(r){var n=t.call(this)||this;return r=Object.assign({local:pl,remote:vl},r),Object.defineProperties(n,{local:{value:Wf(r.local,pl,Xw)?r.local:pl,writable:!0},remote:{value:Wf(r.remote,vl,Xw)?r.remote:vl,writable:!0}}),n}return e.prototype.update=function(r){var n=this;r=Object.assign({local:this.local,remote:this.remote},r),[["local",pl,3],["remote",vl,3]].forEach(function(i){var o=g6(i,3),a=o[0],s=o[1],c=o[2];n[a]=typeof r[a]=="number"&&Wf(r[a],s,c)?r[a]:s})},e}(y6),w6=_6,b6=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S6=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Zw=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},k6=iO,T6=function(t){b6(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i._handleTrackSignalingEvents(),i.once("disconnected",i._unsubscribeTracks.bind(i)),i}return e.prototype.toString=function(){return"[RemoteParticipant #".concat(this._instanceId).concat(this.sid?": ".concat(this.sid):"","]")},e.prototype._addTrack=function(r,n,i){return t.prototype._addTrack.call(this,r,i)?(n._subscribed(r),this.emit("trackSubscribed",r,n),r):null},e.prototype._addTrackPublication=function(r){var n=t.prototype._addTrackPublication.call(this,r);return n?(this.emit("trackPublished",n),n):null},e.prototype._getTrackPublicationEvents=function(){return Zw(Zw([],S6(t.prototype._getTrackPublicationEvents.call(this)),!1),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]],!1)},e.prototype._unsubscribeTracks=function(){var r=this;this.tracks.forEach(function(n){if(n.isSubscribed){var i=n.track;n._unsubscribe(),r.emit("trackUnsubscribed",i,n)}})},e.prototype._removeTrack=function(r,n,i){var o=this._tracks.get(i);return o?(t.prototype._removeTrack.call(this,o,i),n._unsubscribe(),this.emit("trackUnsubscribed",o,n),o):null},e.prototype._removeTrackPublication=function(r){this._signaling.clearTrackHint(r.trackSid);var n=t.prototype._removeTrackPublication.call(this,r);return n?(this.emit("trackUnpublished",n),n):null},e}(k6),x6=T6,E6=function(){function t(e,r){if(typeof e!="string")throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:e,enumerable:!0},trackSid:{value:r.trackSid,enumerable:!0},timestamp:{value:r.timestamp,enumerable:!0},ssrc:{value:r.ssrc,enumerable:!0},packetsLost:{value:typeof r.packetsLost=="number"?r.packetsLost:null,enumerable:!0},codec:{value:typeof r.codecName=="string"?r.codecName:null,enumerable:!0}})}return t}(),aO=E6,C6=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P6=aO,O6=function(t){C6(e,t);function e(r,n,i){var o=t.call(this,r,n)||this;return Object.defineProperties(o,{bytesSent:{value:typeof n.bytesSent=="number"?n.bytesSent:i?0:null,enumerable:!0},packetsSent:{value:typeof n.packetsSent=="number"?n.packetsSent:i?0:null,enumerable:!0},roundTripTime:{value:typeof n.roundTripTime=="number"?n.roundTripTime:i?0:null,enumerable:!0}}),o}return e}(P6),sO=O6,R6=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),j6=sO,A6=function(t){R6(e,t);function e(r,n,i){var o=t.call(this,r,n,i)||this;return Object.defineProperties(o,{audioLevel:{value:typeof n.audioInputLevel=="number"?n.audioInputLevel:null,enumerable:!0},jitter:{value:typeof n.jitter=="number"?n.jitter:null,enumerable:!0}}),o}return e}(j6),L6=A6,I6=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),N6=sO,M6=function(t){I6(e,t);function e(r,n,i){var o=t.call(this,r,n,i)||this,a=null;typeof n.frameWidthInput=="number"&&typeof n.frameHeightInput=="number"&&(a={},Object.defineProperties(a,{width:{value:n.frameWidthInput,enumerable:!0},height:{value:n.frameHeightInput,enumerable:!0}}));var s=null;return typeof n.frameWidthSent=="number"&&typeof n.frameHeightSent=="number"&&(s={},Object.defineProperties(s,{width:{value:n.frameWidthSent,enumerable:!0},height:{value:n.frameHeightSent,enumerable:!0}})),Object.defineProperties(o,{captureDimensions:{value:a,enumerable:!0},dimensions:{value:s,enumerable:!0},captureFrameRate:{value:typeof n.frameRateInput=="number"?n.frameRateInput:null,enumerable:!0},frameRate:{value:typeof n.frameRateSent=="number"?n.frameRateSent:null,enumerable:!0},qualityLimitationReason:{value:["none","bandwidth","cpu","other"].find(function(c){return c===n.qualityLimitationReason})||null,enumerable:!0}}),o}return e}(N6),D6=M6,$6=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U6=aO,F6=function(t){$6(e,t);function e(r,n){var i=t.call(this,r,n)||this;return Object.defineProperties(i,{bytesReceived:{value:typeof n.bytesReceived=="number"?n.bytesReceived:null,enumerable:!0},packetsReceived:{value:typeof n.packetsReceived=="number"?n.packetsReceived:null,enumerable:!0},jitter:{value:typeof n.jitter=="number"?n.jitter:null,enumerable:!0}}),i}return e}(U6),cO=F6,B6=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V6=cO,z6=function(t){B6(e,t);function e(r,n){var i=t.call(this,r,n)||this;return Object.defineProperties(i,{audioLevel:{value:typeof n.audioOutputLevel=="number"?n.audioOutputLevel:null,enumerable:!0}}),i}return e}(V6),W6=z6,H6=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),q6=cO,K6=function(t){H6(e,t);function e(r,n){var i=t.call(this,r,n)||this,o=null;return typeof n.frameWidthReceived=="number"&&typeof n.frameHeightReceived=="number"&&(o={},Object.defineProperties(o,{width:{value:n.frameWidthReceived,enumerable:!0},height:{value:n.frameHeightReceived,enumerable:!0}})),Object.defineProperties(i,{dimensions:{value:o,enumerable:!0},frameRate:{value:typeof n.frameRateReceived=="number"?n.frameRateReceived:null,enumerable:!0},freezeCount:{value:typeof n.freezeCount=="number"?n.freezeCount:null,enumerable:!0}}),i}return e}(q6),G6=K6,Q6=L6,J6=D6,Y6=W6,X6=G6,Z6=function(){function t(e,r,n){if(typeof e!="string")throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:e,enumerable:!0},localAudioTrackStats:{value:r.localAudioTrackStats.map(function(i){return new Q6(i.trackId,i,n)}),enumerable:!0},localVideoTrackStats:{value:r.localVideoTrackStats.map(function(i){return new J6(i.trackId,i,n)}),enumerable:!0},remoteAudioTrackStats:{value:r.remoteAudioTrackStats.map(function(i){return new Y6(i.trackId,i)}),enumerable:!0},remoteVideoTrackStats:{value:r.remoteVideoTrackStats.map(function(i){return new X6(i.trackId,i)}),enumerable:!0}})}return t}(),lO=Z6,eb=Sd,Hf=Na,eH=function(){function t(e){if(!e)throw new Error("ApplicationMonitor requires a log instance");this._log=e,this._visibilityChangeHandler=null,this._boundHandleBeforeUnload=this._handleBeforeUnload.bind(this),this._setupVisibilityMonitoring(),this._setupBeforeUnloadMonitoring()}return t.prototype._setupVisibilityMonitoring=function(){var e=this;if(typeof window>"u"||typeof document>"u"){this._log.debug("Not in browser environment, skipping setup of ApplicationMonitor");return}this._visibilityChangeHandler=function(r){return e._handleVisibilityChange(r)};try{eb.onVisibilityChange(1,this._visibilityChangeHandler),this._log.debug("ApplicationMonitor visibility monitoring initialized")}catch(r){this._log.error("Error initializing ApplicationMonitor visibility monitoring:",r)}},t.prototype._setupBeforeUnloadMonitoring=function(){try{window.addEventListener("beforeunload",this._boundHandleBeforeUnload),this._log.debug("ApplicationMonitor beforeunload monitoring initialized")}catch(e){this._log.error("Error initializing ApplicationMonitor beforeunload monitoring:",e)}},t.prototype.cleanup=function(){this._log.debug("Cleaning up application event monitors"),this._visibilityChangeHandler&&(eb.offVisibilityChange(1,this._visibilityChangeHandler),this._visibilityChangeHandler=null),typeof window<"u"&&this._boundHandleBeforeUnload&&window.removeEventListener("beforeunload",this._boundHandleBeforeUnload)},t.prototype._handleVisibilityChange=function(e){e?Hf.application.resumed():Hf.application.backgrounded()},t.prototype._handleBeforeUnload=function(){Hf.application.terminated()},t}(),tH=eH,rH=J.boolToString,nH=Na,iH=function(){function t(e){if(!e)throw new Error("NetworkMonitor requires a log instance");this._log=e,this._networkInformationHandler=null,this._setupNetworkInformationAPI()}return t.prototype._setupNetworkInformationAPI=function(){if(typeof globalThis.navigator>"u"||!globalThis.navigator.connection){this._log.debug("Network Information API not supported");return}var e=function(){var n=navigator.connection;nH.network.informationChanged({downlink:n.downlink,downlinkMax:n.downlinkMax,effectiveType:n.effectiveType,rtt:n.rtt,saveData:typeof n.saveData=="boolean"?rH(n.saveData):void 0,type:n.type})};try{var r=navigator.connection;["change","typechange"].forEach(function(n){r.addEventListener(n,e)}),this._networkInformationHandler={stop:function(){["change","typechange"].forEach(function(n){r.removeEventListener(n,e)})}},this._log.debug("Network Information API monitoring initialized")}catch(n){this._log.error("Error initializing Network Information API monitoring:",n)}},t.prototype.cleanup=function(){this._log.debug("Cleaning up network monitoring"),this._networkInformationHandler&&(this._networkInformationHandler.stop(),this._networkInformationHandler=null)},t}(),oH=iH,aH=x&&x.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},sH=x&&x.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function tb(){return typeof globalThis<"u"&&typeof globalThis.PressureObserver=="function"?globalThis.PressureObserver:null}var cH=function(){function t(){this._lastCpuPressure=null,this._cpuPressureObserver=null,this._sampleInterval=2e3,this._cpuPressureChangeListeners=[]}return t.prototype.watchCpuPressure=function(e){return aH(this,void 0,void 0,function(){var r,n=this;return sH(this,function(i){switch(i.label){case 0:if(typeof e!="function")throw new Error("The CPU pressure change callback must be a function");if(r=tb(),!r)throw new Error("PressureObserver is not supported in this environment");return this._cpuPressureChangeListeners.push(e),this._cpuPressureObserver?[3,2]:(this._cpuPressureObserver=new r(function(o){return n._handleCpuPressureRecords(o)}),[4,this._cpuPressureObserver.observe("cpu",{sampleInterval:this._sampleInterval})]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},t.prototype.isSupported=function(){return!!tb()},t.prototype.unwatchCpuPressure=function(e){this._cpuPressureChangeListeners=this._cpuPressureChangeListeners.filter(function(r){return r!==e}),this._cpuPressureChangeListeners.length===0&&this.cleanup()},t.prototype._handleCpuPressureRecords=function(e){if(!(!Array.isArray(e)||e.length===0)){var r=e[e.length-1];if(r){var n=r.state!==this._lastCpuPressure;n&&(this._lastCpuPressure=r.state,this._cpuPressureChangeListeners.forEach(function(i){return i(r)}))}}},t.prototype.cleanup=function(){this._cpuPressureObserver&&(this._cpuPressureObserver.disconnect(),this._cpuPressureObserver=null),this._cpuPressureChangeListeners=[],this._lastCpuPressure=null},t}(),lH=new cH,qf=lH,uH=Na,dH=function(){function t(e){if(!e)throw new Error("ResourceMonitor requires a log instance");this._log=e,this._cpuPressureHandler=null,this._setupCPUMonitoring()}return t.prototype._setupCPUMonitoring=function(){var e=this;if(!qf.isSupported()){this._log.debug("CPU pressure monitoring not supported");return}this._cpuPressureHandler=function(r){e._log.debug("CPU pressure changed:",r),uH.system.cpuPressureChanged(r.state)},qf.watchCpuPressure(this._cpuPressureHandler).then(function(){e._log.debug("CPU pressure monitoring initialized")}).catch(function(r){e._log.error("Error initializing CPU pressure monitoring:",r)})},t.prototype.cleanup=function(){this._log.debug("Cleaning up resource monitors"),this._cpuPressureHandler&&(qf.unwatchCpuPressure(this._cpuPressureHandler),this._cpuPressureHandler=null)},t}(),fH=dH,hH=tH,pH=oH,vH=fH,mH=function(){function t(e){if(!e)throw new Error("MonitorRegistry requires a log instance");this._log=e,this._monitors=[new hH(e),new pH(e),new vH(e)]}return t.prototype.cleanup=function(){var e=this;this._monitors.forEach(function(r){try{r.cleanup()}catch(n){e._log.warn("Failed to cleanup monitor:",n)}})},t}(),gH=mH,yH=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ys=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Wl=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},_H=mc,wH=x6,bH=lO,SH=gH,uO=J,kH=uO.flatMap,TH=uO.valueToJSON,xH=0,EH=function(t){yH(e,t);function e(r,n,i){var o=t.call(this)||this,a=i.log.createLog("default",o),s=new Map;return Object.defineProperties(o,{_log:{value:a},_clientTrackSwitchOffControl:{value:i.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:i.contentPreferencesMode||"disabled"},_instanceId:{value:++xH},_options:{value:i},_participants:{value:s},_signaling:{value:n},_insightsMonitors:{value:i.eventObserver&&i.insights?new SH(a):null},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(n.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return n.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:r},name:{enumerable:!0,value:n.name},participants:{enumerable:!0,value:s},sid:{enumerable:!0,value:n.sid},state:{enumerable:!0,get:function(){return n.state}},mediaRegion:{enumerable:!0,value:n.mediaRegion}}),PH(o,r),OH(o,n.recording),RH(o,n),CH(o),a.info("Created a new Room:",o.name),a.debug("Initial RemoteParticipants:",Array.from(o._participants.values())),o}return e.prototype.toString=function(){return this._instanceId?"[Room #".concat(this._instanceId,": ").concat(this.sid,"]"):"[Room (uninitialized)]"},e.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},e.prototype.getStats=function(){var r=this;return this._signaling.getStats().then(function(n){return Array.from(n).map(function(i){var o=Ys(i,2),a=o[0],s=o[1];return new bH(a,Object.assign({},s,{localAudioTrackStats:rb(r,s.localAudioTrackStats),localVideoTrackStats:rb(r,s.localVideoTrackStats)}))})})},e.prototype.refreshInactiveMedia=function(){var r=this.localParticipant.tracks,n=Array.from(r.values()).filter(function(c){var l=c.track.kind;return l!=="data"}).map(function(c){var l=c.track;return l}),i=kH(this.participants,function(c){return Array.from(c.tracks.values())}).filter(function(c){var l=c.track;return l&&l.kind!=="data"}).map(function(c){var l=c.track;return l}),o=n.concat(i),a=new Event("unmute");n.forEach(function(c){var l=c.isMuted,u=c.mediaStreamTrack;l&&u.dispatchEvent(a)});var s=new Event("pause");return o.forEach(function(c){var l=c._attachments,u=c._elShims;return l.forEach(function(d){var h=u.get(d),f=d.paused&&h&&!h.pausedIntentionally();f&&d.dispatchEvent(s)})}),this},e.prototype.toJSON=function(){return TH(this)},e}(_H);function CH(t){var e=t.localParticipant._signaling.audioProcessors;t.localParticipant.audioTracks.forEach(function(r){var n=r.track,i=n.noiseCancellation;i&&!e.includes(i.vendor)&&(t._log.warn("".concat(i.vendor," is not supported in this room. disabling it permanently")),i.disablePermanently())})}function rb(t,e){var r=t.localParticipant._signaling;return e.reduce(function(n,i){var o=r.tracks.get(i.trackId),a=r.getSender(o);return a?[Object.assign({},i,{trackId:a.id})].concat(n):n},[])}function nb(t,e){var r=t._log,n=t._clientTrackSwitchOffControl,i=t._contentPreferencesMode,o=t._options,a=o.MediaStream,s=o.mapMediaElement,c=o.disposeMediaElement,l=new wH(e,{log:r,clientTrackSwitchOffControl:n,contentPreferencesMode:i,MediaStream:a,mapMediaElement:s,disposeMediaElement:c});r.info("A new RemoteParticipant connected:",l),t._participants.set(l.sid,l),t.emit("participantConnected",l);var u=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(d){var h=Ys(Array.isArray(d)?d:[d,d],2),f=h[0],y=h[1];function v(){var g=[].slice.call(arguments);g.unshift(y),g.push(l),t.emit.apply(t,Wl([],Ys(g),!1))}return l.on(f,v),[f,v]});l.once("disconnected",function(){var h=t.dominantSpeaker;r.info("RemoteParticipant disconnected:",l),t._participants.delete(l.sid),u.forEach(function(f){l.removeListener(f[0],f[1])}),t.emit("participantDisconnected",l),l===h&&t.emit("dominantSpeakerChanged",t.dominantSpeaker)})}function PH(t,e){var r=["trackWarning","trackWarningsCleared"].map(function(n){return{eventName:n,handler:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return t.emit.apply(t,Wl([n],Ys(Wl(Wl([],Ys(i),!1),[e],!1)),!1))}}});r.forEach(function(n){var i=n.eventName,o=n.handler;return e.on(i,o)}),t.once("disconnected",function(){return r.forEach(function(n){var i=n.eventName,o=n.handler;return e.removeListener(i,o)})})}function OH(t,e){e.on("updated",function(){var n=e.isEnabled;t._log.info("Recording ".concat(n?"started":"stopped")),t.emit("recording".concat(n?"Started":"Stopped"))})}function RH(t,e){var r=t._log;r.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),e.participants.forEach(nb.bind(null,t)),r.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),e.on("participantConnected",nb.bind(null,t)),e.on("dominantSpeakerChanged",function(){return t.emit("dominantSpeakerChanged",t.dominantSpeaker)}),e.on("transcription",function(n){return t.emit("transcription",n)}),e.on("stateChanged",function n(i,o){switch(r.info("Transitioned to state:",i),i){case"disconnected":t.participants.forEach(function(a){a._unsubscribeTracks()}),t.emit(i,t,o),t.localParticipant.tracks.forEach(function(a){a.unpublish()}),t._insightsMonitors&&t._insightsMonitors.cleanup(),e.removeListener("stateChanged",n);break;case"reconnecting":setTimeout(function(){return t.emit("reconnecting",o)},0);break;default:setTimeout(function(){return t.emit("reconnected")},0)}})}var jH=EH,AH=function(){function t(e){Object.defineProperties(this,{_min:{value:e.min||100},_max:{value:e.max||1e4},_jitter:{value:e.jitter>0&&e.jitter<=1?e.jitter:0},_factor:{value:e.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var r=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var n=Math.random(),i=Math.floor(n*this._jitter*r);r=Math.floor(n*10)&1?r+i:r-i}return Math.min(r,this._max)|0}},_timeoutID:{value:null,writable:!0}})}return t.prototype.backoff=function(e){var r=this,n=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){r._attempts++,e()},n)},t.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},t}(),dO=AH,kt={},LH=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},fO=J,Kf=fO.difference,nn=fO.flatMap;function Gf(){var t=4294967295;return String(Math.floor(Math.random()*t))}var IH=function(){function t(e,r,n){Object.defineProperties(this,{cName:{enumerable:!0,value:n},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:r},trackId:{enumerable:!0,value:e}})}return t.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var e=[Gf(),Gf()];e.forEach(function(r){this.primarySSRCs.add(r)},this),this.rtxPairs.size&&e.forEach(function(r){this.rtxPairs.set(Gf(),r)},this)}},t.prototype.addSSRC=function(e,r,n){r?this.rtxPairs.set(e,r):this.primarySSRCs.add(e),this.isSimulcastEnabled=this.isSimulcastEnabled||n},t.prototype.toSdpLines=function(e){var r=this,n=e?[]:Array.from(this.rtxPairs.entries()).map(function(l){return l.reverse()}),i=Array.from(this.primarySSRCs.values()),o=n.length?nn(n):i,a=nn(o,function(l){return["a=ssrc:".concat(l," cname:").concat(r.cName),"a=ssrc:".concat(l," msid:").concat(r.streamId," ").concat(r.trackId)]}),s=n.map(function(l){return"a=ssrc-group:FID ".concat(l.join(" "))}),c=["a=ssrc-group:SIM ".concat(i.join(" "))];return s.concat(a).concat(c)},t}();function Pu(t,e){var r=t.match(new RegExp(e,"gm"))||[];return r.map(function(n){var i=n.match(new RegExp(e))||[];return i.slice(1)})}function NH(t){var e="^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$";return new Set(nn(Pu(t,e)))}function MH(t,e,r){var n="a=ssrc:".concat(e," ").concat(r,":(.+)");return t.match(new RegExp(n))[1]}function DH(t){var e="^a=ssrc-group:FID ([0-9]+) ([0-9]+)$";return new Map(Pu(t,e).map(function(r){return r.reverse()}))}function $H(t){var e=LH(nn(Pu(t,"^a=msid:(.+) (.+)$")),2),r=e[0],n=e[1],i=nn(Pu(t,"^a=ssrc:(.+) cname:.+$"));return i.map(function(o){return[o,r,n]})}function UH(t){var e=NH(t),r=DH(t),n=$H(t);return n.reduce(function(i,o){var a=o[0],s=o[1],c=o[2],l=i.get(c)||new IH(c,s,MH(t,a,"cname")),u=r.get(a)||null;return l.addSSRC(a,u,e.has(a)),i.set(c,l)},new Map)}function FH(t,e){var r=UH(t),n=Array.from(r.keys()),i=Array.from(e.keys()),o=Kf(n,i),a=Kf(i,n),s=nn(o,function(y){return r.get(y)});s.forEach(function(y){y.addSimulcastSSRCs(),e.set(y.trackId,y)}),i=Array.from(e.keys());var c=Kf(i,a),l=nn(c,function(y){return e.get(y)}),u=!t.match(/a=rtpmap:[0-9]+ rtx/),d=nn(l,function(y){return y.toSdpLines(u)}),h=nn(new Set(t.split(`\r
`).concat(d))),f="a=x-google-flag:conference";return t.match(f)||h.push(f),h.join(`\r
`)}var BH=FH,qi=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},ib=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},hO=J,VH=hO.difference,Zp=hO.flatMap,zH=BH,ob={0:"PCMU",8:"PCMA"};function $a(t){return Array.from(Ed(t)).reduce(function(e,r){var n=r[0],i=r[1],o=e.get(i)||[];return e.set(i,o.concat(n))},new Map)}function ev(t){return qr(t).reduce(function(e,r){var n=xa(r);return n?e.set(n,r):e},new Map)}function Ed(t){return _c(t).reduce(function(e,r){if(e.has(r))return e;var n=new RegExp("a=rtpmap:".concat(r," ([^/]+)")),i=t.match(n),o=i?i[1].toLowerCase():ob[r]?ob[r].toLowerCase():"";return e.set(r,o)},new Map)}function Ou(t,e){var r=new RegExp("^a=fmtp:".concat(t," (.+)$"),"m"),n=e.match(r);return n&&n[1].split(";").reduce(function(i,o){var a=qi(o.split("="),2),s=a[0],c=a[1];return i[s]=isNaN(c)?c:parseInt(c,10),i},{})}function xa(t){var e=t.match(/^a=mid:(.+)$/m);return e&&e[1]}function qr(t,e,r){return t.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(function(n){return"m=".concat(n)}).filter(function(n){var i=new RegExp("m=".concat(e||".*"),"gm"),o=new RegExp("a=".concat(r||".*"),"gm");return i.test(n)&&o.test(n)})}function _c(t){var e=t.split(`\r
`)[0],r=e.match(/([0-9]+)/g);return r?r.slice(1).map(function(n){return parseInt(n,10)}):[]}function WH(t,e){e=e.map(function(o){var a=o.codec;return a.toLowerCase()});var r=Zp(e,function(o){return t.get(o)||[]}),n=VH(Array.from(t.keys()),e),i=Zp(n,function(o){return t.get(o)});return r.concat(i)}function yg(t,e){var r=e.split(`\r
`),n=r[0],i=r.slice(1);return n=n.replace(/([0-9]+\s?)+$/,t.join(" ")),[n].concat(i).join(`\r
`)}function HH(t,e,r){var n=qr(t),i=t.split(`\r
m=`)[0];return[i].concat(n.map(function(o){if(!/^m=(audio|video)/.test(o))return o;var a=o.match(/^m=(audio|video)/)[1],s=$a(o),c=a==="audio"?e:r,l=WH(s,c),u=yg(l,o),d=s.get("pcma")||[],h=s.get("pcmu")||[],f=a==="audio"?new Set(d.concat(h)):new Set;return f.has(l[0])?u.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):u})).join(`\r
`)}function qH(t,e){var r=qr(t),n=t.split(`\r
m=`)[0];return[n].concat(r.map(function(i){if(i=i.replace(/\r\n$/,""),!/^m=video/.test(i))return i;var o=$a(i),a=_c(i),s=new Set(o.get("vp8")||[]),c=a.some(function(l){return s.has(l)});return c?zH(i,e):i})).concat("").join(`\r
`)}function KH(t,e,r,n,i){var o=r.get(t)||[];if(o.length<=1)return o;var a=Ou(e,i);if(!a)return o;var s=o.find(function(c){var l=Ou(c,n);return l&&Object.keys(a).every(function(u){return a[u]===l[u]})});return typeof s=="number"?[s]:o}function GH(t,e,r){if(!/^m=(audio|video)/.test(t))return t;var n=xa(t),i=n&&e.get(n);if(!i)return t;var o=Ed(i),a=$a(t),s=Zp(Array.from(o),function(f){var y=qi(f,2),v=y[0],g=y[1];return g!=="rtx"&&!r.includes(g)?KH(g,v,a,t,i):[]}),c=a.get("rtx")||[],l=c.filter(function(f){var y=Ou(f,t);return y&&s.includes(y.apt)});s=Array.from(new Set(ib(ib([],qi(s),!1),qi(l),!1)));var u=t.split(`\r
`).filter(function(f){var y=f.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),v=y&&y[2];return!y||v&&s.includes(parseInt(v,10))}),d=_c(t).filter(function(f){return s.includes(f)}),h=Array.from(new Set(d));return yg(h,u.join(`\r
`))}function QH(t,e){var r=qr(t),n=t.split(`\r
m=`)[0],i=ev(e);return[n].concat(r.map(function(o){return GH(o,i,[])})).join(`\r
`)}function JH(t,e,r,n){n===void 0&&(n=!1);var i=ev(r),o=ev(e),a=qr(t),s=t.split(`\r
m=`)[0];return[s].concat(a.map(function(c){if(c=c.replace(/\r\n$/,""),!/^m=video/.test(c))return c;var l=c.match(/^a=mid:(.+)$/m),u=l&&l[1];if(!u)return c;var d=i.get(u),h=Ed(d),f=_c(d),y=f.length&&h.get(f[0])==="vp8",v=n||!y;return v?o.get(u).replace(/\r\n$/,""):c})).concat("").join(`\r
`)}function YH(t,e,r){var n=Array.from(r).reduce(function(i,o){var a=qi(o,2),s=a[0],c=a[1],l=qr(t,s,"send(only|recv)"),u=l.map(xa).filter(function(d){return!e.has(d)});return u.forEach(function(d,h){return i.set(d,c[h])}),i},new Map);return pO(t,n)}function pO(t,e){var r=qr(t),n=t.split(`\r
m=`)[0];return[n].concat(r.map(function(i){if(!/^m=(audio|video)/.test(i))return i;var o=xa(i);if(!o)return i;var a=e.get(o);if(!a)return i;var s=(i.match(/^a=msid:(.+)$/m)||[])[1];if(!s)return i;var c=qi(s.split(" "),2),l=c[0],u=c[1],d=new RegExp("msid:".concat(l).concat(u?" ".concat(u):"","$"),"gm");return i.replace(d,"msid:".concat(l," ").concat(a))})).join(`\r
`)}function XH(t,e){return t.split(`\r
`).filter(function(r){return!e.find(function(n){return new RegExp("a=ssrc:.*"+n+":","g").test(r)})}).join(`\r
`)}function ZH(t){var e=qr(t),r=t.split(`\r
m=`)[0];return[r].concat(e.map(function(n){if(!/^m=video/.test(n))return n;var i=$a(n),o=i.get("rtx");if(!o)return n;var a=new Set(_c(n));o.forEach(function(u){return a.delete(u)});var s=n.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),c=s&&s[1],l=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(c?[new RegExp("^a=ssrc:".concat(c," .+$"))]:[]);return n=n.split(`\r
`).filter(function(u){return l.every(function(d){return!d.test(u)})}).join(`\r
`),yg(Array.from(a),n)})).join(`\r
`)}function ab(t,e){var r=Object.entries(e).map(function(n){var i=qi(n,2),o=i[0],a=i[1];return"".concat(o,"=").concat(a)}).join(";");return"a=fmtp:".concat(t," ").concat(r)}function eq(t,e){var r=qr(t),n=t.split(`\r
m=`)[0];return e=e||r.filter(function(i){return/^m=audio/.test(i)}).map(xa),[n].concat(r.map(function(i){if(!/^m=audio/.test(i))return i;var o=$a(i),a=o.get("opus");if(!a)return i;var s=Ou(a,i);if(!s)return i;var c=ab(a,s),l=new RegExp(c),u=xa(i);e.includes(u)?s.usedtx=1:delete s.usedtx;var d=ab(a,s);return i.replace(l,d)})).join(`\r
`)}kt.addOrRewriteNewTrackIds=YH;kt.addOrRewriteTrackIds=pO;kt.createCodecMapForMediaSection=$a;kt.createPtToCodecName=Ed;kt.disableRtx=ZH;kt.enableDtxForOpus=eq;kt.filterLocalCodecs=QH;kt.getMediaSections=qr;kt.removeSSRCAttributes=XH;kt.revertSimulcast=JH;kt.setCodecPreferences=HH;kt.setSimulcast=qH;var tq=function(){function t(e){e=Object.assign({getKey:function(n){return n},getValue:function(n){return n},isLessThanOrEqualTo:function(n,i){return n<=i}},e),Object.defineProperties(this,{_getKey:{value:e.getKey},_getValue:{value:e.getValue},_isLessThanOrEqualTo:{value:e.isLessThanOrEqualTo},_map:{value:new Map}})}return t.prototype.toMap=function(){return new Map(this._map)},t.prototype.updateAndFilter=function(e){return e.filter(this.update,this)},t.prototype.update=function(e){var r=this._getKey(e),n=this._getValue(e);return this._map.has(r)&&this._isLessThanOrEqualTo(n,this._map.get(r))?!1:(this._map.set(r,n),!0)},t}(),rq=tq,nq=rq,iq=function(){function t(){Object.defineProperties(this,{_filter:{value:new nq({getKey:function(r){return r.ufrag},isLessThanOrEqualTo:function(r,n){return r.revision<=n.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return t.prototype.setUfrag=function(e){this._ufrag=e;var r=this._filter.toMap().get(e);return r?r.candidates:[]},t.prototype.update=function(e){e.candidates=e.candidates||[];var r=this._filter.toMap().get(e.ufrag),n=r?r.candidates:[];return this._filter.update(e)&&this._ufrag===e.ufrag?e.candidates.slice(n.length):[]},t}(),oq=iq,vO=Ee,aq=vO.ICE_ACTIVITY_CHECK_PERIOD_MS,sq=vO.ICE_INACTIVITY_THRESHOLD_MS,cq=function(){function t(e,r){r=Object.assign({activityCheckPeriodMs:aq,inactivityThresholdMs:sq},r),Object.defineProperties(this,{_activityCheckPeriodMs:{value:r.activityCheckPeriodMs},_inactivityThresholdMs:{value:r.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:e},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return t.prototype._getActivePairStat=function(e){var r=Array.from(e.values()),n=r.find(function(i){return i.type==="candidate-pair"&&i.nominated});return n||{bytesReceived:0,timestamp:Math.round(new Date().getTime())}},t.prototype._getIceConnectionStats=function(){var e=this;return this._peerConnection.getStats().then(function(r){return e._getActivePairStat(r)}).catch(function(){return null})},t.prototype._scheduleInactivityCallback=function(e){var r=this;e&&this._onIceConnectionStateChanged===null?(this._onIceConnectionStateChanged=function(){r._peerConnection.iceConnectionState==="disconnected"&&e()},this._peerConnection.addEventListener?this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=this._onIceConnectionStateChanged):!e&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener?this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=null,this._onIceConnectionStateChanged=null)},t.prototype.start=function(e){var r=this;this.stop(),this._timer=setInterval(function(){r._getIceConnectionStats().then(function(n){n&&((!r._lastActivity||r._lastActivity.bytesReceived!==n.bytesReceived)&&(r._lastActivity=n,r._scheduleInactivityCallback(null)),n.timestamp-r._lastActivity.timestamp>=r._inactivityThresholdMs&&(r._peerConnection.iceConnectionState==="disconnected"?e():r._onIceConnectionStateChanged===null&&r._scheduleInactivityCallback(e)))})},this._activityCheckPeriodMs)},t.prototype.stop=function(){this._scheduleInactivityCallback(null),this._timer!==null&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},t}(),lq=cq,uq=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dq=St.EventEmitter,fq=function(t){uq(e,t);function e(r){var n=t.call(this)||this;return Object.defineProperties(n,{_dataChannel:{value:r},_messageQueue:{value:[]}}),r.addEventListener("open",function(){n._messageQueue.splice(0).forEach(function(i){return n._publish(i)})}),r.addEventListener("message",function(i){var o=i.data;try{var a=JSON.parse(o);n.emit("message",a)}catch{}}),n.publish({type:"ready"}),n}return e.prototype._publish=function(r){var n=JSON.stringify(r);try{this._dataChannel.send(n)}catch{}},e.prototype.publish=function(r){var n=this._dataChannel;return n.readyState==="closing"||n.readyState==="closed"?!1:n.readyState==="connecting"?(this._messageQueue.push(r),!0):(this._publish(r),!0)},e}(dq),hq=fq,pq=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vq=PC,mq=hq,gq=function(t){pq(e,t);function e(r){var n=t.call(this,r.label,r.maxPacketLifeTime,r.maxRetransmits,r.ordered)||this;return Object.defineProperties(n,{_dataChannel:{value:r}}),r.binaryType="arraybuffer",r.addEventListener("message",function(i){n.emit("message",i.data)}),r.addEventListener("close",function(){n.emit("close")}),n}return e.prototype.stop=function(){this._dataChannel.close(),t.prototype.stop.call(this)},e.prototype.toDataTransport=function(){return new mq(this._dataChannel)},e}(vq),yq=gq,_q=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wq=_C,bq=function(t){_q(e,t);function e(r,n){return t.call(this,r,n)||this}return e}(wq),Sq=bq,kq=kt.getMediaSections,Tq=function(){function t(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return t.prototype.match=function(e){return this._midsToTrackIds.get(e.transceiver.mid)||null},t.prototype.update=function(e){var r=kq(e,"(audio|video)");this._midsToTrackIds=r.reduce(function(n,i){var o=i.match(/^a=mid:(.+)$/m)||[],a=i.match(/^a=msid:.+ (.+)$/m)||[],s=o[1],c=a[1];return s&&c?n.set(s,c):n},this._midsToTrackIds)},t}(),xq=Tq,Eq=uo.RTCSessionDescription,mO=kt,Cq=mO.createPtToCodecName,Pq=mO.getMediaSections;function Oq(t){var e={type:t.type};return t.type!=="rollback"&&(e.sdp=Rq(t.sdp)),new Eq(e)}function Rq(t){var e=Pq(t),r=t.split(`\r
m=`)[0];return[r].concat(e.map(jq)).join(`\r
`)}function jq(t){var e=Cq(t);t=Lq(t,e),t=Aq(t);var r=Iq(e),n=r.get("rtx")||new Set,i=new Set,o=Nq(t,e,n,i),a=Mq(o,i),s=Array.from(i),c=["h264","vp8","vp9"],l=c.reduce(function(u,d){var h=r.get(d)||new Set;return Array.from(h).reduce(function(f,y){return a.has(y)?f:f.add(y)},u)},new Set);return l.forEach(function(u){if(s.length){var d=s.shift();t=sb(t,d),t=$q(t,d,u)}}),s.forEach(function(u){t=sb(t,u),t=Dq(t,u)}),t}function Aq(t){for(var e=t.split(`\r
`),r=new Map,n=96,i=0;i<e.length;i++){var o=e[i].match(/^a=rtpmap:(\d+) ([^/]+)/);if(o){var a=parseInt(o[1],10),s=o[2].toLowerCase();if(r.has(a)&&r.get(a)!==s){for(;r.has(n)||n===a;)n++;var c=n;r.set(c,s),e[i]=e[i].replace("a=rtpmap:".concat(a),"a=rtpmap:".concat(c));for(var l=i+1;l<e.length;l++)e[l].match(new RegExp("^a=(fmtp|rtcp-fb):".concat(a,"\\b")))&&(e[l]=e[l].replace(new RegExp("^a=(fmtp|rtcp-fb):".concat(a,"\\b")),"a=$1:".concat(c)))}else r.set(a,s)}}return e.join(`\r
`)}function Lq(t,e){return Array.from(e.keys()).reduce(function(r,n){var i=new RegExp("^a=rtpmap:".concat(n," rtx.+$"),"gm");return(r.match(i)||[]).slice(e.get(n)==="rtx"?1:0).reduce(function(o,a){var s=new RegExp(`\r
`.concat(a)),c=new RegExp(`\r
a=fmtp:`.concat(n," apt=[0-9]+"));return o.replace(s,"").replace(c,"")},r)},t)}function Iq(t){var e=new Map;return t.forEach(function(r,n){var i=e.get(r)||new Set;return e.set(r,i.add(n))}),e}function Nq(t,e,r,n){return Array.from(r).reduce(function(i,o){var a=new RegExp("a=fmtp:".concat(o," apt=(\\d+)")),s=t.match(a);if(!s)return n.add(o),i;var c=Number.parseInt(s[1]);if(!e.has(c))return n.add(o),i;var l=e.get(c);return l==="rtx"?(n.add(o),i):i.set(o,c)},new Map)}function Mq(t,e){var r=Array.from(t).reduce(function(n,i){var o=i[0],a=i[1],s=n.get(a)||new Set;return n.set(a,s.add(o))},new Map);return Array.from(r).reduce(function(n,i){var o=i[0],a=Array.from(i[1]);return a.length>1?(a.forEach(function(s){e.add(s)}),n):n.set(o,a[0])},new Map)}function sb(t,e){var r=new RegExp("a=fmtp:".concat(e,`.*\r
`),"gm");return t.replace(r,"")}function Dq(t,e){var r=new RegExp("a=rtpmap:".concat(e,`.*\r
`),"gm");return t.replace(r,"")}function $q(t,e,r){return t.endsWith(`\r
`)?"".concat(t,"a=fmtp:").concat(e," apt=").concat(r,`\r
`):"".concat(t,`\r
a=fmtp:`).concat(e," apt=").concat(r)}var Uq=Oq,Fq=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Bq=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Vq=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},zq=dO,Cd=uo,Wq=Cd.RTCIceCandidate,Hq=Cd.RTCPeerConnection,qq=Cd.RTCSessionDescription,Kq=Cd.getStats,gO=be,Pd=Ee,Gq=Pd.DEFAULT_ICE_GATHERING_TIMEOUT_MS,Qq=Pd.DEFAULT_LOG_LEVEL,Jq=Pd.DEFAULT_SESSION_TIMEOUT_SEC,Yq=Pd.iceRestartBackoffConfig,Er=kt,Xq=Er.addOrRewriteNewTrackIds,Zq=Er.addOrRewriteTrackIds,yO=Er.createCodecMapForMediaSection,cb=Er.disableRtx,ml=Er.enableDtxForOpus,e7=Er.filterLocalCodecs,bs=Er.getMediaSections,lb=Er.removeSSRCAttributes,t7=Er.revertSimulcast,r7=Er.setCodecPreferences,n7=Er.setSimulcast,i7=ho,_O=Z,Qf=_O.MediaClientLocalDescFailedError,Jf=_O.MediaClientRemoteDescFailedError,wc=J,o7=wc.buildLogLevels,a7=wc.getPlatform,s7=wc.isChromeScreenShareTrack,c7=wc.oncePerTick,l7=wc.defer,u7=oq,d7=lq,f7=yq,h7=Sq,p7=Ma,v7=pn,m7=xq,ub=Uq,_g=gO.guessBrowser(),g7=a7(),y7=/android/.test(g7),_7=_g==="chrome",ji=_g==="firefox",w7=_g==="safari",b7=0,S7={open:["closed","updating"],updating:["closed","open"],closed:[]},k7=function(t){Fq(e,t);function e(r,n,i,o){var a=t.call(this,"open",S7)||this;o=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:s7,iceServers:[],logLevel:Qq,offerOptions:{},revertSimulcast:t7,sessionTimeout:Jq*1e3,setCodecPreferences:r7,setSimulcast:n7,Backoff:zq,IceConnectionMonitor:d7,RTCIceCandidate:Wq,RTCPeerConnection:Hq,RTCSessionDescription:qq,Timeout:i7},o);var s=pb(Object.assign({},o,o.rtcConfiguration)),c=o7(o.logLevel),l=o.RTCPeerConnection;o.enableDscp===!0&&(o.chromeSpecificConstraints=o.chromeSpecificConstraints||{},o.chromeSpecificConstraints.optional=o.chromeSpecificConstraints.optional||[],o.chromeSpecificConstraints.optional.push({googDscp:!0}));var u=o.log?o.log.createLog("webrtc",a):new v7("webrtc",a,c,o.loggerName),d=new l(s,o.chromeSpecificConstraints);o.dummyAudioMediaStreamTrack&&d.addTrack(o.dummyAudioMediaStreamTrack),Object.defineProperties(a,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:o.enableDscp},_encodingParameters:{value:n},_isChromeScreenShareTrack:{value:o.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new o.Timeout(function(){return a._handleIceGatheringTimeout()},Gq,!1)},_iceRestartBackoff:{value:new o.Backoff(Yq)},_instanceId:{value:++b7},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:u},_eventObserver:{value:o.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new o.IceConnectionMonitor(d)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:o.offerOptions},_onEncodingParametersChanged:{value:c7(function(){a._needsAnswer||wO(a)})},_peerConnection:{value:d},_preferredAudioCodecs:{value:i.audio},_preferredVideoCodecs:{value:i.video},_shouldApplyDtx:{value:i.audio.every(function(f){var y=f.codec;return y!=="opus"})||i.audio.some(function(f){var y=f.codec,v=f.dtx;return y==="opus"&&v})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new o.Timeout(function(){u.debug("ICE reconnect timed out"),a.close()},o.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new u7},_setCodecPreferences:{value:ji&&y7&&i.video[0]&&i.video[0].codec.toLowerCase()!=="h264"?function(f){return f}:o.setCodecPreferences},_setSimulcast:{value:o.setSimulcast},_revertSimulcast:{value:o.revertSimulcast},_RTCIceCandidate:{value:o.RTCIceCandidate},_RTCPeerConnection:{value:o.RTCPeerConnection},_RTCSessionDescription:{value:o.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:r}}),n.on("changed",a._onEncodingParametersChanged),d.addEventListener("connectionstatechange",a._handleConnectionStateChange.bind(a)),d.addEventListener("datachannel",a._handleDataChannelEvent.bind(a)),d.addEventListener("icecandidate",a._handleIceCandidateEvent.bind(a)),d.addEventListener("iceconnectionstatechange",a._handleIceConnectionStateChange.bind(a)),d.addEventListener("icegatheringstatechange",a._handleIceGatheringStateChange.bind(a)),d.addEventListener("signalingstatechange",a._handleSignalingStateChange.bind(a)),d.addEventListener("track",a._handleTrackEvent.bind(a));var h=a;return a.on("stateChanged",function f(y){y==="closed"&&(h.removeListener("stateChanged",f),h._dataChannels.forEach(function(v,g){h.removeDataTrackSender(g)}))}),a}return e.prototype.toString=function(){return"[PeerConnectionV2 #".concat(this._instanceId,": ").concat(this.id,"]")},e.prototype.setEffectiveAdaptiveSimulcast=function(r){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",r),this._preferredVideoCodecs.forEach(function(n){"adaptiveSimulcast"in n&&(n.adaptiveSimulcast=r)})},Object.defineProperty(e.prototype,"_shouldApplySimulcast",{get:function(){if(!_7&&!w7)return!1;var r=this._preferredVideoCodecs.some(function(n){return n.codec.toLowerCase()==="vp8"&&n.simulcast&&n.adaptiveSimulcast!==!1});return r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connectionState",{get:function(){return this.iceConnectionState==="failed"?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&this._peerConnection.iceConnectionState==="disconnected"||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isApplicationSectionNegotiated",{get:function(){return this._peerConnection.signalingState!=="closed"?this._peerConnection.localDescription?bs(this._peerConnection.localDescription.sdp,"application").length>0:!1:!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var r=this._preferredVideoCodecs.find(function(n){return"adaptiveSimulcast"in n});return r&&r.adaptiveSimulcast===!0},enumerable:!1,configurable:!0}),e.prototype._maybeUpdateEncodings=function(r,n,i){if(i===void 0&&(i=!1),r.kind!=="video"||r.readyState==="ended")return!1;var o=r.getSettings(),a=o.height,s=o.width;if(typeof a!="number"||typeof s!="number")return!1;var c=gO.guessBrowser();return c==="safari"||c==="chrome"&&this._isAdaptiveSimulcastEnabled?(this._updateEncodings(r,n,i),!0):!1},e.prototype._updateEncodings=function(r,n,i){if(this._isChromeScreenShareTrack(r)){var o=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];n.forEach(function(f,y){var v=o[y];v?(f.scaleResolutionDownBy=v.scaleResolutionDownBy,i&&delete f.active):(f.active=!1,delete f.scaleResolutionDownBy)})}else{var a=r.getSettings(),s=a.width,c=a.height,l=[{pixels:960*540,maxActiveLayers:3},{pixels:480*270,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}],u=s*c,d=l.find(function(f){return u>=f.pixels}),h=Math.min(n.length,d.maxActiveLayers);n.forEach(function(f,y){var v=y<h;v?(f.scaleResolutionDownBy=1<<h-y-1,i&&(f.active=!0)):(f.active=!1,delete f.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",n.map(function(f,y){var v=f.active,g=f.scaleResolutionDownBy;return"[".concat(y,": ").concat(v,", ").concat(g||0,"]")}).join(", "))},e.prototype._addIceCandidate=function(r){var n=this;return Promise.resolve().then(function(){return r=new n._RTCIceCandidate(r),n._peerConnection.addIceCandidate(r)}).catch(function(i){n._log.warn("Failed to add RTCIceCandidate ".concat(r?'"'.concat(r.candidate,'"'):"null",": ")+i.message)})},e.prototype._addIceCandidates=function(r){return Promise.all(r.map(this._addIceCandidate,this)).then(function(){})},e.prototype._addOrUpdateTransceiver=function(r){var n=this,i=P7(this,r.kind);if(i&&i.sender){var o=i.sender.track?i.sender.track.id:null;return o&&this._log.warn("Reusing transceiver: ".concat(i.mid,"] ").concat(o," => ").concat(r.id)),this._replaceTrackPromises.set(i,i.sender.replaceTrack(r).then(function(){i.direction="sendrecv"},function(){}).finally(function(){n._replaceTrackPromises.delete(i)})),i}return this._peerConnection.addTransceiver(r,{})},e.prototype._checkIceBox=function(r){var n=hb(r);if(!n)return Promise.resolve();var i=this._remoteCandidates.setUfrag(n);return this._addIceCandidates(i)},e.prototype._answer=function(r){var n=this;return Promise.resolve().then(function(){return n._negotiationRole||(n._negotiationRole="answerer"),n._setRemoteDescription(r)}).catch(function(){throw new Jf}).then(function(){return n._peerConnection.createAnswer()}).then(function(i){ji?i=new n._RTCSessionDescription({sdp:cb(i.sdp),type:i.type}):i=ub(i);var o=lb(i.sdp,["mslabel","label"]);if(n._shouldApplySimulcast){var a=o;o=n._setSimulcast(a,n._trackIdsToAttributes),o=n._revertSimulcast(o,a,r.sdp)}return o=o.replace(/42e015/g,"42e01f"),n._setLocalDescription({type:i.type,sdp:o})}).then(function(){return n._checkIceBox(r)}).then(function(){return n._queuedDescription&&n._updateDescription(n._queuedDescription)}).then(function(){return n._queuedDescription=null,n._maybeReoffer(n._peerConnection.localDescription)}).catch(function(i){var o=i instanceof Jf?i:new Qf;throw n._publishMediaWarning({message:"Failed to _answer",code:o.code,error:i}),o})},e.prototype._close=function(){return this._iceConnectionMonitor.stop(),this._peerConnection.signalingState!=="closed"?(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0):!1},e.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},e.prototype._handleDataChannelEvent=function(r){var n=this,i=r.channel,o=new f7(i);this._dataTrackReceivers.add(o),i.addEventListener("close",function(){n._dataTrackReceivers.delete(o)}),this.emit("trackAdded",o)},e.prototype._handleGlare=function(r){var n=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return n._trackIdsToAttributes=new Map(n._appliedTrackIdsToAttributes),n._setLocalDescription({type:"rollback"})}).then(function(){return n._needsAnswer=!1,n._answer(r)}).then(function(i){return i?Promise.resolve():n._offer()})},e.prototype._publishMediaWarning=function(r){var n=r.message,i=r.code,o=r.error,a=r.sdp;this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:n,code:i,context:JSON.stringify({error:o.message,sdp:a})}})},e.prototype._handleIceCandidateEvent=function(r){r.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(r.candidate));var n={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};r.candidate||(n.ice.complete=!0),this._isIceLite&&r.candidate||(n.ice.revision=this._localCandidatesRevision++,this.emit("candidates",n))},e.prototype._handleIceConnectionStateChange=function(){var r=this,n=this._peerConnection.iceConnectionState,i=["connected","completed"].includes(n),o=this._log;o.debug('ICE connection state is "'.concat(n,'"')),i&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),this._lastIceConnectionState!=="failed"&&n==="failed"&&!this._shouldRestartIce&&!this._isRestartingIce?(o.warn("ICE failed"),this._initiateIceRestartBackoff()):["disconnected","failed"].includes(this._lastIceConnectionState)&&i&&o.debug("ICE reconnected"),n==="connected"?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){r._iceConnectionMonitor.stop(),!r._shouldRestartIce&&!r._isRestartingIce&&(o.warn("ICE Connection Monitor detected inactivity"),r._isIceConnectionInactive=!0,r._initiateIceRestartBackoff(),r.emit("iceConnectionStateChanged"),r.emit("connectionStateChanged"))})):["disconnected","completed"].includes(n)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=n,this.emit("iceConnectionStateChanged")},e.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},e.prototype._handleIceGatheringStateChange=function(){var r=this._peerConnection.iceGatheringState,n=this._log;n.debug('ICE gathering state is "'.concat(r,'"'));var i=this._iceGatheringTimeout,o=i.delay,a=i.isSet;r==="gathering"&&!this._didGenerateLocalCandidates&&!a&&(n.debug("Starting ICE gathering timeout: ".concat(o)),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},e.prototype._handleSignalingStateChange=function(){this._peerConnection.signalingState==="stable"&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},e.prototype._handleTrackEvent=function(r){var n=this,i=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new m7,this._trackMatcher.update(i);var o=r.track,a=this._trackMatcher.match(r)||o.id,s=new h7(a,o);this._mediaTrackReceivers.forEach(function(c){c.track.id===s.track.id&&n._mediaTrackReceivers.delete(c)}),this._mediaTrackReceivers.add(s),o.addEventListener?o.addEventListener("ended",function(){return n._mediaTrackReceivers.delete(s)}):o.onended=function(){return n._mediaTrackReceivers.delete(s)},this.emit("trackAdded",s)},e.prototype._initiateIceRestart=function(){if(this._peerConnection.signalingState!=="closed"){var r=this._log;r.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var n=this._iceReconnectTimeout,i=n.delay,o=n.isSet;o||(r.debug("Starting ICE reconnect timeout: ".concat(i)),this._iceReconnectTimeout.start()),this.offer().catch(function(a){r.error("offer failed in _initiateIceRestart with: ".concat(a.message))})}},e.prototype._initiateIceRestartBackoff=function(){var r=this;this._peerConnection.signalingState==="closed"||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return r._initiateIceRestart()}))},e.prototype._maybeReoffer=function(r){var n=this._shouldOffer;if(r&&r.sdp){var i=this._peerConnection.getSenders().filter(function(l){return l.track});n=["audio","video"].reduce(function(l,u){var d=bs(r.sdp,u,"(sendrecv|sendonly)"),h=i.filter(x7.bind(null,u));return l||d.length<h.length},n);var o=this._dataChannels.size>0,a=bs(r.sdp,"application").length>0,s=o&&!a;n=n||s}var c=n?this._offer():Promise.resolve();return c.then(function(){return n})},e.prototype._offer=function(){var r=this,n=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,n.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return r._peerConnection.createOffer(n)}).catch(function(i){var o=new Qf;throw r._publishMediaWarning({message:"Failed to create offer",code:o.code,error:i}),o}).then(function(i){ji?i=new r._RTCSessionDescription({sdp:cb(i.sdp),type:i.type}):i=ub(i);var o=lb(i.sdp,["mslabel","label"]);o=r._peerConnection.remoteDescription?e7(o,r._peerConnection.remoteDescription.sdp):o;var a=r._setCodecPreferences(o,r._preferredAudioCodecs,r._preferredVideoCodecs);return r._shouldOffer=!1,r._negotiationRole||(r._negotiationRole="offerer"),r._shouldApplySimulcast&&(r._localDescriptionWithoutSimulcast={type:"offer",sdp:a},a=r._setSimulcast(a,r._trackIdsToAttributes)),r._setLocalDescription({type:"offer",sdp:a})})},e.prototype._getMediaTrackSenderId=function(r){var n=Array.from(this._rtpSenders.keys()).find(function(i){var o=i.track.id;return o===r});return n?n.id:r},e.prototype._addOrRewriteLocalTrackIds=function(r){var n=this,i=this._peerConnection.getTransceivers(),o=i.filter(function(h){var f=h.sender,y=h.stopped;return!y&&f&&f.track}),a=o.filter(function(h){var f=h.mid;return f}),s=new Map(a.map(function(h){var f=h.mid,y=h.sender;return[f,n._getMediaTrackSenderId(y.track.id)]})),c=Zq(r.sdp,s),l=o.filter(function(h){var f=h.mid;return!f}),u=new Map(["audio","video"].map(function(h){return[h,l.filter(function(f){var y=f.sender;return y.track.kind===h}).map(function(f){var y=f.sender;return n._getMediaTrackSenderId(y.track.id)})]})),d=Xq(c,s,u);return new this._RTCSessionDescription({sdp:d,type:r.type})},e.prototype._rollbackAndApplyOffer=function(r){var n=this;return this._setLocalDescription({type:"rollback"}).then(function(){return n._setLocalDescription(r)})},e.prototype._setLocalDescription=function(r){var n=this;return r.type!=="rollback"&&this._shouldApplyDtx&&(r=new this._RTCSessionDescription({sdp:ml(r.sdp),type:r.type})),this._peerConnection.setLocalDescription(r).catch(function(i){n._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'.concat(r.type,'" failed with the error "').concat(i.message,'".'),i);var o=new Qf,a={message:'Calling setLocalDescription with an RTCSessionDescription of type "'.concat(r.type,'" failed'),code:o.code,error:i};throw r.sdp&&(n._log.warn("The SDP was ".concat(r.sdp)),a.sdp=r.sdp),n._publishMediaWarning(a),o}).then(function(){r.type!=="rollback"&&(n._localDescription=n._addOrRewriteLocalTrackIds(r),n._shouldApplyDtx&&(n._localDescription=new n._RTCSessionDescription({sdp:ml(n._localDescription.sdp,[]),type:n._localDescription.type})),n._localCandidates=[],r.type==="offer"?n._descriptionRevision++:r.type==="answer"&&(n._lastStableDescriptionRevision=n._descriptionRevision,vb(n)),n._localUfrag=hb(r),n.emit("description",n.getState()))})},e.prototype._setRemoteDescription=function(r){var n=this;return r.sdp&&(r.sdp=this._setCodecPreferences(r.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),this._shouldApplyDtx?r.sdp=ml(r.sdp):r.sdp=ml(r.sdp,[]),ji&&(r.sdp=E7(r.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(r.sdp))),r=new this._RTCSessionDescription(r),Promise.resolve().then(function(){if(r.type==="answer"&&n._localDescriptionWithoutSimulcast){var i=n._preferredVideoCodecs.find(function(s){return"adaptiveSimulcast"in s}),o=!!i&&i.adaptiveSimulcast===!1,a=n._revertSimulcast(n._localDescription.sdp,n._localDescriptionWithoutSimulcast.sdp,r.sdp,o);if(n._localDescriptionWithoutSimulcast=null,a!==n._localDescription.sdp)return n._rollbackAndApplyOffer({type:n._localDescription.type,sdp:a})}}).then(function(){return n._peerConnection.setRemoteDescription(r)}).then(function(){r.type==="answer"&&(n._isRestartingIce&&(n._log.debug("An ICE restart was in-progress and is now completed"),n._isRestartingIce=!1),vb(n))},function(i){throw n._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'.concat(r.type,'" failed with the error "').concat(i.message,'".'),i),r.sdp&&n._log.warn("The SDP was ".concat(r.sdp)),i})},e.prototype._updateDescription=function(r){var n=this;switch(r.type){case"answer":case"pranswer":if(r.revision!==this._descriptionRevision||this._peerConnection.signalingState!=="have-local-offer")return Promise.resolve();this._descriptionRevision=r.revision;break;case"close":return this._close();case"create-offer":return r.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=r,Promise.resolve()):(this._descriptionRevision=r.revision,this._offer());case"offer":return r.revision<=this._lastStableDescriptionRevision||this._peerConnection.signalingState==="closed"?Promise.resolve():this._peerConnection.signalingState==="have-local-offer"?this._needsAnswer&&this._lastStableDescriptionRevision===0?(this._queuedDescription=r,Promise.resolve()):(this._descriptionRevision=r.revision,this._handleGlare(r)):(this._descriptionRevision=r.revision,this._answer(r).then(function(){}))}var i=r.revision;return Promise.resolve().then(function(){return n._setRemoteDescription(r)}).catch(function(o){var a=new Jf;throw n._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'.concat(r.type,'" failed'),code:a.code,error:o,sdp:r.sdp}),a}).then(function(){return n._lastStableDescriptionRevision=i,n._needsAnswer=!1,n._checkIceBox(r)}).then(function(){return n._queuedDescription&&n._updateDescription(n._queuedDescription)}).then(function(){return n._queuedDescription=null,n._maybeReoffer(n._peerConnection.localDescription).then(function(){})})},e.prototype._updateIce=function(r){var n=this._remoteCandidates.update(r);return this._addIceCandidates(n)},e.prototype.addDataTrackSender=function(r){if(!this._dataChannels.has(r))try{var n={ordered:r.ordered};r.maxPacketLifeTime!==null&&(n.maxPacketLifeTime=r.maxPacketLifeTime),r.maxRetransmits!==null&&(n.maxRetransmits=r.maxRetransmits);var i=this._peerConnection.createDataChannel(r.id,n);r.addDataChannel(i),this._dataChannels.set(r,i)}catch(o){this._log.warn('Error creating an RTCDataChannel for DataTrack "'.concat(r.id,'": ').concat(o.message))}},e.prototype._handleQueuedPublisherHints=function(){var r=this;this._peerConnection.signalingState==="stable"&&this._mediaTrackSenderToPublisherHints.forEach(function(n,i){var o=n.deferred,a=n.encodings;r._mediaTrackSenderToPublisherHints.delete(i),r._setPublisherHint(i,a).then(function(s){return o.resolve(s)}).catch(function(s){return o.reject(s)})})},e.prototype._setPublisherHint=function(r,n){var i=this;if(ji)return Promise.resolve("COULD_NOT_APPLY_HINT");if(this._mediaTrackSenderToPublisherHints.has(r)){var o=this._mediaTrackSenderToPublisherHints.get(r);o.deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(r)}var a=this._rtpSenders.get(r);if(!a)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if(this._peerConnection.signalingState==="closed")return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if(this._peerConnection.signalingState!=="stable"){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var s=l7();return this._mediaTrackSenderToPublisherHints.set(r,{deferred:s,encodings:n}),s.promise}var c=a.getParameters();return n!==null&&n.forEach(function(l){var u=l.enabled,d=l.layer_index;c.encodings.length>d?(i._log.debug("layer:".concat(d,", active:").concat(c.encodings[d].active," => ").concat(u)),c.encodings[d].active=u):i._log.warn("invalid layer:".concat(d,", active:").concat(u))}),this._maybeUpdateEncodings(a.track,c.encodings,n===null),a.setParameters(c).then(function(){return"OK"}).catch(function(l){return i._log.error("Failed to apply publisher hints:",l),"COULD_NOT_APPLY_HINT"})},e.prototype.addMediaTrackSender=function(r){var n=this;if(!(this._peerConnection.signalingState==="closed"||this._rtpSenders.has(r))){var i=this._addOrUpdateTransceiver(r.track),o=i.sender;r.addSender(o,function(a){return n._setPublisherHint(r,a)}),this._rtpNewSenders.add(o),this._rtpSenders.set(r,o)}},e.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},e.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},e.prototype.getState=function(){if(!this._localDescription)return null;var r=this._localDescription.type==="answer"?this._lastStableDescriptionRevision:this._descriptionRevision,n={type:this._localDescription.type,revision:r};return this._localDescription.sdp&&(n.sdp=this._localDescription.sdp),{description:n,id:this.id}},e.prototype.offer=function(){var r=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(n){r.transition("updating",n);var i=r._needsAnswer||r._isRestartingIce?Promise.resolve():r._offer();return i.then(function(){r.tryTransition("open",n)},function(o){throw r.tryTransition("open",n),o})})},e.prototype.removeDataTrackSender=function(r){var n=this._dataChannels.get(r);n&&(r.removeDataChannel(n),this._dataChannels.delete(r),n.close())},e.prototype.removeMediaTrackSender=function(r){var n=this._rtpSenders.get(r);if(n){if(this._peerConnection.signalingState!=="closed"&&this._peerConnection.removeTrack(n),r.removeSender(n),this._mediaTrackSenderToPublisherHints.has(r)){var i=this._mediaTrackSenderToPublisherHints.get(r);i.deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(r)}this._rtpNewSenders.delete(n),this._rtpSenders.delete(r)}},e.prototype.setConfiguration=function(r){typeof this._peerConnection.setConfiguration=="function"&&this._peerConnection.setConfiguration(pb(r))},e.prototype.setIceReconnectTimeout=function(r){return this._iceReconnectTimeout.setDelay(r),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},e.prototype.update=function(r){var n=this;return this.bracket("updating",function(i){if(n.state==="closed")return Promise.resolve();n.transition("updating",i);var o=[];return r.ice&&o.push(n._updateIce(r.ice)),r.description&&o.push(n._updateDescription(r.description)),Promise.all(o).then(function(){n.tryTransition("open",i)},function(a){throw n.tryTransition("open",i),a})})},e.prototype.getStats=function(){var r=this;return Kq(this._peerConnection,{log:this._log}).then(function(n){return T7(r,n)})},e}(p7);function db(t,e){var r=t._getMediaTrackSenderId(e.trackId);return Object.assign(e,{trackId:r})}function fb(t,e){var r=Vq([],Bq(t._mediaTrackReceivers),!1).find(function(i){return i.track.id===e.trackId}),n=r?r.id:null;return Object.assign(e,{trackId:n})}function T7(t,e){return Object.assign(e,{remoteAudioTrackStats:e.remoteAudioTrackStats.map(function(r){return fb(t,r)}),remoteVideoTrackStats:e.remoteVideoTrackStats.map(function(r){return fb(t,r)}),localAudioTrackStats:e.localAudioTrackStats.map(function(r){return db(t,r)}),localVideoTrackStats:e.localVideoTrackStats.map(function(r){return db(t,r)})})}function hb(t){if(t.sdp){var e=t.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(e)return e[1]}return null}function pb(t){return t===void 0&&(t={}),Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},t)}function x7(t,e){var r=e.track;return r&&r.kind===t&&r.readyState!=="ended"}function E7(t){return t.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}function C7(t,e){return!t.stopped&&!e._replaceTrackPromises.has(t)&&["inactive","recvonly"].includes(t.direction)}function P7(t,e){var r={audio:t._preferredAudioCodecs.map(function(a){var s=a.codec;return s.toLowerCase()}),video:t._preferredVideoCodecs.map(function(a){var s=a.codec;return s.toLowerCase()})}[e],n=t._recycledTransceivers[e],i=r.find(function(a){return t._localCodecs.has(a)});if(!i)return n.shift();var o=n.find(function(a){var s=t._remoteCodecMaps.get(a.mid);return s&&s.has(i)});return o&&n.splice(n.indexOf(o),1),o}function O7(t){var e=t._peerConnection.localDescription;!e||!e.sdp||bs(e.sdp).forEach(function(r){var n=yO(r);n.forEach(function(i,o){return t._localCodecs.add(o)})})}function R7(t){var e=t._peerConnection.remoteDescription;!e||!e.sdp||bs(e.sdp).forEach(function(r){var n=r.match(/^a=mid:(.+)$/m);if(!(!n||!n[1])){var i=n[1],o=yO(r);t._remoteCodecMaps.set(i,o)}})}function j7(t){t._recycledTransceivers.audio=[],t._recycledTransceivers.video=[],t._peerConnection.getTransceivers().forEach(function(e){if(C7(e,t)){var r=e.receiver.track;t._recycledTransceivers[r.kind].push(e)}})}function vb(t){j7(t),O7(t),R7(t),wO(t).then(function(){t._handleQueuedPublisherHints()})}function wO(t){var e=t._encodingParameters,r=e.maxAudioBitrate,n=e.maxVideoBitrate,i=new Map([["audio",r],["video",n]]),o=[];return t._peerConnection.getSenders().filter(function(a){return a.track}).forEach(function(a){var s=i.get(a.track.kind),c=a.getParameters();s===null||s===0?A7(c):t._isChromeScreenShareTrack(a.track)?t._log.warn("Not setting maxBitrate for ".concat(a.track.kind," Track ").concat(a.track.id," because it appears to be screen share track: ").concat(a.track.label)):L7(c,s),!ji&&c.encodings.length>0&&(a.track.kind==="audio"?c.encodings[0].priority="high":t._isChromeScreenShareTrack(a.track)&&(c.encodings[0].priority="medium"),t._enableDscp&&(c.encodings[0].networkPriority="high"));var l=t._rtpNewSenders.has(a);t._maybeUpdateEncodings(a.track,c.encodings,l),t._rtpNewSenders.delete(a);var u=a.setParameters(c).catch(function(d){t._log.warn("Error while setting encodings parameters for ".concat(a.track.kind," Track ").concat(a.track.id,": ").concat(d.message||d.name))});o.push(u)}),Promise.all(o)}function A7(t){Array.isArray(t.encodings)&&t.encodings.forEach(function(e){return delete e.maxBitrate})}function L7(t,e){ji?t.encodings=[{maxBitrate:e}]:t.encodings.forEach(function(r){r.maxBitrate=e})}var I7=k7,N7=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bO=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},SO=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},M7=be.guessBrowser,D7=I7,$7=wC,U7=gC,Kn=J,F7=Z.MediaConnectionError,B7=M7()==="firefox",V7=function(t){N7(e,t);function e(r,n,i){var o=t.call(this)||this;i=Object.assign({audioContextFactory:B7?bd():null,PeerConnectionV2:D7},i);var a=i.audioContextFactory?i.audioContextFactory.getOrCreate(o):null,s=a?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(o,{_audioContextFactory:{value:i.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:Kn.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:a?new $7(z7(a)):null},_encodingParameters:{value:r},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:s},_peerConnections:{value:new Map},_preferredCodecs:{value:n},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:i.PeerConnectionV2}}),o}return e.prototype.setEffectiveAdaptiveSimulcast=function(r){this._peerConnections.forEach(function(n){return n.setEffectiveAdaptiveSimulcast(r)}),this._preferredCodecs.video.forEach(function(n){"adaptiveSimulcast"in n&&(n.adaptiveSimulcast=r)})},Object.defineProperty(e.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),e.prototype._closeAbsentPeerConnections=function(r){var n=new Set(r.map(function(i){return i.id}));return this._peerConnections.forEach(function(i){n.has(i.id)||i._close()}),this},e.prototype._getConfiguration=function(){return this._configurationDeferred.promise},e.prototype._getOrCreate=function(r,n){var i=this,o=this,a=this._peerConnections.get(r);if(!a){var s=this._PeerConnectionV2,c=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},n);try{a=new s(r,this._encodingParameters,this._preferredCodecs,c)}catch{throw new F7}this._peerConnections.set(a.id,a),a.on("candidates",this.queue.bind(this,"candidates")),a.on("description",this.queue.bind(this,"description")),a.on("trackAdded",this.queue.bind(this,"trackAdded")),a.on("stateChanged",function l(u){u==="closed"&&(a.removeListener("stateChanged",l),o._dataTrackSenders.forEach(function(d){return a.removeDataTrackSender(d)}),o._mediaTrackSenders.forEach(function(d){return a.removeMediaTrackSender(d)}),o._peerConnections.delete(a.id),o._closedPeerConnectionIds.add(a.id),mb(o),gl(o))}),a.on("connectionStateChanged",function(){return mb(i)}),a.on("iceConnectionStateChanged",function(){return gl(i)}),this._dataTrackSenders.forEach(a.addDataTrackSender,a),this._mediaTrackSenders.forEach(a.addMediaTrackSender,a),gl(this)}return a},e.prototype.close=function(){return this._peerConnections.forEach(function(r){r.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),gl(this),this},e.prototype.createAndOffer=function(){var r=this;return this._getConfiguration().then(function(n){var i;do i=Kn.makeUUID();while(r._peerConnections.has(i));return r._getOrCreate(i,n)}).then(function(n){return n.offer()}).then(function(){return r})},e.prototype.getTrackReceivers=function(){return Kn.flatMap(this._peerConnections,function(r){return r.getTrackReceivers()})},e.prototype.getStates=function(){var r=[];return this._peerConnections.forEach(function(n){var i=n.getState();i&&r.push(i)}),r},e.prototype.setConfiguration=function(r){return this._configuration&&(this._configurationDeferred=Kn.defer(),this._peerConnections.forEach(function(n){n.setConfiguration(r)})),this._configuration=r,this._configurationDeferred.resolve(r),this},e.prototype.setIceReconnectTimeout=function(r){return this._sessionTimeout===null&&(this._peerConnections.forEach(function(n){n.setIceReconnectTimeout(r)}),this._sessionTimeout=r),this},e.prototype.setTrackSenders=function(r){var n=new Set(r.filter(function(a){return a.kind==="data"})),i=new Set(r.filter(function(a){return a&&(a.kind==="audio"||a.kind==="video")})),o=q7(this,n,i);return this._dataTrackSenders=n,this._mediaTrackSenders=i,W7(this,o),this},e.prototype.update=function(r,n){var i=this;return n===void 0&&(n=!1),n&&this._closeAbsentPeerConnections(r),this._getConfiguration().then(function(o){return Promise.all(r.map(function(a){if(i._closedPeerConnectionIds.has(a.id))return null;var s=i._getOrCreate(a.id,o);return s.update(a)}))}).then(function(){return i})},e.prototype.getStats=function(){var r=Array.from(this._peerConnections.values());return Promise.all(r.map(function(n){return n.getStats().then(function(i){return[n.id,i]})})).then(function(n){return new Map(n)})},e}(U7);function z7(t){var e=t.createMediaStreamDestination();return e.stream.getAudioTracks()[0]}function W7(t,e){(e.data.add.size||e.data.remove.size||e.media.add.size||e.media.remove.size)&&t._peerConnections.forEach(function(r){e.data.remove.forEach(r.removeDataTrackSender,r),e.media.remove.forEach(r.removeMediaTrackSender,r),e.data.add.forEach(r.addDataTrackSender,r),e.media.add.forEach(r.addMediaTrackSender,r),(e.media.add.size||e.media.remove.size||e.data.add.size&&!r.isApplicationSectionNegotiated)&&r.offer()})}function H7(t,e){var r=Kn.difference(e,t._dataTrackSenders),n=Kn.difference(t._dataTrackSenders,e);return{add:r,remove:n}}function q7(t,e,r){return{data:H7(t,e),media:K7(t,r)}}function K7(t,e){var r=Kn.difference(e,t._mediaTrackSenders),n=Kn.difference(t._mediaTrackSenders,e);return{add:r,remove:n}}var Ru={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3},Yf;function G7(){return Object.keys(Ru).reduce(function(t,e){var r;return Object.assign(t,(r={},r[Ru[e]]=e,r))},{})}function kO(t){return t.length?(Yf=Yf||G7(),t.reduce(function(e,r){return Yf[Math.max(Ru[e],Ru[r])]})):"new"}function gl(t){t._lastIceConnectionState=t.iceConnectionState,t._iceConnectionState=kO(SO([],bO(t._peerConnections.values()),!1).map(function(e){return e.iceConnectionState})),t.iceConnectionState!==t._lastIceConnectionState&&t.emit("iceConnectionStateChanged")}function mb(t){t._lastConnectionState=t.connectionState,t._connectionState=kO(SO([],bO(t._peerConnections.values()),!1).map(function(e){return e.connectionState})),t.connectionState!==t._lastConnectionState&&t.emit("connectionStateChanged")}var Q7=V7,J7=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y7=St,X7=0,Z7=function(t){J7(e,t);function e(r,n,i){var o=t.call(this)||this;return Object.defineProperties(o,{_instanceId:{value:X7++},channel:{value:n},_log:{value:i.log.createLog("default",o)},_getReceiver:{value:r},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),o}return Object.defineProperty(e.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[MediaSignaling #".concat(this._instanceId,":").concat(this.channel,"]")},e.prototype.setup=function(r){var n=this;this._teardown(),this._log.info("setting up msp transport for id:",r);var i=this._getReceiver(r).then(function(o){if(o.kind!=="data"&&n._log.error("Expected a DataTrackReceiver"),n._receiverPromise===i){try{n._transport=o.toDataTransport(),n.emit("ready",n._transport)}catch(a){n._log.error("Failed to toDataTransport: ".concat(a.message))}o.once("close",function(){return n._teardown()})}});this._receiverPromise=i},e.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},e}(Y7),po=Z7,e9=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t9=po,r9=function(t){e9(e,t);function e(r,n){var i=t.call(this,r,"active_speaker",n)||this;return Object.defineProperties(i,{_loudestParticipantSid:{value:null,writable:!0}}),i.on("ready",function(o){o.on("message",function(a){switch(a.type){case"active_speaker":i._setLoudestParticipantSid(a.participant);break}})}),i}return Object.defineProperty(e.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),e.prototype._setLoudestParticipantSid=function(r){this.loudestParticipantSid!==r&&(this._loudestParticipantSid=r,this.emit("updated"))},e}(t9),n9=r9,i9=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),o9=po,a9=function(t){i9(e,t);function e(r,n){var i=t.call(this,r,"extension_transcriptions",n)||this;return i.on("ready",function(o){o.on("message",function(a){switch(a.type){case"extension_transcriptions":i.emit("transcription",a);break}})}),i}return e}(o9),s9=a9,c9=function(){function t(e,r,n,i){Object.defineProperties(this,{availableSend:{enumerable:!0,value:n},recv:{enumerable:!0,value:r},rtt:{enumerable:!0,value:i},send:{enumerable:!0,value:e}})}return t.of=function(e,r){var n=(r.timestamp-e.timestamp)/1e3,i=r.bytesSent-e.bytesSent,o=r.bytesReceived-e.bytesReceived,a=n>0?i/n*8:0,s=n>0?o/n*8:0,c=r.availableOutgoingBitrate,l=r.currentRoundTripTime;return new t(a,s,c,l)},t}(),l9=c9,Xf=l9,u9=function(){function t(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new Xf(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return t.prototype.next=function(e){var r=this.lastStats;if(this.lastStats=e,r){var n=r.id===e.id?Xf.of(r,e):new Xf(0,0);this.lastReport=n}return this.lastReport},t}(),d9=u9;function f9(t){return t=t.filter(function(e){return typeof e=="number"}),t.length<1?void 0:t.reduce(function(e,r){return r+e})/t.length}var TO=f9,h9=function(){function t(e,r,n){Object.defineProperties(this,{id:{enumerable:!0,value:e},trackId:{enumerable:!0,value:r},bitrate:{enumerable:!0,value:n}})}return t}(),xO=h9;function p9(t){return t.reduce(function(e,r){return typeof r=="number"?r+e:e},0)}var EO=p9,v9=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gb=TO,m9=xO,g9=EO,y9=function(t){v9(e,t);function e(r,n,i,o,a,s,c){var l=t.call(this,r,n,i)||this,u=a>0?o/a:0;return Object.defineProperties(l,{deltaPacketsLost:{enumerable:!0,value:o},deltaPacketsReceived:{enumerable:!0,value:a},fractionLost:{enumerable:!0,value:s},jitter:{enumerable:!0,value:c},phonyFractionLost:{enumerable:!0,value:u}}),l}return e.of=function(r,n,i){if(n.id!==i.id)throw new Error("RTCStats IDs must match");var o=(i.timestamp-n.timestamp)/1e3,a=i.bytesReceived-n.bytesReceived,s=o>0?a/o*8:0,c=Math.max(i.packetsLost-n.packetsLost,0),l=i.packetsReceived-n.packetsReceived,u=i.fractionLost,d=i.jitter;return new e(n.id,r,s,c,l,u,d)},e.summarize=function(r){var n=r.map(function(s){return s.summarize()}),i=g9(n.map(function(s){return s.bitrate})),o=gb(n.map(function(s){return s.fractionLost})),a=gb(n.map(function(s){return s.jitter}));return{bitrate:i,fractionLost:o,jitter:a}},e.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:typeof this.fractionLost=="number"?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},e}(m9),CO=y9,_9=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),w9=TO,b9=xO,S9=EO,k9=function(t){_9(e,t);function e(r,n,i,o){var a=t.call(this,r,n,i)||this;return Object.defineProperties(a,{rtt:{enumerable:!0,value:o}}),a}return e.of=function(r,n,i,o){if(n.id!==i.id)throw new Error("RTCStats IDs must match");var a=(i.timestamp-n.timestamp)/1e3,s=i.bytesSent-n.bytesSent,c=a>0?s/a*8:0,l=o&&typeof o.roundTripTime=="number"?o.roundTripTime/1e3:void 0;return new e(n.id,r,c,l)},e.summarize=function(r){var n=S9(r.map(function(o){return o.bitrate})),i=w9(r.map(function(o){return o.rtt}));return{bitrate:n,rtt:i}},e}(b9),PO=k9,Zf=CO,eh=PO,T9=function(){function t(e,r,n){Object.defineProperties(this,{ice:{enumerable:!0,value:e},audio:{enumerable:!0,value:r},video:{enumerable:!0,value:n}})}return t.prototype.summarize=function(){var e=this.audio.send.concat(this.video.send),r=eh.summarize(e),n=this.audio.recv.concat(this.video.recv),i=Zf.summarize(n);return{ice:this.ice,send:r,recv:i,audio:{send:eh.summarize(this.audio.send),recv:Zf.summarize(this.audio.recv)},video:{send:eh.summarize(this.video.send),recv:Zf.summarize(this.video.recv)}}},t}(),x9=T9,E9=function(){function t(e,r,n){Object.defineProperties(this,{id:{enumerable:!0,value:e,writable:!0},trackId:{enumerable:!0,value:r,writable:!0},lastStats:{enumerable:!0,value:n,writable:!0}})}return t}(),OO=E9,C9=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P9=CO,O9=OO,R9=function(t){C9(e,t);function e(r,n){var i=t.call(this,n.id,r,n)||this;return Object.defineProperties(i,{lastReport:{enumerable:!0,value:null,writable:!0}}),i}return e.prototype.next=function(r,n){var i=this.lastStats;this.lastStats=n,this.trackId=r;var o=P9.of(r,i,n);return this.lastReport=o,o},e}(O9),j9=R9,A9=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L9=OO,I9=PO,N9=function(t){A9(e,t);function e(r,n){var i=t.call(this,n.id,r,n)||this;return Object.defineProperties(i,{lastReport:{enumerable:!0,value:null,writable:!0}}),i}return e.prototype.next=function(r,n,i){var o=this.lastStats;this.lastStats=n,this.trackId=r;var a=I9.of(r,o,n,i);return this.lastReport=a,a},e}(L9),M9=N9,ss=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},yl=x&&x.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Xs=x&&x.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},RO=be.guessBrowser,D9=d9,$9=x9,U9=j9,F9=M9,B9=function(){function t(e){Object.defineProperties(this,{pc:{enumerable:!0,value:e},ice:{enumerable:!0,value:new D9},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return t.prototype.next=function(){var e=this,r=RO()==="firefox"?W9(this):H9(this);return r.then(function(){var n=yl([],ss(e.audio.send.values()),!1),i=yl([],ss(e.video.send.values()),!1),o=yl([],ss(e.audio.recv.values()),!1),a=yl([],ss(e.video.recv.values()),!1),s=new $9(e.ice.lastReport,{send:n.map(function(c){return c.lastReport}).filter(function(c){return c}),recv:o.map(function(c){return c.lastReport}).filter(function(c){return c})},{send:i.map(function(c){return c.lastReport}).filter(function(c){return c}),recv:a.map(function(c){return c.lastReport}).filter(function(c){return c})});return e.lastReport=s,s})},t}();function yb(t){return Promise.all(t.map(function(e){var r=e.track.id;return e.getStats().then(function(n){var i,o;try{for(var a=Xs(n.values()),s=a.next();!s.done;s=a.next()){var c=s.value;c.type==="inbound-rtp"&&(c.id="".concat(r,"-").concat(c.id))}}catch(l){i={error:l}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return[r,n]})})).then(function(e){return new Map(e)})}function jO(t,e,r,n,i){var o=e[n.mediaType];if(!i){var a=r.get(n.trackId);a&&(i=a.trackIdentifier)}if(o&&i){if(o.has(n.id))return o.get(n.id);var s=new t(i,n);o.set(n.id,s)}return null}function wg(t){return{audio:t.audio.send,video:t.video.send}}function bg(t){return{audio:t.audio.recv,video:t.video.recv}}function V9(t,e,r,n){return jO(F9,wg(t),e,r,n)}function z9(t,e,r,n){return jO(U9,bg(t),e,r,n)}function AO(t){return{audio:new Set(t.audio.send.keys()),video:new Set(t.video.send.keys())}}function LO(t){return{audio:new Set(t.audio.recv.keys()),video:new Set(t.video.recv.keys())}}function IO(t,e,r,n){var i,o;try{for(var a=Xs(e.values()),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.type==="outbound-rtp"&&!c.isRemote){if(RO()!=="firefox"&&!c.trackId)continue;var l=r[c.mediaType];l&&l.delete(c.id);var u=V9(t,e,c,n);if(u){var d=e.get(c.remoteId);u.next(n||u.trackId,c,d)}}}}catch(h){i={error:h}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}function NO(t,e,r,n){var i,o;try{for(var a=Xs(e.values()),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.type==="inbound-rtp"&&!c.isRemote){var l=r[c.mediaType];l&&l.delete(c.id);var u=z9(t,e,c,n);u&&u.next(n||u.trackId,c)}}}catch(d){i={error:d}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}function ju(t,e){var r=function(i){var o=t[i],a=e[i];a.forEach(function(s){return o.delete(s)})};for(var n in e)r(n)}function MO(t,e){var r,n,i,o,a;try{for(var s=Xs(e.values()),c=s.next();!c.done;c=s.next()){var l=c.value;l.type==="transport"&&(a=e.get(l.selectedCandidatePairId))}}catch(h){r={error:h}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}if(a){t.next(a);return}try{for(var u=Xs(e.values()),d=u.next();!d.done;d=u.next()){var l=d.value;l.type==="candidate-pair"&&l.nominated&&(!("selected"in l)||l.selected)&&t.next(l)}}catch(h){i={error:h}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}}function W9(t){var e=t.pc.getTransceivers().filter(function(n){return n.currentDirection&&n.currentDirection.match(/send/)&&n.sender.track}).map(function(n){return n.sender}),r=t.pc.getTransceivers().filter(function(n){return n.currentDirection&&n.currentDirection.match(/recv/)}).map(function(n){return n.receiver});return Promise.all([yb(e),yb(r),t.pc.getStats()]).then(function(n){var i=ss(n,3),o=i[0],a=i[1],s=i[2],c=wg(t),l=AO(t);o.forEach(function(h,f){return IO(t,h,l,f)}),ju(c,l);var u=bg(t),d=LO(t);a.forEach(function(h,f){return NO(t,h,d,f)}),ju(u,d),MO(t.ice,s)})}function H9(t){return t.pc.getStats().then(function(e){var r=wg(t),n=AO(t);IO(t,e,n),ju(r,n);var i=bg(t),o=LO(t);NO(t,e,o),ju(i,o),MO(t.ice,e)})}var q9=B9,K9=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),G9=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Q9=St,J9=q9,Y9=function(t){K9(e,t);function e(r,n){var i=t.call(this)||this;return Object.defineProperties(i,{_factories:{value:new WeakMap},_manager:{value:r},_signaling:{value:n}}),n.on("updated",function(){return i.emit("updated")}),i}return Object.defineProperty(e.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),e.prototype.start=function(){var r=this;this.stop();var n=setTimeout(function(){r._timeout===n&&X9(r).then(function(i){if(r._timeout===n){if(i.length){var o=G9(i,1),a=o[0];r._signaling.put(a)}r.start()}})},200);this._timeout=n},e.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},e}(Q9);function X9(t){var e=t._manager._peerConnections?Array.from(t._manager._peerConnections.values()):[],r=e.map(function(o){return o._peerConnection}).filter(function(o){return o.signalingState!=="closed"}),n=r.map(function(o){if(t._factories.has(o))return t._factories.get(o);var a=new J9(o);return t._factories.set(o,a),a}),i=n.map(function(o){return o.next().catch(function(){return null})});return Promise.all(i).then(function(o){return o.filter(function(a){return a}).map(function(a){return a.summarize()})})}var Z9=Y9,eK=J.defer,tK=function(){function t(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return t.prototype.put=function(e){this._hasValue=!0,this._value=e;var r=this._deferreds.shift();return r&&r.resolve(e),this},t.prototype.take=function(){var e=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var r=eK();return this._deferreds.push(r),r.promise.then(function(n){return e._hasValue=!1,n})},t}(),rK=tK,nK=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iK=po,oK=rK,aK=ho,_b=5e3,sK=function(t){nK(e,t);function e(r,n,i){var o=t.call(this,r,"network_quality",i)||this;return Object.defineProperties(o,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new oK},_resendTimer:{value:new aK(function(){o._resendTimer.setDelay(o._resendTimer.delay*1.5),o._sendNetworkQualityInputs()},_b,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:n.local,remoteReportLevel:n.remote}}}}),o.on("ready",function(a){a.on("message",function(s){switch(o._log.debug("Incoming: ",s),s.type){case"network_quality":o._handleNetworkQualityMessage(s);break}})}),o._sendNetworkQualityInputs(),o}return Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),e.prototype._handleNetworkQualityMessage=function(r){var n=this,i=!1,o=null,a=r?r.local:null;typeof a=="number"?(o=a,this._levels=null):typeof a=="object"&&a&&(this._levels=a,o=typeof a.level=="number"?a.level:Math.min(a.audio.send,a.audio.recv,a.video.send,a.video.recv)),o!==null&&this.level!==o&&(this._level=o,i=!0),this._remoteLevels=r&&r.remotes?r.remotes.reduce(function(s,c){var l=n._remoteLevels.get(c.sid)||{};return l.level!==c.level&&(i=!0),s.set(c.sid,c)},new Map):this._remoteLevels,i&&this.emit("updated"),this._resendTimer.setDelay(_b),this._resendTimer.isSet&&setTimeout(function(){return n._sendNetworkQualityInputs()},1e3)},e.prototype._sendNetworkQualityInputs=function(){var r=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(n){r._transport&&r._transport.publish(cK(n,r._networkQualityReportLevels))}).finally(function(){r._resendTimer.start()})},e.prototype.put=function(r){this._networkQualityInputs.put(r)},e}(iK);function cK(t,e){return Object.assign({type:"network_quality"},t,e)}var lK=sK,uK=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dK=St.EventEmitter,fK=function(t){uK(e,t);function e(){var r=t.call(this)||this;return Object.defineProperties(r,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),r}return e.prototype.disable=function(){return this.enable(!1)},e.prototype.enable=function(r){return r=typeof r=="boolean"?r:!0,this.isEnabled!==r&&(this._isEnabled=r,this.emit("updated")),this},e}(dK),DO=fK,hK=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pK=DO,vK=function(t){hK(e,t);function e(){var r=t.call(this)||this;return Object.defineProperties(r,{_revision:{value:1,writable:!0}}),r}return e.prototype.update=function(r){return r.revision<this._revision?this:(this._revision=r.revision,this.enable(r.is_recording))},e}(pK),mK=vK,wb=x&&x.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},bb=x&&x.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},gK=lO,_l=BP,Sg=J,th=Sg.filterObject,yK=Sg.flatMap,_K=Sg.difference,ki=Na,wK=function(){function t(e,r,n){if(n===void 0&&(n={}),!e||typeof e.getStats!="function")throw new Error("StatsMonitor requires a stats source with getStats() method");if(!r)throw new Error("StatsMonitor requires a log instance");this._statsSource=e,this._log=r,this._publishIntervalMs=n.publishIntervalMs||1e4,this._collectionIntervalMs=n.collectionIntervalMs||1e3,this._collectionsPerPublish=Math.floor(this._publishIntervalMs/this._collectionIntervalMs),this._stallThreshold=.5,this._resumeThreshold=5,this._initializeState(),this._startStatsCollection()}return t.prototype._initializeState=function(){this._movingAverageDeltas=new Map,this._interval=null,this._statsCollectionCount=0,this._iceCandidatePublishToggle=!1,this._hasSeenActivePair=!1,this._lastNetworkType=null,this._lastQualityLimitationReasonByTrackSid=new Map,this._stalledTrackSids=new Set},t.prototype._startStatsCollection=function(){var e=this;if(this._interval){this._log.warn("StatsMonitor already started");return}this._interval=setInterval(function(){return wb(e,void 0,void 0,function(){return bb(this,function(r){switch(r.label){case 0:return[4,this._collectAndAnalyzeStats()];case 1:return r.sent(),[2]}})})},this._collectionIntervalMs),this._log.debug("StatsMonitor started")},t.prototype._stopStatsCollection=function(){this._interval&&(clearInterval(this._interval),this._interval=null),this._log.debug("StatsMonitor stopped")},t.prototype._collectAndAnalyzeStats=function(){return wb(this,void 0,void 0,function(){var e,r,n;return bb(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._statsSource.getStats()];case 1:return e=i.sent(),this._statsCollectionCount++,r=this._statsCollectionCount%this._collectionsPerPublish===0,r&&(this._iceCandidatePublishToggle=!this._iceCandidatePublishToggle),n=r&&this._iceCandidatePublishToggle,this._analyzeStats(e,r,n),[3,3];case 2:return i.sent(),[3,3];case 3:return[2]}})})},t.prototype._analyzeStats=function(e,r,n){var i=this;!e||e instanceof Map&&e.size===0||Array.isArray(e)&&e.length===0||e.forEach(function(o,a){i._checkNetworkTypeChanges(o),i._checkQualityLimitations(o.localVideoTrackStats),i._checkTrackStalls(o.remoteVideoTrackStats),r&&(i._publishStatsReport(a,o),n&&i._publishActiveIceCandidatePair(a,o))})},t.prototype._checkNetworkTypeChanges=function(e){var r=e.activeIceCandidatePair;if(!(!r||!r.localCandidate)){var n=r.localCandidate.networkType;if(n){if(!this._hasSeenActivePair){this._hasSeenActivePair=!0,this._lastNetworkType=n,ki.network.typeChanged(n);return}this._lastNetworkType!==n&&(this._log.debug("Network type changed: ".concat(this._lastNetworkType," -> ").concat(n)),this._lastNetworkType=n,ki.network.typeChanged(n))}}},t.prototype._checkQualityLimitations=function(e){var r=this;Array.isArray(e)&&e.forEach(function(n){var i=n.trackSid,o=n.qualityLimitationReason;if(!(!i||typeof o!="string")){var a=r._lastQualityLimitationReasonByTrackSid.get(i);a!==o&&(r._log.debug("Quality limitation reason changed for track ".concat(i,": ").concat(a||"none"," -> ").concat(o)),r._lastQualityLimitationReasonByTrackSid.set(i,o),ki.quality.limitationChanged(i,o))}})},t.prototype._checkTrackStalls=function(e){var r=this;Array.isArray(e)&&e.forEach(function(n){var i=n.trackSid,o=n.frameRateReceived;if(o!==void 0){var a=typeof o=="number"&&!isNaN(o)?o:0,s=r._stalledTrackSids.has(i);!s&&a<r._stallThreshold?(r._stalledTrackSids.add(i),r._log.debug("Track ".concat(i," stalled: frame rate ").concat(a," below threshold ").concat(r._stallThreshold)),ki.track.stalled(i,a,r._stallThreshold)):s&&a>=r._resumeThreshold&&(r._stalledTrackSids.delete(i),r._log.debug("Track ".concat(i," resumed: frame rate ").concat(a," above threshold ").concat(r._resumeThreshold)),ki.track.resumed(i,a,r._resumeThreshold))}})},t.prototype._addLocalTrackMetrics=function(e,r){var n=r.framesEncoded,i=r.packetsSent,o=r.totalEncodeTime,a=r.totalPacketSendDelay,s=Object.assign({},e),c="".concat(e.trackSid,"+").concat(e.ssrc),l=this._movingAverageDeltas.get(c)||new Map;if(typeof o=="number"&&typeof n=="number"){var u=l.get("avgEncodeDelay")||new _l;u.putSample(o*1e3,n),s.avgEncodeDelay=Math.round(u.get()),l.set("avgEncodeDelay",u)}if(typeof a=="number"&&typeof i=="number"){var d=l.get("avgPacketSendDelay")||new _l;d.putSample(a*1e3,i),s.avgPacketSendDelay=Math.round(d.get()),l.set("avgPacketSendDelay",d)}return this._movingAverageDeltas.set(c,l),s},t.prototype._addRemoteTrackMetrics=function(e,r){var n=r.estimatedPlayoutTimestamp,i=r.framesDecoded,o=r.jitterBufferDelay,a=r.jitterBufferEmittedCount,s=r.totalDecodeTime,c=Object.assign({},e),l="".concat(e.trackSid,"+").concat(e.ssrc),u=this._movingAverageDeltas.get(l)||new Map;if(typeof n=="number"&&(c.estimatedPlayoutTimestamp=n),typeof i=="number"&&typeof s=="number"){var d=u.get("avgDecodeDelay")||new _l;d.putSample(s*1e3,i),c.avgDecodeDelay=Math.round(d.get()),u.set("avgDecodeDelay",d)}if(typeof o=="number"&&typeof a=="number"){var h=u.get("avgJitterBufferDelay")||new _l;h.putSample(o*1e3,a),c.avgJitterBufferDelay=Math.round(h.get()),u.set("avgJitterBufferDelay",h)}return this._movingAverageDeltas.set(l,u),c},t.prototype._cleanupMovingAverageDeltas=function(e){var r=this,n=yK(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(o){return e[o].map(function(a){var s=a.ssrc,c=a.trackSid;return"".concat(c,"+").concat(s)})}),i=_K(Array.from(this._movingAverageDeltas.keys()),n);i.forEach(function(o){return r._movingAverageDeltas.delete(o)})},t.prototype._publishStatsReport=function(e,r){var n=this,i=new gK(e,r,!0);ki.quality.statsReport({audioTrackStats:i.remoteAudioTrackStats.map(function(o,a){return n._addRemoteTrackMetrics(o,r.remoteAudioTrackStats[a])}),localAudioTrackStats:i.localAudioTrackStats.map(function(o,a){return n._addLocalTrackMetrics(o,r.localAudioTrackStats[a])}),localVideoTrackStats:i.localVideoTrackStats.map(function(o,a){return n._addLocalTrackMetrics(o,r.localVideoTrackStats[a])}),peerConnectionId:i.peerConnectionId,videoTrackStats:i.remoteVideoTrackStats.map(function(o,a){return n._addRemoteTrackMetrics(o,r.remoteVideoTrackStats[a])})}),this._cleanupMovingAverageDeltas(i)},t.prototype._publishActiveIceCandidatePair=function(e,r){var n=this._replaceNullsWithDefaults(r.activeIceCandidatePair,e);ki.quality.iceCandidatePair(n)},t.prototype._replaceNullsWithDefaults=function(e,r){return e=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:r,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},th(e||{},null)),e.localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},th(e.localCandidate||{},null)),e.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},th(e.remoteCandidate||{},null)),e},t.prototype.cleanup=function(){this._stopStatsCollection(),this._movingAverageDeltas.clear(),this._lastQualityLimitationReasonByTrackSid.clear(),this._stalledTrackSids.clear()},t}(),bK=wK,SK=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kK=DO,TK=Ma,xK=ho,EK=J.buildLogLevels,CK=Ee.DEFAULT_LOG_LEVEL,PK=pn,kg=Z,OK=kg.MediaConnectionError,RK=kg.MediaDTLSTransportFailedError,jK=kg.SignalingConnectionDisconnectedError,AK=0,LK={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},IK=function(t){SK(e,t);function e(r,n,i,o){var a=this;o=Object.assign({logLevel:CK,RecordingSignaling:kK,Timeout:xK},o);var s=EK(o.logLevel);a=t.call(this,"connected",LK)||this;var c=o.RecordingSignaling,l=new o.Timeout(function(){a._disconnect(a._reconnectingError)},o.sessionTimeout,!1);return Object.defineProperties(a,{_instanceId:{value:AK++},_log:{value:o.log?o.log.createLog("default",a):new PK("default",a,s,o.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:o},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:l},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:r},name:{enumerable:!0,value:i},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new c},sid:{enumerable:!0,value:n}}),a.on("connectionStateChanged",function(){a.connectionState==="failed"&&!["disconnected","failed"].includes(a.iceConnectionState)&&a._disconnect(new RK)}),a.on("iceConnectionStateChanged",function(){return rh(a)}),a.on("signalingConnectionStateChanged",function(){return rh(a)}),setTimeout(function(){return rh(a)}),a}return e.prototype._disconnect=function(r){return this.state!=="disconnected"?(this.preempt("disconnected",null,[r]),!0):!1},e.prototype.toString=function(){return"[RoomSignaling #".concat(this._instanceId,": ").concat(this.localParticipant?this.localParticipant.sid:"null","]")},e.prototype.connectParticipant=function(r){var n=this;return r.state==="disconnected"||this.participants.has(r.sid)?!1:(this.participants.set(r.sid,r),r.on("stateChanged",function i(o){o==="disconnected"&&(r.removeListener("stateChanged",i),n.participants.delete(r.sid),n.emit("participantDisconnected",r))}),this.emit("participantConnected",r),!0)},e.prototype.disconnect=function(){return this._disconnect()},e.prototype.setDominantSpeaker=function(r){this.dominantSpeakerSid=r,this.emit("dominantSpeakerChanged")},e}(TK);function rh(t){if(t.state==="disconnected"||t.signalingConnectionState==="disconnected"){t._sessionTimeout.clear();return}var e;t.signalingConnectionState==="reconnecting"?e=t.signalingConnectionState:t.iceConnectionState==="failed"?(t._mediaConnectionIsReconnecting=!0,e="reconnecting"):t.iceConnectionState==="new"||t.iceConnectionState==="checking"?e=t._mediaConnectionIsReconnecting?"reconnecting":"connected":(t._mediaConnectionIsReconnecting=!1,t._reconnectingError=null,t._sessionTimeout.clear(),e="connected"),e!==t.state&&(e==="reconnecting"?(t._reconnectingError=t.signalingConnectionState==="reconnecting"?new jK:new OK,t._sessionTimeout.start(),t.preempt(e,null,[t._reconnectingError])):t.preempt(e))}var $O=IK,NK=function(){function t(e){var r=e.actual,n=r===void 0?null:r,i=e.available,o=i===void 0?null:i,a=e.level,s=a===void 0?null:a;Object.defineProperties(this,{actual:{value:n,enumerable:!0},available:{value:o,enumerable:!0},level:{value:s,enumerable:!0}})}return t}(),MK=NK,DK=function(){function t(e){var r=e.fractionLost,n=r===void 0?null:r,i=e.level,o=i===void 0?null:i;Object.defineProperties(this,{fractionLost:{value:n,enumerable:!0},level:{value:o,enumerable:!0}})}return t}(),$K=DK,UK=function(){function t(e){var r=e.jitter,n=r===void 0?null:r,i=e.rtt,o=i===void 0?null:i,a=e.level,s=a===void 0?null:a;Object.defineProperties(this,{jitter:{value:n,enumerable:!0},rtt:{value:o,enumerable:!0},level:{value:s,enumerable:!0}})}return t}(),FK=UK,BK=MK,VK=$K,zK=FK,WK=function(){function t(e){var r=e.bandwidth,n=r===void 0?null:r,i=e.fractionLost,o=i===void 0?null:i,a=e.latency,s=a===void 0?null:a;Object.defineProperties(this,{bandwidth:{value:n?new BK(n):null,enumerable:!0},fractionLost:{value:o?new VK(o):null,enumerable:!0},latency:{value:s?new zK(s):null,enumerable:!0}})}return t}(),UO=WK,HK=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qK=UO,KK=function(t){HK(e,t);function e(r){return t.call(this,r)||this}return e}(qK),GK=KK,QK=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JK=UO,YK=function(t){QK(e,t);function e(r){return t.call(this,r)||this}return e}(JK),XK=YK,ZK=GK,eG=XK,tG=function(){function t(e){var r=e.send,n=e.recv,i=e.sendStats,o=i===void 0?null:i,a=e.recvStats,s=a===void 0?null:a;Object.defineProperties(this,{send:{value:r,enumerable:!0},recv:{value:n,enumerable:!0},sendStats:{value:o?new ZK(o):null,enumerable:!0},recvStats:{value:s?new eG(s):null,enumerable:!0}})}return t}(),FO=tG,rG=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nG=FO,iG=function(t){rG(e,t);function e(r){return t.call(this,r)||this}return e}(nG),oG=iG,aG=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sG=FO,cG=function(t){aG(e,t);function e(r){return t.call(this,r)||this}return e}(sG),lG=cG,uG=oG,dG=lG,fG=function(){function t(e){var r=e.level,n=e.audio,i=e.video;Object.defineProperties(this,{level:{value:r,enumerable:!0},audio:{value:n?new uG(n):null,enumerable:!0},video:{value:i?new dG(i):null,enumerable:!0}})}return t}(),hG=fG,pG=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vG=Ma,mG=hG,gG={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},yG=function(t){pG(e,t);function e(){var r=t.call(this,"connecting",gG)||this;return Object.defineProperties(r,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),r}return Object.defineProperty(e.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),e.prototype.addTrack=function(r){return this.tracks.set(r.id||r.sid,r),this.emit("trackAdded",r),this},e.prototype.disconnect=function(){return this.state!=="disconnected"?(this.preempt("disconnected"),!0):!1},e.prototype.removeTrack=function(r){var n=this.tracks.get(r.id||r.sid);return this.tracks.delete(r.id||r.sid),n&&this.emit("trackRemoved",r),n||null},e.prototype.setNetworkQualityLevel=function(r,n){this._networkQualityLevel!==r&&(this._networkQualityLevel=r,this._networkQualityStats=n&&(n.audio||n.video)?new mG(n):null,this.emit("networkQualityLevelChanged"))},e.prototype.connect=function(r,n){return this.state==="connecting"||this.state==="reconnecting"?(this._sid||(this._sid=r),this._identity||(this._identity=n),this.preempt("connected"),!0):!1},e.prototype.reconnecting=function(){return this.state==="connecting"||this.state==="connected"?(this.preempt("reconnecting"),!0):!1},e}(vG),Tg=yG,_G=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wG=Tg,bG=function(t){_G(e,t);function e(r,n){var i=t.call(this)||this;return i.connect(r,n),i}return e}(wG),SG=bG,kG=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TG=St.EventEmitter,xG=function(t){kG(e,t);function e(r,n,i,o){var a=t.call(this)||this,s=null;return Object.defineProperties(a,{_error:{value:null,writable:!0},_isEnabled:{value:i,writable:!0},_priority:{value:o,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return s},set:function(c){s===null&&(s=c)}},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:r}}),a}return Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),e.prototype.disable=function(){return this.enable(!1)},e.prototype.enable=function(r){return r=typeof r=="boolean"?r:!0,this.isEnabled!==r&&(this._isEnabled=r,this.emit("updated")),this},e.prototype.setTrackTransceiver=function(r){return r=r||null,this.trackTransceiver!==r&&(this._trackTransceiver=r,this.emit("updated")),this},e.prototype.setSid=function(r){return this.sid===null&&(this._sid=r,this.emit("updated")),this},e}(TG),BO=xG,EG=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CG=BO,PG=function(t){EG(e,t);function e(r,n,i,o,a,s){var c=t.call(this,n,i,o,a)||this;return Object.defineProperties(c,{_isSwitchedOff:{value:s,writable:!0}}),c.setSid(r),c}return Object.defineProperty(e.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),e.prototype.subscribeFailed=function(r){return this.error||(this._error=r,this.emit("updated")),this},e.prototype.setPriority=function(r){return this._priority!==r&&(this._priority=r,this.emit("updated")),this},e.prototype.setSwitchedOff=function(r){return this._isSwitchedOff!==r&&(this._isSwitchedOff=r,this.emit("updated")),this},e}(CG),OG=PG,RG=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jG=OG,AG=function(t){RG(e,t);function e(r,n){return t.call(this,r.sid,r.name,r.kind,r.enabled,r.priority,n)||this}return e.prototype.update=function(r){return this.enable(r.enabled),this.setPriority(r.priority),this},e}(jG),LG=AG,IG=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NG=SG,MG=LG,DG=function(t){IG(e,t);function e(r,n,i,o,a,s){var c=t.call(this,r.sid,r.identity)||this;return s=Object.assign({RemoteTrackPublicationV2:MG},s),Object.defineProperties(c,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:s.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:n},updateSubscriberTrackPriority:{value:function(l,u){return i(l,u)}},updateTrackRenderHint:{value:function(l,u){return o(l,u)}},clearTrackHint:{value:function(l){return a(l)}},revision:{enumerable:!0,get:function(){return this._revision}}}),c.update(r)}return e.prototype._getOrCreateTrack=function(r){var n=this._RemoteTrackPublicationV2,i=this.tracks.get(r.sid);if(!i){var o=this._getInitialTrackSwitchOffState(r.sid);i=new n(r,o),this.addTrack(i)}return i},e.prototype.update=function(r){var n=this;if(this.revision!==null&&r.revision<=this.revision)return this;this._revision=r.revision;var i=new Set;switch(r.tracks.forEach(function(o){var a=n._getOrCreateTrack(o);a.update(o),i.add(a)}),this.tracks.forEach(function(o){i.has(o)||n.removeTrack(o)}),r.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity);break}return this},e}(NG),$G=DG,UG=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FG=po,BG=function(t){UG(e,t);function e(r,n){var i=t.call(this,r,"track_priority",n)||this;return Object.defineProperties(i,{_enqueuedPriorityUpdates:{value:new Map}}),i.on("ready",function(o){Array.from(i._enqueuedPriorityUpdates.keys()).forEach(function(a){o.publish({type:"track_priority",track:a,subscribe:i._enqueuedPriorityUpdates.get(a)})})}),i}return e.prototype.sendTrackPriorityUpdate=function(r,n,i){if(n!=="subscribe")throw new Error("only subscribe priorities are supported, found: "+n);this._enqueuedPriorityUpdates.set(r,i),this._transport&&this._transport.publish({type:"track_priority",track:r,subscribe:i})},e}(FG),VG=BG,zG=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),WG=po,HG=function(t){zG(e,t);function e(r,n){var i=t.call(this,r,"track_switch_off",n)||this;return i.on("ready",function(o){o.on("message",function(a){switch(a.type){case"track_switch_off":i._setTrackSwitchOffUpdates(a.off||[],a.on||[]);break}})}),i}return e.prototype._setTrackSwitchOffUpdates=function(r,n){this.emit("updated",r,n)},e}(WG),qG=HG,KG=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GG=po,QG=ho,JG=J.isDeepEqual,Sb=2e3,YG=1,XG=function(t){KG(e,t);function e(r,n){var i=t.call(this,r,"render_hints",n)||this;return Object.defineProperties(i,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new QG(function(){i._sendAllHints(),i._responseTimer.setDelay(i._responseTimer.delay*2)},Sb,!1)}}),i.on("ready",function(o){o.on("message",function(a){switch(i._log.debug("Incoming: ",a),a.type){case"render_hints":i._processHintResults(a&&a.subscriber&&a.subscriber.hints||[]);break;default:i._log.warn("Unknown message type: ",a.type);break}}),i._sendAllHints()}),i}return e.prototype._sendAllHints=function(){var r=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(n){var i=r._trackSidsToRenderHints.get(n);i.renderDimensions&&(i.isDimensionDirty=!0),"enabled"in i&&(i.isEnabledDirty=!0)}),this._sendHints()},e.prototype._processHintResults=function(r){var n=this;this._responseTimer.clear(),this._responseTimer.setDelay(Sb),r.forEach(function(i){i.result!=="OK"&&n._log.debug("Server error processing hint:",i)}),this._sendHints()},e.prototype._sendHints=function(){var r=this;if(!(!this._transport||this._responseTimer.isSet)){var n=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(o){var a=r._trackSidsToRenderHints.get(o);if(a.isEnabledDirty||a.isDimensionDirty){var s={track:o};a.isEnabledDirty&&(s.enabled=a.enabled,a.isEnabledDirty=!1),a.isDimensionDirty&&(s.render_dimensions=a.renderDimensions,a.isDimensionDirty=!1),n.push(s)}}),n.length>0){var i={type:"render_hints",subscriber:{id:YG++,hints:n}};this._log.debug("Outgoing: ",i),this._transport.publish(i),this._responseTimer.start()}}},e.prototype.setTrackHint=function(r,n){var i=this._trackSidsToRenderHints.get(r)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in n&&i.enabled!==n.enabled&&(i.enabled=!!n.enabled,i.isEnabledDirty=!0),n.renderDimensions&&!JG(n.renderDimensions,i.renderDimensions)&&(i.renderDimensions=n.renderDimensions,i.isDimensionDirty=!0),this._trackSidsToRenderHints.set(r,i),this._sendHints()},e.prototype.clearTrackHint=function(r){this._trackSidsToRenderHints.delete(r)},e}(GG),ZG=XG,eQ=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tQ=po,rQ=1,nQ=function(t){eQ(e,t);function e(r,n){var i=t.call(this,r,"publisher_hints",n)||this;return i.on("ready",function(o){i._log.debug("publisher_hints transport ready:",o),o.on("message",function(a){switch(i._log.debug("Incoming: ",a),a.type){case"publisher_hints":a.publisher&&a.publisher.hints&&a.publisher.id&&i._processPublisherHints(a.publisher.hints,a.publisher.id);break;default:i._log.warn("Unknown message type: ",a.type);break}})}),i}return e.prototype.sendTrackReplaced=function(r){var n=r.trackSid;if(this._transport){var i={type:"client_reset",track:n,id:rQ++};this._log.debug("Outgoing: ",i),this._transport.publish(i)}},e.prototype.sendHintResponse=function(r){var n=r.id,i=r.hints;if(this._transport){var o={type:"publisher_hints",id:n,hints:i};this._log.debug("Outgoing: ",o),this._transport.publish(o)}},e.prototype._processPublisherHints=function(r,n){try{this.emit("updated",r,n)}catch(i){this._log.error("error processing hints:",i)}},e}(tQ),iQ=nQ,oQ=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),VO=x&&x.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},aQ=n9,sQ=s9,cQ=Z9,lQ=lK,uQ=mK,dQ=bK,fQ=$O,hQ=$G,pQ=VG,vQ=qG,mQ=ZG,gQ=iQ,bc=J,yQ=bc.constants.DEFAULT_SESSION_TIMEOUT_SEC,_Q=bc.createBandwidthProfilePayload,wQ=bc.defer,zO=bc.flatMap,kb=bc.oncePerTick,bQ=Z.createTwilioError,SQ=1e4,kQ=1e3,TQ=function(t){oQ(e,t);function e(r,n,i,o,a){var s=this;n.options=Object.assign({session_timeout:yQ},n.options),a=Object.assign({DominantSpeakerSignaling:aQ,TranscriptionSignaling:sQ,NetworkQualityMonitor:cQ,NetworkQualitySignaling:lQ,RecordingSignaling:uQ,RemoteParticipantV2:hQ,TrackPrioritySignaling:pQ,TrackSwitchOffSignaling:vQ,bandwidthProfile:null,sessionTimeout:n.options.session_timeout*1e3,statsPublishIntervalMs:SQ,statsCollectionIntervalMs:kQ},a),r.setBandwidthProfile(a.bandwidthProfile);var c=n.options,l=c.signaling_region,u=c.audio_processors,d=u===void 0?[]:u;r.setSignalingRegion(l),d.includes("krisp")&&d.push("rnnoise"),r.setAudioProcessors(d),o.setIceReconnectTimeout(a.sessionTimeout),s=t.call(this,r,n.sid,n.name,a)||this;var h=function(y){return s._getTrackReceiver(y)},f=s._log;return Object.defineProperties(s,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:a.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:r.bandwidthProfileRevision,writable:!0},_mediaStatesWarningsRevision:{value:0,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:r.networkQualityConfiguration},_peerConnectionManager:{value:o},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:a.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new a.DominantSpeakerSignaling(h,{log:f})},_transcriptionSignaling:{value:new a.TranscriptionSignaling(h,{log:f})},_networkQualitySignaling:{value:new a.NetworkQualitySignaling(h,r.networkQualityConfiguration,{log:f})},_renderHintsSignaling:{value:new mQ(h,{log:f})},_publisherHintsSignaling:{value:new gQ(h,{log:f})},_trackPrioritySignaling:{value:new a.TrackPrioritySignaling(h,{log:f})},_trackSwitchOffSignaling:{value:new a.TrackSwitchOffSignaling(h,{log:f})},_pendingSwitchOffStates:{value:new Map},_statsMonitor:{value:a.eventObserver&&a.insights?new dQ(s,f,{publishIntervalMs:a.statsPublishIntervalMs,collectionIntervalMs:a.statsCollectionIntervalMs}):null},_transport:{value:i},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:n.options.media_region||null}}),s._initTrackSwitchOffSignaling(),s._initDominantSpeakerSignaling(),s._initTranscriptionSignaling(),s._initNetworkQualityMonitorSignaling(),s._initPublisherHintSignaling(),xQ(s,r),EQ(s,o),CQ(s,i),s._statsMonitor&&s.on("stateChanged",function(y){y==="disconnected"&&s._statsMonitor&&s._statsMonitor.cleanup()}),s._update(n),s._peerConnectionManager.setEffectiveAdaptiveSimulcast(s._publisherHintsSignaling.isSetup),s}return Object.defineProperty(e.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signalingConnectionState",{get:function(){return this._transport.state==="syncing"?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),e.prototype._deleteTrackReceiverDeferred=function(r){return this._trackReceiverDeferreds.delete(r)},e.prototype._getOrCreateTrackReceiverDeferred=function(r){var n=this._trackReceiverDeferreds.get(r)||wQ(),i=this._peerConnectionManager.getTrackReceivers(),o=i.find(function(a){return a.id===r&&a.readyState!=="ended"});return o?n.resolve(o):this._trackReceiverDeferreds.set(r,n),n},e.prototype._addTrackReceiver=function(r){var n=this._getOrCreateTrackReceiverDeferred(r.id);return n.resolve(r),this},e.prototype._disconnect=function(r){var n=t.prototype._disconnect.call(this,r);return n&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(i){i.publishFailed(r||new Error("LocalParticipant disconnected"))}),n},e.prototype._getTrackReceiver=function(r){var n=this;return this._getOrCreateTrackReceiverDeferred(r).promise.then(function(i){return n._deleteTrackReceiverDeferred(r),i})},e.prototype._getInitialTrackSwitchOffState=function(r){var n=this._pendingSwitchOffStates.get(r)||!1;return this._pendingSwitchOffStates.delete(r),n&&this._log.warn("[".concat(r,"] was initially switched off! ")),n},e.prototype._getTrackSidsToTrackSignalings=function(){var r=zO(this.participants,function(n){return Array.from(n.tracks)});return new Map(r)},e.prototype._getOrCreateRemoteParticipant=function(r){var n=this,i=this._RemoteParticipantV2,o=this.participants.get(r.sid),a=this;return o||(o=new i(r,function(s){return n._getInitialTrackSwitchOffState(s)},function(s,c){return n._trackPrioritySignaling.sendTrackPriorityUpdate(s,"subscribe",c)},function(s,c){return n._renderHintsSignaling.setTrackHint(s,c)},function(s){return n._renderHintsSignaling.clearTrackHint(s)}),o.on("stateChanged",function s(c){c==="disconnected"&&(o.removeListener("stateChanged",s),a.participants.delete(o.sid),a._disconnectedParticipantRevisions.set(o.sid,o.revision))}),this.connectParticipant(o)),o},e.prototype._getState=function(){return{participant:this.localParticipant.getState()}},e.prototype._maybeAddBandwidthProfile=function(r){var n=this.localParticipant,i=n.bandwidthProfile,o=n.bandwidthProfileRevision;return i&&this._lastBandwidthProfileRevision<o?(this._lastBandwidthProfileRevision=o,Object.assign({bandwidth_profile:_Q(i)},r)):r},e.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},e.prototype._publishPeerConnectionState=function(r){this._transport.publish(Object.assign({peer_connections:[r]},this._getState()))},e.prototype._update=function(r){var n=this;if(r.subscribed&&r.subscribed.revision>this._subscribedRevision){this._subscribedRevision=r.subscribed.revision,r.subscribed.tracks.forEach(function(a){a.id?(n._subscriptionFailures.delete(a.sid),n._subscribed.set(a.sid,a.id)):a.error&&!n._subscriptionFailures.has(a.sid)&&n._subscriptionFailures.set(a.sid,a.error)});var i=new Set(r.subscribed.tracks.filter(function(a){return!!a.id}).map(function(a){return a.sid}));this._subscribed.forEach(function(a,s){i.has(s)||n._subscribed.delete(s)})}var o=new Set;return(r.participants||[]).forEach(function(a){if(a.sid!==n.localParticipant.sid){var s=n._disconnectedParticipantRevisions.get(a.sid);if(!(s&&a.revision<=s)){s&&n._disconnectedParticipantRevisions.delete(a.sid);var c=n._getOrCreateRemoteParticipant(a);c.update(a),o.add(c)}}}),r.type==="synced"&&this.participants.forEach(function(a){o.has(a)||a.disconnect()}),PQ(this),r.peer_connections&&this._peerConnectionManager.update(r.peer_connections,r.type==="synced"),r.recording&&this.recording.update(r.recording),r.published&&r.published.revision>this._publishedRevision&&(this._publishedRevision=r.published.revision,r.published.tracks.forEach(function(a){a.sid&&n._published.set(a.id,a.sid)}),this.localParticipant.update(r.published)),r.participant&&this.localParticipant.connect(r.participant.sid,r.participant.identity),[this._dominantSpeakerSignaling,this._transcriptionSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(a){var s=a.channel;!a.isSetup&&r.media_signaling&&r.media_signaling[s]&&r.media_signaling[s].transport&&r.media_signaling[s].transport.type==="data-channel"&&a.setup(r.media_signaling[s].transport.label)}),r.type==="warning"&&r.states&&r.states.revision>this._mediaStatesWarningsRevision&&(this._mediaStatesWarningsRevision=r.states.revision,this.localParticipant.updateMediaStates(r.states)),this},e.prototype._initPublisherHintSignaling=function(){var r=this;this._publisherHintsSignaling.on("updated",function(i,o){Promise.all(i.map(function(a){return r.localParticipant.setPublisherHint(a.track,a.encodings).then(function(s){return{track:a.track,result:s}})})).then(function(a){r._publisherHintsSignaling.sendHintResponse({id:o,hints:a})})});var n=function(i){i.kind==="video"&&i.trackTransceiver.on("replaced",function(){r._publisherHintsSignaling.sendTrackReplaced({trackSid:i.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(i){return n(i)}),this.localParticipant.on("trackAdded",function(i){return n(i)})},e.prototype._initTrackSwitchOffSignaling=function(){var r=this;this._trackSwitchOffSignaling.on("updated",function(n,i){try{r._log.debug("received trackSwitch: ",{tracksOn:i,tracksOff:n});var o=new Map;i.forEach(function(a){return o.set(a,!0)}),n.forEach(function(a){o.get(a)&&r._log.warn("".concat(a," is DUPLICATED in both tracksOff and tracksOn list")),o.set(a,!1)}),r.participants.forEach(function(a){a.tracks.forEach(function(s){var c=o.get(s.sid);typeof c<"u"&&(s.setSwitchedOff(!c),o.delete(s.sid))})}),o.forEach(function(a,s){return r._pendingSwitchOffStates.set(s,!a)})}catch(a){r._log.error("error processing track switch off:",a)}})},e.prototype._initDominantSpeakerSignaling=function(){var r=this;this._dominantSpeakerSignaling.on("updated",function(){return r.setDominantSpeaker(r._dominantSpeakerSignaling.loudestParticipantSid)})},e.prototype._initTranscriptionSignaling=function(){var r=this;this._transcriptionSignaling.on("transcription",function(n){r.emit("transcription",n)})},e.prototype._initNetworkQualityMonitorSignaling=function(){var r=this;this._networkQualitySignaling.on("ready",function(){var n=new r._NetworkQualityMonitor(r._peerConnectionManager,r._networkQualitySignaling);r._networkQualityMonitor=n,n.on("updated",function(){r.iceConnectionState!=="failed"&&(r.localParticipant.setNetworkQualityLevel(n.level,n.levels),r.participants.forEach(function(i){var o=n.remoteLevels.get(i.sid);o&&i.setNetworkQualityLevel(o.level,o)}))}),n.start()}),this._networkQualitySignaling.on("teardown",function(){return r._teardownNetworkQualityMonitor()})},e.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},e.prototype.getStats=function(){var r=this;return this._peerConnectionManager.getStats().then(function(n){return new Map(Array.from(n).map(function(i){var o=VO(i,2),a=o[0],s=o[1];return[a,Object.assign({},s,{localAudioTrackStats:Tb(r,s.localAudioTrackStats),localVideoTrackStats:Tb(r,s.localVideoTrackStats),remoteAudioTrackStats:xb(r,s.remoteAudioTrackStats),remoteVideoTrackStats:xb(r,s.remoteVideoTrackStats)})]}))})},e}(fQ);function WO(t,e){return e.reduce(function(r,n){var i=t.get(n.trackId);return i?[Object.assign({},n,{trackSid:i})].concat(r):r},[])}function Tb(t,e){return WO(t._published,e)}function xb(t,e){var r=new Map(Array.from(t._subscribed.entries()).map(function(n){var i=VO(n,2),o=i[0],a=i[1];return[a,o]}));return WO(r,e)}function xQ(t,e){var r=kb(function(){t._publishNewLocalParticipantState()}),n=kb(function(){var i=zO(e.tracks,function(o){return o.trackTransceiver});t._peerConnectionManager.setTrackSenders(i)});e.on("trackAdded",n),e.on("trackRemoved",n),e.on("updated",r),t.on("stateChanged",function i(o){o==="disconnected"&&(e.removeListener("trackAdded",n),e.removeListener("trackRemoved",n),e.removeListener("updated",r),t.removeListener("stateChanged",i),e.disconnect())}),t.on("signalingConnectionStateChanged",function(){var i=t.localParticipant,o=t.signalingConnectionState,a=i.identity,s=i.sid;switch(o){case"connected":i.connect(s,a);break;case"reconnecting":i.reconnecting();break}})}function EQ(t,e){e.on("description",function(n){t._publishPeerConnectionState(n)}),e.dequeue("description"),e.on("candidates",function(n){t._publishPeerConnectionState(n)}),e.dequeue("candidates"),e.on("trackAdded",t._addTrackReceiver.bind(t)),e.dequeue("trackAdded"),e.getTrackReceivers().forEach(t._addTrackReceiver,t),e.on("connectionStateChanged",function(){t.emit("connectionStateChanged")}),e.on("iceConnectionStateChanged",function(){t.emit("iceConnectionStateChanged"),t.iceConnectionState==="failed"&&(t.localParticipant.networkQualityLevel!==null&&t.localParticipant.setNetworkQualityLevel(0),t.participants.forEach(function(r){r.networkQualityLevel!==null&&r.setNetworkQualityLevel(0)}))})}function CQ(t,e){e.on("message",t._update.bind(t)),e.on("stateChanged",function r(n,i){n==="disconnected"&&(t.state!=="disconnected"&&t._disconnect(i),e.removeListener("stateChanged",r)),t.emit("signalingConnectionStateChanged")})}function PQ(t){var e=t._getTrackSidsToTrackSignalings();t._subscriptionFailures.forEach(function(r,n){var i=e.get(n);i&&(t._subscriptionFailures.delete(n),i.subscribeFailed(bQ(r.code,r.message)))}),e.forEach(function(r){var n=t._subscribed.get(r.sid);(!n||r.isSubscribed&&r.trackTransceiver.id!==n)&&r.setTrackTransceiver(null),n&&t._getTrackReceiver(n).then(function(i){return r.setTrackTransceiver(i)})})}var OQ=TQ,RQ=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jQ=Ma,HO=$C,AQ=dO,LQ=Ee.reconnectBackoffConfig,IQ=ho,xg=Ee,NQ=xg.SDK_NAME,MQ=xg.SDK_VERSION,DQ=xg.SDP_FORMAT,Ua=J,$Q=Ua.createBandwidthProfilePayload,UQ=Ua.createMediaSignalingPayload,FQ=Ua.createMediaWarningsPayload,BQ=Ua.createSubscribePayload,VQ=Ua.getUserAgent,zQ=Ua.isNonArrayObject,Od=Z,WQ=Od.createTwilioError,nh=Od.RoomCompletedError,HQ=Od.SignalingConnectionError,qQ=Od.SignalingServerBusyError,KQ=1,ih=2,GQ={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},QQ=function(t){RQ(e,t);function e(r,n,i,o,a,s){var c=this;return s=Object.assign({Backoff:AQ,TwilioConnection:HO,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:VQ()},s),c=t.call(this,"connecting",GQ)||this,Object.defineProperties(c,{_accessToken:{value:n},_adaptiveSimulcast:{value:s.adaptiveSimulcast},_automaticSubscription:{value:s.automaticSubscription},_bandwidthProfile:{value:s.bandwidthProfile},_dominantSpeaker:{value:s.dominantSpeaker},_receiveTranscriptions:{value:s.receiveTranscriptions},_eventObserver:{value:s.eventObserver,writable:!1},_renderHints:{value:s.renderHints},_iceServersStatus:{value:Array.isArray(s.iceServers)?"overrode":"acquire"},_localParticipant:{value:i},_name:{value:r},_networkQuality:{value:zQ(s.networkQuality)||s.networkQuality},_notifyWarnings:{value:s.notifyWarnings},_options:{value:s},_peerConnectionManager:{value:o},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new s.Backoff(LQ)},_session:{value:null,writable:!0},_trackPriority:{value:s.trackPriority},_trackSwitchOff:{value:s.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:s.userAgent},_wsServer:{value:a}}),YQ(c),c}return e.prototype._createConnectOrSyncOrDisconnectMessage=function(){if(this.state==="connected")return null;if(this.state==="disconnected")return{session:this._session,type:"disconnect",version:ih};var r={connecting:"connect",syncing:"sync"}[this.state],n={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:r,version:ih};return n.type==="connect"?(n.ice_servers=this._iceServersStatus,n.publisher={name:NQ,sdk_version:MQ,user_agent:this._userAgent},this._bandwidthProfile&&(n.bandwidth_profile=$Q(this._bandwidthProfile)),this._notifyWarnings&&(n.participant.media_warnings=FQ(this._notifyWarnings)),n.media_signaling=UQ(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints,this._receiveTranscriptions),n.subscribe=BQ(this._automaticSubscription),n.format=DQ,n.token=this._accessToken):n.type==="sync"?(n.session=this._session,n.token=this._accessToken):n.type==="update"&&(n.session=this._session),n},e.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:KQ}},e.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var r=this._createConnectOrSyncOrDisconnectMessage();r&&this._twilioConnection.sendMessage(r)},e.prototype.disconnect=function(r){return this.state!=="disconnected"?(this.preempt("disconnected",null,[r]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0):!1},e.prototype.publish=function(r){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:ih},r)),!0;case"connecting":case"syncing":return this._updatesToSend.push(r),!0;case"disconnected":default:return!1}},e.prototype.publishEvent=function(r,n,i,o){this._eventObserver.emit("event",{group:r,name:n,level:i,payload:o})},e.prototype.sync=function(){return this.state==="connected"?(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0):!1},e.prototype._setSession=function(r,n){this._session=r,this._sessionTimeoutMS=n*1e3},e.prototype._getReconnectTimer=function(){var r=this;return this._sessionTimeoutMS===0?null:(this._sessionTimer||(this._sessionTimer=new IQ(function(){r._sessionTimer&&(r._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(n){r._reconnectBackoff.backoff(n)}))},e.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},e}(jQ);function Eb(t){return Array.from(t.reduce(function(e,r){var n=e.get(r.id)||r;return(!n.description&&r.description||n.description&&r.description&&r.description.revision>n.description.revision)&&(n.description=r.description),(!n.ice&&r.ice||n.ice&&r.ice&&r.ice.revision>n.ice.revision)&&(n.ice=r.ice),e.set(n.id,n),e},new Map).values())}function JQ(t){return t.reduce(function(e,r){return(!e.participant&&r.participant||e.participant&&r.participant&&r.participant.revision>e.participant.revision)&&(e.participant=r.participant),!e.peer_connections&&r.peer_connections?e.peer_connections=Eb(r.peer_connections):e.peer_connections&&r.peer_connections&&(e.peer_connections=Eb(e.peer_connections.concat(r.peer_connections))),e},{})}function YQ(t){function e(){if(t.state!=="disconnected"){t._twilioConnection&&t._twilioConnection.removeListener("message",n);var c=t._iceServersStatus,l=t._options,u=t._wsServer,d=t.state,h=l.TwilioConnection,f=new h(u,Object.assign({helloBody:d==="connecting"&&c==="acquire"?t._createIceMessage():t._createConnectOrSyncOrDisconnectMessage()},l));f.once("close",function(y){y===h.CloseReason.LOCAL?r():r(new Error(y))}),f.on("message",n),t._twilioConnection=f}}function r(c){if(t.state!=="disconnected"){if(!c){t.disconnect();return}var l=t._getReconnectTimer();if(!l){var u=c.message===HO.CloseReason.BUSY?new qQ:new HQ;t.disconnect(u);return}t.state==="connected"&&t.preempt("syncing"),l.then(e)}}function n(c){if(t.state!=="disconnected"){if(c.type==="error"){t.disconnect(WQ(c.code,c.message));return}switch(t.state){case"connected":switch(c.type){case"connected":case"synced":case"update":case"warning":t.emit("message",c);return;case"disconnected":t.disconnect(c.status==="completed"?new nh:null);return;default:return}case"connecting":switch(c.type){case"iced":t._options.onIced(c.ice_servers).then(function(){t._sendConnectOrSyncOrDisconnectMessage()});return;case"connected":t._setSession(c.session,c.options.session_timeout),t.emit("connected",c),t.preempt("connected");return;case"synced":case"update":t._updatesReceived.push(c);return;case"disconnected":t.disconnect(c.status==="completed"?new nh:null);return;default:return}case"syncing":switch(c.type){case"connected":case"update":t._updatesReceived.push(c);return;case"synced":t._clearReconnectTimer(),t.emit("message",c),t.preempt("connected");return;case"disconnected":t.disconnect(c.status==="completed"?new nh:null);return;default:return}default:return}}}t.on("stateChanged",function c(l){switch(l){case"connected":{var u=t._updatesToSend.splice(0);u.length&&t.publish(JQ(u)),t._updatesReceived.splice(0).forEach(function(d){return t.emit("message",d)});return}case"disconnected":t._twilioConnection.removeListener("message",n),t.removeListener("stateChanged",c);return;case"syncing":return;default:return}});var i=t._options,o=t._iceServersStatus,a=i.iceServers,s=i.onIced;o==="overrode"?s(a).then(e):e()}var XQ=QQ,ZQ=dg,eJ=Q7,tJ=OQ,rJ=XQ,qO=Z,nJ=qO.SignalingConnectionDisconnectedError,iJ=qO.SignalingIncomingMessageInvalidError,KO=J,oJ=KO.flatMap,aJ=KO.createRoomConnectingEventPayload;function sJ(t,e,r,n,i,o){o=Object.assign({PeerConnectionManager:eJ,RoomV2:tJ,Transport:rJ},o);var a=i.video[0]&&i.video[0].adaptiveSimulcast===!0,s=o.PeerConnectionManager,c=o.RoomV2,l=o.Transport,u=o.iceServers,d=o.log,h=new s(n,i,o),f=oJ(r.tracks,function(_){return[_.trackTransceiver]});h.setTrackSenders(f);var y=new Error("Canceled"),v,g=new ZQ(function(_,m,w){var S=function(z){return w()?(m(y),Promise.reject(y)):(d.debug("Got ICE servers:",z),o.iceServers=z,h.setConfiguration(o),h.createAndOffer().then(function(){if(w())throw m(y),y;d.debug("createAndOffer() succeeded."),h.dequeue("description")}).catch(function(W){throw d.error("createAndOffer() failed:",W),m(W),W}))},k=o.automaticSubscription,E=o.bandwidthProfile,T=o.dominantSpeaker,C=o.receiveTranscriptions,O=o.environment,A=o.eventObserver,N=o.loggerName,j=o.logLevel,D=o.name,P=o.networkMonitor,M=o.networkQuality,I=o.notifyWarnings,$=o.realm,R=o.sdpSemantics,L=!!E,B=!!E,F=!!E&&(o.clientTrackSwitchOffControl!=="disabled"||o.contentPreferencesMode!=="disabled"),Q=Object.assign({adaptiveSimulcast:a,automaticSubscription:k,dominantSpeaker:T,receiveTranscriptions:C,environment:O,eventObserver:A,loggerName:N,logLevel:j,networkMonitor:P,networkQuality:M,notifyWarnings:I,iceServers:u,onIced:S,realm:$,renderHints:F,sdpSemantics:R,trackPriority:L,trackSwitchOff:B},E?{bandwidthProfile:E}:{});v=new l(D,t,r,h,e,Q);var K=aJ(o);A.emit("event",K),v.once("connected",function(z){if(d.debug("Transport connected:",z),w()){m(y);return}var W=z.participant;if(!W){m(new iJ);return}_(new c(r,z,v,h,o))}),v.once("stateChanged",function(z,W){z==="disconnected"?(v=null,m(W||new nJ)):d.debug("Transport state changed:",z)})},function(){v&&(v.disconnect(),v=null)});return g.catch(function(){v&&(v.disconnect(),v=null),h.close()}),g}var cJ=sJ,lJ=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uJ=Tg,dJ=function(t){lJ(e,t);function e(){var r=t.call(this)||this;return Object.defineProperties(r,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),r}return e.prototype.addTrack=function(r,n,i,o){o===void 0&&(o=null);var a=this._createLocalTrackPublicationSignaling(r,n,i,o);return this._trackSendersToPublications.set(r,a),this._publicationsToTrackSenders.set(a,r),t.prototype.addTrack.call(this,a),this},e.prototype.getPublication=function(r){return this._trackSendersToPublications.get(r)||null},e.prototype.getSender=function(r){return this._publicationsToTrackSenders.get(r)||null},e.prototype.removeTrack=function(r){var n=this._trackSendersToPublications.get(r);if(!n)return null;this._trackSendersToPublications.delete(r),this._publicationsToTrackSenders.delete(n);var i=t.prototype.removeTrack.call(this,n);return i&&n.stop(),n},e}(uJ),fJ=dJ,hJ=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pJ=BO,vJ=function(t){hJ(e,t);function e(r,n,i){var o=this,a=r.clone();r.kind!=="data"&&(a.track.enabled=r.track.enabled),r=a;var s=r.kind==="data"?!0:r.track.enabled;return o=t.call(this,n,r.kind,s,i)||this,o.setTrackTransceiver(r),Object.defineProperties(o,{_updatedPriority:{value:i,writable:!0},id:{enumerable:!0,value:r.id}}),o}return Object.defineProperty(e.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),e.prototype.enable=function(r){return r=typeof r=="boolean"?r:!0,this.trackTransceiver.track.enabled=r,t.prototype.enable.call(this,r)},e.prototype.publishFailed=function(r){return mJ(this,r)&&this.emit("updated"),this},e.prototype.setPriority=function(r){return this._updatedPriority!==r&&(this._updatedPriority=r,this.emit("updated")),this},e.prototype.setSid=function(r){return this._error?this:t.prototype.setSid.call(this,r)},e.prototype.stop=function(){this.trackTransceiver.stop()},e}(pJ);function mJ(t,e){return t._sid!==null||t._error?!1:(t._error=e,!0)}var gJ=vJ,yJ=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_J=gJ,wJ=PE,bJ=Z.createTwilioError,SJ=function(t){yJ(e,t);function e(r,n,i,o,a){var s=t.call(this,r,n,i)||this;return Object.defineProperties(s,{_log:{value:a.log.createLog("default",s)},_mediaStates:{value:{recordings:null},writable:!0},_noiseCancellationVendor:{value:o}}),s}return e.prototype.getState=function(){var r={enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority};return this._noiseCancellationVendor&&(r.audio_processor=this._noiseCancellationVendor),r},e.prototype.toString=function(){return"[LocalTrackPublicationV2: ".concat(this.sid,"]")},e.prototype.update=function(r){switch(r.state){case"ready":this.setSid(r.sid);break;case"failed":{var n=r.error;this.publishFailed(bJ(n.code,n.message));break}}return this},e.prototype.updateMediaStates=function(r){if(!r||!r.recordings||this._mediaStates.recordings===r.recordings)return this;switch(this._mediaStates.recordings=r.recordings,this._mediaStates.recordings){case"OK":this._log.info("Warnings have cleared."),this.emit("warningsCleared");break;case"NO_MEDIA":this._log.warn("Recording media lost."),this.emit("warning",wJ.recordingMediaLost);break;default:this._log.warn("Unknown media state detected: ".concat(this._mediaStates.recordings));break}return this},e}(_J),kJ=SJ,TJ=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xJ=fJ,EJ=kJ,CJ=Ee.DEFAULT_LOG_LEVEL,PJ=pn,GO=J,OJ=GO.buildLogLevels,RJ=GO.isDeepEqual,jJ=function(t){TJ(e,t);function e(r,n,i){var o=this;i=Object.assign({logLevel:CJ,LocalTrackPublicationV2:EJ},i),o=t.call(this)||this;var a=OJ(i.logLevel);return Object.defineProperties(o,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:r},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:i.LocalTrackPublicationV2},_log:{value:i.log?i.log.createLog("default",o):new PJ("default",o,a,i.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},audioProcessors:{value:[],writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:n},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),o}return e.prototype.toString=function(){return"[LocalParticipantSignaling: ".concat(this.sid,"]")},e.prototype.setSignalingRegion=function(r){this._signalingRegion||(this._signalingRegion=r)},e.prototype.setBandwidthProfile=function(r){RJ(this._bandwidthProfile,r)||(this._bandwidthProfile=JSON.parse(JSON.stringify(r)),this._bandwidthProfileRevision++,this.didUpdate())},e.prototype.setAudioProcessors=function(r){this.audioProcessors=r},e.prototype.getParameters=function(){return this._encodingParameters},e.prototype.setParameters=function(r){return this._encodingParameters.update(r),this},e.prototype.update=function(r){return this._publishedRevision>=r.revision?this:(this._publishedRevision=r.revision,r.tracks.forEach(function(n){var i=this.tracks.get(n.id);i&&i.update(n)},this),this)},e.prototype.updateMediaStates=function(r){return!r||!r.tracks?this:(Array.from(this.tracks.values()).forEach(function(n){var i=r.tracks[n.sid];i&&n.updateMediaStates(i)}),this)},e.prototype._createLocalTrackPublicationSignaling=function(r,n,i,o){return new this._LocalTrackPublicationV2(r,n,i,o,{log:this._log})},e.prototype.addTrack=function(r,n,i,o){var a=this;t.prototype.addTrack.call(this,r,n,i,o);var s=this.getPublication(r),c=s.isEnabled,l=s.updatedPriority,u=function(){(c!==s.isEnabled||l!==s.updatedPriority)&&(a.didUpdate(),c=s.isEnabled,l=s.updatedPriority)};return s.on("updated",u),this._removeListener(s),this._removeListeners.set(s,function(){return s.removeListener("updated",u)}),this.didUpdate(),this},e.prototype._removeListener=function(r){var n=this._removeListeners.get(r);n&&n()},e.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(r){return r.getState()})}},e.prototype.didUpdate=function(){this._revision++,this.emit("updated")},e.prototype.removeTrack=function(r){var n=t.prototype.removeTrack.call(this,r);return n&&(r.removeClone(n.trackTransceiver),this._removeListener(n),this.didUpdate()),n},e.prototype.setNetworkQualityConfiguration=function(r){this.networkQualityConfiguration.update(r)},e.prototype.setPublisherHint=function(r,n){var i=Array.from(this.tracks.values()).find(function(o){return o.sid===r});return i?i.trackTransceiver.setPublisherHint(n):(this._log.warn("track:".concat(r," not found")),Promise.resolve("UNKNOWN_TRACK"))},e}(xJ),AJ=jJ,LJ=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IJ=Tg,NJ=$O,MJ=Ma,DJ={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},$J=function(t){LJ(e,t);function e(){return t.call(this,"closed",DJ)||this}return e.prototype._close=function(r){return this.transition("closing",r),this.transition("closed",r),Promise.resolve(this)},e.prototype._connect=function(r,n,i,o,a){r.connect("PA00000000000000000000000000000000","test");var s="RM00000000000000000000000000000000",c=Promise.resolve(new NJ(r,s,a));return c.cancel=function(){},c},e.prototype._open=function(r){return this.transition("opening",r),this.transition("open",r),Promise.resolve(this)},e.prototype.close=function(){var r=this;return this.bracket("close",function(n){switch(r.state){case"closed":return r;case"open":return r._close(n);default:throw new Error('Unexpected Signaling state "'.concat(r.state,'"'))}})},e.prototype.connect=function(r,n,i,o,a){var s=this;return this.bracket("connect",function c(l){switch(s.state){case"closed":return s._open(l).then(c.bind(null,l));case"open":return s.releaseLockCompletely(l),s._connect(r,n,i,o,a);default:throw new Error('Unexpected Signaling state "'.concat(s.state,'"'))}})},e.prototype.createLocalParticipantSignaling=function(){return new IJ},e.prototype.open=function(){var r=this;return this.bracket("open",function(n){switch(r.state){case"closed":return r._open(n);case"open":return r;default:throw new Error('Unexpected Signaling state "'.concat(r.state,'"'))}})},e}(MJ),UJ=$J,FJ=x&&x.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BJ=cJ,VJ=AJ,zJ=UJ,WJ=function(t){FJ(e,t);function e(r,n){var i=this;return n=Object.assign({createCancelableRoomSignalingPromise:BJ},n),i=t.call(this)||this,Object.defineProperties(i,{_createCancelableRoomSignalingPromise:{value:n.createCancelableRoomSignalingPromise},_options:{value:n},_wsServer:{value:r}}),i}return e.prototype._connect=function(r,n,i,o,a){return a=Object.assign({},this._options,a),this._createCancelableRoomSignalingPromise.bind(null,n,this._wsServer,r,i,o,a)},e.prototype.createLocalParticipantSignaling=function(r,n){return new VJ(r,n)},e}(zJ),HJ=WJ,qJ=uo.MediaStreamTrack,Eg=be,KJ=Eg.guessBrowser,GJ=Eg.guessBrowserVersion,QJ=Eg.isCodecSupported,JJ=sW,YJ=dW,XJ=h6,ZJ=WP,eY=v6,Cg=na,tY=Cg.LocalAudioTrack,rY=Cg.LocalDataTrack,nY=Cg.LocalVideoTrack,iY=w6,oY=jH,aY=HJ,Sc=J,sY=Sc.asLocalTrack,cY=Sc.buildLogLevels,lY=Sc.createRoomConnectedEventPayload,uY=Sc.filterObject,Cb=Sc.isNonArrayObject,vn=Ee,dY=vn.DEFAULT_ENVIRONMENT,fY=vn.DEFAULT_LOG_LEVEL,hY=vn.DEFAULT_LOGGER_NAME,pY=vn.DEFAULT_REALM,vY=vn.DEFAULT_REGION,mY=vn.WS_SERVER,gY=vn.SDK_NAME,yY=vn.SDK_VERSION,wl=vn.typeErrors,Ti=dg,_Y=VP,wY=pn,bY=yc.validateBandwidthProfile,oh=Na,ah=KJ()==="safari"&&GJ(),SY=0,Pb=!1,QO=!1;if(ah){var Ob=ah.major,kY=ah.minor;QO=Ob<12||Ob===12&&kY<1}var TY=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),xY=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function EY(t,e){if(typeof e>"u"&&(e={}),!Cb(e))return Ti.reject(wl.INVALID_TYPE("options","object"));var r=e.Log||wY,n=e.loggerName||hY,i=e.logLevel||fY,o=cY(i),a="[connect #".concat(++SY,"]"),s;try{s=new r("default",a,o,n)}catch(T){return Ti.reject(T)}Rb(e,s,TY);var c=e.preferredVideoCodecs==="auto";if(c&&(e.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),e.maxVideoBitrate&&c)return s.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),Ti.reject(wl.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));e=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,receiveTranscriptions:!1,environment:dY,eventListener:null,insights:!0,LocalAudioTrack:tY,LocalDataTrack:rY,LocalParticipant:XJ,LocalVideoTrack:nY,Log:r,MediaStreamTrack:qJ,loggerName:n,logLevel:i,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:pY,region:vY,signaling:aY},uY(e));var l={};typeof e.wsServerInsights=="string"&&(l.gateway=e.wsServerInsights);var u=e.insights?ZJ:eY,d=new u(t,gY,yY,e.environment,e.realm,l),h=mY(e.environment,e.region),f=Date.now(),y=new _Y(d,f,s,e.eventListener);if(e=Object.assign({eventObserver:y,wsServer:h},e),e.log=s,QO&&!Pb&&s.logLevel!=="error"&&s.logLevel!=="off"&&(Pb=!0,s.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),typeof t!="string")return Ti.reject(wl.INVALID_TYPE("token","string"));e.insights&&d&&oh.configure({publisher:d,log:s,connectTimestamp:f});var v=Object.assign({},e);if(delete v.name,"tracks"in e){if(!Array.isArray(e.tracks))return Ti.reject(wl.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{e.tracks=e.tracks.map(function(T){return sY(T,v)})}catch(T){return Ti.reject(T)}}var g=bY(e.bandwidthProfile);if(g)return Ti.reject(g);e.clientTrackSwitchOffControl="disabled",e.contentPreferencesMode="disabled",e.bandwidthProfile&&(e.clientTrackSwitchOffControl="auto",e.contentPreferencesMode="auto",e.bandwidthProfile.video&&(Rb(e.bandwidthProfile.video,s,xY),"maxTracks"in e.bandwidthProfile.video?e.clientTrackSwitchOffControl="disabled":e.bandwidthProfile.video.clientTrackSwitchOffControl==="manual"?e.clientTrackSwitchOffControl="manual":e.clientTrackSwitchOffControl="auto","renderDimensions"in e.bandwidthProfile.video?e.contentPreferencesMode="disabled":e.bandwidthProfile.video.contentPreferencesMode==="manual"?e.contentPreferencesMode="manual":e.contentPreferencesMode="auto"));var _=e.signaling,m=new _(e.wsServer,e);s.info("Connecting to a Room"),s.debug("Options:",e);var w=new YJ({maxAudioBitrate:e.maxAudioBitrate,maxVideoBitrate:e.maxVideoBitrate},c),S={audio:e.preferredAudioCodecs.map(jb),video:e.preferredVideoCodecs.map(jb)},k=new iY(Cb(e.networkQuality)?e.networkQuality:{});["audio","video"].forEach(function(T){return S[T].forEach(function(C){var O=C.codec;return QJ(O,T).then(function(A){return!A&&s.warn("The preferred ".concat(T,' codec "').concat(O,'" will be ignored as it is not supported by the browser.'))})})});var E=JJ(RY.bind(null,e),CY.bind(null,m,s,w,k,e),OY.bind(null,t,e,m,w,S),PY.bind(null,e));return E.then(function(T){d.connect(T.sid,T.localParticipant.sid);var C=lY(e);return e.eventObserver.emit("event",C),s.info("Connected to Room:",T.toString()),s.info("Room name:",T.name),s.debug("Room:",T),T.once("disconnected",function(){oh.reset(),d.disconnect()}),T},function(T){oh.reset(),d.disconnect(),E._isCanceled?s.info("Attempt to connect to a Room was canceled"):s.info("Error while connecting to a Room:",T)}),E}function Rb(t,e,r){r.forEach(function(n){var i=n.didWarn,o=n.name,a=n.newName,s=n.shouldDelete;o in t&&typeof t[o]<"u"&&(a&&s&&(t[a]=t[o]),s&&delete t[o],!i&&!["error","off"].includes(e.level)&&(e.warn('The ConnectOptions "'.concat(o,'" is ').concat(a?'deprecated and scheduled for removal. Please use "'.concat(a,'" instead.'):"no longer applicable and will be ignored.")),n.didWarn=!0))})}function CY(t,e,r,n,i,o){var a=t.createLocalParticipantSignaling(r,n);return e.debug("Creating a new LocalParticipant:",a),new i.LocalParticipant(a,o,i)}function PY(t,e,r){var n=new oY(e,r,t),i=t.log;return i.debug("Creating a new Room:",n),r.on("stateChanged",function o(a){a==="disconnected"&&(i.info("Disconnected from Room:",n.toString()),r.removeListener("stateChanged",o))}),n}function OY(t,e,r,n,i,o){return e.log.debug("Creating a new RoomSignaling"),r.connect(o._signaling,t,n,i,e)}function RY(t,e){var r=t.log;return t.shouldStopLocalTracks=!t.tracks,t.shouldStopLocalTracks?r.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(r.info("Getting LocalTracks"),r.debug("Options:",t)),t.createLocalTracks(t).then(function(i){var o=e(i);return o.catch(function(){t.shouldStopLocalTracks&&(r.info("The automatically acquired LocalTracks will now be stopped"),i.forEach(function(s){s.stop()}))}),o})}function jb(t){var e=typeof t=="string"?{codec:t}:t;switch(e.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},e);case"vp8":return Object.assign({simulcast:!1},e);default:return e}}var jY=EY,JO=Ee,AY=JO.DEFAULT_LOG_LEVEL,LY=JO.DEFAULT_LOGGER_NAME;function YO(t,e){e=Object.assign({loggerName:LY,logLevel:AY},e);var r={};r.loggerName=e.loggerName,r.logLevel=e.logLevel,delete e.loggerName,delete e.logLevel;var n=["getUserMedia","enumerateDevices","MediaStream","mapMediaElement","disposeMediaElement"];n.forEach(function(o){o in e&&(r[o]=e[o],delete e[o])});var i=e.createLocalTracks;return delete e.createLocalTracks,r[t]=Object.keys(e).length>0?e:!0,i(r).then(function(o){return o[0]})}function IY(t){return YO("audio",t)}function NY(t){return YO("video",t)}var Ab={audio:IY,video:NY},XO=be,MY=XO.guessBrowser,DY=XO.support,$Y=Lt.getSdpFormat,kc=fo,UY=kc.isAndroid,FY=kc.isMobile,BY=kc.isNonChromiumEdge,VY=kc.rebrandedChromeBrowser,zY=kc.mobileWebKitBrowser,WY=["crios","edg","edge","electron","headlesschrome"],HY=["chrome","firefox"],qY=["chrome","safari"],KY=["edg"];function GY(){var t=MY();if(!t)return!1;var e=VY(t),r=zY(t),n=UY()?HY:qY;return!!t&&DY()&&$Y()==="unified"&&(!e||WY.includes(e))&&!BY(t)&&(!r||KY.includes(r))&&(!FY()||n.includes(t))}var QY=GY,JY=$m.exports,Zs=x&&x.__assign||function(){return Zs=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Zs.apply(this,arguments)};Object.defineProperty(JY,"__esModule",{value:!0});var Rd=Um,YY=gc,mn={connect:jY,createLocalAudioTrack:Ab.audio,createLocalVideoTrack:Ab.video,isSupported:QY(),version:yE.version,Logger:gE,LocalAudioTrack:na.LocalAudioTrack,LocalDataTrack:na.LocalDataTrack,LocalVideoTrack:na.LocalVideoTrack};function XY(t,e){var r=Zs({createLocalTracks:Rd.createLocalTracks},e);return mn.connect(t,r)}function ZY(t){var e=Zs({createLocalTracks:Rd.createLocalTracks},t);return mn.createLocalAudioTrack(e)}function eX(t){var e=Zs({createLocalTracks:Rd.createLocalTracks},t);return mn.createLocalVideoTrack(e)}var tX=mn.isSupported,rX=mn.version,nX=mn.Logger,iX=mn.LocalAudioTrack,oX=mn.LocalVideoTrack,aX=mn.LocalDataTrack;$m.exports={connect:XY,createLocalAudioTrack:ZY,createLocalVideoTrack:eX,createLocalTracks:Rd.createLocalTracks,runPreflight:YY.runPreflight,isSupported:tX,version:rX,Logger:nX,LocalAudioTrack:iX,LocalVideoTrack:oX,LocalDataTrack:aX};var sX=$m.exports;const Lb=dv(sX);function cX({roomId:t,identity:e,onRemoteParticipantConnected:r,onRemoteParticipantDisconnected:n}){const[i,o]=b.useState(!1),[a,s]=b.useState(!0),[c,l]=b.useState(null),[u,d]=b.useState(null),[h,f]=b.useState(null),y=b.useRef(null),v=b.useRef(null),g=b.useCallback(async()=>{try{const T=await fetch(`${wa}/api/video-token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identity:e,roomName:t})});if(!T.ok)throw new Error("Failed to fetch video token");return(await T.json()).token}catch(T){throw console.error("Error fetching video token:",T),T}},[t,e]),_=b.useCallback(T=>{T.kind==="video"&&(console.log(" Remote video track subscribed"),d(T))},[]),m=b.useCallback(T=>{T.kind==="video"&&(console.log(" Remote video track unsubscribed"),d(null))},[]),w=b.useCallback(T=>{console.log(" Remote participant connected:",T.identity),T.tracks.forEach(C=>{C.isSubscribed&&C.track&&_(C.track)}),T.on("trackSubscribed",_),T.on("trackUnsubscribed",m),r==null||r(T)},[_,m,r]),S=b.useCallback(async()=>{if(y.current){console.log("Already connected to video room");return}try{f(null),console.log(" Connecting to Twilio Video room:",t);const T=await g(),C=await Lb.createLocalVideoTrack({width:640,height:480,frameRate:24});v.current=C,l(C);const O=await Lb.connect(T,{name:t,tracks:[C],dominantSpeaker:!0});y.current=O,o(!0),console.log(" Connected to Twilio Video room:",O.name),O.participants.forEach(w),O.on("participantConnected",w),O.on("participantDisconnected",A=>{console.log(" Remote participant disconnected:",A.identity),d(null),n==null||n(A)}),O.on("disconnected",()=>{console.log(" Disconnected from video room"),o(!1),d(null)})}catch(T){console.error("Failed to connect to video room:",T),f(T.message||"Failed to connect to video"),o(!1)}},[t,g,w,n]),k=b.useCallback(()=>{console.log(" Disconnecting from video room"),v.current&&(v.current.stop(),v.current=null,l(null)),y.current&&(y.current.disconnect(),y.current=null),o(!1),d(null)},[]),E=b.useCallback(()=>{v.current&&(a?(v.current.disable(),console.log(" Video disabled")):(v.current.enable(),console.log(" Video enabled")),s(!a))},[a]);return b.useEffect(()=>()=>{k()},[k]),{isConnected:i,isVideoOn:a,localVideoTrack:c,remoteVideoTrack:u,error:h,connect:S,disconnect:k,toggleVideo:E}}function Pg(){const[t,e]=b.useState(""),[r,n]=b.useState(!0);return b.useEffect(()=>{(async()=>{var a,s,c,l,u,d;try{const{data:{user:h}}=await vt.auth.getUser();if(console.log("useUsername: Fetched user:",h),console.log("useUsername: user_metadata:",h==null?void 0:h.user_metadata),h){const f=((a=h.user_metadata)==null?void 0:a.username)||((s=h.user_metadata)==null?void 0:s.full_name)||((c=h.user_metadata)!=null&&c.first_name&&((l=h.user_metadata)!=null&&l.last_name)?`${h.user_metadata.first_name} ${h.user_metadata.last_name}`:null)||((u=h.user_metadata)==null?void 0:u.first_name)||((d=h.email)==null?void 0:d.split("@")[0])||"User";console.log("useUsername: Resolved name:",f),e(f)}}catch(h){console.error("Error fetching username:",h)}finally{n(!1)}})();const{data:{subscription:o}}=vt.auth.onAuthStateChange(async(a,s)=>{var c,l,u;if(s!=null&&s.user){const d=((c=s.user.user_metadata)==null?void 0:c.username)||((l=s.user.user_metadata)==null?void 0:l.full_name)||((u=s.user.email)==null?void 0:u.split("@")[0])||"User";e(d)}});return()=>{o.unsubscribe()}},[]),{username:t,loading:r,setUsername:e}}function lX({level:t=0}){const e=[0,1,2,3,4];return p.jsx("div",{className:"flex items-end gap-1 h-6 w-16",children:e.map(r=>{const n=Math.max(3,Math.min(100,Math.round((t-r*12)*.8))),i=n>60?"bg-emerald-400":n>30?"bg-yellow-400":"bg-slate-500";return p.jsx("div",{className:`w-1 rounded-sm ${i}`,style:{height:`${n/2}%`,transition:"height 120ms linear"}},r)})})}const uX={en:"English",es:"Spanish",fr:"French",de:"German",pt:"Portuguese",it:"Italian",ru:"Russian",zh:"Chinese",ja:"Japanese",ko:"Korean",ar:"Arabic",hi:"Hindi",te:"Telugu",ta:"Tamil",bn:"Bengali",gu:"Gujarati",kn:"Kannada",ml:"Malayalam",mr:"Marathi",pa:"Punjabi",vi:"Vietnamese",th:"Thai",id:"Indonesian",ms:"Malay",fil:"Filipino",tr:"Turkish",nl:"Dutch",pl:"Polish",sv:"Swedish",da:"Danish",no:"Norwegian",fi:"Finnish",el:"Greek",cs:"Czech",ro:"Romanian",hu:"Hungarian",uk:"Ukrainian",he:"Hebrew",fa:"Persian",af:"Afrikaans"},dX={en:"",es:"",fr:"",de:"",pt:"",it:"",ru:"",zh:"",ja:"",ko:"",ar:"",hi:"",te:"",ta:"",bn:"",gu:"",kn:"",ml:"",mr:"",pa:"",vi:"",th:"",id:"",tr:"",nl:"",pl:""};function fX({name:t,isLocal:e=!1,muted:r=!1,level:n=0,language:i,videoTrack:o,isVideoOn:a=!0}){const s=b.useRef(null);b.useEffect(()=>{const y=s.current;if(!(!y||!o))return o.attach(y),console.log(" Video track attached to element"),()=>{o.detach(y),console.log(" Video track detached from element")}},[o]);const c=(i==null?void 0:i.split("-")[0])||"en",l=uX[c]||i||"Unknown",u=dX[c]||"",d=t.split(" ").map(y=>{var v;return(v=y[0])==null?void 0:v.toUpperCase()}).slice(0,2).join("")||"?",h=!r&&n>15,f=o&&a;return p.jsxs("div",{className:`
        relative rounded-2xl overflow-hidden 
        bg-gradient-to-br from-slate-800/90 to-slate-900/90
        border-2 transition-all duration-300
        ${h?"border-green-500 shadow-lg shadow-green-500/20":"border-slate-700/50"}
      `,children:[f?p.jsxs("div",{className:"aspect-video relative min-h-[200px]",children:[p.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,muted:e,className:`w-full h-full object-cover ${e?"scale-x-[-1]":""}`}),p.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2",children:[p.jsxs("span",{className:"bg-black/60 px-3 py-1 rounded-full text-white text-sm font-medium",children:[t," ",e&&"(You)"]}),p.jsx("span",{className:"bg-black/60 px-2 py-1 rounded-full text-sm",children:u})]})]}):p.jsxs("div",{className:"aspect-video flex flex-col items-center justify-center p-6 min-h-[200px]",children:[p.jsx("div",{className:`
              w-24 h-24 rounded-full flex items-center justify-center 
              text-3xl font-bold text-white mb-4
              transition-all duration-300
              ${e?"bg-gradient-to-br from-blue-500 to-indigo-600":"bg-gradient-to-br from-purple-500 to-pink-600"}
              ${h?"ring-4 ring-green-500/50 scale-105":""}
            `,children:d}),p.jsxs("h3",{className:"text-white text-xl font-semibold mb-1",children:[t,e&&p.jsx("span",{className:"text-blue-400 text-sm ml-2",children:"(You)"})]}),p.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[p.jsx("span",{className:"text-lg",children:u}),p.jsx("span",{className:"text-sm",children:l})]}),!a&&p.jsxs("div",{className:"mt-2 flex items-center gap-1 text-slate-400 text-sm",children:[p.jsx(Zk,{size:14}),p.jsx("span",{children:"Camera Off"})]})]}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:`
            flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium
            ${r?"bg-red-500/20 text-red-400":h?"bg-green-500/20 text-green-400":"bg-slate-700/50 text-slate-400"}
          `,children:r?p.jsxs(p.Fragment,{children:[p.jsx(Yk,{size:16}),p.jsx("span",{children:"Muted"})]}):p.jsxs(p.Fragment,{children:[p.jsx(dm,{size:16,className:h?"animate-pulse":""}),p.jsx("span",{children:h?"Speaking":"Ready"})]})}),p.jsx(lX,{level:n})]})}),h&&p.jsx("div",{className:"absolute inset-0 rounded-2xl border-2 border-green-500 animate-pulse pointer-events-none"})]})}function hX({isAudioOn:t,isSpeakerOn:e,isChatOpen:r,isVideoOn:n=!0,onToggleMute:i,onToggleSpeaker:o,onToggleChat:a,onToggleVideo:s,onEndCall:c}){return p.jsxs(p.Fragment,{children:[p.jsxs(me,{variant:t?"default":"destructive",onClick:i,className:"rounded-full px-4 py-3",children:[t?p.jsx(dm,{className:"mr-2"}):p.jsx(Yk,{className:"mr-2"})," ",t?"Mute":"Unmute"]}),s&&p.jsxs(me,{variant:n?"default":"destructive",onClick:s,className:"rounded-full px-4 py-3",children:[n?p.jsx(rd,{className:"mr-2"}):p.jsx(Zk,{className:"mr-2"})," ",n?"Video":"Video Off"]}),p.jsxs(me,{variant:"outline",onClick:o,className:"rounded-full px-4 py-3",children:[e?p.jsx(VL,{className:"mr-2"}):p.jsx(zL,{className:"mr-2"})," ",e?"Speaker":"Speaker Off"]}),p.jsxs(me,{variant:"destructive",onClick:c,className:"rounded-full px-6 py-3",children:[p.jsx(Xk,{className:"mr-2"})," End Call"]}),p.jsx("div",{className:"ml-4 flex gap-2",children:p.jsx(me,{variant:r?"secondary":"ghost",onClick:a,className:"rounded-full px-3 py-2",title:"Toggle Chat",children:p.jsx(LL,{})})})]})}function pX({transcripts:t,onClose:e,isTranslationOn:r,toggleTranslation:n}){const i=b.useRef(null);return b.useEffect(()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)},[t]),p.jsxs("div",{className:"h-full max-h-screen flex flex-col bg-slate-900 text-white overflow-hidden",children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-800 shrink-0",children:[p.jsx("div",{className:"text-lg font-semibold",children:"Live Translation"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(Dp,{variant:"secondary",children:r?"On":"Off"}),p.jsx(me,{variant:"ghost",size:"icon",onClick:e,children:p.jsx(fm,{size:18})})]})]}),p.jsxs("div",{ref:i,className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-0",children:[t.length===0&&p.jsx("div",{className:"text-slate-400 text-center py-8",children:"Start speaking to see translations..."}),t.map((o,a)=>{const s=o.userType===localStorage.getItem("role");return p.jsxs("div",{className:`p-3 rounded-2xl max-w-[85%] ${s?"ml-auto bg-gradient-to-r from-sky-600 to-indigo-600 text-white":"mr-auto bg-slate-800/80 text-white"}`,children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("span",{className:"text-xs font-medium opacity-80",children:s?"You":"Partner"}),p.jsxs(Dp,{variant:"outline",className:"text-[10px] px-1.5 py-0 h-4 border-white/30",children:[o.sourceLang,"  ",o.targetLang]})]}),p.jsx("div",{className:"text-xs opacity-70 italic mb-1",children:o.originalText}),p.jsx("div",{className:"text-sm font-medium",children:o.translatedText})]},a)})]}),p.jsx("div",{className:"p-3 border-t border-slate-800 shrink-0",children:p.jsx(me,{size:"sm",onClick:n,variant:r?"default":"outline",className:"w-full",children:r?"Pause Translation":"Resume Translation"})})]})}const vX=2e3;function mX(){const t=hn(),{roomId:e}=ix(),{username:r}=Pg(),n=localStorage.getItem("role")||"caller",i=localStorage.getItem("myLanguage")||"en",o=sessionStorage.getItem("meetingUsername")||r||"You",[a,s]=b.useState("Click Start to Join"),[c,l]=b.useState(!1),[u,d]=b.useState(!1),[h,f]=b.useState(!0),[y,v]=b.useState(!0),[g,_]=b.useState("Partner"),[m,w]=b.useState(null),[S,k]=b.useState(!1),{status:E,isConnected:T,isAudioOn:C,localLevel:O,partnerLevel:A,transcripts:N,interimText:j,connect:D,disconnect:P,toggleMute:M}=nF({roomId:e||"",userType:n,myLanguage:i,myName:o,onPartnerJoined:(q,te)=>{k(!0),_(q||"Partner"),w(te||null)},onPartnerLeft:()=>{k(!1)}}),{isVideoOn:I,localVideoTrack:$,remoteVideoTrack:R,connect:L,disconnect:B,toggleVideo:F}=cX({roomId:e||"",identity:o});b.useEffect(()=>{s(E)},[E]);const Q=b.useCallback(async()=>{try{if(!e)return;const q=await fetch(`${wa}/room-info?roomId=${e}`);if(q.status===404){z();return}const te=await q.json();k(!!te.participantLanguage),n==="caller"&&te.participantName?(_(te.participantName),w(te.participantLanguage||null)):n==="receiver"&&te.creatorName&&(_(te.creatorName),w(te.creatorLanguage||null))}catch(q){console.warn("room-info fetch failed",q)}},[e,n]);b.useEffect(()=>{if(!c)return;Q();const q=window.setInterval(Q,vX);return()=>window.clearInterval(q)},[c,Q]),b.useEffect(()=>{c&&n==="receiver"&&e&&pm(e,i).then(()=>console.log("Receiver joined room successfully")).catch(q=>console.error("joinRoom failed:",q))},[c,n,e,i]);const K=()=>{l(!0),Q(),D(),L()},z=async()=>{try{e&&await fetch(`${wa}/leave-room`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:e,userType:n})}).catch(console.warn),P(),B()}catch(q){console.warn("endCall error",q)}finally{k(!1),t("/rooms")}},W=()=>{f(q=>{const te=!q;return Array.from(document.querySelectorAll("audio")).forEach(ae=>{try{ae.volume=te?1:0}catch{}}),te})};b.useEffect(()=>()=>{P(),B()},[P,B]);const ee=N.map(q=>({originalText:q.originalText,translatedText:q.translatedText,userType:q.fromUser,sourceLang:q.fromLanguage,targetLang:q.toLanguage,timestamp:q.timestamp})),V=[{id:"you",name:o,isLocal:!0,muted:!C,level:O,language:i,videoTrack:$,isVideoOn:I},...S?[{id:"partner",name:g,isLocal:!1,muted:!1,level:A,language:m,videoTrack:R,isVideoOn:!0}]:[]];return c?p.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-900 text-white",children:[p.jsxs("header",{className:"flex items-center justify-between px-6 py-3 border-b border-slate-800 bg-slate-900",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-sky-500 to-indigo-600 flex items-center justify-center",children:p.jsx(td,{className:"w-5 h-5 text-white"})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-lg font-semibold",children:"PrimeTalker Meeting"}),p.jsxs("div",{className:"text-sm text-slate-400",children:["Room: ",e]})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx(Dp,{className:T?"bg-green-600":"bg-slate-800",children:a}),p.jsx(me,{variant:"ghost",onClick:()=>d(q=>!q),className:"text-slate-200",children:p.jsx(BL,{})})]})]}),p.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[p.jsxs("main",{className:"flex-1 p-6 overflow-y-auto",children:[p.jsx("div",{className:"max-w-[1200px] mx-auto grid grid-cols-1 md:grid-cols-2 gap-6",children:V.length===0?p.jsx("div",{className:"text-slate-400",children:"Waiting for participants..."}):V.map(q=>p.jsx(fX,{name:q.name,isLocal:q.isLocal,muted:q.muted,level:q.level,language:q.language||void 0,videoTrack:q.videoTrack,isVideoOn:q.isVideoOn},q.id))}),j&&p.jsxs("div",{className:"mt-4 text-center text-slate-400 italic",children:[j,"..."]}),!S&&p.jsx("div",{className:"mt-8 text-center text-slate-400",children:"Waiting for partner to join"})]}),u&&p.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>d(!1)}),p.jsx("aside",{className:`
            fixed md:relative inset-y-0 right-0 z-50
            w-full sm:w-80 md:w-96 
            max-h-screen md:max-h-full
            border-l border-slate-800 bg-slate-900 
            transition-transform duration-300 ease-in-out
            ${u?"translate-x-0":"translate-x-full"}
          `,children:p.jsx(pX,{transcripts:ee,onClose:()=>d(!1),isTranslationOn:y,toggleTranslation:()=>v(q=>!q)})})]}),p.jsx("div",{className:"fixed left-0 right-0 bottom-6 flex justify-center pointer-events-none",children:p.jsx("div",{className:"pointer-events-auto bg-slate-800/80 backdrop-blur rounded-3xl px-6 py-3 flex items-center gap-6 shadow-2xl border border-slate-700",children:p.jsx(hX,{isAudioOn:C,isSpeakerOn:h,isChatOpen:u,isVideoOn:I,onToggleMute:M,onToggleSpeaker:W,onToggleChat:()=>d(q=>!q),onToggleVideo:F,onEndCall:z})})})]}):p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white p-6",children:p.jsxs("div",{className:"max-w-xl w-full text-center space-y-6",children:[p.jsx("h1",{className:"text-3xl font-semibold",children:"Join Meeting"}),p.jsxs("p",{className:"text-slate-300",children:["Room: ",e,"  ",n,"  ",i]}),p.jsx("div",{className:"flex justify-center",children:p.jsx(me,{size:"lg",onClick:K,children:"Start Meeting"})}),p.jsx("p",{className:"text-slate-400 mt-2",children:a})]})})}const Et=b.forwardRef(({className:t,type:e,...r},n)=>p.jsx("input",{type:e,className:Le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Et.displayName="Input";var gX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yX=gX.reduce((t,e)=>{const r=ux(`Primitive.${e}`),n=b.forwardRef((i,o)=>{const{asChild:a,...s}=i,c=a?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(c,{...s,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),_X="Label",ZO=b.forwardRef((t,e)=>p.jsx(yX.label,{...t,ref:e,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));ZO.displayName=_X;var e1=ZO;const wX=ed("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Qe=b.forwardRef(({className:t,...e},r)=>p.jsx(e1,{ref:r,className:Le(wX(),t),...e}));Qe.displayName=e1.displayName;const Ki=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:Le("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ki.displayName="Card";const Gi=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:Le("flex flex-col space-y-1.5 p-6",t),...e}));Gi.displayName="CardHeader";const Qi=b.forwardRef(({className:t,...e},r)=>p.jsx("h3",{ref:r,className:Le("text-2xl font-semibold leading-none tracking-tight",t),...e}));Qi.displayName="CardTitle";const Ji=b.forwardRef(({className:t,...e},r)=>p.jsx("p",{ref:r,className:Le("text-sm text-muted-foreground",t),...e}));Ji.displayName="CardDescription";const Yi=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:Le("p-6 pt-0",t),...e}));Yi.displayName="CardContent";const bX=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:Le("flex items-center p-6 pt-0",t),...e}));bX.displayName="CardFooter";function Ib(t,[e,r]){return Math.min(r,Math.max(e,t))}var SX=b.createContext(void 0);function kX(t){const e=b.useContext(SX);return t||e||"ltr"}var sh=0;function TX(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Nb()),document.body.insertAdjacentElement("beforeend",t[1]??Nb()),sh++,()=>{sh===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),sh--}},[])}function Nb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ch="focusScope.autoFocusOnMount",lh="focusScope.autoFocusOnUnmount",Mb={bubbles:!1,cancelable:!0},xX="FocusScope",t1=b.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...a}=t,[s,c]=b.useState(null),l=kr(i),u=kr(o),d=b.useRef(null),h=ze(e,v=>c(v)),f=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(n){let v=function(w){if(f.paused||!s)return;const S=w.target;s.contains(S)?d.current=S:An(d.current,{select:!0})},g=function(w){if(f.paused||!s)return;const S=w.relatedTarget;S!==null&&(s.contains(S)||An(d.current,{select:!0}))},_=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&An(s)};document.addEventListener("focusin",v),document.addEventListener("focusout",g);const m=new MutationObserver(_);return s&&m.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",g),m.disconnect()}}},[n,s,f.paused]),b.useEffect(()=>{if(s){$b.add(f);const v=document.activeElement;if(!s.contains(v)){const _=new CustomEvent(ch,Mb);s.addEventListener(ch,l),s.dispatchEvent(_),_.defaultPrevented||(EX(jX(r1(s)),{select:!0}),document.activeElement===v&&An(s))}return()=>{s.removeEventListener(ch,l),setTimeout(()=>{const _=new CustomEvent(lh,Mb);s.addEventListener(lh,u),s.dispatchEvent(_),_.defaultPrevented||An(v??document.body,{select:!0}),s.removeEventListener(lh,u),$b.remove(f)},0)}}},[s,l,u,f]);const y=b.useCallback(v=>{if(!r&&!n||f.paused)return;const g=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,_=document.activeElement;if(g&&_){const m=v.currentTarget,[w,S]=CX(m);w&&S?!v.shiftKey&&_===S?(v.preventDefault(),r&&An(w,{select:!0})):v.shiftKey&&_===w&&(v.preventDefault(),r&&An(S,{select:!0})):_===m&&v.preventDefault()}},[r,n,f.paused]);return p.jsx(xe.div,{tabIndex:-1,...a,ref:h,onKeyDown:y})});t1.displayName=xX;function EX(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(An(n,{select:e}),document.activeElement!==r)return}function CX(t){const e=r1(t),r=Db(e,t),n=Db(e.reverse(),t);return[r,n]}function r1(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function Db(t,e){for(const r of t)if(!PX(r,{upTo:e}))return r}function PX(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function OX(t){return t instanceof HTMLInputElement&&"select"in t}function An(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&OX(t)&&e&&t.select()}}var $b=RX();function RX(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=Ub(t,e),t.unshift(e)},remove(e){var r;t=Ub(t,e),(r=t[0])==null||r.resume()}}}function Ub(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function jX(t){return t.filter(e=>e.tagName!=="A")}function AX(t){const e=LX(t),r=b.forwardRef((n,i)=>{const{children:o,...a}=n,s=b.Children.toArray(o),c=s.find(NX);if(c){const l=c.props.children,u=s.map(d=>d===c?b.Children.count(l)>1?b.Children.only(null):b.isValidElement(l)?l.props.children:null:d);return p.jsx(e,{...a,ref:i,children:b.isValidElement(l)?b.cloneElement(l,void 0,u):null})}return p.jsx(e,{...a,ref:i,children:o})});return r.displayName=`${t}.Slot`,r}function LX(t){const e=b.forwardRef((r,n)=>{const{children:i,...o}=r;if(b.isValidElement(i)){const a=DX(i),s=MX(o,i.props);return i.type!==b.Fragment&&(s.ref=n?cc(n,a):a),b.cloneElement(i,s)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var IX=Symbol("radix.slottable");function NX(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===IX}function MX(t,e){const r={...e};for(const n in e){const i=t[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...s)=>{const c=o(...s);return i(...s),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...t,...r}}function DX(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function $X(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var UX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Eo=new WeakMap,bl=new WeakMap,Sl={},uh=0,n1=function(t){return t&&(t.host||n1(t.parentNode))},FX=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=n1(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},BX=function(t,e,r,n){var i=FX(e,Array.isArray(t)?t:[t]);Sl[r]||(Sl[r]=new WeakMap);var o=Sl[r],a=[],s=new Set,c=new Set(i),l=function(d){!d||s.has(d)||(s.add(d),l(d.parentNode))};i.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(s.has(h))u(h);else try{var f=h.getAttribute(n),y=f!==null&&f!=="false",v=(Eo.get(h)||0)+1,g=(o.get(h)||0)+1;Eo.set(h,v),o.set(h,g),a.push(h),v===1&&y&&bl.set(h,!0),g===1&&h.setAttribute(r,"true"),y||h.setAttribute(n,"true")}catch(_){console.error("aria-hidden: cannot operate on ",h,_)}})};return u(e),s.clear(),uh++,function(){a.forEach(function(d){var h=Eo.get(d)-1,f=o.get(d)-1;Eo.set(d,h),o.set(d,f),h||(bl.has(d)||d.removeAttribute(n),bl.delete(d)),f||d.removeAttribute(r)}),uh--,uh||(Eo=new WeakMap,Eo=new WeakMap,bl=new WeakMap,Sl={})}},VX=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=UX(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),BX(n,i,r,"aria-hidden")):function(){return null}},Hl="right-scroll-bar-position",ql="width-before-scroll-bar",zX="with-scroll-bars-hidden",WX="--removed-body-scroll-bar-size";function dh(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function HX(t,e){var r=b.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var qX=typeof window<"u"?b.useLayoutEffect:b.useEffect,Fb=new WeakMap;function KX(t,e){var r=HX(null,function(n){return t.forEach(function(i){return dh(i,n)})});return qX(function(){var n=Fb.get(r);if(n){var i=new Set(n),o=new Set(t),a=r.current;i.forEach(function(s){o.has(s)||dh(s,null)}),o.forEach(function(s){i.has(s)||dh(s,a)})}Fb.set(r,t)},[t]),r}function GX(t){return t}function QX(t,e){e===void 0&&(e=GX);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(o){var a=e(o,n);return r.push(a),function(){r=r.filter(function(s){return s!==a})}},assignSyncMedium:function(o){for(n=!0;r.length;){var a=r;r=[],a.forEach(o)}r={push:function(s){return o(s)},filter:function(){return r}}},assignMedium:function(o){n=!0;var a=[];if(r.length){var s=r;r=[],s.forEach(o),a=r}var c=function(){var u=a;a=[],u.forEach(o)},l=function(){return Promise.resolve().then(c)};l(),r={push:function(u){a.push(u),l()},filter:function(u){return a=a.filter(u),r}}}};return i}function JX(t){t===void 0&&(t={});var e=QX(null);return e.options=Jt({async:!0,ssr:!1},t),e}var i1=function(t){var e=t.sideCar,r=ui(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return b.createElement(n,Jt({},r))};i1.isSideCarExport=!0;function YX(t,e){return t.useMedium(e),i1}var o1=JX(),fh=function(){},jd=b.forwardRef(function(t,e){var r=b.useRef(null),n=b.useState({onScrollCapture:fh,onWheelCapture:fh,onTouchMoveCapture:fh}),i=n[0],o=n[1],a=t.forwardProps,s=t.children,c=t.className,l=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,f=t.noRelative,y=t.noIsolation,v=t.inert,g=t.allowPinchZoom,_=t.as,m=_===void 0?"div":_,w=t.gapMode,S=ui(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=h,E=KX([r,e]),T=Jt(Jt({},S),i);return b.createElement(b.Fragment,null,u&&b.createElement(k,{sideCar:o1,removeScrollBar:l,shards:d,noRelative:f,noIsolation:y,inert:v,setCallbacks:o,allowPinchZoom:!!g,lockRef:r,gapMode:w}),a?b.cloneElement(b.Children.only(s),Jt(Jt({},T),{ref:E})):b.createElement(m,Jt({},T,{className:c,ref:E}),s))});jd.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};jd.classNames={fullWidth:ql,zeroRight:Hl};var XX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ZX(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=XX();return e&&t.setAttribute("nonce",e),t}function eZ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function tZ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var rZ=function(){var t=0,e=null;return{add:function(r){t==0&&(e=ZX())&&(eZ(e,r),tZ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},nZ=function(){var t=rZ();return function(e,r){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},a1=function(){var t=nZ(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},iZ={left:0,top:0,right:0,gap:0},hh=function(t){return parseInt(t||"",10)||0},oZ=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[hh(r),hh(n),hh(i)]},aZ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return iZ;var e=oZ(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},sZ=a1(),ia="data-scroll-locked",cZ=function(t,e,r,n){var i=t.left,o=t.top,a=t.right,s=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(zX,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(s,"px ").concat(n,`;
  }
  body[`).concat(ia,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Hl,` {
    right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(ql,` {
    margin-right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(Hl," .").concat(Hl,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(ql," .").concat(ql,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(ia,`] {
    `).concat(WX,": ").concat(s,`px;
  }
`)},Bb=function(){var t=parseInt(document.body.getAttribute(ia)||"0",10);return isFinite(t)?t:0},lZ=function(){b.useEffect(function(){return document.body.setAttribute(ia,(Bb()+1).toString()),function(){var t=Bb()-1;t<=0?document.body.removeAttribute(ia):document.body.setAttribute(ia,t.toString())}},[])},uZ=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;lZ();var o=b.useMemo(function(){return aZ(i)},[i]);return b.createElement(sZ,{styles:cZ(o,!e,i,r?"":"!important")})},tv=!1;if(typeof window<"u")try{var kl=Object.defineProperty({},"passive",{get:function(){return tv=!0,!0}});window.addEventListener("test",kl,kl),window.removeEventListener("test",kl,kl)}catch{tv=!1}var Co=tv?{passive:!1}:!1,dZ=function(t){return t.tagName==="TEXTAREA"},s1=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!dZ(t)&&r[e]==="visible")},fZ=function(t){return s1(t,"overflowY")},hZ=function(t){return s1(t,"overflowX")},Vb=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=c1(t,n);if(i){var o=l1(t,n),a=o[1],s=o[2];if(a>s)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},pZ=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},vZ=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},c1=function(t,e){return t==="v"?fZ(e):hZ(e)},l1=function(t,e){return t==="v"?pZ(e):vZ(e)},mZ=function(t,e){return t==="h"&&e==="rtl"?-1:1},gZ=function(t,e,r,n,i){var o=mZ(t,window.getComputedStyle(e).direction),a=o*n,s=r.target,c=e.contains(s),l=!1,u=a>0,d=0,h=0;do{if(!s)break;var f=l1(t,s),y=f[0],v=f[1],g=f[2],_=v-g-o*y;(y||_)&&c1(t,s)&&(d+=_,h+=y);var m=s.parentNode;s=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!c&&s!==document.body||c&&(e.contains(s)||e===s));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(l=!0),l},Tl=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},zb=function(t){return[t.deltaX,t.deltaY]},Wb=function(t){return t&&"current"in t?t.current:t},yZ=function(t,e){return t[0]===e[0]&&t[1]===e[1]},_Z=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},wZ=0,Po=[];function bZ(t){var e=b.useRef([]),r=b.useRef([0,0]),n=b.useRef(),i=b.useState(wZ++)[0],o=b.useState(a1)[0],a=b.useRef(t);b.useEffect(function(){a.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=Rm([t.lockRef.current],(t.shards||[]).map(Wb),!0).filter(Boolean);return v.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var s=b.useCallback(function(v,g){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var _=Tl(v),m=r.current,w="deltaX"in v?v.deltaX:m[0]-_[0],S="deltaY"in v?v.deltaY:m[1]-_[1],k,E=v.target,T=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in v&&T==="h"&&E.type==="range")return!1;var C=window.getSelection(),O=C&&C.anchorNode,A=O?O===E||O.contains(E):!1;if(A)return!1;var N=Vb(T,E);if(!N)return!0;if(N?k=T:(k=T==="v"?"h":"v",N=Vb(T,E)),!N)return!1;if(!n.current&&"changedTouches"in v&&(w||S)&&(n.current=k),!k)return!0;var j=n.current||k;return gZ(j,g,v,j==="h"?w:S)},[]),c=b.useCallback(function(v){var g=v;if(!(!Po.length||Po[Po.length-1]!==o)){var _="deltaY"in g?zb(g):Tl(g),m=e.current.filter(function(k){return k.name===g.type&&(k.target===g.target||g.target===k.shadowParent)&&yZ(k.delta,_)})[0];if(m&&m.should){g.cancelable&&g.preventDefault();return}if(!m){var w=(a.current.shards||[]).map(Wb).filter(Boolean).filter(function(k){return k.contains(g.target)}),S=w.length>0?s(g,w[0]):!a.current.noIsolation;S&&g.cancelable&&g.preventDefault()}}},[]),l=b.useCallback(function(v,g,_,m){var w={name:v,delta:g,target:_,should:m,shadowParent:SZ(_)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),u=b.useCallback(function(v){r.current=Tl(v),n.current=void 0},[]),d=b.useCallback(function(v){l(v.type,zb(v),v.target,s(v,t.lockRef.current))},[]),h=b.useCallback(function(v){l(v.type,Tl(v),v.target,s(v,t.lockRef.current))},[]);b.useEffect(function(){return Po.push(o),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Co),document.addEventListener("touchmove",c,Co),document.addEventListener("touchstart",u,Co),function(){Po=Po.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,Co),document.removeEventListener("touchmove",c,Co),document.removeEventListener("touchstart",u,Co)}},[]);var f=t.removeScrollBar,y=t.inert;return b.createElement(b.Fragment,null,y?b.createElement(o,{styles:_Z(i)}):null,f?b.createElement(uZ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function SZ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const kZ=YX(o1,bZ);var u1=b.forwardRef(function(t,e){return b.createElement(jd,Jt({},t,{ref:e,sideCar:kZ}))});u1.classNames=jd.classNames;var TZ=[" ","Enter","ArrowUp","ArrowDown"],xZ=[" ","Enter"],oo="Select",[Ad,Ld,EZ]=_k(oo),[Fa]=lc(oo,[EZ,sd]),Id=sd(),[CZ,fi]=Fa(oo),[PZ,OZ]=Fa(oo),d1=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:i,onOpenChange:o,value:a,defaultValue:s,onValueChange:c,dir:l,name:u,autoComplete:d,disabled:h,required:f,form:y}=t,v=Id(e),[g,_]=b.useState(null),[m,w]=b.useState(null),[S,k]=b.useState(!1),E=kX(l),[T,C]=sp({prop:n,defaultProp:i??!1,onChange:o,caller:oo}),[O,A]=sp({prop:a,defaultProp:s,onChange:c,caller:oo}),N=b.useRef(null),j=g?y||!!g.closest("form"):!0,[D,P]=b.useState(new Set),M=Array.from(D).map(I=>I.props.value).join(";");return p.jsx(EM,{...v,children:p.jsxs(CZ,{required:f,scope:e,trigger:g,onTriggerChange:_,valueNode:m,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:k,contentId:vm(),value:O,onValueChange:A,open:T,onOpenChange:C,dir:E,triggerPointerDownPosRef:N,disabled:h,children:[p.jsx(Ad.Provider,{scope:e,children:p.jsx(PZ,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(I=>{P($=>new Set($).add(I))},[]),onNativeOptionRemove:b.useCallback(I=>{P($=>{const R=new Set($);return R.delete(I),R})},[]),children:r})}),j?p.jsxs(N1,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:d,value:O,onChange:I=>A(I.target.value),disabled:h,form:y,children:[O===void 0?p.jsx("option",{value:""}):null,Array.from(D)]},M):null]})})};d1.displayName=oo;var f1="SelectTrigger",h1=b.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...i}=t,o=Id(r),a=fi(f1,r),s=a.disabled||n,c=ze(e,a.onTriggerChange),l=Ld(r),u=b.useRef("touch"),[d,h,f]=D1(v=>{const g=l().filter(w=>!w.disabled),_=g.find(w=>w.value===a.value),m=$1(g,v,_);m!==void 0&&a.onValueChange(m.value)}),y=v=>{s||(a.onOpenChange(!0),f()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return p.jsx(AT,{asChild:!0,...o,children:p.jsx(xe.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":M1(a.value)?"":void 0,...i,ref:c,onClick:pe(i.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&y(v)}),onPointerDown:pe(i.onPointerDown,v=>{u.current=v.pointerType;const g=v.target;g.hasPointerCapture(v.pointerId)&&g.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(y(v),v.preventDefault())}),onKeyDown:pe(i.onKeyDown,v=>{const g=d.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(g&&v.key===" ")&&TZ.includes(v.key)&&(y(),v.preventDefault())})})})});h1.displayName=f1;var p1="SelectValue",v1=b.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,children:o,placeholder:a="",...s}=t,c=fi(p1,r),{onValueNodeHasChildrenChange:l}=c,u=o!==void 0,d=ze(e,c.onValueNodeChange);return at(()=>{l(u)},[l,u]),p.jsx(xe.span,{...s,ref:d,style:{pointerEvents:"none"},children:M1(c.value)?p.jsx(p.Fragment,{children:a}):o})});v1.displayName=p1;var RZ="SelectIcon",m1=b.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...i}=t;return p.jsx(xe.span,{"aria-hidden":!0,...i,ref:e,children:n||""})});m1.displayName=RZ;var jZ="SelectPortal",g1=t=>p.jsx(am,{asChild:!0,...t});g1.displayName=jZ;var ao="SelectContent",y1=b.forwardRef((t,e)=>{const r=fi(ao,t.__scopeSelect),[n,i]=b.useState();if(at(()=>{i(new DocumentFragment)},[]),!r.open){const o=n;return o?lo.createPortal(p.jsx(_1,{scope:t.__scopeSelect,children:p.jsx(Ad.Slot,{scope:t.__scopeSelect,children:p.jsx("div",{children:t.children})})}),o):null}return p.jsx(w1,{...t,ref:e})});y1.displayName=ao;var ur=10,[_1,hi]=Fa(ao),AZ="SelectContentImpl",LZ=AX("SelectContent.RemoveScroll"),w1=b.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:a,side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:y,hideWhenDetached:v,avoidCollisions:g,..._}=t,m=fi(ao,r),[w,S]=b.useState(null),[k,E]=b.useState(null),T=ze(e,V=>S(V)),[C,O]=b.useState(null),[A,N]=b.useState(null),j=Ld(r),[D,P]=b.useState(!1),M=b.useRef(!1);b.useEffect(()=>{if(w)return VX(w)},[w]),TX();const I=b.useCallback(V=>{const[q,...te]=j().map(ue=>ue.ref.current),[ce]=te.slice(-1),ae=document.activeElement;for(const ue of V)if(ue===ae||(ue==null||ue.scrollIntoView({block:"nearest"}),ue===q&&k&&(k.scrollTop=0),ue===ce&&k&&(k.scrollTop=k.scrollHeight),ue==null||ue.focus(),document.activeElement!==ae))return},[j,k]),$=b.useCallback(()=>I([C,w]),[I,C,w]);b.useEffect(()=>{D&&$()},[D,$]);const{onOpenChange:R,triggerPointerDownPosRef:L}=m;b.useEffect(()=>{if(w){let V={x:0,y:0};const q=ce=>{var ae,ue;V={x:Math.abs(Math.round(ce.pageX)-(((ae=L.current)==null?void 0:ae.x)??0)),y:Math.abs(Math.round(ce.pageY)-(((ue=L.current)==null?void 0:ue.y)??0))}},te=ce=>{V.x<=10&&V.y<=10?ce.preventDefault():w.contains(ce.target)||R(!1),document.removeEventListener("pointermove",q),L.current=null};return L.current!==null&&(document.addEventListener("pointermove",q),document.addEventListener("pointerup",te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",te,{capture:!0})}}},[w,R,L]),b.useEffect(()=>{const V=()=>R(!1);return window.addEventListener("blur",V),window.addEventListener("resize",V),()=>{window.removeEventListener("blur",V),window.removeEventListener("resize",V)}},[R]);const[B,F]=D1(V=>{const q=j().filter(ae=>!ae.disabled),te=q.find(ae=>ae.ref.current===document.activeElement),ce=$1(q,V,te);ce&&setTimeout(()=>ce.ref.current.focus())}),Q=b.useCallback((V,q,te)=>{const ce=!M.current&&!te;(m.value!==void 0&&m.value===q||ce)&&(O(V),ce&&(M.current=!0))},[m.value]),K=b.useCallback(()=>w==null?void 0:w.focus(),[w]),z=b.useCallback((V,q,te)=>{const ce=!M.current&&!te;(m.value!==void 0&&m.value===q||ce)&&N(V)},[m.value]),W=n==="popper"?rv:b1,ee=W===rv?{side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:y,hideWhenDetached:v,avoidCollisions:g}:{};return p.jsx(_1,{scope:r,content:w,viewport:k,onViewportChange:E,itemRefCallback:Q,selectedItem:C,onItemLeave:K,itemTextRefCallback:z,focusSelectedItem:$,selectedItemText:A,position:n,isPositioned:D,searchRef:B,children:p.jsx(u1,{as:LZ,allowPinchZoom:!0,children:p.jsx(t1,{asChild:!0,trapped:m.open,onMountAutoFocus:V=>{V.preventDefault()},onUnmountAutoFocus:pe(i,V=>{var q;(q=m.trigger)==null||q.focus({preventScroll:!0}),V.preventDefault()}),children:p.jsx(Yu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:V=>V.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:p.jsx(W,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:V=>V.preventDefault(),..._,...ee,onPlaced:()=>P(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:pe(_.onKeyDown,V=>{const q=V.ctrlKey||V.altKey||V.metaKey;if(V.key==="Tab"&&V.preventDefault(),!q&&V.key.length===1&&F(V.key),["ArrowUp","ArrowDown","Home","End"].includes(V.key)){let ce=j().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);if(["ArrowUp","End"].includes(V.key)&&(ce=ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(V.key)){const ae=V.target,ue=ce.indexOf(ae);ce=ce.slice(ue+1)}setTimeout(()=>I(ce)),V.preventDefault()}})})})})})})});w1.displayName=AZ;var IZ="SelectItemAlignedPosition",b1=b.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...i}=t,o=fi(ao,r),a=hi(ao,r),[s,c]=b.useState(null),[l,u]=b.useState(null),d=ze(e,T=>u(T)),h=Ld(r),f=b.useRef(!1),y=b.useRef(!0),{viewport:v,selectedItem:g,selectedItemText:_,focusSelectedItem:m}=a,w=b.useCallback(()=>{if(o.trigger&&o.valueNode&&s&&l&&v&&g&&_){const T=o.trigger.getBoundingClientRect(),C=l.getBoundingClientRect(),O=o.valueNode.getBoundingClientRect(),A=_.getBoundingClientRect();if(o.dir!=="rtl"){const ae=A.left-C.left,ue=O.left-ae,ge=T.left-ue,Oe=T.width+ge,Xe=Math.max(Oe,C.width),ft=window.innerWidth-ur,Fe=Ib(ue,[ur,Math.max(ur,ft-Xe)]);s.style.minWidth=Oe+"px",s.style.left=Fe+"px"}else{const ae=C.right-A.right,ue=window.innerWidth-O.right-ae,ge=window.innerWidth-T.right-ue,Oe=T.width+ge,Xe=Math.max(Oe,C.width),ft=window.innerWidth-ur,Fe=Ib(ue,[ur,Math.max(ur,ft-Xe)]);s.style.minWidth=Oe+"px",s.style.right=Fe+"px"}const N=h(),j=window.innerHeight-ur*2,D=v.scrollHeight,P=window.getComputedStyle(l),M=parseInt(P.borderTopWidth,10),I=parseInt(P.paddingTop,10),$=parseInt(P.borderBottomWidth,10),R=parseInt(P.paddingBottom,10),L=M+I+D+R+$,B=Math.min(g.offsetHeight*5,L),F=window.getComputedStyle(v),Q=parseInt(F.paddingTop,10),K=parseInt(F.paddingBottom,10),z=T.top+T.height/2-ur,W=j-z,ee=g.offsetHeight/2,V=g.offsetTop+ee,q=M+I+V,te=L-q;if(q<=z){const ae=N.length>0&&g===N[N.length-1].ref.current;s.style.bottom="0px";const ue=l.clientHeight-v.offsetTop-v.offsetHeight,ge=Math.max(W,ee+(ae?K:0)+ue+$),Oe=q+ge;s.style.height=Oe+"px"}else{const ae=N.length>0&&g===N[0].ref.current;s.style.top="0px";const ge=Math.max(z,M+v.offsetTop+(ae?Q:0)+ee)+te;s.style.height=ge+"px",v.scrollTop=q-z+v.offsetTop}s.style.margin=`${ur}px 0`,s.style.minHeight=B+"px",s.style.maxHeight=j+"px",n==null||n(),requestAnimationFrame(()=>f.current=!0)}},[h,o.trigger,o.valueNode,s,l,v,g,_,o.dir,n]);at(()=>w(),[w]);const[S,k]=b.useState();at(()=>{l&&k(window.getComputedStyle(l).zIndex)},[l]);const E=b.useCallback(T=>{T&&y.current===!0&&(w(),m==null||m(),y.current=!1)},[w,m]);return p.jsx(MZ,{scope:r,contentWrapper:s,shouldExpandOnScrollRef:f,onScrollButtonChange:E,children:p.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:p.jsx(xe.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});b1.displayName=IZ;var NZ="SelectPopperPosition",rv=b.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=ur,...o}=t,a=Id(r);return p.jsx(LT,{...a,...o,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});rv.displayName=NZ;var[MZ,Og]=Fa(ao,{}),nv="SelectViewport",S1=b.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...i}=t,o=hi(nv,r),a=Og(nv,r),s=ze(e,o.onViewportChange),c=b.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),p.jsx(Ad.Slot,{scope:r,children:p.jsx(xe.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:pe(i.onScroll,l=>{const u=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&d){const f=Math.abs(c.current-u.scrollTop);if(f>0){const y=window.innerHeight-ur*2,v=parseFloat(d.style.minHeight),g=parseFloat(d.style.height),_=Math.max(v,g);if(_<y){const m=_+f,w=Math.min(y,m),S=m-w;d.style.height=w+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});S1.displayName=nv;var k1="SelectGroup",[DZ,$Z]=Fa(k1),UZ=b.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=vm();return p.jsx(DZ,{scope:r,id:i,children:p.jsx(xe.div,{role:"group","aria-labelledby":i,...n,ref:e})})});UZ.displayName=k1;var T1="SelectLabel",x1=b.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=$Z(T1,r);return p.jsx(xe.div,{id:i.id,...n,ref:e})});x1.displayName=T1;var Au="SelectItem",[FZ,E1]=Fa(Au),C1=b.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:o,...a}=t,s=fi(Au,r),c=hi(Au,r),l=s.value===n,[u,d]=b.useState(o??""),[h,f]=b.useState(!1),y=ze(e,m=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,m,n,i)}),v=vm(),g=b.useRef("touch"),_=()=>{i||(s.onValueChange(n),s.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(FZ,{scope:r,value:n,disabled:i,textId:v,isSelected:l,onItemTextChange:b.useCallback(m=>{d(w=>w||((m==null?void 0:m.textContent)??"").trim())},[]),children:p.jsx(Ad.ItemSlot,{scope:r,value:n,disabled:i,textValue:u,children:p.jsx(xe.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":l&&h,"data-state":l?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:y,onFocus:pe(a.onFocus,()=>f(!0)),onBlur:pe(a.onBlur,()=>f(!1)),onClick:pe(a.onClick,()=>{g.current!=="mouse"&&_()}),onPointerUp:pe(a.onPointerUp,()=>{g.current==="mouse"&&_()}),onPointerDown:pe(a.onPointerDown,m=>{g.current=m.pointerType}),onPointerMove:pe(a.onPointerMove,m=>{var w;g.current=m.pointerType,i?(w=c.onItemLeave)==null||w.call(c):g.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(a.onPointerLeave,m=>{var w;m.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:pe(a.onKeyDown,m=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&m.key===" "||(xZ.includes(m.key)&&_(),m.key===" "&&m.preventDefault())})})})})});C1.displayName=Au;var cs="SelectItemText",P1=b.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,...o}=t,a=fi(cs,r),s=hi(cs,r),c=E1(cs,r),l=OZ(cs,r),[u,d]=b.useState(null),h=ze(e,_=>d(_),c.onItemTextChange,_=>{var m;return(m=s.itemTextRefCallback)==null?void 0:m.call(s,_,c.value,c.disabled)}),f=u==null?void 0:u.textContent,y=b.useMemo(()=>p.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:v,onNativeOptionRemove:g}=l;return at(()=>(v(y),()=>g(y)),[v,g,y]),p.jsxs(p.Fragment,{children:[p.jsx(xe.span,{id:c.textId,...o,ref:h}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?lo.createPortal(o.children,a.valueNode):null]})});P1.displayName=cs;var O1="SelectItemIndicator",R1=b.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return E1(O1,r).isSelected?p.jsx(xe.span,{"aria-hidden":!0,...n,ref:e}):null});R1.displayName=O1;var iv="SelectScrollUpButton",j1=b.forwardRef((t,e)=>{const r=hi(iv,t.__scopeSelect),n=Og(iv,t.__scopeSelect),[i,o]=b.useState(!1),a=ze(e,n.onScrollButtonChange);return at(()=>{if(r.viewport&&r.isPositioned){let s=function(){const l=c.scrollTop>0;o(l)};const c=r.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[r.viewport,r.isPositioned]),i?p.jsx(L1,{...t,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=r;s&&c&&(s.scrollTop=s.scrollTop-c.offsetHeight)}}):null});j1.displayName=iv;var ov="SelectScrollDownButton",A1=b.forwardRef((t,e)=>{const r=hi(ov,t.__scopeSelect),n=Og(ov,t.__scopeSelect),[i,o]=b.useState(!1),a=ze(e,n.onScrollButtonChange);return at(()=>{if(r.viewport&&r.isPositioned){let s=function(){const l=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<l;o(u)};const c=r.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[r.viewport,r.isPositioned]),i?p.jsx(L1,{...t,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=r;s&&c&&(s.scrollTop=s.scrollTop+c.offsetHeight)}}):null});A1.displayName=ov;var L1=b.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=t,o=hi("SelectScrollButton",r),a=b.useRef(null),s=Ld(r),c=b.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),at(()=>{var u;const l=s().find(d=>d.ref.current===document.activeElement);(u=l==null?void 0:l.ref.current)==null||u.scrollIntoView({block:"nearest"})},[s]),p.jsx(xe.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:pe(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:pe(i.onPointerMove,()=>{var l;(l=o.onItemLeave)==null||l.call(o),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:pe(i.onPointerLeave,()=>{c()})})}),BZ="SelectSeparator",I1=b.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return p.jsx(xe.div,{"aria-hidden":!0,...n,ref:e})});I1.displayName=BZ;var av="SelectArrow",VZ=b.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=Id(r),o=fi(av,r),a=hi(av,r);return o.open&&a.position==="popper"?p.jsx(IT,{...i,...n,ref:e}):null});VZ.displayName=av;var zZ="SelectBubbleInput",N1=b.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const i=b.useRef(null),o=ze(n,i),a=$X(e);return b.useEffect(()=>{const s=i.current;if(!s)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&u){const d=new Event("change",{bubbles:!0});u.call(s,e),s.dispatchEvent(d)}},[a,e]),p.jsx(xe.select,{...r,style:{...Tk,...r.style},ref:o,defaultValue:e})});N1.displayName=zZ;function M1(t){return t===""||t===void 0}function D1(t){const e=kr(t),r=b.useRef(""),n=b.useRef(0),i=b.useCallback(a=>{const s=r.current+a;e(s),function c(l){r.current=l,window.clearTimeout(n.current),l!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(s)},[e]),o=b.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,o]}function $1(t,e,r){const i=e.length>1&&Array.from(e).every(l=>l===e[0])?e[0]:e,o=r?t.indexOf(r):-1;let a=WZ(t,Math.max(o,0));i.length===1&&(a=a.filter(l=>l!==r));const c=a.find(l=>l.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function WZ(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var HZ=d1,U1=h1,qZ=v1,KZ=m1,GZ=g1,F1=y1,QZ=S1,B1=x1,V1=C1,JZ=P1,YZ=R1,z1=j1,W1=A1,H1=I1;const Hb=HZ,qb=qZ,sv=b.forwardRef(({className:t,children:e,...r},n)=>p.jsxs(U1,{ref:n,className:Le("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,p.jsx(KZ,{asChild:!0,children:p.jsx(Gk,{className:"h-4 w-4 opacity-50"})})]}));sv.displayName=U1.displayName;const q1=b.forwardRef(({className:t,...e},r)=>p.jsx(z1,{ref:r,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:p.jsx(CL,{className:"h-4 w-4"})}));q1.displayName=z1.displayName;const K1=b.forwardRef(({className:t,...e},r)=>p.jsx(W1,{ref:r,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:p.jsx(Gk,{className:"h-4 w-4"})}));K1.displayName=W1.displayName;const cv=b.forwardRef(({className:t,children:e,position:r="popper",...n},i)=>p.jsx(GZ,{children:p.jsxs(F1,{ref:i,className:Le("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[p.jsx(q1,{}),p.jsx(QZ,{className:Le("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),p.jsx(K1,{})]})}));cv.displayName=F1.displayName;const XZ=b.forwardRef(({className:t,...e},r)=>p.jsx(B1,{ref:r,className:Le("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));XZ.displayName=B1.displayName;const lv=b.forwardRef(({className:t,children:e,...r},n)=>p.jsxs(V1,{ref:n,className:Le("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(YZ,{children:p.jsx(dp,{className:"h-4 w-4"})})}),p.jsx(JZ,{children:e})]}));lv.displayName=V1.displayName;const ZZ=b.forwardRef(({className:t,...e},r)=>p.jsx(H1,{ref:r,className:Le("-mx-1 my-1 h-px bg-muted",t),...e}));ZZ.displayName=H1.displayName;const Kb=[{code:"IN",name:"India"},{code:"US",name:"United States"},{code:"GB",name:"United Kingdom"},{code:"CA",name:"Canada"},{code:"AU",name:"Australia"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"JP",name:"Japan"},{code:"CN",name:"China"},{code:"BR",name:"Brazil"},{code:"AE",name:"United Arab Emirates"},{code:"SG",name:"Singapore"},{code:"NL",name:"Netherlands"},{code:"IT",name:"Italy"},{code:"ES",name:"Spain"},{code:"MX",name:"Mexico"},{code:"ZA",name:"South Africa"},{code:"KR",name:"South Korea"},{code:"RU",name:"Russia"},{code:"SA",name:"Saudi Arabia"}],eee=[{code:"AP",name:"Andhra Pradesh",countryCode:"IN"},{code:"AR",name:"Arunachal Pradesh",countryCode:"IN"},{code:"AS",name:"Assam",countryCode:"IN"},{code:"BR",name:"Bihar",countryCode:"IN"},{code:"CT",name:"Chhattisgarh",countryCode:"IN"},{code:"GA",name:"Goa",countryCode:"IN"},{code:"GJ",name:"Gujarat",countryCode:"IN"},{code:"HR",name:"Haryana",countryCode:"IN"},{code:"HP",name:"Himachal Pradesh",countryCode:"IN"},{code:"JH",name:"Jharkhand",countryCode:"IN"},{code:"KA",name:"Karnataka",countryCode:"IN"},{code:"KL",name:"Kerala",countryCode:"IN"},{code:"MP",name:"Madhya Pradesh",countryCode:"IN"},{code:"MH",name:"Maharashtra",countryCode:"IN"},{code:"MN",name:"Manipur",countryCode:"IN"},{code:"ML",name:"Meghalaya",countryCode:"IN"},{code:"MZ",name:"Mizoram",countryCode:"IN"},{code:"NL",name:"Nagaland",countryCode:"IN"},{code:"OR",name:"Odisha",countryCode:"IN"},{code:"PB",name:"Punjab",countryCode:"IN"},{code:"RJ",name:"Rajasthan",countryCode:"IN"},{code:"SK",name:"Sikkim",countryCode:"IN"},{code:"TN",name:"Tamil Nadu",countryCode:"IN"},{code:"TG",name:"Telangana",countryCode:"IN"},{code:"TR",name:"Tripura",countryCode:"IN"},{code:"UP",name:"Uttar Pradesh",countryCode:"IN"},{code:"UK",name:"Uttarakhand",countryCode:"IN"},{code:"WB",name:"West Bengal",countryCode:"IN"},{code:"DL",name:"Delhi",countryCode:"IN"}],tee=[{code:"AL",name:"Alabama",countryCode:"US"},{code:"AK",name:"Alaska",countryCode:"US"},{code:"AZ",name:"Arizona",countryCode:"US"},{code:"AR",name:"Arkansas",countryCode:"US"},{code:"CA",name:"California",countryCode:"US"},{code:"CO",name:"Colorado",countryCode:"US"},{code:"CT",name:"Connecticut",countryCode:"US"},{code:"DE",name:"Delaware",countryCode:"US"},{code:"FL",name:"Florida",countryCode:"US"},{code:"GA",name:"Georgia",countryCode:"US"},{code:"HI",name:"Hawaii",countryCode:"US"},{code:"ID",name:"Idaho",countryCode:"US"},{code:"IL",name:"Illinois",countryCode:"US"},{code:"IN",name:"Indiana",countryCode:"US"},{code:"IA",name:"Iowa",countryCode:"US"},{code:"KS",name:"Kansas",countryCode:"US"},{code:"KY",name:"Kentucky",countryCode:"US"},{code:"LA",name:"Louisiana",countryCode:"US"},{code:"ME",name:"Maine",countryCode:"US"},{code:"MD",name:"Maryland",countryCode:"US"},{code:"MA",name:"Massachusetts",countryCode:"US"},{code:"MI",name:"Michigan",countryCode:"US"},{code:"MN",name:"Minnesota",countryCode:"US"},{code:"MS",name:"Mississippi",countryCode:"US"},{code:"MO",name:"Missouri",countryCode:"US"},{code:"MT",name:"Montana",countryCode:"US"},{code:"NE",name:"Nebraska",countryCode:"US"},{code:"NV",name:"Nevada",countryCode:"US"},{code:"NH",name:"New Hampshire",countryCode:"US"},{code:"NJ",name:"New Jersey",countryCode:"US"},{code:"NM",name:"New Mexico",countryCode:"US"},{code:"NY",name:"New York",countryCode:"US"},{code:"NC",name:"North Carolina",countryCode:"US"},{code:"ND",name:"North Dakota",countryCode:"US"},{code:"OH",name:"Ohio",countryCode:"US"},{code:"OK",name:"Oklahoma",countryCode:"US"},{code:"OR",name:"Oregon",countryCode:"US"},{code:"PA",name:"Pennsylvania",countryCode:"US"},{code:"RI",name:"Rhode Island",countryCode:"US"},{code:"SC",name:"South Carolina",countryCode:"US"},{code:"SD",name:"South Dakota",countryCode:"US"},{code:"TN",name:"Tennessee",countryCode:"US"},{code:"TX",name:"Texas",countryCode:"US"},{code:"UT",name:"Utah",countryCode:"US"},{code:"VT",name:"Vermont",countryCode:"US"},{code:"VA",name:"Virginia",countryCode:"US"},{code:"WA",name:"Washington",countryCode:"US"},{code:"WV",name:"West Virginia",countryCode:"US"},{code:"WI",name:"Wisconsin",countryCode:"US"},{code:"WY",name:"Wyoming",countryCode:"US"}],ree=[{code:"ENG",name:"England",countryCode:"GB"},{code:"SCT",name:"Scotland",countryCode:"GB"},{code:"WLS",name:"Wales",countryCode:"GB"},{code:"NIR",name:"Northern Ireland",countryCode:"GB"}],nee=[{code:"ON",name:"Ontario",countryCode:"CA"},{code:"QC",name:"Quebec",countryCode:"CA"},{code:"BC",name:"British Columbia",countryCode:"CA"},{code:"AB",name:"Alberta",countryCode:"CA"}],iee=[{code:"NSW",name:"New South Wales",countryCode:"AU"},{code:"VIC",name:"Victoria",countryCode:"AU"},{code:"QLD",name:"Queensland",countryCode:"AU"},{code:"WA",name:"Western Australia",countryCode:"AU"}],oee=[...eee,...tee,...ree,...nee,...iee],aee=t=>oee.filter(e=>e.countryCode===t),Gb=t=>{const e=[];return(t.length<6||t.length>14)&&e.push("6-14 characters"),/[A-Z]/.test(t)||e.push("uppercase letter"),/[a-z]/.test(t)||e.push("lowercase letter"),/[0-9]/.test(t)||e.push("digit"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(t)||e.push("special character (!@#$%^&*)"),e.length>0?`Password must contain: ${e.join(", ")}`:null},see=t=>t.length<6||t.length>14?"Username must be 6-14 characters":/^[a-zA-Z0-9]+$/.test(t)?null:"Username can only contain letters and digits",cee=t=>t.length>40?"Email must be 40 characters or less":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?null:"Please enter a valid email address",lee=()=>{var K,z;const[t,e]=b.useState(!1),[r,n]=b.useState(!1),[i,o]=b.useState(!1),[a,s]=b.useState(1),[c,l]=b.useState(""),[u,d]=b.useState(""),[h,f]=b.useState(""),[y,v]=b.useState(""),[g,_]=b.useState(""),[m,w]=b.useState(""),[S,k]=b.useState(""),[E,T]=b.useState(""),[C,O]=b.useState(!1),A=hn(),{toast:N}=Ju(),j=S?aee(S):[],D=((K=Kb.find(W=>W.code===S))==null?void 0:K.name)||S,P=((z=j.find(W=>W.code===E))==null?void 0:z.name)||E;b.useEffect(()=>{T("")},[S]),b.useEffect(()=>{s(1)},[t]),b.useEffect(()=>{new URLSearchParams(window.location.hash.substring(1)).get("type")==="recovery"&&o(!0),vt.auth.getSession().then(({data:{session:q}})=>{q&&window.location.hash.includes("type=recovery")&&o(!0)});const{data:V}=vt.auth.onAuthStateChange(async(q,te)=>{q==="PASSWORD_RECOVERY"&&o(!0)});return()=>{V.subscription.unsubscribe()}},[]);const M=W=>{W.preventDefault();const ee=see(y);if(ee){N({title:"Invalid Username",description:ee,variant:"destructive"});return}const V=cee(c);if(V){N({title:"Invalid Email",description:V,variant:"destructive"});return}const q=Gb(u);if(q){N({title:"Invalid Password",description:q,variant:"destructive"});return}if(u!==h){N({title:"Passwords Don't Match",description:"Please make sure both passwords are the same.",variant:"destructive"});return}if(!g.trim()){N({title:"First Name Required",description:"Please enter your first name.",variant:"destructive"});return}if(!m.trim()){N({title:"Last Name Required",description:"Please enter your last name.",variant:"destructive"});return}if(!S){N({title:"Country Required",description:"Please select your country.",variant:"destructive"});return}if(j.length>0&&!E){N({title:"State Required",description:"Please select your state/province.",variant:"destructive"});return}s(2)},I=async()=>{O(!0);try{const{data:W,error:ee}=await vt.auth.signUp({email:c,password:u,options:{emailRedirectTo:"http://localhost:8080/",data:{username:y,first_name:g,last_name:m,country:D,state:P}}});if(ee)throw ee;if(W.user)try{console.log(" Saving profile for user:",W.user.id),console.log(" Profile data:",{username:y.trim(),firstName:g,lastName:m,country:D,state:P});const{data:V,error:q}=await vt.from("user_profiles").insert({user_id:W.user.id,username:y.trim(),first_name:g.trim(),last_name:m.trim(),country:D,state:P}).select();q?(console.error(" Profile save error:",q),console.error("Error details:",JSON.stringify(q,null,2))):console.log(" Profile saved successfully:",V)}catch(V){console.error(" Profile save error (exception):",V)}else console.log(" No user returned from signUp");s(3)}catch(W){N({title:"Signup Failed",description:W.message,variant:"destructive"})}finally{O(!1)}},$=async W=>{W.preventDefault(),O(!0);try{const{data:ee,error:V}=await vt.auth.signInWithPassword({email:c,password:u});if(V)throw V;localStorage.setItem("prime_user",JSON.stringify(ee.user)),N({title:"Success",description:"Logged in successfully!"}),A("/rooms")}catch(ee){N({title:"Authentication Failed",description:ee.message,variant:"destructive"})}finally{O(!1)}},R=async W=>{W.preventDefault(),O(!0);try{const{error:ee}=await vt.auth.resetPasswordForEmail(c,{redirectTo:"http://localhost:8080/auth"});if(ee)throw ee;N({title:"Reset Link Sent",description:"Check your email for the password reset link."}),n(!1)}catch(ee){N({title:"Error",description:ee.message,variant:"destructive"})}finally{O(!1)}},L=async W=>{if(W.preventDefault(),u!==h){N({title:"Passwords Don't Match",description:"Please make sure both passwords are the same.",variant:"destructive"});return}const ee=Gb(u);if(ee){N({title:"Invalid Password",description:ee,variant:"destructive"});return}O(!0);try{const{error:V}=await vt.auth.updateUser({password:u});if(V)throw V;N({title:"Password Updated!",description:"You can now sign in with your new password."}),o(!1),d(""),f("")}catch(V){N({title:"Error",description:V.message,variant:"destructive"})}finally{O(!1)}},B=()=>p.jsxs(Ki,{className:"w-full max-w-md shadow-primary",children:[p.jsxs(Gi,{className:"text-center space-y-4",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:p.jsx(Jk,{className:"w-8 h-8 text-green-600"})})}),p.jsx(Qi,{className:"text-2xl font-bold text-green-600",children:"Email Sent Successfully!"}),p.jsx(Ji,{className:"text-base",children:"We've sent a confirmation email to your registered email address."})]}),p.jsxs(Yi,{className:"space-y-6",children:[p.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:p.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Please click the link in the email and follow the instructions to activate your account."})}),p.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-start gap-3",children:[p.jsx(FL,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),p.jsxs("p",{className:"text-sm text-amber-800",children:[p.jsx("span",{className:"font-semibold",children:"Important:"})," Please also check your ",p.jsx("strong",{children:"Spam"})," or ",p.jsx("strong",{children:"Junk"})," mail folder if you don't see the email in your inbox."]})]}),p.jsxs("div",{className:"border rounded-lg p-4 space-y-3 bg-gray-50",children:[p.jsx("h3",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wider",children:"Account Details"}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-500",children:"Username:"}),p.jsx("span",{className:"font-medium",children:y})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-500",children:"Email:"}),p.jsx("span",{className:"font-medium",children:c})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-500",children:"Name:"}),p.jsxs("span",{className:"font-medium",children:[g," ",m]})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-500",children:"Country:"}),p.jsx("span",{className:"font-medium",children:D})]}),P&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-500",children:"State/Province:"}),p.jsx("span",{className:"font-medium",children:P})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-500",children:"Password:"}),p.jsx("span",{className:"font-medium",children:"********"})]})]})]}),p.jsxs(me,{variant:"outline",className:"w-full",onClick:()=>{e(!1),s(1),l(""),d(""),f(""),v(""),_(""),w(""),k(""),T("")},children:[p.jsx(TL,{className:"w-4 h-4 mr-2"}),"Back to Sign In"]})]})]}),F=()=>p.jsxs(Ki,{className:"w-full max-w-md shadow-primary",children:[p.jsxs(Gi,{className:"text-center space-y-4",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center",children:p.jsx(PL,{className:"w-8 h-8 text-primary"})})}),p.jsx(Qi,{className:"text-2xl font-bold",children:"Confirm Your Details"}),p.jsx(Ji,{children:"Please review your information before creating your account"})]}),p.jsxs(Yi,{className:"space-y-6",children:[p.jsx("div",{className:"border rounded-lg p-4 space-y-3",children:p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between py-1 border-b",children:[p.jsx("span",{className:"text-gray-500",children:"Username:"}),p.jsx("span",{className:"font-medium",children:y})]}),p.jsxs("div",{className:"flex justify-between py-1 border-b",children:[p.jsx("span",{className:"text-gray-500",children:"Email:"}),p.jsx("span",{className:"font-medium",children:c})]}),p.jsxs("div",{className:"flex justify-between py-1 border-b",children:[p.jsx("span",{className:"text-gray-500",children:"First Name:"}),p.jsx("span",{className:"font-medium",children:g})]}),p.jsxs("div",{className:"flex justify-between py-1 border-b",children:[p.jsx("span",{className:"text-gray-500",children:"Last Name:"}),p.jsx("span",{className:"font-medium",children:m})]}),p.jsxs("div",{className:"flex justify-between py-1 border-b",children:[p.jsx("span",{className:"text-gray-500",children:"Country:"}),p.jsx("span",{className:"font-medium",children:D})]}),P&&p.jsxs("div",{className:"flex justify-between py-1 border-b",children:[p.jsx("span",{className:"text-gray-500",children:"State/Province:"}),p.jsx("span",{className:"font-medium",children:P})]}),p.jsxs("div",{className:"flex justify-between py-1",children:[p.jsx("span",{className:"text-gray-500",children:"Password:"}),p.jsx("span",{className:"font-medium",children:"********"})]})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(me,{className:"w-full shadow-primary",onClick:I,disabled:C,children:C?"Creating Account...":"Confirm & Create Account"}),p.jsxs(me,{variant:"outline",className:"w-full",onClick:()=>s(1),disabled:C,children:[p.jsx(UL,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]})]})]}),Q=()=>p.jsxs("form",{onSubmit:M,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"firstName",children:"First Name"}),p.jsx(Et,{id:"firstName",type:"text",placeholder:"John",value:g,onChange:W=>_(W.target.value),required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"lastName",children:"Last Name"}),p.jsx(Et,{id:"lastName",type:"text",placeholder:"Doe",value:m,onChange:W=>w(W.target.value),required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"username",children:"Username"}),p.jsx(Et,{id:"username",type:"text",placeholder:"johndoe123",value:y,onChange:W=>v(W.target.value),required:!0,minLength:6,maxLength:14})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"email",children:"Email"}),p.jsx(Et,{id:"email",type:"email",placeholder:"you@example.com",value:c,onChange:W=>l(W.target.value),required:!0,maxLength:40})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"country",children:"Country"}),p.jsxs(Hb,{value:S,onValueChange:k,children:[p.jsx(sv,{id:"country",children:p.jsx(qb,{placeholder:"Select your country"})}),p.jsx(cv,{children:Kb.map(W=>p.jsx(lv,{value:W.code,children:W.name},W.code))})]})]}),j.length>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"state",children:"State / Province"}),p.jsxs(Hb,{value:E,onValueChange:T,children:[p.jsx(sv,{id:"state",children:p.jsx(qb,{placeholder:"Select your state"})}),p.jsx(cv,{children:j.map(W=>p.jsx(lv,{value:W.code,children:W.name},W.code))})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"password",children:"Password"}),p.jsx(Et,{id:"password",type:"password",placeholder:"",value:u,onChange:W=>d(W.target.value),required:!0,minLength:6,maxLength:14})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"confirm-password",children:"Confirm Password"}),p.jsx(Et,{id:"confirm-password",type:"password",placeholder:"",value:h,onChange:W=>f(W.target.value),required:!0,minLength:6,maxLength:14})]}),p.jsx(me,{type:"submit",className:"w-full shadow-primary",disabled:C,children:"Continue"})]});return t&&a===3?p.jsxs("div",{className:"min-h-screen bg-gradient-hero flex flex-col",children:[p.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:B()}),p.jsx(Hi,{})]}):t&&a===2?p.jsxs("div",{className:"min-h-screen bg-gradient-hero flex flex-col",children:[p.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:F()}),p.jsx(Hi,{})]}):p.jsxs("div",{className:"min-h-screen bg-gradient-hero flex flex-col",children:[p.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:p.jsxs(Ki,{className:`w-full shadow-primary ${t?"max-w-lg":"max-w-md"}`,children:[p.jsxs(Gi,{className:"text-center space-y-4",children:[p.jsx("div",{className:"flex justify-center mb-4",children:p.jsx("img",{src:"/logo.png",alt:"PrimeTalker Logo",className:"w-40 h-auto object-contain cursor-pointer select-none"})}),p.jsx(Qi,{className:"text-3xl font-bold",children:i?"Set New Password":r?"Reset Password":t?"Create Account":"Welcome Back"}),p.jsx(Ji,{children:i?"Enter your new password below":r?"Enter your email to receive a reset link":t?"Start breaking language barriers today":"Sign in to continue to your meetings"})]}),p.jsxs(Yi,{children:[i?p.jsxs("form",{onSubmit:L,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"new-password",children:"New Password"}),p.jsx(Et,{id:"new-password",type:"password",placeholder:"",value:u,onChange:W=>d(W.target.value),required:!0,minLength:6,maxLength:14})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"confirm-password",children:"Confirm Password"}),p.jsx(Et,{id:"confirm-password",type:"password",placeholder:"",value:h,onChange:W=>f(W.target.value),required:!0,minLength:6,maxLength:14})]}),p.jsx(me,{type:"submit",className:"w-full shadow-primary",disabled:C,children:C?"Updating...":"Update Password"})]}):r?p.jsxs("form",{onSubmit:R,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"email",children:"Email"}),p.jsx(Et,{id:"email",type:"email",placeholder:"you@example.com",value:c,onChange:W=>l(W.target.value),required:!0})]}),p.jsx(me,{type:"submit",className:"w-full shadow-primary",disabled:C,children:C?"Sending...":"Send Reset Link"}),p.jsx(me,{type:"button",variant:"link",onClick:()=>n(!1),className:"w-full text-muted-foreground hover:text-foreground",children:"Back to Sign In"})]}):t?Q():p.jsxs("form",{onSubmit:$,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"email",children:"Email"}),p.jsx(Et,{id:"email",type:"email",placeholder:"you@example.com",value:c,onChange:W=>l(W.target.value),required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"password",children:"Password"}),p.jsx(Et,{id:"password",type:"password",placeholder:"",value:u,onChange:W=>d(W.target.value),required:!0})]}),p.jsx("div",{className:"text-right",children:p.jsx(me,{type:"button",variant:"link",onClick:()=>n(!0),className:"text-sm text-muted-foreground hover:text-foreground p-0 h-auto",children:"Forgot password?"})}),p.jsx(me,{type:"submit",className:"w-full shadow-primary",disabled:C,children:C?"Please wait...":"Sign In"})]}),!r&&p.jsx("div",{className:"mt-6 text-center",children:p.jsx(me,{variant:"link",onClick:()=>e(!t),className:"text-muted-foreground hover:text-foreground",children:t?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})}),p.jsx(Hi,{})]})},uee=()=>{const t=hn(),{toast:e}=Ju(),{username:r}=Pg(),[n,i]=b.useState(""),[o,a]=b.useState("en"),[s,c]=b.useState(!1),[l,u]=b.useState(!1),[d,h]=b.useState(null),[f,y]=b.useState(null),[v,g]=b.useState(!1),_=async()=>{if(!o){e({title:"Language Required",description:"Please select your language before creating a room.",variant:"destructive"});return}c(!0);try{sessionStorage.setItem("meetingUsername",r.trim()||"User");const C=(await SI(o)).roomId;if(!C)throw new Error("Invalid response from server.");localStorage.setItem("myLanguage",o),localStorage.setItem("role","caller");const A=`${window.location.origin}/join/${C}`;h(C),y(A),e({title:"Room Created!",description:"Share the link with others to join."})}catch(T){e({title:"Error",description:T.message,variant:"destructive"})}finally{c(!1)}},m=async()=>{if(f)try{await navigator.clipboard.writeText(f),g(!0),e({title:"Link Copied!",description:"Share this link with others to join your room."}),setTimeout(()=>g(!1),2e3)}catch{e({title:"Copy Failed",description:"Please copy the link manually.",variant:"destructive"})}},w=()=>{d&&t(`/meeting/${d}`)},S=()=>{h(null),y(null),g(!1)},k=async T=>{if(T.preventDefault(),!n.trim()){e({title:"Error",description:"Please enter a valid room ID",variant:"destructive"});return}if(!o){e({title:"Language Required",description:"Please select your language before joining.",variant:"destructive"});return}u(!0);try{sessionStorage.setItem("meetingUsername",r.trim()||"User");const C=await pm(n.trim(),o);if(!C.success)throw new Error(C.message||"Failed to join room");localStorage.setItem("myLanguage",o),localStorage.setItem("role","receiver"),e({title:"Joined Room!",description:`Connected to room ${n}`}),t(`/meeting/${n.trim()}`)}catch(C){e({title:"Error Joining Room",description:C.message,variant:"destructive"})}finally{u(!1)}},E=async()=>{await vt.auth.signOut(),localStorage.removeItem("prime_user"),t("/")};return p.jsxs("div",{className:"min-h-screen bg-gradient-hero flex flex-col",children:[p.jsx("header",{className:"border-b border-border bg-background/80 backdrop-blur-sm",children:p.jsxs("div",{className:"container mx-auto px-4 py-3 sm:py-4 flex items-center justify-between",children:[p.jsx("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t("/landing"),children:p.jsx("img",{src:"/logo.png",className:"w-28 sm:w-40 h-auto",alt:"Logo"})}),p.jsxs(me,{variant:"ghost",size:"sm",onClick:E,className:"text-sm",children:[p.jsx(Qk,{className:"w-4 h-4 sm:mr-2"}),p.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]})}),p.jsx("main",{className:"flex-1 container mx-auto px-4 py-6 sm:py-12 flex items-center justify-center",children:p.jsxs("div",{className:`w-full grid ${d?"max-w-md grid-cols-1":"max-w-4xl grid-cols-1 md:grid-cols-2"} gap-4 sm:gap-6`,children:[p.jsxs(Ki,{className:"shadow-primary border-2 hover:border-primary/50 transition-all",children:[p.jsxs(Gi,{className:"text-center space-y-4",children:[p.jsx("div",{className:"w-16 h-16 mx-auto rounded-xl bg-gradient-primary flex items-center justify-center",children:p.jsx(rd,{className:"w-10 h-10 text-primary-foreground"})}),p.jsx(Qi,{className:"text-2xl",children:d?"Enter Room":"Create Room"}),p.jsx(Ji,{children:d?"Share this link with others to join your meeting":"Start a new meeting room that supports real-time translation"})]}),p.jsx(Yi,{className:"space-y-4",children:d?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-lg p-4 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 dark:text-green-400",children:[p.jsx(dp,{className:"w-5 h-5"}),p.jsx("span",{className:"font-medium",children:"Room Created!"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Room ID"}),p.jsx("div",{className:"text-2xl font-mono font-bold",children:d})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Qe,{className:"flex items-center gap-2",children:[p.jsx(DL,{className:"w-4 h-4"}),"Share Link"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Et,{value:f||"",readOnly:!0,className:"font-mono text-sm"}),p.jsx(me,{variant:"outline",size:"icon",onClick:m,className:"shrink-0",children:v?p.jsx(dp,{className:"w-4 h-4 text-green-500"}):p.jsx(OL,{className:"w-4 h-4"})})]})]}),p.jsx("div",{className:"flex gap-2",children:p.jsxs(me,{className:"flex-1",size:"lg",onClick:w,children:["Enter Room",p.jsx(Kk,{className:"w-4 h-4 ml-2"})]})}),p.jsx(me,{variant:"link",className:"w-full text-muted-foreground",onClick:S,children:"Create Another Room"})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{children:"Your Language"}),p.jsxs("select",{className:"w-full bg-background border p-2 rounded-md",value:o,onChange:T=>a(T.target.value),children:[p.jsx("option",{value:"en",children:"English"}),p.jsx("option",{value:"hi",children:"Hindi"}),p.jsx("option",{value:"te",children:"Telugu"}),p.jsx("option",{value:"ta",children:"Tamil"}),p.jsx("option",{value:"bn",children:"Bengali"}),p.jsx("option",{value:"mr",children:"Marathi"}),p.jsx("option",{value:"gu",children:"Gujarati"}),p.jsx("option",{value:"kn",children:"Kannada"}),p.jsx("option",{value:"ml",children:"Malayalam"}),p.jsx("option",{value:"pa",children:"Punjabi"}),p.jsx("option",{value:"es",children:"Spanish"}),p.jsx("option",{value:"fr",children:"French"}),p.jsx("option",{value:"de",children:"German"}),p.jsx("option",{value:"pt",children:"Portuguese"}),p.jsx("option",{value:"ja",children:"Japanese"}),p.jsx("option",{value:"zh",children:"Chinese"}),p.jsx("option",{value:"ko",children:"Korean"}),p.jsx("option",{value:"ar",children:"Arabic"}),p.jsx("option",{value:"ru",children:"Russian"})]})]}),p.jsx(me,{className:"w-full shadow-primary",size:"lg",onClick:_,disabled:s,children:s?"Creating...":"Create New Room"})]})})]}),!d&&p.jsxs(Ki,{className:"shadow-primary border-2 hover:border-primary/50 transition-all",children:[p.jsxs(Gi,{className:"text-center space-y-4",children:[p.jsx("div",{className:"w-16 h-16 mx-auto rounded-xl bg-gradient-primary flex items-center justify-center",children:p.jsx(td,{className:"w-10 h-10 text-primary-foreground"})}),p.jsx(Qi,{className:"text-2xl",children:"Join Room"}),p.jsx(Ji,{children:"Enter a room ID & your language to join an existing meeting"})]}),p.jsx(Yi,{children:p.jsxs("form",{onSubmit:k,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"roomId",children:"Room ID"}),p.jsx(Et,{id:"roomId",type:"text",placeholder:"ROOM1234",value:n,onChange:T=>i(T.target.value),className:"text-center text-lg font-mono",required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{children:"Your Language"}),p.jsxs("select",{className:"w-full bg-background border p-2 rounded-md",value:o,onChange:T=>a(T.target.value),children:[p.jsx("option",{value:"en",children:"English"}),p.jsx("option",{value:"hi",children:"Hindi"}),p.jsx("option",{value:"te",children:"Telugu"}),p.jsx("option",{value:"ta",children:"Tamil"}),p.jsx("option",{value:"bn",children:"Bengali"}),p.jsx("option",{value:"mr",children:"Marathi"}),p.jsx("option",{value:"gu",children:"Gujarati"}),p.jsx("option",{value:"kn",children:"Kannada"}),p.jsx("option",{value:"ml",children:"Malayalam"}),p.jsx("option",{value:"pa",children:"Punjabi"}),p.jsx("option",{value:"es",children:"Spanish"}),p.jsx("option",{value:"fr",children:"French"}),p.jsx("option",{value:"de",children:"German"}),p.jsx("option",{value:"pt",children:"Portuguese"}),p.jsx("option",{value:"ja",children:"Japanese"}),p.jsx("option",{value:"zh",children:"Chinese"}),p.jsx("option",{value:"ko",children:"Korean"}),p.jsx("option",{value:"ar",children:"Arabic"}),p.jsx("option",{value:"ru",children:"Russian"})]})]}),p.jsx(me,{type:"submit",variant:"secondary",className:"w-full",size:"lg",disabled:l,children:l?"Joining...":"Join Room"})]})})]})]})}),p.jsx(Hi,{})]})},dee=()=>{const{roomId:t}=ix(),e=hn(),{toast:r}=Ju(),{username:n}=Pg(),[i,o]=b.useState("en"),[a,s]=b.useState(!1),c=async()=>{if(!t){r({title:"Error",description:"Invalid room ID",variant:"destructive"});return}if(!i){r({title:"Language Required",description:"Please select your language before joining.",variant:"destructive"});return}s(!0);try{sessionStorage.setItem("meetingUsername",n.trim()||"User");const l=await pm(t,i);if(!l.success)throw new Error(l.message||"Failed to join room");localStorage.setItem("myLanguage",i),localStorage.setItem("role","receiver"),r({title:"Joined Room!",description:`Connected to room ${t}`}),e(`/meeting/${t}`)}catch(l){r({title:"Error Joining Room",description:l.message,variant:"destructive"})}finally{s(!1)}};return p.jsxs("div",{className:"min-h-screen bg-gradient-hero flex flex-col",children:[p.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:p.jsxs(Ki,{className:"w-full max-w-md shadow-primary border-2",children:[p.jsxs(Gi,{className:"text-center space-y-3 sm:space-y-4",children:[p.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 mx-auto rounded-xl bg-gradient-primary flex items-center justify-center",children:p.jsx(td,{className:"w-8 h-8 sm:w-10 sm:h-10 text-primary-foreground"})}),p.jsx(Qi,{className:"text-xl sm:text-2xl",children:"Join Meeting"}),p.jsxs(Ji,{className:"text-sm",children:["You've been invited to join room ",p.jsx("span",{className:"font-mono font-bold text-foreground",children:t})]})]}),p.jsxs(Yi,{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{children:"Your Language"}),p.jsxs("select",{className:"w-full bg-background border p-2 rounded-md",value:i,onChange:l=>o(l.target.value),children:[p.jsx("option",{value:"en",children:"English"}),p.jsx("option",{value:"hi",children:"Hindi"}),p.jsx("option",{value:"te",children:"Telugu"}),p.jsx("option",{value:"ta",children:"Tamil"}),p.jsx("option",{value:"bn",children:"Bengali"}),p.jsx("option",{value:"mr",children:"Marathi"}),p.jsx("option",{value:"gu",children:"Gujarati"}),p.jsx("option",{value:"kn",children:"Kannada"}),p.jsx("option",{value:"ml",children:"Malayalam"}),p.jsx("option",{value:"pa",children:"Punjabi"}),p.jsx("option",{value:"es",children:"Spanish"}),p.jsx("option",{value:"fr",children:"French"}),p.jsx("option",{value:"de",children:"German"}),p.jsx("option",{value:"pt",children:"Portuguese"}),p.jsx("option",{value:"ja",children:"Japanese"}),p.jsx("option",{value:"zh",children:"Chinese"}),p.jsx("option",{value:"ko",children:"Korean"}),p.jsx("option",{value:"ar",children:"Arabic"}),p.jsx("option",{value:"ru",children:"Russian"})]})]}),p.jsxs(me,{className:"w-full",size:"lg",onClick:c,disabled:a,children:[a?"Joining...":"Join Meeting",p.jsx(Kk,{className:"w-4 h-4 ml-2"})]}),p.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",p.jsx(me,{variant:"link",className:"p-0 h-auto",onClick:()=>e("/auth"),children:"Sign up"})]})]})]})}),p.jsx(Hi,{})]})},fee=()=>{const t=hd(),e=hn();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),p.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[p.jsx("main",{className:"flex-1 flex items-center justify-center",children:p.jsxs("div",{className:"text-center space-y-4 p-6",children:[p.jsx("h1",{className:"text-6xl font-bold text-foreground",children:"404"}),p.jsx("p",{className:"text-xl text-muted-foreground",children:"Oops! The page you are looking for does not exist."}),p.jsx(me,{size:"lg",className:"shadow-primary mt-4",onClick:()=>e("/"),children:"Return to Home"})]})}),p.jsx(Hi,{})]})},hee=new _2,pee=({children:t})=>localStorage.getItem("prime_user")?t:p.jsx(cx,{to:"/auth",replace:!0}),vee=()=>p.jsx(b2,{client:hee,children:p.jsxs(qM,{children:[p.jsx(EI,{}),p.jsx(iN,{}),p.jsx(vD,{children:p.jsx(b.Suspense,{fallback:p.jsx("div",{className:"flex min-h-screen items-center justify-center text-lg text-muted-foreground",children:"Loading..."}),children:p.jsxs(fD,{children:[p.jsx(Rn,{path:"/",element:p.jsx(mD,{})}),p.jsx(Rn,{path:"/landing",element:p.jsx(eF,{})}),p.jsx(Rn,{path:"/auth",element:p.jsx(lee,{})}),p.jsx(Rn,{path:"/rooms",element:p.jsx(pee,{children:p.jsx(uee,{})})}),p.jsx(Rn,{path:"/meeting/:roomId",element:p.jsx(mX,{})}),p.jsx(Rn,{path:"/join/:roomId",element:p.jsx(dee,{})}),p.jsx(Rn,{path:"*",element:p.jsx(fee,{})})]})})})]})});yk(document.getElementById("root")).render(p.jsx(vee,{}));
