var Ag=t=>{throw TypeError(t)};var $d=(t,e,r)=>e.has(t)||Ag("Cannot "+r);var F=(t,e,r)=>($d(t,e,"read from private field"),r?r.call(t):e.get(t)),ve=(t,e,r)=>e.has(t)?Ag("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),le=(t,e,r,n)=>($d(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),st=(t,e,r)=>($d(t,e,"access private method"),r);var Pc=(t,e,r,n)=>({set _(i){le(t,e,i,r)},get _(){return F(t,e,n)}});function o0(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();var T=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function J1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var a0={exports:{}},Iu={},s0={exports:{}},he={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ic=Symbol.for("react.element"),Y1=Symbol.for("react.portal"),X1=Symbol.for("react.fragment"),Z1=Symbol.for("react.strict_mode"),eR=Symbol.for("react.profiler"),tR=Symbol.for("react.provider"),rR=Symbol.for("react.context"),nR=Symbol.for("react.forward_ref"),iR=Symbol.for("react.suspense"),oR=Symbol.for("react.memo"),aR=Symbol.for("react.lazy"),Lg=Symbol.iterator;function sR(t){return t===null||typeof t!="object"?null:(t=Lg&&t[Lg]||t["@@iterator"],typeof t=="function"?t:null)}var c0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l0=Object.assign,u0={};function Ca(t,e,r){this.props=t,this.context=e,this.refs=u0,this.updater=r||c0}Ca.prototype.isReactComponent={};Ca.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ca.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d0(){}d0.prototype=Ca.prototype;function hv(t,e,r){this.props=t,this.context=e,this.refs=u0,this.updater=r||c0}var pv=hv.prototype=new d0;pv.constructor=hv;l0(pv,Ca.prototype);pv.isPureReactComponent=!0;var Ig=Array.isArray,f0=Object.prototype.hasOwnProperty,vv={current:null},h0={key:!0,ref:!0,__self:!0,__source:!0};function p0(t,e,r){var n,i={},o=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)f0.call(e,n)&&!h0.hasOwnProperty(n)&&(i[n]=e[n]);var s=arguments.length-2;if(s===1)i.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:ic,type:t,key:o,ref:a,props:i,_owner:vv.current}}function cR(t,e){return{$$typeof:ic,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mv(t){return typeof t=="object"&&t!==null&&t.$$typeof===ic}function lR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Ng=/\/+/g;function Fd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lR(""+t.key):e.toString(36)}function El(t,e,r,n,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case ic:case Y1:a=!0}}if(a)return a=t,i=i(a),t=n===""?"."+Fd(a,0):n,Ig(i)?(r="",t!=null&&(r=t.replace(Ng,"$&/")+"/"),El(i,e,r,"",function(l){return l})):i!=null&&(mv(i)&&(i=cR(i,r+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Ng,"$&/")+"/")+t)),e.push(i)),1;if(a=0,n=n===""?".":n+":",Ig(t))for(var s=0;s<t.length;s++){o=t[s];var c=n+Fd(o,s);a+=El(o,e,r,c,i)}else if(c=sR(t),typeof c=="function")for(t=c.call(t),s=0;!(o=t.next()).done;)o=o.value,c=n+Fd(o,s++),a+=El(o,e,r,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Oc(t,e,r){if(t==null)return t;var n=[],i=0;return El(t,n,"","",function(o){return e.call(r,o,i++)}),n}function uR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},Cl={transition:null},dR={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:Cl,ReactCurrentOwner:vv};function v0(){throw Error("act(...) is not supported in production builds of React.")}he.Children={map:Oc,forEach:function(t,e,r){Oc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Oc(t,function(){e++}),e},toArray:function(t){return Oc(t,function(e){return e})||[]},only:function(t){if(!mv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};he.Component=Ca;he.Fragment=X1;he.Profiler=eR;he.PureComponent=hv;he.StrictMode=Z1;he.Suspense=iR;he.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dR;he.act=v0;he.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=l0({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=vv.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var s=t.type.defaultProps;for(c in e)f0.call(e,c)&&!h0.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&s!==void 0?s[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];n.children=s}return{$$typeof:ic,type:t.type,key:i,ref:o,props:n,_owner:a}};he.createContext=function(t){return t={$$typeof:rR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tR,_context:t},t.Consumer=t};he.createElement=p0;he.createFactory=function(t){var e=p0.bind(null,t);return e.type=t,e};he.createRef=function(){return{current:null}};he.forwardRef=function(t){return{$$typeof:nR,render:t}};he.isValidElement=mv;he.lazy=function(t){return{$$typeof:aR,_payload:{_status:-1,_result:t},_init:uR}};he.memo=function(t,e){return{$$typeof:oR,type:t,compare:e===void 0?null:e}};he.startTransition=function(t){var e=Cl.transition;Cl.transition={};try{t()}finally{Cl.transition=e}};he.unstable_act=v0;he.useCallback=function(t,e){return wt.current.useCallback(t,e)};he.useContext=function(t){return wt.current.useContext(t)};he.useDebugValue=function(){};he.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};he.useEffect=function(t,e){return wt.current.useEffect(t,e)};he.useId=function(){return wt.current.useId()};he.useImperativeHandle=function(t,e,r){return wt.current.useImperativeHandle(t,e,r)};he.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};he.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};he.useMemo=function(t,e){return wt.current.useMemo(t,e)};he.useReducer=function(t,e,r){return wt.current.useReducer(t,e,r)};he.useRef=function(t){return wt.current.useRef(t)};he.useState=function(t){return wt.current.useState(t)};he.useSyncExternalStore=function(t,e,r){return wt.current.useSyncExternalStore(t,e,r)};he.useTransition=function(){return wt.current.useTransition()};he.version="18.3.1";s0.exports=he;var b=s0.exports;const G=fv(b),Nu=o0({__proto__:null,default:G},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fR=b,hR=Symbol.for("react.element"),pR=Symbol.for("react.fragment"),vR=Object.prototype.hasOwnProperty,mR=fR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gR={key:!0,ref:!0,__self:!0,__source:!0};function m0(t,e,r){var n,i={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)vR.call(e,n)&&!gR.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:hR,type:t,key:o,ref:a,props:i,_owner:mR.current}}Iu.Fragment=pR;Iu.jsx=m0;Iu.jsxs=m0;a0.exports=Iu;var p=a0.exports,g0={exports:{}},Wt={},y0={exports:{}},_0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,M){var B=j.length;j.push(M);e:for(;0<B;){var U=B-1>>>1,Q=j[U];if(0<i(Q,M))j[U]=M,j[B]=Q,B=U;else break e}}function r(j){return j.length===0?null:j[0]}function n(j){if(j.length===0)return null;var M=j[0],B=j.pop();if(B!==M){j[0]=B;e:for(var U=0,Q=j.length,K=Q>>>1;U<K;){var V=2*(U+1)-1,W=j[V],ee=V+1,z=j[ee];if(0>i(W,B))ee<Q&&0>i(z,W)?(j[U]=z,j[ee]=B,U=ee):(j[U]=W,j[V]=B,U=V);else if(ee<Q&&0>i(z,B))j[U]=z,j[ee]=B,U=ee;else break e}}return M}function i(j,M){var B=j.sortIndex-M.sortIndex;return B!==0?B:j.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();t.unstable_now=function(){return a.now()-s}}var c=[],l=[],u=1,d=null,h=3,f=!1,_=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(j){for(var M=r(l);M!==null;){if(M.callback===null)n(l);else if(M.startTime<=j)n(l),M.sortIndex=M.expirationTime,e(c,M);else break;M=r(l)}}function S(j){if(v=!1,w(j),!_)if(r(c)!==null)_=!0,N(k);else{var M=r(l);M!==null&&$(S,M.startTime-j)}}function k(j,M){_=!1,v&&(v=!1,y(C),C=-1),f=!0;var B=h;try{for(w(M),d=r(c);d!==null&&(!(d.expirationTime>M)||j&&!D());){var U=d.callback;if(typeof U=="function"){d.callback=null,h=d.priorityLevel;var Q=U(d.expirationTime<=M);M=t.unstable_now(),typeof Q=="function"?d.callback=Q:d===r(c)&&n(c),w(M)}else n(c);d=r(c)}if(d!==null)var K=!0;else{var V=r(l);V!==null&&$(S,V.startTime-M),K=!1}return K}finally{d=null,h=B,f=!1}}var E=!1,x=null,C=-1,R=5,A=-1;function D(){return!(t.unstable_now()-A<R)}function O(){if(x!==null){var j=t.unstable_now();A=j;var M=!0;try{M=x(!0,j)}finally{M?I():(E=!1,x=null)}}else E=!1}var I;if(typeof m=="function")I=function(){m(O)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,L=P.port2;P.port1.onmessage=O,I=function(){L.postMessage(null)}}else I=function(){g(O,0)};function N(j){x=j,E||(E=!0,I())}function $(j,M){C=g(function(){j(t.unstable_now())},M)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){_||f||(_=!0,N(k))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(j){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var B=h;h=M;try{return j()}finally{h=B}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,M){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var B=h;h=j;try{return M()}finally{h=B}},t.unstable_scheduleCallback=function(j,M,B){var U=t.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?U+B:U):B=U,j){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=B+Q,j={id:u++,callback:M,priorityLevel:j,startTime:B,expirationTime:Q,sortIndex:-1},B>U?(j.sortIndex=B,e(l,j),r(c)===null&&j===r(l)&&(v?(y(C),C=-1):v=!0,$(S,B-U))):(j.sortIndex=Q,e(c,j),_||f||(_=!0,N(k))),j},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(j){var M=h;return function(){var B=h;h=M;try{return j.apply(this,arguments)}finally{h=B}}}})(_0);y0.exports=_0;var yR=y0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _R=b,zt=yR;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w0=new Set,ks={};function so(t,e){pa(t,e),pa(t+"Capture",e)}function pa(t,e){for(ks[t]=e,t=0;t<e.length;t++)w0.add(e[t])}var an=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vh=Object.prototype.hasOwnProperty,wR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mg={},Dg={};function bR(t){return vh.call(Dg,t)?!0:vh.call(Mg,t)?!1:wR.test(t)?Dg[t]=!0:(Mg[t]=!0,!1)}function SR(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kR(t,e,r,n){if(e===null||typeof e>"u"||SR(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,r,n,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var gv=/[\-:]([a-z])/g;function yv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gv,yv);ot[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gv,yv);ot[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gv,yv);ot[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function _v(t,e,r,n){var i=ot.hasOwnProperty(e)?ot[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kR(e,r,i,n)&&(r=null),n||i===null?bR(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var fn=_R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rc=Symbol.for("react.element"),Io=Symbol.for("react.portal"),No=Symbol.for("react.fragment"),wv=Symbol.for("react.strict_mode"),mh=Symbol.for("react.profiler"),b0=Symbol.for("react.provider"),S0=Symbol.for("react.context"),bv=Symbol.for("react.forward_ref"),gh=Symbol.for("react.suspense"),yh=Symbol.for("react.suspense_list"),Sv=Symbol.for("react.memo"),Ln=Symbol.for("react.lazy"),k0=Symbol.for("react.offscreen"),$g=Symbol.iterator;function Va(t){return t===null||typeof t!="object"?null:(t=$g&&t[$g]||t["@@iterator"],typeof t=="function"?t:null)}var Fe=Object.assign,Ud;function ts(t){if(Ud===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Ud=e&&e[1]||""}return`
`+Ud+t}var Bd=!1;function Vd(t,e){if(!t||Bd)return"";Bd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var n=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){n=l}t.call(e.prototype)}else{try{throw Error()}catch(l){n=l}t()}}catch(l){if(l&&n&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=n.stack.split(`
`),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(a!==1||s!==1)do if(a--,s--,0>s||i[a]!==o[s]){var c=`
`+i[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=s);break}}}finally{Bd=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ts(t):""}function xR(t){switch(t.tag){case 5:return ts(t.type);case 16:return ts("Lazy");case 13:return ts("Suspense");case 19:return ts("SuspenseList");case 0:case 2:case 15:return t=Vd(t.type,!1),t;case 11:return t=Vd(t.type.render,!1),t;case 1:return t=Vd(t.type,!0),t;default:return""}}function _h(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case No:return"Fragment";case Io:return"Portal";case mh:return"Profiler";case wv:return"StrictMode";case gh:return"Suspense";case yh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case S0:return(t.displayName||"Context")+".Consumer";case b0:return(t._context.displayName||"Context")+".Provider";case bv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sv:return e=t.displayName||null,e!==null?e:_h(t.type)||"Memo";case Ln:e=t._payload,t=t._init;try{return _h(t(e))}catch{}}return null}function TR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _h(e);case 8:return e===wv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ri(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function x0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ER(t){var e=x0(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){n=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jc(t){t._valueTracker||(t._valueTracker=ER(t))}function T0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=x0(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function Gl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wh(t,e){var r=e.checked;return Fe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Fg(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=ri(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function E0(t,e){e=e.checked,e!=null&&_v(t,"checked",e,!1)}function bh(t,e){E0(t,e);var r=ri(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sh(t,e.type,r):e.hasOwnProperty("defaultValue")&&Sh(t,e.type,ri(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ug(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Sh(t,e,r){(e!=="number"||Gl(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var rs=Array.isArray;function Ko(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+ri(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function kh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return Fe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Bg(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(H(92));if(rs(r)){if(1<r.length)throw Error(H(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ri(r)}}function C0(t,e){var r=ri(e.value),n=ri(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Vg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function P0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?P0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ac,O0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ac=Ac||document.createElement("div"),Ac.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ac.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xs(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var us={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CR=["Webkit","ms","Moz","O"];Object.keys(us).forEach(function(t){CR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),us[e]=us[t]})});function R0(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||us.hasOwnProperty(t)&&us[t]?(""+e).trim():e+"px"}function j0(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=R0(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var PR=Fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Th(t,e){if(e){if(PR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function Eh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ch=null;function kv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ph=null,Go=null,Qo=null;function zg(t){if(t=sc(t)){if(typeof Ph!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Uu(e),Ph(t.stateNode,t.type,e))}}function A0(t){Go?Qo?Qo.push(t):Qo=[t]:Go=t}function L0(){if(Go){var t=Go,e=Qo;if(Qo=Go=null,zg(t),e)for(t=0;t<e.length;t++)zg(e[t])}}function I0(t,e){return t(e)}function N0(){}var zd=!1;function M0(t,e,r){if(zd)return t(e,r);zd=!0;try{return I0(t,e,r)}finally{zd=!1,(Go!==null||Qo!==null)&&(N0(),L0())}}function Ts(t,e){var r=t.stateNode;if(r===null)return null;var n=Uu(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(H(231,e,typeof r));return r}var Oh=!1;if(an)try{var za={};Object.defineProperty(za,"passive",{get:function(){Oh=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{Oh=!1}function OR(t,e,r,n,i,o,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(r,l)}catch(u){this.onError(u)}}var ds=!1,Ql=null,Jl=!1,Rh=null,RR={onError:function(t){ds=!0,Ql=t}};function jR(t,e,r,n,i,o,a,s,c){ds=!1,Ql=null,OR.apply(RR,arguments)}function AR(t,e,r,n,i,o,a,s,c){if(jR.apply(this,arguments),ds){if(ds){var l=Ql;ds=!1,Ql=null}else throw Error(H(198));Jl||(Jl=!0,Rh=l)}}function co(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function D0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Wg(t){if(co(t)!==t)throw Error(H(188))}function LR(t){var e=t.alternate;if(!e){if(e=co(t),e===null)throw Error(H(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var o=i.alternate;if(o===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return Wg(i),t;if(o===n)return Wg(i),e;o=o.sibling}throw Error(H(188))}if(r.return!==n.return)r=i,n=o;else{for(var a=!1,s=i.child;s;){if(s===r){a=!0,r=i,n=o;break}if(s===n){a=!0,n=i,r=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===r){a=!0,r=o,n=i;break}if(s===n){a=!0,n=o,r=i;break}s=s.sibling}if(!a)throw Error(H(189))}}if(r.alternate!==n)throw Error(H(190))}if(r.tag!==3)throw Error(H(188));return r.stateNode.current===r?t:e}function $0(t){return t=LR(t),t!==null?F0(t):null}function F0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=F0(t);if(e!==null)return e;t=t.sibling}return null}var U0=zt.unstable_scheduleCallback,Hg=zt.unstable_cancelCallback,IR=zt.unstable_shouldYield,NR=zt.unstable_requestPaint,We=zt.unstable_now,MR=zt.unstable_getCurrentPriorityLevel,xv=zt.unstable_ImmediatePriority,B0=zt.unstable_UserBlockingPriority,Yl=zt.unstable_NormalPriority,DR=zt.unstable_LowPriority,V0=zt.unstable_IdlePriority,Mu=null,Ur=null;function $R(t){if(Ur&&typeof Ur.onCommitFiberRoot=="function")try{Ur.onCommitFiberRoot(Mu,t,void 0,(t.current.flags&128)===128)}catch{}}var wr=Math.clz32?Math.clz32:BR,FR=Math.log,UR=Math.LN2;function BR(t){return t>>>=0,t===0?32:31-(FR(t)/UR|0)|0}var Lc=64,Ic=4194304;function ns(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xl(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,o=t.pingedLanes,a=r&268435455;if(a!==0){var s=a&~i;s!==0?n=ns(s):(o&=a,o!==0&&(n=ns(o)))}else a=r&~i,a!==0?n=ns(a):o!==0&&(n=ns(o));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-wr(e),i=1<<r,n|=t[r],e&=~i;return n}function VR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zR(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-wr(o),s=1<<a,c=i[a];c===-1?(!(s&r)||s&n)&&(i[a]=VR(s,e)):c<=e&&(t.expiredLanes|=s),o&=~s}}function jh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function z0(){var t=Lc;return Lc<<=1,!(Lc&4194240)&&(Lc=64),t}function Wd(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function oc(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wr(e),t[e]=r}function WR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-wr(r),o=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~o}}function Tv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-wr(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var we=0;function W0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var H0,Ev,q0,K0,G0,Ah=!1,Nc=[],Gn=null,Qn=null,Jn=null,Es=new Map,Cs=new Map,Nn=[],HR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qg(t,e){switch(t){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Qn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":Es.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cs.delete(e.pointerId)}}function Wa(t,e,r,n,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},e!==null&&(e=sc(e),e!==null&&Ev(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function qR(t,e,r,n,i){switch(e){case"focusin":return Gn=Wa(Gn,t,e,r,n,i),!0;case"dragenter":return Qn=Wa(Qn,t,e,r,n,i),!0;case"mouseover":return Jn=Wa(Jn,t,e,r,n,i),!0;case"pointerover":var o=i.pointerId;return Es.set(o,Wa(Es.get(o)||null,t,e,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Cs.set(o,Wa(Cs.get(o)||null,t,e,r,n,i)),!0}return!1}function Q0(t){var e=Ai(t.target);if(e!==null){var r=co(e);if(r!==null){if(e=r.tag,e===13){if(e=D0(r),e!==null){t.blockedOn=e,G0(t.priority,function(){q0(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Lh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Ch=n,r.target.dispatchEvent(n),Ch=null}else return e=sc(r),e!==null&&Ev(e),t.blockedOn=r,!1;e.shift()}return!0}function Kg(t,e,r){Pl(t)&&r.delete(e)}function KR(){Ah=!1,Gn!==null&&Pl(Gn)&&(Gn=null),Qn!==null&&Pl(Qn)&&(Qn=null),Jn!==null&&Pl(Jn)&&(Jn=null),Es.forEach(Kg),Cs.forEach(Kg)}function Ha(t,e){t.blockedOn===e&&(t.blockedOn=null,Ah||(Ah=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,KR)))}function Ps(t){function e(i){return Ha(i,t)}if(0<Nc.length){Ha(Nc[0],t);for(var r=1;r<Nc.length;r++){var n=Nc[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Gn!==null&&Ha(Gn,t),Qn!==null&&Ha(Qn,t),Jn!==null&&Ha(Jn,t),Es.forEach(e),Cs.forEach(e),r=0;r<Nn.length;r++)n=Nn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Nn.length&&(r=Nn[0],r.blockedOn===null);)Q0(r),r.blockedOn===null&&Nn.shift()}var Jo=fn.ReactCurrentBatchConfig,Zl=!0;function GR(t,e,r,n){var i=we,o=Jo.transition;Jo.transition=null;try{we=1,Cv(t,e,r,n)}finally{we=i,Jo.transition=o}}function QR(t,e,r,n){var i=we,o=Jo.transition;Jo.transition=null;try{we=4,Cv(t,e,r,n)}finally{we=i,Jo.transition=o}}function Cv(t,e,r,n){if(Zl){var i=Lh(t,e,r,n);if(i===null)ef(t,e,n,eu,r),qg(t,n);else if(qR(i,t,e,r,n))n.stopPropagation();else if(qg(t,n),e&4&&-1<HR.indexOf(t)){for(;i!==null;){var o=sc(i);if(o!==null&&H0(o),o=Lh(t,e,r,n),o===null&&ef(t,e,n,eu,r),o===i)break;i=o}i!==null&&n.stopPropagation()}else ef(t,e,n,null,r)}}var eu=null;function Lh(t,e,r,n){if(eu=null,t=kv(n),t=Ai(t),t!==null)if(e=co(t),e===null)t=null;else if(r=e.tag,r===13){if(t=D0(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return eu=t,null}function J0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MR()){case xv:return 1;case B0:return 4;case Yl:case DR:return 16;case V0:return 536870912;default:return 16}default:return 16}}var Wn=null,Pv=null,Ol=null;function Y0(){if(Ol)return Ol;var t,e=Pv,r=e.length,n,i="value"in Wn?Wn.value:Wn.textContent,o=i.length;for(t=0;t<r&&e[t]===i[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===i[o-n];n++);return Ol=i.slice(t,1<n?1-n:void 0)}function Rl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mc(){return!0}function Gg(){return!1}function Ht(t){function e(r,n,i,o,a){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var s in t)t.hasOwnProperty(s)&&(r=t[s],this[s]=r?r(o):o[s]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Mc:Gg,this.isPropagationStopped=Gg,this}return Fe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Mc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Mc)},persist:function(){},isPersistent:Mc}),e}var Pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ov=Ht(Pa),ac=Fe({},Pa,{view:0,detail:0}),JR=Ht(ac),Hd,qd,qa,Du=Fe({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==qa&&(qa&&t.type==="mousemove"?(Hd=t.screenX-qa.screenX,qd=t.screenY-qa.screenY):qd=Hd=0,qa=t),Hd)},movementY:function(t){return"movementY"in t?t.movementY:qd}}),Qg=Ht(Du),YR=Fe({},Du,{dataTransfer:0}),XR=Ht(YR),ZR=Fe({},ac,{relatedTarget:0}),Kd=Ht(ZR),ej=Fe({},Pa,{animationName:0,elapsedTime:0,pseudoElement:0}),tj=Ht(ej),rj=Fe({},Pa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nj=Ht(rj),ij=Fe({},Pa,{data:0}),Jg=Ht(ij),oj={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aj={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sj={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cj(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sj[t])?!!e[t]:!1}function Rv(){return cj}var lj=Fe({},ac,{key:function(t){if(t.key){var e=oj[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aj[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rv,charCode:function(t){return t.type==="keypress"?Rl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uj=Ht(lj),dj=Fe({},Du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yg=Ht(dj),fj=Fe({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rv}),hj=Ht(fj),pj=Fe({},Pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),vj=Ht(pj),mj=Fe({},Du,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gj=Ht(mj),yj=[9,13,27,32],jv=an&&"CompositionEvent"in window,fs=null;an&&"documentMode"in document&&(fs=document.documentMode);var _j=an&&"TextEvent"in window&&!fs,X0=an&&(!jv||fs&&8<fs&&11>=fs),Xg=" ",Zg=!1;function Z0(t,e){switch(t){case"keyup":return yj.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mo=!1;function wj(t,e){switch(t){case"compositionend":return eS(e);case"keypress":return e.which!==32?null:(Zg=!0,Xg);case"textInput":return t=e.data,t===Xg&&Zg?null:t;default:return null}}function bj(t,e){if(Mo)return t==="compositionend"||!jv&&Z0(t,e)?(t=Y0(),Ol=Pv=Wn=null,Mo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return X0&&e.locale!=="ko"?null:e.data;default:return null}}var Sj={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ey(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Sj[t.type]:e==="textarea"}function tS(t,e,r,n){A0(n),e=tu(e,"onChange"),0<e.length&&(r=new Ov("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var hs=null,Os=null;function kj(t){fS(t,0)}function $u(t){var e=Fo(t);if(T0(e))return t}function xj(t,e){if(t==="change")return e}var rS=!1;if(an){var Gd;if(an){var Qd="oninput"in document;if(!Qd){var ty=document.createElement("div");ty.setAttribute("oninput","return;"),Qd=typeof ty.oninput=="function"}Gd=Qd}else Gd=!1;rS=Gd&&(!document.documentMode||9<document.documentMode)}function ry(){hs&&(hs.detachEvent("onpropertychange",nS),Os=hs=null)}function nS(t){if(t.propertyName==="value"&&$u(Os)){var e=[];tS(e,Os,t,kv(t)),M0(kj,e)}}function Tj(t,e,r){t==="focusin"?(ry(),hs=e,Os=r,hs.attachEvent("onpropertychange",nS)):t==="focusout"&&ry()}function Ej(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $u(Os)}function Cj(t,e){if(t==="click")return $u(e)}function Pj(t,e){if(t==="input"||t==="change")return $u(e)}function Oj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sr=typeof Object.is=="function"?Object.is:Oj;function Rs(t,e){if(Sr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!vh.call(e,i)||!Sr(t[i],e[i]))return!1}return!0}function ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function iy(t,e){var r=ny(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ny(r)}}function iS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?iS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function oS(){for(var t=window,e=Gl();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Gl(t.document)}return e}function Av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Rj(t){var e=oS(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&iS(r.ownerDocument.documentElement,r)){if(n!==null&&Av(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=n.end===void 0?o:Math.min(n.end,i),!t.extend&&o>n&&(i=n,n=o,o=i),i=iy(r,o);var a=iy(r,n);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var jj=an&&"documentMode"in document&&11>=document.documentMode,Do=null,Ih=null,ps=null,Nh=!1;function oy(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Nh||Do==null||Do!==Gl(n)||(n=Do,"selectionStart"in n&&Av(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ps&&Rs(ps,n)||(ps=n,n=tu(Ih,"onSelect"),0<n.length&&(e=new Ov("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Do)))}function Dc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var $o={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Jd={},aS={};an&&(aS=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function Fu(t){if(Jd[t])return Jd[t];if(!$o[t])return t;var e=$o[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in aS)return Jd[t]=e[r];return t}var sS=Fu("animationend"),cS=Fu("animationiteration"),lS=Fu("animationstart"),uS=Fu("transitionend"),dS=new Map,ay="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ai(t,e){dS.set(t,e),so(e,[t])}for(var Yd=0;Yd<ay.length;Yd++){var Xd=ay[Yd],Aj=Xd.toLowerCase(),Lj=Xd[0].toUpperCase()+Xd.slice(1);ai(Aj,"on"+Lj)}ai(sS,"onAnimationEnd");ai(cS,"onAnimationIteration");ai(lS,"onAnimationStart");ai("dblclick","onDoubleClick");ai("focusin","onFocus");ai("focusout","onBlur");ai(uS,"onTransitionEnd");pa("onMouseEnter",["mouseout","mouseover"]);pa("onMouseLeave",["mouseout","mouseover"]);pa("onPointerEnter",["pointerout","pointerover"]);pa("onPointerLeave",["pointerout","pointerover"]);so("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));so("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));so("onBeforeInput",["compositionend","keypress","textInput","paste"]);so("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));so("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));so("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ij=new Set("cancel close invalid load scroll toggle".split(" ").concat(is));function sy(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,AR(n,e,void 0,t),t.currentTarget=null}function fS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var o=void 0;if(e)for(var a=n.length-1;0<=a;a--){var s=n[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==o&&i.isPropagationStopped())break e;sy(i,s,l),o=c}else for(a=0;a<n.length;a++){if(s=n[a],c=s.instance,l=s.currentTarget,s=s.listener,c!==o&&i.isPropagationStopped())break e;sy(i,s,l),o=c}}}if(Jl)throw t=Rh,Jl=!1,Rh=null,t}function je(t,e){var r=e[Uh];r===void 0&&(r=e[Uh]=new Set);var n=t+"__bubble";r.has(n)||(hS(e,t,2,!1),r.add(n))}function Zd(t,e,r){var n=0;e&&(n|=4),hS(r,t,n,e)}var $c="_reactListening"+Math.random().toString(36).slice(2);function js(t){if(!t[$c]){t[$c]=!0,w0.forEach(function(r){r!=="selectionchange"&&(Ij.has(r)||Zd(r,!1,t),Zd(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$c]||(e[$c]=!0,Zd("selectionchange",!1,e))}}function hS(t,e,r,n){switch(J0(e)){case 1:var i=GR;break;case 4:i=QR;break;default:i=Cv}r=i.bind(null,e,r,t),i=void 0,!Oh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function ef(t,e,r,n,i){var o=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var s=n.stateNode.containerInfo;if(s===i||s.nodeType===8&&s.parentNode===i)break;if(a===4)for(a=n.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;a=a.return}for(;s!==null;){if(a=Ai(s),a===null)return;if(c=a.tag,c===5||c===6){n=o=a;continue e}s=s.parentNode}}n=n.return}M0(function(){var l=o,u=kv(r),d=[];e:{var h=dS.get(t);if(h!==void 0){var f=Ov,_=t;switch(t){case"keypress":if(Rl(r)===0)break e;case"keydown":case"keyup":f=uj;break;case"focusin":_="focus",f=Kd;break;case"focusout":_="blur",f=Kd;break;case"beforeblur":case"afterblur":f=Kd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Qg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=XR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=hj;break;case sS:case cS:case lS:f=tj;break;case uS:f=vj;break;case"scroll":f=JR;break;case"wheel":f=gj;break;case"copy":case"cut":case"paste":f=nj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Yg}var v=(e&4)!==0,g=!v&&t==="scroll",y=v?h!==null?h+"Capture":null:h;v=[];for(var m=l,w;m!==null;){w=m;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,y!==null&&(S=Ts(m,y),S!=null&&v.push(As(m,S,w)))),g)break;m=m.return}0<v.length&&(h=new f(h,_,null,r,u),d.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&r!==Ch&&(_=r.relatedTarget||r.fromElement)&&(Ai(_)||_[sn]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(_=r.relatedTarget||r.toElement,f=l,_=_?Ai(_):null,_!==null&&(g=co(_),_!==g||_.tag!==5&&_.tag!==6)&&(_=null)):(f=null,_=l),f!==_)){if(v=Qg,S="onMouseLeave",y="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(v=Yg,S="onPointerLeave",y="onPointerEnter",m="pointer"),g=f==null?h:Fo(f),w=_==null?h:Fo(_),h=new v(S,m+"leave",f,r,u),h.target=g,h.relatedTarget=w,S=null,Ai(u)===l&&(v=new v(y,m+"enter",_,r,u),v.target=w,v.relatedTarget=g,S=v),g=S,f&&_)t:{for(v=f,y=_,m=0,w=v;w;w=mo(w))m++;for(w=0,S=y;S;S=mo(S))w++;for(;0<m-w;)v=mo(v),m--;for(;0<w-m;)y=mo(y),w--;for(;m--;){if(v===y||y!==null&&v===y.alternate)break t;v=mo(v),y=mo(y)}v=null}else v=null;f!==null&&cy(d,h,f,v,!1),_!==null&&g!==null&&cy(d,g,_,v,!0)}}e:{if(h=l?Fo(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var k=xj;else if(ey(h))if(rS)k=Pj;else{k=Ej;var E=Tj}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(k=Cj);if(k&&(k=k(t,l))){tS(d,k,r,u);break e}E&&E(t,h,l),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Sh(h,"number",h.value)}switch(E=l?Fo(l):window,t){case"focusin":(ey(E)||E.contentEditable==="true")&&(Do=E,Ih=l,ps=null);break;case"focusout":ps=Ih=Do=null;break;case"mousedown":Nh=!0;break;case"contextmenu":case"mouseup":case"dragend":Nh=!1,oy(d,r,u);break;case"selectionchange":if(jj)break;case"keydown":case"keyup":oy(d,r,u)}var x;if(jv)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Mo?Z0(t,r)&&(C="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(X0&&r.locale!=="ko"&&(Mo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Mo&&(x=Y0()):(Wn=u,Pv="value"in Wn?Wn.value:Wn.textContent,Mo=!0)),E=tu(l,C),0<E.length&&(C=new Jg(C,t,null,r,u),d.push({event:C,listeners:E}),x?C.data=x:(x=eS(r),x!==null&&(C.data=x)))),(x=_j?wj(t,r):bj(t,r))&&(l=tu(l,"onBeforeInput"),0<l.length&&(u=new Jg("onBeforeInput","beforeinput",null,r,u),d.push({event:u,listeners:l}),u.data=x))}fS(d,e)})}function As(t,e,r){return{instance:t,listener:e,currentTarget:r}}function tu(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ts(t,r),o!=null&&n.unshift(As(t,o,i)),o=Ts(t,e),o!=null&&n.push(As(t,o,i))),t=t.return}return n}function mo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cy(t,e,r,n,i){for(var o=e._reactName,a=[];r!==null&&r!==n;){var s=r,c=s.alternate,l=s.stateNode;if(c!==null&&c===n)break;s.tag===5&&l!==null&&(s=l,i?(c=Ts(r,o),c!=null&&a.unshift(As(r,c,s))):i||(c=Ts(r,o),c!=null&&a.push(As(r,c,s)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var Nj=/\r\n?/g,Mj=/\u0000|\uFFFD/g;function ly(t){return(typeof t=="string"?t:""+t).replace(Nj,`
`).replace(Mj,"")}function Fc(t,e,r){if(e=ly(e),ly(t)!==e&&r)throw Error(H(425))}function ru(){}var Mh=null,Dh=null;function $h(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fh=typeof setTimeout=="function"?setTimeout:void 0,Dj=typeof clearTimeout=="function"?clearTimeout:void 0,uy=typeof Promise=="function"?Promise:void 0,$j=typeof queueMicrotask=="function"?queueMicrotask:typeof uy<"u"?function(t){return uy.resolve(null).then(t).catch(Fj)}:Fh;function Fj(t){setTimeout(function(){throw t})}function tf(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Ps(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Ps(e)}function Yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function dy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Oa=Math.random().toString(36).slice(2),Dr="__reactFiber$"+Oa,Ls="__reactProps$"+Oa,sn="__reactContainer$"+Oa,Uh="__reactEvents$"+Oa,Uj="__reactListeners$"+Oa,Bj="__reactHandles$"+Oa;function Ai(t){var e=t[Dr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[sn]||r[Dr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=dy(t);t!==null;){if(r=t[Dr])return r;t=dy(t)}return e}t=r,r=t.parentNode}return null}function sc(t){return t=t[Dr]||t[sn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Uu(t){return t[Ls]||null}var Bh=[],Uo=-1;function si(t){return{current:t}}function Ae(t){0>Uo||(t.current=Bh[Uo],Bh[Uo]=null,Uo--)}function Pe(t,e){Uo++,Bh[Uo]=t.current,t.current=e}var ni={},dt=si(ni),Rt=si(!1),Xi=ni;function va(t,e){var r=t.type.contextTypes;if(!r)return ni;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in r)i[o]=e[o];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function jt(t){return t=t.childContextTypes,t!=null}function nu(){Ae(Rt),Ae(dt)}function fy(t,e,r){if(dt.current!==ni)throw Error(H(168));Pe(dt,e),Pe(Rt,r)}function pS(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(H(108,TR(t)||"Unknown",i));return Fe({},r,n)}function iu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ni,Xi=dt.current,Pe(dt,t),Pe(Rt,Rt.current),!0}function hy(t,e,r){var n=t.stateNode;if(!n)throw Error(H(169));r?(t=pS(t,e,Xi),n.__reactInternalMemoizedMergedChildContext=t,Ae(Rt),Ae(dt),Pe(dt,t)):Ae(Rt),Pe(Rt,r)}var Zr=null,Bu=!1,rf=!1;function vS(t){Zr===null?Zr=[t]:Zr.push(t)}function Vj(t){Bu=!0,vS(t)}function ci(){if(!rf&&Zr!==null){rf=!0;var t=0,e=we;try{var r=Zr;for(we=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}Zr=null,Bu=!1}catch(i){throw Zr!==null&&(Zr=Zr.slice(t+1)),U0(xv,ci),i}finally{we=e,rf=!1}}return null}var Bo=[],Vo=0,ou=null,au=0,Gt=[],Qt=0,Zi=null,tn=1,rn="";function Ti(t,e){Bo[Vo++]=au,Bo[Vo++]=ou,ou=t,au=e}function mS(t,e,r){Gt[Qt++]=tn,Gt[Qt++]=rn,Gt[Qt++]=Zi,Zi=t;var n=tn;t=rn;var i=32-wr(n)-1;n&=~(1<<i),r+=1;var o=32-wr(e)+i;if(30<o){var a=i-i%5;o=(n&(1<<a)-1).toString(32),n>>=a,i-=a,tn=1<<32-wr(e)+i|r<<i|n,rn=o+t}else tn=1<<o|r<<i|n,rn=t}function Lv(t){t.return!==null&&(Ti(t,1),mS(t,1,0))}function Iv(t){for(;t===ou;)ou=Bo[--Vo],Bo[Vo]=null,au=Bo[--Vo],Bo[Vo]=null;for(;t===Zi;)Zi=Gt[--Qt],Gt[Qt]=null,rn=Gt[--Qt],Gt[Qt]=null,tn=Gt[--Qt],Gt[Qt]=null}var Bt=null,Ut=null,Ne=!1,_r=null;function gS(t,e){var r=Yt(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function py(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Bt=t,Ut=Yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Bt=t,Ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Zi!==null?{id:tn,overflow:rn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Yt(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Bt=t,Ut=null,!0):!1;default:return!1}}function Vh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zh(t){if(Ne){var e=Ut;if(e){var r=e;if(!py(t,e)){if(Vh(t))throw Error(H(418));e=Yn(r.nextSibling);var n=Bt;e&&py(t,e)?gS(n,r):(t.flags=t.flags&-4097|2,Ne=!1,Bt=t)}}else{if(Vh(t))throw Error(H(418));t.flags=t.flags&-4097|2,Ne=!1,Bt=t}}}function vy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Bt=t}function Uc(t){if(t!==Bt)return!1;if(!Ne)return vy(t),Ne=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$h(t.type,t.memoizedProps)),e&&(e=Ut)){if(Vh(t))throw yS(),Error(H(418));for(;e;)gS(t,e),e=Yn(e.nextSibling)}if(vy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ut=Yn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ut=null}}else Ut=Bt?Yn(t.stateNode.nextSibling):null;return!0}function yS(){for(var t=Ut;t;)t=Yn(t.nextSibling)}function ma(){Ut=Bt=null,Ne=!1}function Nv(t){_r===null?_r=[t]:_r.push(t)}var zj=fn.ReactCurrentBatchConfig;function Ka(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(H(309));var n=r.stateNode}if(!n)throw Error(H(147,t));var i=n,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var s=i.refs;a===null?delete s[o]:s[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(H(284));if(!r._owner)throw Error(H(290,t))}return t}function Bc(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function my(t){var e=t._init;return e(t._payload)}function _S(t){function e(y,m){if(t){var w=y.deletions;w===null?(y.deletions=[m],y.flags|=16):w.push(m)}}function r(y,m){if(!t)return null;for(;m!==null;)e(y,m),m=m.sibling;return null}function n(y,m){for(y=new Map;m!==null;)m.key!==null?y.set(m.key,m):y.set(m.index,m),m=m.sibling;return y}function i(y,m){return y=ti(y,m),y.index=0,y.sibling=null,y}function o(y,m,w){return y.index=w,t?(w=y.alternate,w!==null?(w=w.index,w<m?(y.flags|=2,m):w):(y.flags|=2,m)):(y.flags|=1048576,m)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function s(y,m,w,S){return m===null||m.tag!==6?(m=uf(w,y.mode,S),m.return=y,m):(m=i(m,w),m.return=y,m)}function c(y,m,w,S){var k=w.type;return k===No?u(y,m,w.props.children,S,w.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ln&&my(k)===m.type)?(S=i(m,w.props),S.ref=Ka(y,m,w),S.return=y,S):(S=Dl(w.type,w.key,w.props,null,y.mode,S),S.ref=Ka(y,m,w),S.return=y,S)}function l(y,m,w,S){return m===null||m.tag!==4||m.stateNode.containerInfo!==w.containerInfo||m.stateNode.implementation!==w.implementation?(m=df(w,y.mode,S),m.return=y,m):(m=i(m,w.children||[]),m.return=y,m)}function u(y,m,w,S,k){return m===null||m.tag!==7?(m=zi(w,y.mode,S,k),m.return=y,m):(m=i(m,w),m.return=y,m)}function d(y,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return m=uf(""+m,y.mode,w),m.return=y,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Rc:return w=Dl(m.type,m.key,m.props,null,y.mode,w),w.ref=Ka(y,null,m),w.return=y,w;case Io:return m=df(m,y.mode,w),m.return=y,m;case Ln:var S=m._init;return d(y,S(m._payload),w)}if(rs(m)||Va(m))return m=zi(m,y.mode,w,null),m.return=y,m;Bc(y,m)}return null}function h(y,m,w,S){var k=m!==null?m.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return k!==null?null:s(y,m,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Rc:return w.key===k?c(y,m,w,S):null;case Io:return w.key===k?l(y,m,w,S):null;case Ln:return k=w._init,h(y,m,k(w._payload),S)}if(rs(w)||Va(w))return k!==null?null:u(y,m,w,S,null);Bc(y,w)}return null}function f(y,m,w,S,k){if(typeof S=="string"&&S!==""||typeof S=="number")return y=y.get(w)||null,s(m,y,""+S,k);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Rc:return y=y.get(S.key===null?w:S.key)||null,c(m,y,S,k);case Io:return y=y.get(S.key===null?w:S.key)||null,l(m,y,S,k);case Ln:var E=S._init;return f(y,m,w,E(S._payload),k)}if(rs(S)||Va(S))return y=y.get(w)||null,u(m,y,S,k,null);Bc(m,S)}return null}function _(y,m,w,S){for(var k=null,E=null,x=m,C=m=0,R=null;x!==null&&C<w.length;C++){x.index>C?(R=x,x=null):R=x.sibling;var A=h(y,x,w[C],S);if(A===null){x===null&&(x=R);break}t&&x&&A.alternate===null&&e(y,x),m=o(A,m,C),E===null?k=A:E.sibling=A,E=A,x=R}if(C===w.length)return r(y,x),Ne&&Ti(y,C),k;if(x===null){for(;C<w.length;C++)x=d(y,w[C],S),x!==null&&(m=o(x,m,C),E===null?k=x:E.sibling=x,E=x);return Ne&&Ti(y,C),k}for(x=n(y,x);C<w.length;C++)R=f(x,y,C,w[C],S),R!==null&&(t&&R.alternate!==null&&x.delete(R.key===null?C:R.key),m=o(R,m,C),E===null?k=R:E.sibling=R,E=R);return t&&x.forEach(function(D){return e(y,D)}),Ne&&Ti(y,C),k}function v(y,m,w,S){var k=Va(w);if(typeof k!="function")throw Error(H(150));if(w=k.call(w),w==null)throw Error(H(151));for(var E=k=null,x=m,C=m=0,R=null,A=w.next();x!==null&&!A.done;C++,A=w.next()){x.index>C?(R=x,x=null):R=x.sibling;var D=h(y,x,A.value,S);if(D===null){x===null&&(x=R);break}t&&x&&D.alternate===null&&e(y,x),m=o(D,m,C),E===null?k=D:E.sibling=D,E=D,x=R}if(A.done)return r(y,x),Ne&&Ti(y,C),k;if(x===null){for(;!A.done;C++,A=w.next())A=d(y,A.value,S),A!==null&&(m=o(A,m,C),E===null?k=A:E.sibling=A,E=A);return Ne&&Ti(y,C),k}for(x=n(y,x);!A.done;C++,A=w.next())A=f(x,y,C,A.value,S),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?C:A.key),m=o(A,m,C),E===null?k=A:E.sibling=A,E=A);return t&&x.forEach(function(O){return e(y,O)}),Ne&&Ti(y,C),k}function g(y,m,w,S){if(typeof w=="object"&&w!==null&&w.type===No&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Rc:e:{for(var k=w.key,E=m;E!==null;){if(E.key===k){if(k=w.type,k===No){if(E.tag===7){r(y,E.sibling),m=i(E,w.props.children),m.return=y,y=m;break e}}else if(E.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Ln&&my(k)===E.type){r(y,E.sibling),m=i(E,w.props),m.ref=Ka(y,E,w),m.return=y,y=m;break e}r(y,E);break}else e(y,E);E=E.sibling}w.type===No?(m=zi(w.props.children,y.mode,S,w.key),m.return=y,y=m):(S=Dl(w.type,w.key,w.props,null,y.mode,S),S.ref=Ka(y,m,w),S.return=y,y=S)}return a(y);case Io:e:{for(E=w.key;m!==null;){if(m.key===E)if(m.tag===4&&m.stateNode.containerInfo===w.containerInfo&&m.stateNode.implementation===w.implementation){r(y,m.sibling),m=i(m,w.children||[]),m.return=y,y=m;break e}else{r(y,m);break}else e(y,m);m=m.sibling}m=df(w,y.mode,S),m.return=y,y=m}return a(y);case Ln:return E=w._init,g(y,m,E(w._payload),S)}if(rs(w))return _(y,m,w,S);if(Va(w))return v(y,m,w,S);Bc(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,m!==null&&m.tag===6?(r(y,m.sibling),m=i(m,w),m.return=y,y=m):(r(y,m),m=uf(w,y.mode,S),m.return=y,y=m),a(y)):r(y,m)}return g}var ga=_S(!0),wS=_S(!1),su=si(null),cu=null,zo=null,Mv=null;function Dv(){Mv=zo=cu=null}function $v(t){var e=su.current;Ae(su),t._currentValue=e}function Wh(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Yo(t,e){cu=t,Mv=zo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(Mv!==t)if(t={context:t,memoizedValue:e,next:null},zo===null){if(cu===null)throw Error(H(308));zo=t,cu.dependencies={lanes:0,firstContext:t}}else zo=zo.next=t;return e}var Li=null;function Fv(t){Li===null?Li=[t]:Li.push(t)}function bS(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,Fv(e)):(r.next=i.next,i.next=r),e.interleaved=r,cn(t,n)}function cn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var In=!1;function Uv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function on(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ye&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,cn(t,r)}return i=n.interleaved,i===null?(e.next=e,Fv(n)):(e.next=i.next,i.next=e),n.interleaved=e,cn(t,r)}function jl(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Tv(t,r)}}function gy(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?i=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?i=o=e:o=o.next=e}else i=o=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function lu(t,e,r,n){var i=t.updateQueue;In=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(s!==null){i.shared.pending=null;var c=s,l=c.next;c.next=null,a===null?o=l:a.next=l,a=c;var u=t.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==a&&(s===null?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(o!==null){var d=i.baseState;a=0,u=l=c=null,s=o;do{var h=s.lane,f=s.eventTime;if((n&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var _=t,v=s;switch(h=e,f=r,v.tag){case 1:if(_=v.payload,typeof _=="function"){d=_.call(f,d,h);break e}d=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,h=typeof _=="function"?_.call(f,d,h):_,h==null)break e;d=Fe({},d,h);break e;case 2:In=!0}}s.callback!==null&&s.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,a|=h;if(s=s.next,s===null){if(s=i.shared.pending,s===null)break;h=s,s=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);to|=a,t.lanes=a,t.memoizedState=d}}function yy(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(H(191,i));i.call(n)}}}var cc={},Br=si(cc),Is=si(cc),Ns=si(cc);function Ii(t){if(t===cc)throw Error(H(174));return t}function Bv(t,e){switch(Pe(Ns,e),Pe(Is,t),Pe(Br,cc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xh(e,t)}Ae(Br),Pe(Br,e)}function ya(){Ae(Br),Ae(Is),Ae(Ns)}function kS(t){Ii(Ns.current);var e=Ii(Br.current),r=xh(e,t.type);e!==r&&(Pe(Is,t),Pe(Br,r))}function Vv(t){Is.current===t&&(Ae(Br),Ae(Is))}var De=si(0);function uu(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nf=[];function zv(){for(var t=0;t<nf.length;t++)nf[t]._workInProgressVersionPrimary=null;nf.length=0}var Al=fn.ReactCurrentDispatcher,of=fn.ReactCurrentBatchConfig,eo=0,$e=null,Je=null,et=null,du=!1,vs=!1,Ms=0,Wj=0;function ct(){throw Error(H(321))}function Wv(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Sr(t[r],e[r]))return!1;return!0}function Hv(t,e,r,n,i,o){if(eo=o,$e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Al.current=t===null||t.memoizedState===null?Gj:Qj,t=r(n,i),vs){o=0;do{if(vs=!1,Ms=0,25<=o)throw Error(H(301));o+=1,et=Je=null,e.updateQueue=null,Al.current=Jj,t=r(n,i)}while(vs)}if(Al.current=fu,e=Je!==null&&Je.next!==null,eo=0,et=Je=$e=null,du=!1,e)throw Error(H(300));return t}function qv(){var t=Ms!==0;return Ms=0,t}function Ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?$e.memoizedState=et=t:et=et.next=t,et}function er(){if(Je===null){var t=$e.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=et===null?$e.memoizedState:et.next;if(e!==null)et=e,Je=t;else{if(t===null)throw Error(H(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},et===null?$e.memoizedState=et=t:et=et.next=t}return et}function Ds(t,e){return typeof e=="function"?e(t):e}function af(t){var e=er(),r=e.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=Je,i=n.baseQueue,o=r.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}n.baseQueue=i=o,r.pending=null}if(i!==null){o=i.next,n=n.baseState;var s=a=null,c=null,l=o;do{var u=l.lane;if((eo&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),n=l.hasEagerState?l.eagerState:t(n,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(s=c=d,a=n):c=c.next=d,$e.lanes|=u,to|=u}l=l.next}while(l!==null&&l!==o);c===null?a=n:c.next=s,Sr(n,e.memoizedState)||(Ot=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=c,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do o=i.lane,$e.lanes|=o,to|=o,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function sf(t){var e=er(),r=e.queue;if(r===null)throw Error(H(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,o=e.memoizedState;if(i!==null){r.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);Sr(o,e.memoizedState)||(Ot=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,n]}function xS(){}function TS(t,e){var r=$e,n=er(),i=e(),o=!Sr(n.memoizedState,i);if(o&&(n.memoizedState=i,Ot=!0),n=n.queue,Kv(PS.bind(null,r,n,t),[t]),n.getSnapshot!==e||o||et!==null&&et.memoizedState.tag&1){if(r.flags|=2048,$s(9,CS.bind(null,r,n,i,e),void 0,null),tt===null)throw Error(H(349));eo&30||ES(r,e,i)}return i}function ES(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function CS(t,e,r,n){e.value=r,e.getSnapshot=n,OS(e)&&RS(t)}function PS(t,e,r){return r(function(){OS(e)&&RS(t)})}function OS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Sr(t,r)}catch{return!0}}function RS(t){var e=cn(t,1);e!==null&&br(e,t,1,-1)}function _y(t){var e=Ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ds,lastRenderedState:t},e.queue=t,t=t.dispatch=Kj.bind(null,$e,t),[e.memoizedState,t]}function $s(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=$e.updateQueue,e===null?(e={lastEffect:null,stores:null},$e.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function jS(){return er().memoizedState}function Ll(t,e,r,n){var i=Ar();$e.flags|=t,i.memoizedState=$s(1|e,r,void 0,n===void 0?null:n)}function Vu(t,e,r,n){var i=er();n=n===void 0?null:n;var o=void 0;if(Je!==null){var a=Je.memoizedState;if(o=a.destroy,n!==null&&Wv(n,a.deps)){i.memoizedState=$s(e,r,o,n);return}}$e.flags|=t,i.memoizedState=$s(1|e,r,o,n)}function wy(t,e){return Ll(8390656,8,t,e)}function Kv(t,e){return Vu(2048,8,t,e)}function AS(t,e){return Vu(4,2,t,e)}function LS(t,e){return Vu(4,4,t,e)}function IS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NS(t,e,r){return r=r!=null?r.concat([t]):null,Vu(4,4,IS.bind(null,e,t),r)}function Gv(){}function MS(t,e){var r=er();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Wv(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function DS(t,e){var r=er();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Wv(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function $S(t,e,r){return eo&21?(Sr(r,e)||(r=z0(),$e.lanes|=r,to|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=r)}function Hj(t,e){var r=we;we=r!==0&&4>r?r:4,t(!0);var n=of.transition;of.transition={};try{t(!1),e()}finally{we=r,of.transition=n}}function FS(){return er().memoizedState}function qj(t,e,r){var n=ei(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},US(t))BS(e,r);else if(r=bS(t,e,r,n),r!==null){var i=_t();br(r,t,n,i),VS(r,e,n)}}function Kj(t,e,r){var n=ei(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(US(t))BS(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,s=o(a,r);if(i.hasEagerState=!0,i.eagerState=s,Sr(s,a)){var c=e.interleaved;c===null?(i.next=i,Fv(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}r=bS(t,e,i,n),r!==null&&(i=_t(),br(r,t,n,i),VS(r,e,n))}}function US(t){var e=t.alternate;return t===$e||e!==null&&e===$e}function BS(t,e){vs=du=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function VS(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Tv(t,r)}}var fu={readContext:Zt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},Gj={readContext:Zt,useCallback:function(t,e){return Ar().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:wy,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ll(4194308,4,IS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ll(4,2,t,e)},useMemo:function(t,e){var r=Ar();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ar();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=qj.bind(null,$e,t),[n.memoizedState,t]},useRef:function(t){var e=Ar();return t={current:t},e.memoizedState=t},useState:_y,useDebugValue:Gv,useDeferredValue:function(t){return Ar().memoizedState=t},useTransition:function(){var t=_y(!1),e=t[0];return t=Hj.bind(null,t[1]),Ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=$e,i=Ar();if(Ne){if(r===void 0)throw Error(H(407));r=r()}else{if(r=e(),tt===null)throw Error(H(349));eo&30||ES(n,e,r)}i.memoizedState=r;var o={value:r,getSnapshot:e};return i.queue=o,wy(PS.bind(null,n,o,t),[t]),n.flags|=2048,$s(9,CS.bind(null,n,o,r,e),void 0,null),r},useId:function(){var t=Ar(),e=tt.identifierPrefix;if(Ne){var r=rn,n=tn;r=(n&~(1<<32-wr(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Ms++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=Wj++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Qj={readContext:Zt,useCallback:MS,useContext:Zt,useEffect:Kv,useImperativeHandle:NS,useInsertionEffect:AS,useLayoutEffect:LS,useMemo:DS,useReducer:af,useRef:jS,useState:function(){return af(Ds)},useDebugValue:Gv,useDeferredValue:function(t){var e=er();return $S(e,Je.memoizedState,t)},useTransition:function(){var t=af(Ds)[0],e=er().memoizedState;return[t,e]},useMutableSource:xS,useSyncExternalStore:TS,useId:FS,unstable_isNewReconciler:!1},Jj={readContext:Zt,useCallback:MS,useContext:Zt,useEffect:Kv,useImperativeHandle:NS,useInsertionEffect:AS,useLayoutEffect:LS,useMemo:DS,useReducer:sf,useRef:jS,useState:function(){return sf(Ds)},useDebugValue:Gv,useDeferredValue:function(t){var e=er();return Je===null?e.memoizedState=t:$S(e,Je.memoizedState,t)},useTransition:function(){var t=sf(Ds)[0],e=er().memoizedState;return[t,e]},useMutableSource:xS,useSyncExternalStore:TS,useId:FS,unstable_isNewReconciler:!1};function dr(t,e){if(t&&t.defaultProps){e=Fe({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Hh(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Fe({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var zu={isMounted:function(t){return(t=t._reactInternals)?co(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=_t(),i=ei(t),o=on(n,i);o.payload=e,r!=null&&(o.callback=r),e=Xn(t,o,i),e!==null&&(br(e,t,i,n),jl(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=_t(),i=ei(t),o=on(n,i);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=Xn(t,o,i),e!==null&&(br(e,t,i,n),jl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=_t(),n=ei(t),i=on(r,n);i.tag=2,e!=null&&(i.callback=e),e=Xn(t,i,n),e!==null&&(br(e,t,n,r),jl(e,t,n))}};function by(t,e,r,n,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,o,a):e.prototype&&e.prototype.isPureReactComponent?!Rs(r,n)||!Rs(i,o):!0}function zS(t,e,r){var n=!1,i=ni,o=e.contextType;return typeof o=="object"&&o!==null?o=Zt(o):(i=jt(e)?Xi:dt.current,n=e.contextTypes,o=(n=n!=null)?va(t,i):ni),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zu,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Sy(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&zu.enqueueReplaceState(e,e.state,null)}function qh(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs={},Uv(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Zt(o):(o=jt(e)?Xi:dt.current,i.context=va(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Hh(t,e,o,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zu.enqueueReplaceState(i,i.state,null),lu(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _a(t,e){try{var r="",n=e;do r+=xR(n),n=n.return;while(n);var i=r}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function cf(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Kh(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var Yj=typeof WeakMap=="function"?WeakMap:Map;function WS(t,e,r){r=on(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){pu||(pu=!0,np=n),Kh(t,e)},r}function HS(t,e,r){r=on(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){Kh(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){Kh(t,e),typeof n!="function"&&(Zn===null?Zn=new Set([this]):Zn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function ky(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new Yj;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=dA.bind(null,t,e,r),e.then(t,t))}function xy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ty(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=on(-1,1),e.tag=2,Xn(r,e,1))),r.lanes|=1),t)}var Xj=fn.ReactCurrentOwner,Ot=!1;function pt(t,e,r,n){e.child=t===null?wS(e,null,r,n):ga(e,t.child,r,n)}function Ey(t,e,r,n,i){r=r.render;var o=e.ref;return Yo(e,i),n=Hv(t,e,r,n,o,i),r=qv(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ln(t,e,i)):(Ne&&r&&Lv(e),e.flags|=1,pt(t,e,n,i),e.child)}function Cy(t,e,r,n,i){if(t===null){var o=r.type;return typeof o=="function"&&!rm(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,qS(t,e,o,n,i)):(t=Dl(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:Rs,r(a,n)&&t.ref===e.ref)return ln(t,e,i)}return e.flags|=1,t=ti(o,n),t.ref=e.ref,t.return=e,e.child=t}function qS(t,e,r,n,i){if(t!==null){var o=t.memoizedProps;if(Rs(o,n)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=n=o,(t.lanes&i)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,ln(t,e,i)}return Gh(t,e,r,n,i)}function KS(t,e,r){var n=e.pendingProps,i=n.children,o=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Ho,Mt),Mt|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(Ho,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=o!==null?o.baseLanes:r,Pe(Ho,Mt),Mt|=n}else o!==null?(n=o.baseLanes|r,e.memoizedState=null):n=r,Pe(Ho,Mt),Mt|=n;return pt(t,e,i,r),e.child}function GS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Gh(t,e,r,n,i){var o=jt(r)?Xi:dt.current;return o=va(e,o),Yo(e,i),r=Hv(t,e,r,n,o,i),n=qv(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ln(t,e,i)):(Ne&&n&&Lv(e),e.flags|=1,pt(t,e,r,i),e.child)}function Py(t,e,r,n,i){if(jt(r)){var o=!0;iu(e)}else o=!1;if(Yo(e,i),e.stateNode===null)Il(t,e),zS(e,r,n),qh(e,r,n,i),n=!0;else if(t===null){var a=e.stateNode,s=e.memoizedProps;a.props=s;var c=a.context,l=r.contextType;typeof l=="object"&&l!==null?l=Zt(l):(l=jt(r)?Xi:dt.current,l=va(e,l));var u=r.getDerivedStateFromProps,d=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==n||c!==l)&&Sy(e,a,n,l),In=!1;var h=e.memoizedState;a.state=h,lu(e,n,a,i),c=e.memoizedState,s!==n||h!==c||Rt.current||In?(typeof u=="function"&&(Hh(e,r,u,n),c=e.memoizedState),(s=In||by(e,r,s,n,h,c,l))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),a.props=n,a.state=c,a.context=l,n=s):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,SS(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:dr(e.type,s),a.props=l,d=e.pendingProps,h=a.context,c=r.contextType,typeof c=="object"&&c!==null?c=Zt(c):(c=jt(r)?Xi:dt.current,c=va(e,c));var f=r.getDerivedStateFromProps;(u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s!==d||h!==c)&&Sy(e,a,n,c),In=!1,h=e.memoizedState,a.state=h,lu(e,n,a,i);var _=e.memoizedState;s!==d||h!==_||Rt.current||In?(typeof f=="function"&&(Hh(e,r,f,n),_=e.memoizedState),(l=In||by(e,r,l,n,h,_,c)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,_,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,_,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=_),a.props=n,a.state=_,a.context=c,n=l):(typeof a.componentDidUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||s===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return Qh(t,e,r,n,o,i)}function Qh(t,e,r,n,i,o){GS(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return i&&hy(e,r,!1),ln(t,e,o);n=e.stateNode,Xj.current=e;var s=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=ga(e,t.child,null,o),e.child=ga(e,null,s,o)):pt(t,e,s,o),e.memoizedState=n.state,i&&hy(e,r,!0),e.child}function QS(t){var e=t.stateNode;e.pendingContext?fy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&fy(t,e.context,!1),Bv(t,e.containerInfo)}function Oy(t,e,r,n,i){return ma(),Nv(i),e.flags|=256,pt(t,e,r,n),e.child}var Jh={dehydrated:null,treeContext:null,retryLane:0};function Yh(t){return{baseLanes:t,cachePool:null,transitions:null}}function JS(t,e,r){var n=e.pendingProps,i=De.current,o=!1,a=(e.flags&128)!==0,s;if((s=a)||(s=t!==null&&t.memoizedState===null?!1:(i&2)!==0),s?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Pe(De,i&1),t===null)return zh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,o?(n=e.mode,o=e.child,a={mode:"hidden",children:a},!(n&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=qu(a,n,0,null),t=zi(t,n,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Yh(r),e.memoizedState=Jh,t):Qv(e,a));if(i=t.memoizedState,i!==null&&(s=i.dehydrated,s!==null))return Zj(t,e,a,n,s,i,r);if(o){o=n.fallback,a=e.mode,i=t.child,s=i.sibling;var c={mode:"hidden",children:n.children};return!(a&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=ti(i,c),n.subtreeFlags=i.subtreeFlags&14680064),s!==null?o=ti(s,o):(o=zi(o,a,r,null),o.flags|=2),o.return=e,n.return=e,n.sibling=o,e.child=n,n=o,o=e.child,a=t.child.memoizedState,a=a===null?Yh(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~r,e.memoizedState=Jh,n}return o=t.child,t=o.sibling,n=ti(o,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Qv(t,e){return e=qu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Vc(t,e,r,n){return n!==null&&Nv(n),ga(e,t.child,null,r),t=Qv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Zj(t,e,r,n,i,o,a){if(r)return e.flags&256?(e.flags&=-257,n=cf(Error(H(422))),Vc(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=n.fallback,i=e.mode,n=qu({mode:"visible",children:n.children},i,0,null),o=zi(o,i,a,null),o.flags|=2,n.return=e,o.return=e,n.sibling=o,e.child=n,e.mode&1&&ga(e,t.child,null,a),e.child.memoizedState=Yh(a),e.memoizedState=Jh,o);if(!(e.mode&1))return Vc(t,e,a,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var s=n.dgst;return n=s,o=Error(H(419)),n=cf(o,n,void 0),Vc(t,e,a,n)}if(s=(a&t.childLanes)!==0,Ot||s){if(n=tt,n!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,cn(t,i),br(n,t,i,-1))}return tm(),n=cf(Error(H(421))),Vc(t,e,a,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=fA.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ut=Yn(i.nextSibling),Bt=e,Ne=!0,_r=null,t!==null&&(Gt[Qt++]=tn,Gt[Qt++]=rn,Gt[Qt++]=Zi,tn=t.id,rn=t.overflow,Zi=e),e=Qv(e,n.children),e.flags|=4096,e)}function Ry(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Wh(t.return,e,r)}function lf(t,e,r,n,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function YS(t,e,r){var n=e.pendingProps,i=n.revealOrder,o=n.tail;if(pt(t,e,n.children,r),n=De.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ry(t,r,e);else if(t.tag===19)Ry(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Pe(De,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&uu(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),lf(e,!1,i,r,o);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&uu(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}lf(e,!0,r,null,o);break;case"together":lf(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Il(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ln(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),to|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,r=ti(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ti(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function eA(t,e,r){switch(e.tag){case 3:QS(e),ma();break;case 5:kS(e);break;case 1:jt(e.type)&&iu(e);break;case 4:Bv(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Pe(su,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Pe(De,De.current&1),e.flags|=128,null):r&e.child.childLanes?JS(t,e,r):(Pe(De,De.current&1),t=ln(t,e,r),t!==null?t.sibling:null);Pe(De,De.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return YS(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Pe(De,De.current),n)break;return null;case 22:case 23:return e.lanes=0,KS(t,e,r)}return ln(t,e,r)}var XS,Xh,ZS,ek;XS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Xh=function(){};ZS=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,Ii(Br.current);var o=null;switch(r){case"input":i=wh(t,i),n=wh(t,n),o=[];break;case"select":i=Fe({},i,{value:void 0}),n=Fe({},n,{value:void 0}),o=[];break;case"textarea":i=kh(t,i),n=kh(t,n),o=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=ru)}Th(r,n);var a;r=null;for(l in i)if(!n.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(ks.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in n){var c=n[l];if(s=i!=null?i[l]:void 0,n.hasOwnProperty(l)&&c!==s&&(c!=null||s!=null))if(l==="style")if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(r||(r={}),r[a]=c[a])}else r||(o||(o=[]),o.push(l,r)),r=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,s=s?s.__html:void 0,c!=null&&s!==c&&(o=o||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(ks.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&je("scroll",t),o||s===c||(o=[])):(o=o||[]).push(l,c))}r&&(o=o||[]).push("style",r);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};ek=function(t,e,r,n){r!==n&&(e.flags|=4)};function Ga(t,e){if(!Ne)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function tA(t,e,r){var n=e.pendingProps;switch(Iv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return jt(e.type)&&nu(),lt(e),null;case 3:return n=e.stateNode,ya(),Ae(Rt),Ae(dt),zv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Uc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_r!==null&&(ap(_r),_r=null))),Xh(t,e),lt(e),null;case 5:Vv(e);var i=Ii(Ns.current);if(r=e.type,t!==null&&e.stateNode!=null)ZS(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(H(166));return lt(e),null}if(t=Ii(Br.current),Uc(e)){n=e.stateNode,r=e.type;var o=e.memoizedProps;switch(n[Dr]=e,n[Ls]=o,t=(e.mode&1)!==0,r){case"dialog":je("cancel",n),je("close",n);break;case"iframe":case"object":case"embed":je("load",n);break;case"video":case"audio":for(i=0;i<is.length;i++)je(is[i],n);break;case"source":je("error",n);break;case"img":case"image":case"link":je("error",n),je("load",n);break;case"details":je("toggle",n);break;case"input":Fg(n,o),je("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!o.multiple},je("invalid",n);break;case"textarea":Bg(n,o),je("invalid",n)}Th(r,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var s=o[a];a==="children"?typeof s=="string"?n.textContent!==s&&(o.suppressHydrationWarning!==!0&&Fc(n.textContent,s,t),i=["children",s]):typeof s=="number"&&n.textContent!==""+s&&(o.suppressHydrationWarning!==!0&&Fc(n.textContent,s,t),i=["children",""+s]):ks.hasOwnProperty(a)&&s!=null&&a==="onScroll"&&je("scroll",n)}switch(r){case"input":jc(n),Ug(n,o,!0);break;case"textarea":jc(n),Vg(n);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(n.onclick=ru)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=P0(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Dr]=e,t[Ls]=n,XS(t,e,!1,!1),e.stateNode=t;e:{switch(a=Eh(r,n),r){case"dialog":je("cancel",t),je("close",t),i=n;break;case"iframe":case"object":case"embed":je("load",t),i=n;break;case"video":case"audio":for(i=0;i<is.length;i++)je(is[i],t);i=n;break;case"source":je("error",t),i=n;break;case"img":case"image":case"link":je("error",t),je("load",t),i=n;break;case"details":je("toggle",t),i=n;break;case"input":Fg(t,n),i=wh(t,n),je("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Fe({},n,{value:void 0}),je("invalid",t);break;case"textarea":Bg(t,n),i=kh(t,n),je("invalid",t);break;default:i=n}Th(r,i),s=i;for(o in s)if(s.hasOwnProperty(o)){var c=s[o];o==="style"?j0(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&O0(t,c)):o==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&xs(t,c):typeof c=="number"&&xs(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ks.hasOwnProperty(o)?c!=null&&o==="onScroll"&&je("scroll",t):c!=null&&_v(t,o,c,a))}switch(r){case"input":jc(t),Ug(t,n,!1);break;case"textarea":jc(t),Vg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+ri(n.value));break;case"select":t.multiple=!!n.multiple,o=n.value,o!=null?Ko(t,!!n.multiple,o,!1):n.defaultValue!=null&&Ko(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ru)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)ek(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(H(166));if(r=Ii(Ns.current),Ii(Br.current),Uc(e)){if(n=e.stateNode,r=e.memoizedProps,n[Dr]=e,(o=n.nodeValue!==r)&&(t=Bt,t!==null))switch(t.tag){case 3:Fc(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fc(n.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Dr]=e,e.stateNode=n}return lt(e),null;case 13:if(Ae(De),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ne&&Ut!==null&&e.mode&1&&!(e.flags&128))yS(),ma(),e.flags|=98560,o=!1;else if(o=Uc(e),n!==null&&n.dehydrated!==null){if(t===null){if(!o)throw Error(H(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(H(317));o[Dr]=e}else ma(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),o=!1}else _r!==null&&(ap(_r),_r=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Ye===0&&(Ye=3):tm())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return ya(),Xh(t,e),t===null&&js(e.stateNode.containerInfo),lt(e),null;case 10:return $v(e.type._context),lt(e),null;case 17:return jt(e.type)&&nu(),lt(e),null;case 19:if(Ae(De),o=e.memoizedState,o===null)return lt(e),null;if(n=(e.flags&128)!==0,a=o.rendering,a===null)if(n)Ga(o,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=uu(t),a!==null){for(e.flags|=128,Ga(o,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)o=r,t=n,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Pe(De,De.current&1|2),e.child}t=t.sibling}o.tail!==null&&We()>wa&&(e.flags|=128,n=!0,Ga(o,!1),e.lanes=4194304)}else{if(!n)if(t=uu(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Ga(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Ne)return lt(e),null}else 2*We()-o.renderingStartTime>wa&&r!==1073741824&&(e.flags|=128,n=!0,Ga(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=We(),e.sibling=null,r=De.current,Pe(De,n?r&1|2:r&1),e):(lt(e),null);case 22:case 23:return em(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Mt&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function rA(t,e){switch(Iv(e),e.tag){case 1:return jt(e.type)&&nu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ya(),Ae(Rt),Ae(dt),zv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Vv(e),null;case 13:if(Ae(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));ma()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(De),null;case 4:return ya(),null;case 10:return $v(e.type._context),null;case 22:case 23:return em(),null;case 24:return null;default:return null}}var zc=!1,ut=!1,nA=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Wo(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ve(t,e,n)}else r.current=null}function Zh(t,e,r){try{r()}catch(n){Ve(t,e,n)}}var jy=!1;function iA(t,e){if(Mh=Zl,t=oS(),Av(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,o=n.focusNode;n=n.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,s=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==r||i!==0&&d.nodeType!==3||(s=a+i),d!==o||n!==0&&d.nodeType!==3||(c=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===r&&++l===i&&(s=a),h===o&&++u===n&&(c=a),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}r=s===-1||c===-1?null:{start:s,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Dh={focusedElem:t,selectionRange:r},Zl=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,g=_.memoizedState,y=e.stateNode,m=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:dr(e.type,v),g);y.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(S){Ve(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return _=jy,jy=!1,_}function ms(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Zh(e,r,o)}i=i.next}while(i!==n)}}function Wu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function ep(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function tk(t){var e=t.alternate;e!==null&&(t.alternate=null,tk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Dr],delete e[Ls],delete e[Uh],delete e[Uj],delete e[Bj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rk(t){return t.tag===5||t.tag===3||t.tag===4}function Ay(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=ru));else if(n!==4&&(t=t.child,t!==null))for(tp(t,e,r),t=t.sibling;t!==null;)tp(t,e,r),t=t.sibling}function rp(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(rp(t,e,r),t=t.sibling;t!==null;)rp(t,e,r),t=t.sibling}var nt=null,mr=!1;function kn(t,e,r){for(r=r.child;r!==null;)nk(t,e,r),r=r.sibling}function nk(t,e,r){if(Ur&&typeof Ur.onCommitFiberUnmount=="function")try{Ur.onCommitFiberUnmount(Mu,r)}catch{}switch(r.tag){case 5:ut||Wo(r,e);case 6:var n=nt,i=mr;nt=null,kn(t,e,r),nt=n,mr=i,nt!==null&&(mr?(t=nt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):nt.removeChild(r.stateNode));break;case 18:nt!==null&&(mr?(t=nt,r=r.stateNode,t.nodeType===8?tf(t.parentNode,r):t.nodeType===1&&tf(t,r),Ps(t)):tf(nt,r.stateNode));break;case 4:n=nt,i=mr,nt=r.stateNode.containerInfo,mr=!0,kn(t,e,r),nt=n,mr=i;break;case 0:case 11:case 14:case 15:if(!ut&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Zh(r,e,a),i=i.next}while(i!==n)}kn(t,e,r);break;case 1:if(!ut&&(Wo(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(s){Ve(r,e,s)}kn(t,e,r);break;case 21:kn(t,e,r);break;case 22:r.mode&1?(ut=(n=ut)||r.memoizedState!==null,kn(t,e,r),ut=n):kn(t,e,r);break;default:kn(t,e,r)}}function Ly(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new nA),e.forEach(function(n){var i=hA.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function sr(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var o=t,a=e,s=a;e:for(;s!==null;){switch(s.tag){case 5:nt=s.stateNode,mr=!1;break e;case 3:nt=s.stateNode.containerInfo,mr=!0;break e;case 4:nt=s.stateNode.containerInfo,mr=!0;break e}s=s.return}if(nt===null)throw Error(H(160));nk(o,a,i),nt=null,mr=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){Ve(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ik(e,t),e=e.sibling}function ik(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sr(e,t),jr(t),n&4){try{ms(3,t,t.return),Wu(3,t)}catch(v){Ve(t,t.return,v)}try{ms(5,t,t.return)}catch(v){Ve(t,t.return,v)}}break;case 1:sr(e,t),jr(t),n&512&&r!==null&&Wo(r,r.return);break;case 5:if(sr(e,t),jr(t),n&512&&r!==null&&Wo(r,r.return),t.flags&32){var i=t.stateNode;try{xs(i,"")}catch(v){Ve(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=r!==null?r.memoizedProps:o,s=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{s==="input"&&o.type==="radio"&&o.name!=null&&E0(i,o),Eh(s,a);var l=Eh(s,o);for(a=0;a<c.length;a+=2){var u=c[a],d=c[a+1];u==="style"?j0(i,d):u==="dangerouslySetInnerHTML"?O0(i,d):u==="children"?xs(i,d):_v(i,u,d,l)}switch(s){case"input":bh(i,o);break;case"textarea":C0(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Ko(i,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Ko(i,!!o.multiple,o.defaultValue,!0):Ko(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ls]=o}catch(v){Ve(t,t.return,v)}}break;case 6:if(sr(e,t),jr(t),n&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){Ve(t,t.return,v)}}break;case 3:if(sr(e,t),jr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ps(e.containerInfo)}catch(v){Ve(t,t.return,v)}break;case 4:sr(e,t),jr(t);break;case 13:sr(e,t),jr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Xv=We())),n&4&&Ly(t);break;case 22:if(u=r!==null&&r.memoizedState!==null,t.mode&1?(ut=(l=ut)||u,sr(e,t),ut=l):sr(e,t),jr(t),n&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Y=t,u=t.child;u!==null;){for(d=Y=u;Y!==null;){switch(h=Y,f=h.child,h.tag){case 0:case 11:case 14:case 15:ms(4,h,h.return);break;case 1:Wo(h,h.return);var _=h.stateNode;if(typeof _.componentWillUnmount=="function"){n=h,r=h.return;try{e=n,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(v){Ve(n,r,v)}}break;case 5:Wo(h,h.return);break;case 22:if(h.memoizedState!==null){Ny(d);continue}}f!==null?(f.return=h,Y=f):Ny(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(s=d.stateNode,c=d.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,s.style.display=R0("display",a))}catch(v){Ve(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(v){Ve(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:sr(e,t),jr(t),n&4&&Ly(t);break;case 21:break;default:sr(e,t),jr(t)}}function jr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(rk(r)){var n=r;break e}r=r.return}throw Error(H(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(xs(i,""),n.flags&=-33);var o=Ay(t);rp(t,o,i);break;case 3:case 4:var a=n.stateNode.containerInfo,s=Ay(t);tp(t,s,a);break;default:throw Error(H(161))}}catch(c){Ve(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oA(t,e,r){Y=t,ok(t)}function ok(t,e,r){for(var n=(t.mode&1)!==0;Y!==null;){var i=Y,o=i.child;if(i.tag===22&&n){var a=i.memoizedState!==null||zc;if(!a){var s=i.alternate,c=s!==null&&s.memoizedState!==null||ut;s=zc;var l=ut;if(zc=a,(ut=c)&&!l)for(Y=i;Y!==null;)a=Y,c=a.child,a.tag===22&&a.memoizedState!==null?My(i):c!==null?(c.return=a,Y=c):My(i);for(;o!==null;)Y=o,ok(o),o=o.sibling;Y=i,zc=s,ut=l}Iy(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Y=o):Iy(t)}}function Iy(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||Wu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ut)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:dr(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&yy(e,o,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}yy(e,a,r)}break;case 5:var s=e.stateNode;if(r===null&&e.flags&4){r=s;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Ps(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}ut||e.flags&512&&ep(e)}catch(h){Ve(e,e.return,h)}}if(e===t){Y=null;break}if(r=e.sibling,r!==null){r.return=e.return,Y=r;break}Y=e.return}}function Ny(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Y=r;break}Y=e.return}}function My(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Wu(4,e)}catch(c){Ve(e,r,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){Ve(e,i,c)}}var o=e.return;try{ep(e)}catch(c){Ve(e,o,c)}break;case 5:var a=e.return;try{ep(e)}catch(c){Ve(e,a,c)}}}catch(c){Ve(e,e.return,c)}if(e===t){Y=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Y=s;break}Y=e.return}}var aA=Math.ceil,hu=fn.ReactCurrentDispatcher,Jv=fn.ReactCurrentOwner,Xt=fn.ReactCurrentBatchConfig,ye=0,tt=null,qe=null,it=0,Mt=0,Ho=si(0),Ye=0,Fs=null,to=0,Hu=0,Yv=0,gs=null,Pt=null,Xv=0,wa=1/0,Yr=null,pu=!1,np=null,Zn=null,Wc=!1,Hn=null,vu=0,ys=0,ip=null,Nl=-1,Ml=0;function _t(){return ye&6?We():Nl!==-1?Nl:Nl=We()}function ei(t){return t.mode&1?ye&2&&it!==0?it&-it:zj.transition!==null?(Ml===0&&(Ml=z0()),Ml):(t=we,t!==0||(t=window.event,t=t===void 0?16:J0(t.type)),t):1}function br(t,e,r,n){if(50<ys)throw ys=0,ip=null,Error(H(185));oc(t,r,n),(!(ye&2)||t!==tt)&&(t===tt&&(!(ye&2)&&(Hu|=r),Ye===4&&Mn(t,it)),At(t,n),r===1&&ye===0&&!(e.mode&1)&&(wa=We()+500,Bu&&ci()))}function At(t,e){var r=t.callbackNode;zR(t,e);var n=Xl(t,t===tt?it:0);if(n===0)r!==null&&Hg(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Hg(r),e===1)t.tag===0?Vj(Dy.bind(null,t)):vS(Dy.bind(null,t)),$j(function(){!(ye&6)&&ci()}),r=null;else{switch(W0(n)){case 1:r=xv;break;case 4:r=B0;break;case 16:r=Yl;break;case 536870912:r=V0;break;default:r=Yl}r=hk(r,ak.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function ak(t,e){if(Nl=-1,Ml=0,ye&6)throw Error(H(327));var r=t.callbackNode;if(Xo()&&t.callbackNode!==r)return null;var n=Xl(t,t===tt?it:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=mu(t,n);else{e=n;var i=ye;ye|=2;var o=ck();(tt!==t||it!==e)&&(Yr=null,wa=We()+500,Vi(t,e));do try{lA();break}catch(s){sk(t,s)}while(!0);Dv(),hu.current=o,ye=i,qe!==null?e=0:(tt=null,it=0,e=Ye)}if(e!==0){if(e===2&&(i=jh(t),i!==0&&(n=i,e=op(t,i))),e===1)throw r=Fs,Vi(t,0),Mn(t,n),At(t,We()),r;if(e===6)Mn(t,n);else{if(i=t.current.alternate,!(n&30)&&!sA(i)&&(e=mu(t,n),e===2&&(o=jh(t),o!==0&&(n=o,e=op(t,o))),e===1))throw r=Fs,Vi(t,0),Mn(t,n),At(t,We()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(H(345));case 2:Ei(t,Pt,Yr);break;case 3:if(Mn(t,n),(n&130023424)===n&&(e=Xv+500-We(),10<e)){if(Xl(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){_t(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Fh(Ei.bind(null,t,Pt,Yr),e);break}Ei(t,Pt,Yr);break;case 4:if(Mn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var a=31-wr(n);o=1<<a,a=e[a],a>i&&(i=a),n&=~o}if(n=i,n=We()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*aA(n/1960))-n,10<n){t.timeoutHandle=Fh(Ei.bind(null,t,Pt,Yr),n);break}Ei(t,Pt,Yr);break;case 5:Ei(t,Pt,Yr);break;default:throw Error(H(329))}}}return At(t,We()),t.callbackNode===r?ak.bind(null,t):null}function op(t,e){var r=gs;return t.current.memoizedState.isDehydrated&&(Vi(t,e).flags|=256),t=mu(t,e),t!==2&&(e=Pt,Pt=r,e!==null&&ap(e)),t}function ap(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function sA(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!Sr(o(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Mn(t,e){for(e&=~Yv,e&=~Hu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-wr(e),n=1<<r;t[r]=-1,e&=~n}}function Dy(t){if(ye&6)throw Error(H(327));Xo();var e=Xl(t,0);if(!(e&1))return At(t,We()),null;var r=mu(t,e);if(t.tag!==0&&r===2){var n=jh(t);n!==0&&(e=n,r=op(t,n))}if(r===1)throw r=Fs,Vi(t,0),Mn(t,e),At(t,We()),r;if(r===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ei(t,Pt,Yr),At(t,We()),null}function Zv(t,e){var r=ye;ye|=1;try{return t(e)}finally{ye=r,ye===0&&(wa=We()+500,Bu&&ci())}}function ro(t){Hn!==null&&Hn.tag===0&&!(ye&6)&&Xo();var e=ye;ye|=1;var r=Xt.transition,n=we;try{if(Xt.transition=null,we=1,t)return t()}finally{we=n,Xt.transition=r,ye=e,!(ye&6)&&ci()}}function em(){Mt=Ho.current,Ae(Ho)}function Vi(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Dj(r)),qe!==null)for(r=qe.return;r!==null;){var n=r;switch(Iv(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&nu();break;case 3:ya(),Ae(Rt),Ae(dt),zv();break;case 5:Vv(n);break;case 4:ya();break;case 13:Ae(De);break;case 19:Ae(De);break;case 10:$v(n.type._context);break;case 22:case 23:em()}r=r.return}if(tt=t,qe=t=ti(t.current,null),it=Mt=e,Ye=0,Fs=null,Yv=Hu=to=0,Pt=gs=null,Li!==null){for(e=0;e<Li.length;e++)if(r=Li[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,o=r.pending;if(o!==null){var a=o.next;o.next=i,n.next=a}r.pending=n}Li=null}return t}function sk(t,e){do{var r=qe;try{if(Dv(),Al.current=fu,du){for(var n=$e.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}du=!1}if(eo=0,et=Je=$e=null,vs=!1,Ms=0,Jv.current=null,r===null||r.return===null){Ye=1,Fs=e,qe=null;break}e:{var o=t,a=r.return,s=r,c=e;if(e=it,s.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=s,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=xy(a);if(f!==null){f.flags&=-257,Ty(f,a,s,o,e),f.mode&1&&ky(o,l,e),e=f,c=l;var _=e.updateQueue;if(_===null){var v=new Set;v.add(c),e.updateQueue=v}else _.add(c);break e}else{if(!(e&1)){ky(o,l,e),tm();break e}c=Error(H(426))}}else if(Ne&&s.mode&1){var g=xy(a);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Ty(g,a,s,o,e),Nv(_a(c,s));break e}}o=c=_a(c,s),Ye!==4&&(Ye=2),gs===null?gs=[o]:gs.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=WS(o,c,e);gy(o,y);break e;case 1:s=c;var m=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Zn===null||!Zn.has(w)))){o.flags|=65536,e&=-e,o.lanes|=e;var S=HS(o,s,e);gy(o,S);break e}}o=o.return}while(o!==null)}uk(r)}catch(k){e=k,qe===r&&r!==null&&(qe=r=r.return);continue}break}while(!0)}function ck(){var t=hu.current;return hu.current=fu,t===null?fu:t}function tm(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),tt===null||!(to&268435455)&&!(Hu&268435455)||Mn(tt,it)}function mu(t,e){var r=ye;ye|=2;var n=ck();(tt!==t||it!==e)&&(Yr=null,Vi(t,e));do try{cA();break}catch(i){sk(t,i)}while(!0);if(Dv(),ye=r,hu.current=n,qe!==null)throw Error(H(261));return tt=null,it=0,Ye}function cA(){for(;qe!==null;)lk(qe)}function lA(){for(;qe!==null&&!IR();)lk(qe)}function lk(t){var e=fk(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?uk(t):qe=e,Jv.current=null}function uk(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=rA(r,e),r!==null){r.flags&=32767,qe=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,qe=null;return}}else if(r=tA(r,e,Mt),r!==null){qe=r;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=t}while(e!==null);Ye===0&&(Ye=5)}function Ei(t,e,r){var n=we,i=Xt.transition;try{Xt.transition=null,we=1,uA(t,e,r,n)}finally{Xt.transition=i,we=n}return null}function uA(t,e,r,n){do Xo();while(Hn!==null);if(ye&6)throw Error(H(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(WR(t,o),t===tt&&(qe=tt=null,it=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Wc||(Wc=!0,hk(Yl,function(){return Xo(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=Xt.transition,Xt.transition=null;var a=we;we=1;var s=ye;ye|=4,Jv.current=null,iA(t,r),ik(r,t),Rj(Dh),Zl=!!Mh,Dh=Mh=null,t.current=r,oA(r),NR(),ye=s,we=a,Xt.transition=o}else t.current=r;if(Wc&&(Wc=!1,Hn=t,vu=i),o=t.pendingLanes,o===0&&(Zn=null),$R(r.stateNode),At(t,We()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(pu)throw pu=!1,t=np,np=null,t;return vu&1&&t.tag!==0&&Xo(),o=t.pendingLanes,o&1?t===ip?ys++:(ys=0,ip=t):ys=0,ci(),null}function Xo(){if(Hn!==null){var t=W0(vu),e=Xt.transition,r=we;try{if(Xt.transition=null,we=16>t?16:t,Hn===null)var n=!1;else{if(t=Hn,Hn=null,vu=0,ye&6)throw Error(H(331));var i=ye;for(ye|=4,Y=t.current;Y!==null;){var o=Y,a=o.child;if(Y.flags&16){var s=o.deletions;if(s!==null){for(var c=0;c<s.length;c++){var l=s[c];for(Y=l;Y!==null;){var u=Y;switch(u.tag){case 0:case 11:case 15:ms(8,u,o)}var d=u.child;if(d!==null)d.return=u,Y=d;else for(;Y!==null;){u=Y;var h=u.sibling,f=u.return;if(tk(u),u===l){Y=null;break}if(h!==null){h.return=f,Y=h;break}Y=f}}}var _=o.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(v!==null)}}Y=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Y=a;else e:for(;Y!==null;){if(o=Y,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ms(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,Y=y;break e}Y=o.return}}var m=t.current;for(Y=m;Y!==null;){a=Y;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,Y=w;else e:for(a=m;Y!==null;){if(s=Y,s.flags&2048)try{switch(s.tag){case 0:case 11:case 15:Wu(9,s)}}catch(k){Ve(s,s.return,k)}if(s===a){Y=null;break e}var S=s.sibling;if(S!==null){S.return=s.return,Y=S;break e}Y=s.return}}if(ye=i,ci(),Ur&&typeof Ur.onPostCommitFiberRoot=="function")try{Ur.onPostCommitFiberRoot(Mu,t)}catch{}n=!0}return n}finally{we=r,Xt.transition=e}}return!1}function $y(t,e,r){e=_a(r,e),e=WS(t,e,1),t=Xn(t,e,1),e=_t(),t!==null&&(oc(t,1,e),At(t,e))}function Ve(t,e,r){if(t.tag===3)$y(t,t,r);else for(;e!==null;){if(e.tag===3){$y(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Zn===null||!Zn.has(n))){t=_a(r,t),t=HS(e,t,1),e=Xn(e,t,1),t=_t(),e!==null&&(oc(e,1,t),At(e,t));break}}e=e.return}}function dA(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&r,tt===t&&(it&r)===r&&(Ye===4||Ye===3&&(it&130023424)===it&&500>We()-Xv?Vi(t,0):Yv|=r),At(t,e)}function dk(t,e){e===0&&(t.mode&1?(e=Ic,Ic<<=1,!(Ic&130023424)&&(Ic=4194304)):e=1);var r=_t();t=cn(t,e),t!==null&&(oc(t,e,r),At(t,r))}function fA(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),dk(t,r)}function hA(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(H(314))}n!==null&&n.delete(e),dk(t,r)}var fk;fk=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)Ot=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ot=!1,eA(t,e,r);Ot=!!(t.flags&131072)}else Ot=!1,Ne&&e.flags&1048576&&mS(e,au,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Il(t,e),t=e.pendingProps;var i=va(e,dt.current);Yo(e,r),i=Hv(null,e,n,t,i,r);var o=qv();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(n)?(o=!0,iu(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Uv(e),i.updater=zu,e.stateNode=i,i._reactInternals=e,qh(e,n,t,r),e=Qh(null,e,n,!0,o,r)):(e.tag=0,Ne&&o&&Lv(e),pt(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(Il(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=vA(n),t=dr(n,t),i){case 0:e=Gh(null,e,n,t,r);break e;case 1:e=Py(null,e,n,t,r);break e;case 11:e=Ey(null,e,n,t,r);break e;case 14:e=Cy(null,e,n,dr(n.type,t),r);break e}throw Error(H(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dr(n,i),Gh(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dr(n,i),Py(t,e,n,i,r);case 3:e:{if(QS(e),t===null)throw Error(H(387));n=e.pendingProps,o=e.memoizedState,i=o.element,SS(t,e),lu(e,n,null,r);var a=e.memoizedState;if(n=a.element,o.isDehydrated)if(o={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=_a(Error(H(423)),e),e=Oy(t,e,n,r,i);break e}else if(n!==i){i=_a(Error(H(424)),e),e=Oy(t,e,n,r,i);break e}else for(Ut=Yn(e.stateNode.containerInfo.firstChild),Bt=e,Ne=!0,_r=null,r=wS(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ma(),n===i){e=ln(t,e,r);break e}pt(t,e,n,r)}e=e.child}return e;case 5:return kS(e),t===null&&zh(e),n=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,$h(n,i)?a=null:o!==null&&$h(n,o)&&(e.flags|=32),GS(t,e),pt(t,e,a,r),e.child;case 6:return t===null&&zh(e),null;case 13:return JS(t,e,r);case 4:return Bv(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=ga(e,null,n,r):pt(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dr(n,i),Ey(t,e,n,i,r);case 7:return pt(t,e,e.pendingProps,r),e.child;case 8:return pt(t,e,e.pendingProps.children,r),e.child;case 12:return pt(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,Pe(su,n._currentValue),n._currentValue=a,o!==null)if(Sr(o.value,a)){if(o.children===i.children&&!Rt.current){e=ln(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var s=o.dependencies;if(s!==null){a=o.child;for(var c=s.firstContext;c!==null;){if(c.context===n){if(o.tag===1){c=on(-1,r&-r),c.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),Wh(o.return,r,e),s.lanes|=r;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(H(341));a.lanes|=r,s=a.alternate,s!==null&&(s.lanes|=r),Wh(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}pt(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Yo(e,r),i=Zt(i),n=n(i),e.flags|=1,pt(t,e,n,r),e.child;case 14:return n=e.type,i=dr(n,e.pendingProps),i=dr(n.type,i),Cy(t,e,n,i,r);case 15:return qS(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:dr(n,i),Il(t,e),e.tag=1,jt(n)?(t=!0,iu(e)):t=!1,Yo(e,r),zS(e,n,i),qh(e,n,i,r),Qh(null,e,n,!0,t,r);case 19:return YS(t,e,r);case 22:return KS(t,e,r)}throw Error(H(156,e.tag))};function hk(t,e){return U0(t,e)}function pA(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,r,n){return new pA(t,e,r,n)}function rm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vA(t){if(typeof t=="function")return rm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===bv)return 11;if(t===Sv)return 14}return 2}function ti(t,e){var r=t.alternate;return r===null?(r=Yt(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Dl(t,e,r,n,i,o){var a=2;if(n=t,typeof t=="function")rm(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case No:return zi(r.children,i,o,e);case wv:a=8,i|=8;break;case mh:return t=Yt(12,r,e,i|2),t.elementType=mh,t.lanes=o,t;case gh:return t=Yt(13,r,e,i),t.elementType=gh,t.lanes=o,t;case yh:return t=Yt(19,r,e,i),t.elementType=yh,t.lanes=o,t;case k0:return qu(r,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case b0:a=10;break e;case S0:a=9;break e;case bv:a=11;break e;case Sv:a=14;break e;case Ln:a=16,n=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=Yt(a,r,e,i),e.elementType=t,e.type=n,e.lanes=o,e}function zi(t,e,r,n){return t=Yt(7,t,n,e),t.lanes=r,t}function qu(t,e,r,n){return t=Yt(22,t,n,e),t.elementType=k0,t.lanes=r,t.stateNode={isHidden:!1},t}function uf(t,e,r){return t=Yt(6,t,null,e),t.lanes=r,t}function df(t,e,r){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mA(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wd(0),this.expirationTimes=Wd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wd(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function nm(t,e,r,n,i,o,a,s,c){return t=new mA(t,e,r,s,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Yt(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uv(o),t}function gA(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Io,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function pk(t){if(!t)return ni;t=t._reactInternals;e:{if(co(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var r=t.type;if(jt(r))return pS(t,r,e)}return e}function vk(t,e,r,n,i,o,a,s,c){return t=nm(r,n,!0,t,i,o,a,s,c),t.context=pk(null),r=t.current,n=_t(),i=ei(r),o=on(n,i),o.callback=e??null,Xn(r,o,i),t.current.lanes=i,oc(t,i,n),At(t,n),t}function Ku(t,e,r,n){var i=e.current,o=_t(),a=ei(i);return r=pk(r),e.context===null?e.context=r:e.pendingContext=r,e=on(o,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Xn(i,e,a),t!==null&&(br(t,i,a,o),jl(t,i,a)),a}function gu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Fy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function im(t,e){Fy(t,e),(t=t.alternate)&&Fy(t,e)}function yA(){return null}var mk=typeof reportError=="function"?reportError:function(t){console.error(t)};function om(t){this._internalRoot=t}Gu.prototype.render=om.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Ku(t,e,null,null)};Gu.prototype.unmount=om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ro(function(){Ku(null,t,null,null)}),e[sn]=null}};function Gu(t){this._internalRoot=t}Gu.prototype.unstable_scheduleHydration=function(t){if(t){var e=K0();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Nn.length&&e!==0&&e<Nn[r].priority;r++);Nn.splice(r,0,t),r===0&&Q0(t)}};function am(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Qu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Uy(){}function _A(t,e,r,n,i){if(i){if(typeof n=="function"){var o=n;n=function(){var l=gu(a);o.call(l)}}var a=vk(e,n,t,0,null,!1,!1,"",Uy);return t._reactRootContainer=a,t[sn]=a.current,js(t.nodeType===8?t.parentNode:t),ro(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var s=n;n=function(){var l=gu(c);s.call(l)}}var c=nm(t,0,!1,null,null,!1,!1,"",Uy);return t._reactRootContainer=c,t[sn]=c.current,js(t.nodeType===8?t.parentNode:t),ro(function(){Ku(e,c,r,n)}),c}function Ju(t,e,r,n,i){var o=r._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var s=i;i=function(){var c=gu(a);s.call(c)}}Ku(e,a,t,i)}else a=_A(r,e,t,i,n);return gu(a)}H0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ns(e.pendingLanes);r!==0&&(Tv(e,r|1),At(e,We()),!(ye&6)&&(wa=We()+500,ci()))}break;case 13:ro(function(){var n=cn(t,1);if(n!==null){var i=_t();br(n,t,1,i)}}),im(t,1)}};Ev=function(t){if(t.tag===13){var e=cn(t,134217728);if(e!==null){var r=_t();br(e,t,134217728,r)}im(t,134217728)}};q0=function(t){if(t.tag===13){var e=ei(t),r=cn(t,e);if(r!==null){var n=_t();br(r,t,e,n)}im(t,e)}};K0=function(){return we};G0=function(t,e){var r=we;try{return we=t,e()}finally{we=r}};Ph=function(t,e,r){switch(e){case"input":if(bh(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=Uu(n);if(!i)throw Error(H(90));T0(n),bh(n,i)}}}break;case"textarea":C0(t,r);break;case"select":e=r.value,e!=null&&Ko(t,!!r.multiple,e,!1)}};I0=Zv;N0=ro;var wA={usingClientEntryPoint:!1,Events:[sc,Fo,Uu,A0,L0,Zv]},Qa={findFiberByHostInstance:Ai,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},bA={bundleType:Qa.bundleType,version:Qa.version,rendererPackageName:Qa.rendererPackageName,rendererConfig:Qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$0(t),t===null?null:t.stateNode},findFiberByHostInstance:Qa.findFiberByHostInstance||yA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{Mu=Hc.inject(bA),Ur=Hc}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wA;Wt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!am(e))throw Error(H(200));return gA(t,e,null,r)};Wt.createRoot=function(t,e){if(!am(t))throw Error(H(299));var r=!1,n="",i=mk;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=nm(t,1,!1,null,null,r,!1,n,i),t[sn]=e.current,js(t.nodeType===8?t.parentNode:t),new om(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=$0(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return ro(t)};Wt.hydrate=function(t,e,r){if(!Qu(e))throw Error(H(200));return Ju(null,t,e,!0,r)};Wt.hydrateRoot=function(t,e,r){if(!am(t))throw Error(H(405));var n=r!=null&&r.hydratedSources||null,i=!1,o="",a=mk;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=vk(e,null,t,1,r??null,i,!1,o,a),t[sn]=e.current,js(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new Gu(e)};Wt.render=function(t,e,r){if(!Qu(e))throw Error(H(200));return Ju(null,t,e,!1,r)};Wt.unmountComponentAtNode=function(t){if(!Qu(t))throw Error(H(40));return t._reactRootContainer?(ro(function(){Ju(null,null,t,!1,function(){t._reactRootContainer=null,t[sn]=null})}),!0):!1};Wt.unstable_batchedUpdates=Zv;Wt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Qu(r))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Ju(t,e,r,!1,n)};Wt.version="18.3.1-next-f1338f8080-20240426";function gk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gk)}catch(t){console.error(t)}}gk(),g0.exports=Wt;var lo=g0.exports;const yk=fv(lo);var _k,By=lo;_k=By.createRoot,By.hydrateRoot;const SA=1,kA=1e6;let ff=0;function xA(){return ff=(ff+1)%Number.MAX_SAFE_INTEGER,ff.toString()}const hf=new Map,Vy=t=>{if(hf.has(t))return;const e=setTimeout(()=>{hf.delete(t),_s({type:"REMOVE_TOAST",toastId:t})},kA);hf.set(t,e)},TA=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,SA)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(r=>r.id===e.toast.id?{...r,...e.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=e;return r?Vy(r):t.toasts.forEach(n=>{Vy(n.id)}),{...t,toasts:t.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(r=>r.id!==e.toastId)}}},$l=[];let Fl={toasts:[]};function _s(t){Fl=TA(Fl,t),$l.forEach(e=>{e(Fl)})}function EA({...t}){const e=xA(),r=i=>_s({type:"UPDATE_TOAST",toast:{...i,id:e}}),n=()=>_s({type:"DISMISS_TOAST",toastId:e});return _s({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:i=>{i||n()}}}),{id:e,dismiss:n,update:r}}function Yu(){const[t,e]=b.useState(Fl);return b.useEffect(()=>($l.push(e),()=>{const r=$l.indexOf(e);r>-1&&$l.splice(r,1)}),[t]),{...t,toast:EA,dismiss:r=>_s({type:"DISMISS_TOAST",toastId:r})}}function pe(t,e,{checkForDefaultPrevented:r=!0}={}){return function(i){if(t==null||t(i),r===!1||!i.defaultPrevented)return e==null?void 0:e(i)}}function zy(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function lc(...t){return e=>{let r=!1;const n=t.map(i=>{const o=zy(i,e);return!r&&typeof o=="function"&&(r=!0),o});if(r)return()=>{for(let i=0;i<n.length;i++){const o=n[i];typeof o=="function"?o():zy(t[i],null)}}}}function ze(...t){return b.useCallback(lc(...t),t)}function uc(t,e=[]){let r=[];function n(o,a){const s=b.createContext(a),c=r.length;r=[...r,a];const l=d=>{var y;const{scope:h,children:f,..._}=d,v=((y=h==null?void 0:h[t])==null?void 0:y[c])||s,g=b.useMemo(()=>_,Object.values(_));return p.jsx(v.Provider,{value:g,children:f})};l.displayName=o+"Provider";function u(d,h){var v;const f=((v=h==null?void 0:h[t])==null?void 0:v[c])||s,_=b.useContext(f);if(_)return _;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${o}\``)}return[l,u]}const i=()=>{const o=r.map(a=>b.createContext(a));return function(s){const c=(s==null?void 0:s[t])||o;return b.useMemo(()=>({[`__scope${t}`]:{...s,[t]:c}}),[s,c])}};return i.scopeName=t,[n,CA(i,...e)]}function CA(...t){const e=t[0];if(t.length===1)return e;const r=()=>{const n=t.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(o){const a=n.reduce((s,{useScope:c,scopeName:l})=>{const d=c(o)[`__scope${l}`];return{...s,...d}},{});return b.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return r.scopeName=e.scopeName,r}function Wy(t){const e=PA(t),r=b.forwardRef((n,i)=>{const{children:o,...a}=n,s=b.Children.toArray(o),c=s.find(RA);if(c){const l=c.props.children,u=s.map(d=>d===c?b.Children.count(l)>1?b.Children.only(null):b.isValidElement(l)?l.props.children:null:d);return p.jsx(e,{...a,ref:i,children:b.isValidElement(l)?b.cloneElement(l,void 0,u):null})}return p.jsx(e,{...a,ref:i,children:o})});return r.displayName=`${t}.Slot`,r}function PA(t){const e=b.forwardRef((r,n)=>{const{children:i,...o}=r;if(b.isValidElement(i)){const a=AA(i),s=jA(o,i.props);return i.type!==b.Fragment&&(s.ref=n?lc(n,a):a),b.cloneElement(i,s)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var OA=Symbol("radix.slottable");function RA(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===OA}function jA(t,e){const r={...e};for(const n in e){const i=t[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...s)=>{const c=o(...s);return i(...s),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...t,...r}}function AA(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function wk(t){const e=t+"CollectionProvider",[r,n]=uc(e),[i,o]=r(e,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:g,children:y}=v,m=G.useRef(null),w=G.useRef(new Map).current;return p.jsx(i,{scope:g,itemMap:w,collectionRef:m,children:y})};a.displayName=e;const s=t+"CollectionSlot",c=Wy(s),l=G.forwardRef((v,g)=>{const{scope:y,children:m}=v,w=o(s,y),S=ze(g,w.collectionRef);return p.jsx(c,{ref:S,children:m})});l.displayName=s;const u=t+"CollectionItemSlot",d="data-radix-collection-item",h=Wy(u),f=G.forwardRef((v,g)=>{const{scope:y,children:m,...w}=v,S=G.useRef(null),k=ze(g,S),E=o(u,y);return G.useEffect(()=>(E.itemMap.set(S,{ref:S,...w}),()=>void E.itemMap.delete(S))),p.jsx(h,{[d]:"",ref:k,children:m})});f.displayName=u;function _(v){const g=o(t+"CollectionConsumer",v);return G.useCallback(()=>{const m=g.collectionRef.current;if(!m)return[];const w=Array.from(m.querySelectorAll(`[${d}]`));return Array.from(g.itemMap.values()).sort((E,x)=>w.indexOf(E.ref.current)-w.indexOf(x.ref.current))},[g.collectionRef,g.itemMap])}return[{Provider:a,Slot:l,ItemSlot:f},_,n]}function LA(t){const e=IA(t),r=b.forwardRef((n,i)=>{const{children:o,...a}=n,s=b.Children.toArray(o),c=s.find(MA);if(c){const l=c.props.children,u=s.map(d=>d===c?b.Children.count(l)>1?b.Children.only(null):b.isValidElement(l)?l.props.children:null:d);return p.jsx(e,{...a,ref:i,children:b.isValidElement(l)?b.cloneElement(l,void 0,u):null})}return p.jsx(e,{...a,ref:i,children:o})});return r.displayName=`${t}.Slot`,r}function IA(t){const e=b.forwardRef((r,n)=>{const{children:i,...o}=r;if(b.isValidElement(i)){const a=$A(i),s=DA(o,i.props);return i.type!==b.Fragment&&(s.ref=n?lc(n,a):a),b.cloneElement(i,s)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var NA=Symbol("radix.slottable");function MA(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===NA}function DA(t,e){const r={...e};for(const n in e){const i=t[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...s)=>{const c=o(...s);return i(...s),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...t,...r}}function $A(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var FA=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Te=FA.reduce((t,e)=>{const r=LA(`Primitive.${e}`),n=b.forwardRef((i,o)=>{const{asChild:a,...s}=i,c=a?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(c,{...s,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{});function bk(t,e){t&&lo.flushSync(()=>t.dispatchEvent(e))}function kr(t){const e=b.useRef(t);return b.useEffect(()=>{e.current=t}),b.useMemo(()=>(...r)=>{var n;return(n=e.current)==null?void 0:n.call(e,...r)},[])}function UA(t,e=globalThis==null?void 0:globalThis.document){const r=kr(t);b.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[r,e])}var BA="DismissableLayer",sp="dismissableLayer.update",VA="dismissableLayer.pointerDownOutside",zA="dismissableLayer.focusOutside",Hy,Sk=b.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Xu=b.forwardRef((t,e)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:o,onInteractOutside:a,onDismiss:s,...c}=t,l=b.useContext(Sk),[u,d]=b.useState(null),h=(u==null?void 0:u.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,f]=b.useState({}),_=ze(e,x=>d(x)),v=Array.from(l.layers),[g]=[...l.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(g),m=u?v.indexOf(u):-1,w=l.layersWithOutsidePointerEventsDisabled.size>0,S=m>=y,k=HA(x=>{const C=x.target,R=[...l.branches].some(A=>A.contains(C));!S||R||(i==null||i(x),a==null||a(x),x.defaultPrevented||s==null||s())},h),E=qA(x=>{const C=x.target;[...l.branches].some(A=>A.contains(C))||(o==null||o(x),a==null||a(x),x.defaultPrevented||s==null||s())},h);return UA(x=>{m===l.layers.size-1&&(n==null||n(x),!x.defaultPrevented&&s&&(x.preventDefault(),s()))},h),b.useEffect(()=>{if(u)return r&&(l.layersWithOutsidePointerEventsDisabled.size===0&&(Hy=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),l.layersWithOutsidePointerEventsDisabled.add(u)),l.layers.add(u),qy(),()=>{r&&l.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=Hy)}},[u,h,r,l]),b.useEffect(()=>()=>{u&&(l.layers.delete(u),l.layersWithOutsidePointerEventsDisabled.delete(u),qy())},[u,l]),b.useEffect(()=>{const x=()=>f({});return document.addEventListener(sp,x),()=>document.removeEventListener(sp,x)},[]),p.jsx(Te.div,{...c,ref:_,style:{pointerEvents:w?S?"auto":"none":void 0,...t.style},onFocusCapture:pe(t.onFocusCapture,E.onFocusCapture),onBlurCapture:pe(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:pe(t.onPointerDownCapture,k.onPointerDownCapture)})});Xu.displayName=BA;var WA="DismissableLayerBranch",kk=b.forwardRef((t,e)=>{const r=b.useContext(Sk),n=b.useRef(null),i=ze(e,n);return b.useEffect(()=>{const o=n.current;if(o)return r.branches.add(o),()=>{r.branches.delete(o)}},[r.branches]),p.jsx(Te.div,{...t,ref:i})});kk.displayName=WA;function HA(t,e=globalThis==null?void 0:globalThis.document){const r=kr(t),n=b.useRef(!1),i=b.useRef(()=>{});return b.useEffect(()=>{const o=s=>{if(s.target&&!n.current){let c=function(){xk(VA,r,l,{discrete:!0})};const l={originalEvent:s};s.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",i.current)}},[e,r]),{onPointerDownCapture:()=>n.current=!0}}function qA(t,e=globalThis==null?void 0:globalThis.document){const r=kr(t),n=b.useRef(!1);return b.useEffect(()=>{const i=o=>{o.target&&!n.current&&xk(zA,r,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function qy(){const t=new CustomEvent(sp);document.dispatchEvent(t)}function xk(t,e,r,{discrete:n}){const i=r.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?bk(i,o):i.dispatchEvent(o)}var KA=Xu,GA=kk,at=globalThis!=null&&globalThis.document?b.useLayoutEffect:()=>{},QA="Portal",sm=b.forwardRef((t,e)=>{var s;const{container:r,...n}=t,[i,o]=b.useState(!1);at(()=>o(!0),[]);const a=r||i&&((s=globalThis==null?void 0:globalThis.document)==null?void 0:s.body);return a?yk.createPortal(p.jsx(Te.div,{...n,ref:e}),a):null});sm.displayName=QA;function JA(t,e){return b.useReducer((r,n)=>e[r][n]??r,t)}var cm=t=>{const{present:e,children:r}=t,n=YA(e),i=typeof r=="function"?r({present:n.isPresent}):b.Children.only(r),o=ze(n.ref,XA(i));return typeof r=="function"||n.isPresent?b.cloneElement(i,{ref:o}):null};cm.displayName="Presence";function YA(t){const[e,r]=b.useState(),n=b.useRef(null),i=b.useRef(t),o=b.useRef("none"),a=t?"mounted":"unmounted",[s,c]=JA(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return b.useEffect(()=>{const l=qc(n.current);o.current=s==="mounted"?l:"none"},[s]),at(()=>{const l=n.current,u=i.current;if(u!==t){const h=o.current,f=qc(l);t?c("MOUNT"):f==="none"||(l==null?void 0:l.display)==="none"?c("UNMOUNT"):c(u&&h!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=t}},[t,c]),at(()=>{if(e){let l;const u=e.ownerDocument.defaultView??window,d=f=>{const v=qc(n.current).includes(CSS.escape(f.animationName));if(f.target===e&&v&&(c("ANIMATION_END"),!i.current)){const g=e.style.animationFillMode;e.style.animationFillMode="forwards",l=u.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=g)})}},h=f=>{f.target===e&&(o.current=qc(n.current))};return e.addEventListener("animationstart",h),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{u.clearTimeout(l),e.removeEventListener("animationstart",h),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:b.useCallback(l=>{n.current=l?getComputedStyle(l):null,r(l)},[])}}function qc(t){return(t==null?void 0:t.animationName)||"none"}function XA(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}var ZA=Nu[" useInsertionEffect ".trim().toString()]||at;function cp({prop:t,defaultProp:e,onChange:r=()=>{},caller:n}){const[i,o,a]=eL({defaultProp:e,onChange:r}),s=t!==void 0,c=s?t:i;{const u=b.useRef(t!==void 0);b.useEffect(()=>{const d=u.current;d!==s&&console.warn(`${n} is changing from ${d?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=s},[s,n])}const l=b.useCallback(u=>{var d;if(s){const h=tL(u)?u(t):u;h!==t&&((d=a.current)==null||d.call(a,h))}else o(u)},[s,t,o,a]);return[c,l]}function eL({defaultProp:t,onChange:e}){const[r,n]=b.useState(t),i=b.useRef(r),o=b.useRef(e);return ZA(()=>{o.current=e},[e]),b.useEffect(()=>{var a;i.current!==r&&((a=o.current)==null||a.call(o,r),i.current=r)},[r,i]),[r,n,o]}function tL(t){return typeof t=="function"}var Tk=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),rL="VisuallyHidden",Zu=b.forwardRef((t,e)=>p.jsx(Te.span,{...t,ref:e,style:{...Tk,...t.style}}));Zu.displayName=rL;var nL=Zu,lm="ToastProvider",[um,iL,oL]=wk("Toast"),[Ek]=uc("Toast",[oL]),[aL,ed]=Ek(lm),Ck=t=>{const{__scopeToast:e,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:o=50,children:a}=t,[s,c]=b.useState(null),[l,u]=b.useState(0),d=b.useRef(!1),h=b.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${lm}\`. Expected non-empty \`string\`.`),p.jsx(um.Provider,{scope:e,children:p.jsx(aL,{scope:e,label:r,duration:n,swipeDirection:i,swipeThreshold:o,toastCount:l,viewport:s,onViewportChange:c,onToastAdd:b.useCallback(()=>u(f=>f+1),[]),onToastRemove:b.useCallback(()=>u(f=>f-1),[]),isFocusedToastEscapeKeyDownRef:d,isClosePausedRef:h,children:a})})};Ck.displayName=lm;var Pk="ToastViewport",sL=["F8"],lp="toast.viewportPause",up="toast.viewportResume",Ok=b.forwardRef((t,e)=>{const{__scopeToast:r,hotkey:n=sL,label:i="Notifications ({hotkey})",...o}=t,a=ed(Pk,r),s=iL(r),c=b.useRef(null),l=b.useRef(null),u=b.useRef(null),d=b.useRef(null),h=ze(e,d,a.onViewportChange),f=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=a.toastCount>0;b.useEffect(()=>{const g=y=>{var w;n.length!==0&&n.every(S=>y[S]||y.code===S)&&((w=d.current)==null||w.focus())};return document.addEventListener("keydown",g),()=>document.removeEventListener("keydown",g)},[n]),b.useEffect(()=>{const g=c.current,y=d.current;if(_&&g&&y){const m=()=>{if(!a.isClosePausedRef.current){const E=new CustomEvent(lp);y.dispatchEvent(E),a.isClosePausedRef.current=!0}},w=()=>{if(a.isClosePausedRef.current){const E=new CustomEvent(up);y.dispatchEvent(E),a.isClosePausedRef.current=!1}},S=E=>{!g.contains(E.relatedTarget)&&w()},k=()=>{g.contains(document.activeElement)||w()};return g.addEventListener("focusin",m),g.addEventListener("focusout",S),g.addEventListener("pointermove",m),g.addEventListener("pointerleave",k),window.addEventListener("blur",m),window.addEventListener("focus",w),()=>{g.removeEventListener("focusin",m),g.removeEventListener("focusout",S),g.removeEventListener("pointermove",m),g.removeEventListener("pointerleave",k),window.removeEventListener("blur",m),window.removeEventListener("focus",w)}}},[_,a.isClosePausedRef]);const v=b.useCallback(({tabbingDirection:g})=>{const m=s().map(w=>{const S=w.ref.current,k=[S,...wL(S)];return g==="forwards"?k:k.reverse()});return(g==="forwards"?m.reverse():m).flat()},[s]);return b.useEffect(()=>{const g=d.current;if(g){const y=m=>{var k,E,x;const w=m.altKey||m.ctrlKey||m.metaKey;if(m.key==="Tab"&&!w){const C=document.activeElement,R=m.shiftKey;if(m.target===g&&R){(k=l.current)==null||k.focus();return}const O=v({tabbingDirection:R?"backwards":"forwards"}),I=O.findIndex(P=>P===C);pf(O.slice(I+1))?m.preventDefault():R?(E=l.current)==null||E.focus():(x=u.current)==null||x.focus()}};return g.addEventListener("keydown",y),()=>g.removeEventListener("keydown",y)}},[s,v]),p.jsxs(GA,{ref:c,role:"region","aria-label":i.replace("{hotkey}",f),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&p.jsx(dp,{ref:l,onFocusFromOutsideViewport:()=>{const g=v({tabbingDirection:"forwards"});pf(g)}}),p.jsx(um.Slot,{scope:r,children:p.jsx(Te.ol,{tabIndex:-1,...o,ref:h})}),_&&p.jsx(dp,{ref:u,onFocusFromOutsideViewport:()=>{const g=v({tabbingDirection:"backwards"});pf(g)}})]})});Ok.displayName=Pk;var Rk="ToastFocusProxy",dp=b.forwardRef((t,e)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=t,o=ed(Rk,r);return p.jsx(Zu,{tabIndex:0,...i,ref:e,style:{position:"fixed"},onFocus:a=>{var l;const s=a.relatedTarget;!((l=o.viewport)!=null&&l.contains(s))&&n()}})});dp.displayName=Rk;var dc="Toast",cL="toast.swipeStart",lL="toast.swipeMove",uL="toast.swipeCancel",dL="toast.swipeEnd",jk=b.forwardRef((t,e)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:o,...a}=t,[s,c]=cp({prop:n,defaultProp:i??!0,onChange:o,caller:dc});return p.jsx(cm,{present:r||s,children:p.jsx(pL,{open:s,...a,ref:e,onClose:()=>c(!1),onPause:kr(t.onPause),onResume:kr(t.onResume),onSwipeStart:pe(t.onSwipeStart,l=>{l.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:pe(t.onSwipeMove,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","move"),l.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${d}px`)}),onSwipeCancel:pe(t.onSwipeCancel,l=>{l.currentTarget.setAttribute("data-swipe","cancel"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:pe(t.onSwipeEnd,l=>{const{x:u,y:d}=l.detail.delta;l.currentTarget.setAttribute("data-swipe","end"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),l.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),l.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),l.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${d}px`),c(!1)})})})});jk.displayName=dc;var[fL,hL]=Ek(dc,{onClose(){}}),pL=b.forwardRef((t,e)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:o,onClose:a,onEscapeKeyDown:s,onPause:c,onResume:l,onSwipeStart:u,onSwipeMove:d,onSwipeCancel:h,onSwipeEnd:f,..._}=t,v=ed(dc,r),[g,y]=b.useState(null),m=ze(e,P=>y(P)),w=b.useRef(null),S=b.useRef(null),k=i||v.duration,E=b.useRef(0),x=b.useRef(k),C=b.useRef(0),{onToastAdd:R,onToastRemove:A}=v,D=kr(()=>{var L;(g==null?void 0:g.contains(document.activeElement))&&((L=v.viewport)==null||L.focus()),a()}),O=b.useCallback(P=>{!P||P===1/0||(window.clearTimeout(C.current),E.current=new Date().getTime(),C.current=window.setTimeout(D,P))},[D]);b.useEffect(()=>{const P=v.viewport;if(P){const L=()=>{O(x.current),l==null||l()},N=()=>{const $=new Date().getTime()-E.current;x.current=x.current-$,window.clearTimeout(C.current),c==null||c()};return P.addEventListener(lp,N),P.addEventListener(up,L),()=>{P.removeEventListener(lp,N),P.removeEventListener(up,L)}}},[v.viewport,k,c,l,O]),b.useEffect(()=>{o&&!v.isClosePausedRef.current&&O(k)},[o,k,v.isClosePausedRef,O]),b.useEffect(()=>(R(),()=>A()),[R,A]);const I=b.useMemo(()=>g?$k(g):null,[g]);return v.viewport?p.jsxs(p.Fragment,{children:[I&&p.jsx(vL,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:I}),p.jsx(fL,{scope:r,onClose:D,children:lo.createPortal(p.jsx(um.ItemSlot,{scope:r,children:p.jsx(KA,{asChild:!0,onEscapeKeyDown:pe(s,()=>{v.isFocusedToastEscapeKeyDownRef.current||D(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:p.jsx(Te.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,..._,ref:m,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:pe(t.onKeyDown,P=>{P.key==="Escape"&&(s==null||s(P.nativeEvent),P.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,D()))}),onPointerDown:pe(t.onPointerDown,P=>{P.button===0&&(w.current={x:P.clientX,y:P.clientY})}),onPointerMove:pe(t.onPointerMove,P=>{if(!w.current)return;const L=P.clientX-w.current.x,N=P.clientY-w.current.y,$=!!S.current,j=["left","right"].includes(v.swipeDirection),M=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,B=j?M(0,L):0,U=j?0:M(0,N),Q=P.pointerType==="touch"?10:2,K={x:B,y:U},V={originalEvent:P,delta:K};$?(S.current=K,Kc(lL,d,V,{discrete:!1})):Ky(K,v.swipeDirection,Q)?(S.current=K,Kc(cL,u,V,{discrete:!1}),P.target.setPointerCapture(P.pointerId)):(Math.abs(L)>Q||Math.abs(N)>Q)&&(w.current=null)}),onPointerUp:pe(t.onPointerUp,P=>{const L=S.current,N=P.target;if(N.hasPointerCapture(P.pointerId)&&N.releasePointerCapture(P.pointerId),S.current=null,w.current=null,L){const $=P.currentTarget,j={originalEvent:P,delta:L};Ky(L,v.swipeDirection,v.swipeThreshold)?Kc(dL,f,j,{discrete:!0}):Kc(uL,h,j,{discrete:!0}),$.addEventListener("click",M=>M.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),vL=t=>{const{__scopeToast:e,children:r,...n}=t,i=ed(dc,e),[o,a]=b.useState(!1),[s,c]=b.useState(!1);return yL(()=>a(!0)),b.useEffect(()=>{const l=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(l)},[]),s?null:p.jsx(sm,{asChild:!0,children:p.jsx(Zu,{...n,children:o&&p.jsxs(p.Fragment,{children:[i.label," ",r]})})})},mL="ToastTitle",Ak=b.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return p.jsx(Te.div,{...n,ref:e})});Ak.displayName=mL;var gL="ToastDescription",Lk=b.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t;return p.jsx(Te.div,{...n,ref:e})});Lk.displayName=gL;var Ik="ToastAction",Nk=b.forwardRef((t,e)=>{const{altText:r,...n}=t;return r.trim()?p.jsx(Dk,{altText:r,asChild:!0,children:p.jsx(dm,{...n,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Ik}\`. Expected non-empty \`string\`.`),null)});Nk.displayName=Ik;var Mk="ToastClose",dm=b.forwardRef((t,e)=>{const{__scopeToast:r,...n}=t,i=hL(Mk,r);return p.jsx(Dk,{asChild:!0,children:p.jsx(Te.button,{type:"button",...n,ref:e,onClick:pe(t.onClick,i.onClose)})})});dm.displayName=Mk;var Dk=b.forwardRef((t,e)=>{const{__scopeToast:r,altText:n,...i}=t;return p.jsx(Te.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:e})});function $k(t){const e=[];return Array.from(t.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&e.push(n.textContent),_L(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",o=n.dataset.radixToastAnnounceExclude==="";if(!i)if(o){const a=n.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...$k(n))}}),e}function Kc(t,e,r,{discrete:n}){const i=r.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:r});e&&i.addEventListener(t,e,{once:!0}),n?bk(i,o):i.dispatchEvent(o)}var Ky=(t,e,r=0)=>{const n=Math.abs(t.x),i=Math.abs(t.y),o=n>i;return e==="left"||e==="right"?o&&n>r:!o&&i>r};function yL(t=()=>{}){const e=kr(t);at(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[e])}function _L(t){return t.nodeType===t.ELEMENT_NODE}function wL(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function pf(t){const e=document.activeElement;return t.some(r=>r===e?!0:(r.focus(),document.activeElement!==e))}var bL=Ck,Fk=Ok,Uk=jk,Bk=Ak,Vk=Lk,zk=Nk,Wk=dm;function Hk(t){var e,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(r=Hk(t[e]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function qk(){for(var t,e,r=0,n="",i=arguments.length;r<i;r++)(t=arguments[r])&&(e=Hk(t))&&(n&&(n+=" "),n+=e);return n}const Gy=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Qy=qk,td=(t,e)=>r=>{var n;if((e==null?void 0:e.variants)==null)return Qy(t,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:i,defaultVariants:o}=e,a=Object.keys(i).map(l=>{const u=r==null?void 0:r[l],d=o==null?void 0:o[l];if(u===null)return null;const h=Gy(u)||Gy(d);return i[l][h]}),s=r&&Object.entries(r).reduce((l,u)=>{let[d,h]=u;return h===void 0||(l[d]=h),l},{}),c=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((l,u)=>{let{class:d,className:h,...f}=u;return Object.entries(f).every(_=>{let[v,g]=_;return Array.isArray(g)?g.includes({...o,...s}[v]):{...o,...s}[v]===g})?[...l,d,h]:l},[]);return Qy(t,a,c,r==null?void 0:r.class,r==null?void 0:r.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Kk=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=b.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:o,iconNode:a,...s},c)=>b.createElement("svg",{ref:c,...kL,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:Kk("lucide",i),...s},[...a.map(([l,u])=>b.createElement(l,u)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=(t,e)=>{const r=b.forwardRef(({className:n,...i},o)=>b.createElement(xL,{ref:o,iconNode:e,className:Kk(`lucide-${SL(t)}`,n),...i}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=_e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=_e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=_e("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=_e("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fp=_e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=_e("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=_e("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=_e("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=_e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=_e("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=_e("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=_e("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=_e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=_e("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=_e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=_e("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fm=_e("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=_e("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=_e("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=_e("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=_e("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=_e("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=_e("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=_e("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=_e("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=_e("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=_e("VideoOff",[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=_e("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=_e("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=_e("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),pm="-",HL=t=>{const e=KL(t),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=t;return{getClassGroupId:a=>{const s=a.split(pm);return s[0]===""&&s.length!==1&&s.shift(),tx(s,e)||qL(a)},getConflictingClassGroupIds:(a,s)=>{const c=r[a]||[];return s&&n[a]?[...c,...n[a]]:c}}},tx=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const r=t[0],n=e.nextPart.get(r),i=n?tx(t.slice(1),n):void 0;if(i)return i;if(e.validators.length===0)return;const o=t.join(pm);return(a=e.validators.find(({validator:s})=>s(o)))==null?void 0:a.classGroupId},Jy=/^\[(.+)\]$/,qL=t=>{if(Jy.test(t)){const e=Jy.exec(t)[1],r=e==null?void 0:e.substring(0,e.indexOf(":"));if(r)return"arbitrary.."+r}},KL=t=>{const{theme:e,prefix:r}=t,n={nextPart:new Map,validators:[]};return QL(Object.entries(t.classGroups),r).forEach(([o,a])=>{hp(a,n,o,e)}),n},hp=(t,e,r,n)=>{t.forEach(i=>{if(typeof i=="string"){const o=i===""?e:Yy(e,i);o.classGroupId=r;return}if(typeof i=="function"){if(GL(i)){hp(i(n),e,r,n);return}e.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([o,a])=>{hp(a,Yy(e,o),r,n)})})},Yy=(t,e)=>{let r=t;return e.split(pm).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},GL=t=>t.isThemeGetter,QL=(t,e)=>e?t.map(([r,n])=>{const i=n.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,s])=>[e+a,s])):o);return[r,i]}):t,JL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,r=new Map,n=new Map;const i=(o,a)=>{r.set(o,a),e++,e>t&&(e=0,n=r,r=new Map)};return{get(o){let a=r.get(o);if(a!==void 0)return a;if((a=n.get(o))!==void 0)return i(o,a),a},set(o,a){r.has(o)?r.set(o,a):i(o,a)}}},rx="!",YL=t=>{const{separator:e,experimentalParseClassName:r}=t,n=e.length===1,i=e[0],o=e.length,a=s=>{const c=[];let l=0,u=0,d;for(let g=0;g<s.length;g++){let y=s[g];if(l===0){if(y===i&&(n||s.slice(g,g+o)===e)){c.push(s.slice(u,g)),u=g+o;continue}if(y==="/"){d=g;continue}}y==="["?l++:y==="]"&&l--}const h=c.length===0?s:s.substring(u),f=h.startsWith(rx),_=f?h.substring(1):h,v=d&&d>u?d-u:void 0;return{modifiers:c,hasImportantModifier:f,baseClassName:_,maybePostfixModifierPosition:v}};return r?s=>r({className:s,parseClassName:a}):a},XL=t=>{if(t.length<=1)return t;const e=[];let r=[];return t.forEach(n=>{n[0]==="["?(e.push(...r.sort(),n),r=[]):r.push(n)}),e.push(...r.sort()),e},ZL=t=>({cache:JL(t.cacheSize),parseClassName:YL(t),...HL(t)}),eI=/\s+/,tI=(t,e)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=e,o=[],a=t.trim().split(eI);let s="";for(let c=a.length-1;c>=0;c-=1){const l=a[c],{modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:f}=r(l);let _=!!f,v=n(_?h.substring(0,f):h);if(!v){if(!_){s=l+(s.length>0?" "+s:s);continue}if(v=n(h),!v){s=l+(s.length>0?" "+s:s);continue}_=!1}const g=XL(u).join(":"),y=d?g+rx:g,m=y+v;if(o.includes(m))continue;o.push(m);const w=i(v,_);for(let S=0;S<w.length;++S){const k=w[S];o.push(y+k)}s=l+(s.length>0?" "+s:s)}return s};function rI(){let t=0,e,r,n="";for(;t<arguments.length;)(e=arguments[t++])&&(r=nx(e))&&(n&&(n+=" "),n+=r);return n}const nx=t=>{if(typeof t=="string")return t;let e,r="";for(let n=0;n<t.length;n++)t[n]&&(e=nx(t[n]))&&(r&&(r+=" "),r+=e);return r};function nI(t,...e){let r,n,i,o=a;function a(c){const l=e.reduce((u,d)=>d(u),t());return r=ZL(l),n=r.cache.get,i=r.cache.set,o=s,s(c)}function s(c){const l=n(c);if(l)return l;const u=tI(c,r);return i(c,u),u}return function(){return o(rI.apply(null,arguments))}}const Re=t=>{const e=r=>r[t]||[];return e.isThemeGetter=!0,e},ix=/^\[(?:([a-z-]+):)?(.+)\]$/i,iI=/^\d+\/\d+$/,oI=new Set(["px","full","screen"]),aI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,cI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,lI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,uI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gr=t=>Zo(t)||oI.has(t)||iI.test(t),xn=t=>Ra(t,"length",yI),Zo=t=>!!t&&!Number.isNaN(Number(t)),vf=t=>Ra(t,"number",Zo),Ja=t=>!!t&&Number.isInteger(Number(t)),dI=t=>t.endsWith("%")&&Zo(t.slice(0,-1)),fe=t=>ix.test(t),Tn=t=>aI.test(t),fI=new Set(["length","size","percentage"]),hI=t=>Ra(t,fI,ox),pI=t=>Ra(t,"position",ox),vI=new Set(["image","url"]),mI=t=>Ra(t,vI,wI),gI=t=>Ra(t,"",_I),Ya=()=>!0,Ra=(t,e,r)=>{const n=ix.exec(t);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):r(n[2]):!1},yI=t=>sI.test(t)&&!cI.test(t),ox=()=>!1,_I=t=>lI.test(t),wI=t=>uI.test(t),bI=()=>{const t=Re("colors"),e=Re("spacing"),r=Re("blur"),n=Re("brightness"),i=Re("borderColor"),o=Re("borderRadius"),a=Re("borderSpacing"),s=Re("borderWidth"),c=Re("contrast"),l=Re("grayscale"),u=Re("hueRotate"),d=Re("invert"),h=Re("gap"),f=Re("gradientColorStops"),_=Re("gradientColorStopPositions"),v=Re("inset"),g=Re("margin"),y=Re("opacity"),m=Re("padding"),w=Re("saturate"),S=Re("scale"),k=Re("sepia"),E=Re("skew"),x=Re("space"),C=Re("translate"),R=()=>["auto","contain","none"],A=()=>["auto","hidden","clip","visible","scroll"],D=()=>["auto",fe,e],O=()=>[fe,e],I=()=>["",Gr,xn],P=()=>["auto",Zo,fe],L=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],N=()=>["solid","dashed","dotted","double","none"],$=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],j=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",fe],B=()=>["auto","avoid","all","avoid-page","page","left","right","column"],U=()=>[Zo,fe];return{cacheSize:500,separator:":",theme:{colors:[Ya],spacing:[Gr,xn],blur:["none","",Tn,fe],brightness:U(),borderColor:[t],borderRadius:["none","","full",Tn,fe],borderSpacing:O(),borderWidth:I(),contrast:U(),grayscale:M(),hueRotate:U(),invert:M(),gap:O(),gradientColorStops:[t],gradientColorStopPositions:[dI,xn],inset:D(),margin:D(),opacity:U(),padding:O(),saturate:U(),scale:U(),sepia:M(),skew:U(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",fe]}],container:["container"],columns:[{columns:[Tn]}],"break-after":[{"break-after":B()}],"break-before":[{"break-before":B()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...L(),fe]}],overflow:[{overflow:A()}],"overflow-x":[{"overflow-x":A()}],"overflow-y":[{"overflow-y":A()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ja,fe]}],basis:[{basis:D()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fe]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",Ja,fe]}],"grid-cols":[{"grid-cols":[Ya]}],"col-start-end":[{col:["auto",{span:["full",Ja,fe]},fe]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[Ya]}],"row-start-end":[{row:["auto",{span:[Ja,fe]},fe]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fe]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...j()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...j(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...j(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[m]}],px:[{px:[m]}],py:[{py:[m]}],ps:[{ps:[m]}],pe:[{pe:[m]}],pt:[{pt:[m]}],pr:[{pr:[m]}],pb:[{pb:[m]}],pl:[{pl:[m]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[x]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[x]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",fe,e]}],"min-w":[{"min-w":[fe,e,"min","max","fit"]}],"max-w":[{"max-w":[fe,e,"none","full","min","max","fit","prose",{screen:[Tn]},Tn]}],h:[{h:[fe,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[fe,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[fe,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Tn,xn]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",vf]}],"font-family":[{font:[Ya]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fe]}],"line-clamp":[{"line-clamp":["none",Zo,vf]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Gr,fe]}],"list-image":[{"list-image":["none",fe]}],"list-style-type":[{list:["none","disc","decimal",fe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...N(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Gr,xn]}],"underline-offset":[{"underline-offset":["auto",Gr,fe]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...L(),pI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",hI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},mI]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[f]}],"gradient-via":[{via:[f]}],"gradient-to":[{to:[f]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[s]}],"border-w-x":[{"border-x":[s]}],"border-w-y":[{"border-y":[s]}],"border-w-s":[{"border-s":[s]}],"border-w-e":[{"border-e":[s]}],"border-w-t":[{"border-t":[s]}],"border-w-r":[{"border-r":[s]}],"border-w-b":[{"border-b":[s]}],"border-w-l":[{"border-l":[s]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...N(),"hidden"]}],"divide-x":[{"divide-x":[s]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[s]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:N()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...N()]}],"outline-offset":[{"outline-offset":[Gr,fe]}],"outline-w":[{outline:[Gr,xn]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:I()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Gr,xn]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Tn,gI]}],"shadow-color":[{shadow:[Ya]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...$(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":$()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Tn,fe]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[w]}],sepia:[{sepia:[k]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[k]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fe]}],duration:[{duration:U()}],ease:[{ease:["linear","in","out","in-out",fe]}],delay:[{delay:U()}],animate:[{animate:["none","spin","ping","pulse","bounce",fe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[S]}],"scale-x":[{"scale-x":[S]}],"scale-y":[{"scale-y":[S]}],rotate:[{rotate:[Ja,fe]}],"translate-x":[{"translate-x":[C]}],"translate-y":[{"translate-y":[C]}],"skew-x":[{"skew-x":[E]}],"skew-y":[{"skew-y":[E]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fe]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fe]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fe]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Gr,xn,vf]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},SI=nI(bI);function Le(...t){return SI(qk(t))}const ba="https://prime-t1.onrender.com";console.log("BASE_URL:",ba);async function ax(t,e){const r=await fetch(`${ba}${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw console.error(`POST ${t} failed`,await r.text()),new Error(`POST ${t} failed`);return r.json()}function kI(t){const e=sessionStorage.getItem("meetingUsername")||"User";return ax("/create-room",{creatorLanguage:t,creatorName:e})}function vm(t,e){const r=sessionStorage.getItem("meetingUsername")||"User";return ax("/join-room",{roomId:t,participantLanguage:e,participantName:r})}const xI=bL,sx=b.forwardRef(({className:t,...e},r)=>p.jsx(Fk,{ref:r,className:Le("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));sx.displayName=Fk.displayName;const TI=td("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),cx=b.forwardRef(({className:t,variant:e,...r},n)=>p.jsx(Uk,{ref:n,className:Le(TI({variant:e}),t),...r}));cx.displayName=Uk.displayName;const EI=b.forwardRef(({className:t,...e},r)=>p.jsx(zk,{ref:r,className:Le("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));EI.displayName=zk.displayName;const lx=b.forwardRef(({className:t,...e},r)=>p.jsx(Wk,{ref:r,className:Le("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:p.jsx(hm,{className:"h-4 w-4"})}));lx.displayName=Wk.displayName;const ux=b.forwardRef(({className:t,...e},r)=>p.jsx(Bk,{ref:r,className:Le("text-sm font-semibold",t),...e}));ux.displayName=Bk.displayName;const dx=b.forwardRef(({className:t,...e},r)=>p.jsx(Vk,{ref:r,className:Le("text-sm opacity-90",t),...e}));dx.displayName=Vk.displayName;function CI(){const{toasts:t}=Yu();return p.jsxs(xI,{children:[t.map(function({id:e,title:r,description:n,action:i,...o}){return p.jsxs(cx,{...o,children:[p.jsxs("div",{className:"grid gap-1",children:[r&&p.jsx(ux,{children:r}),n&&p.jsx(dx,{children:n})]}),i,p.jsx(lx,{})]},e)}),p.jsx(sx,{})]})}var Xy=["light","dark"],PI="(prefers-color-scheme: dark)",OI=b.createContext(void 0),RI={setTheme:t=>{},themes:[]},jI=()=>{var t;return(t=b.useContext(OI))!=null?t:RI};b.memo(({forcedTheme:t,storageKey:e,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:o,value:a,attrs:s,nonce:c})=>{let l=o==="system",u=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${s.map(_=>`'${_}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,d=i?Xy.includes(o)&&o?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${o}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",h=(_,v=!1,g=!0)=>{let y=a?a[_]:_,m=v?_+"|| ''":`'${y}'`,w="";return i&&g&&!v&&Xy.includes(_)&&(w+=`d.style.colorScheme = '${_}';`),r==="class"?v||y?w+=`c.add(${m})`:w+="null":y&&(w+=`d[s](n,${m})`),w},f=t?`!function(){${u}${h(t)}}()`:n?`!function(){try{${u}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${l})){var t='${PI}',m=window.matchMedia(t);if(m.media!==t||m.matches){${h("dark")}}else{${h("light")}}}else if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}${l?"":"else{"+h(o,!1,!1)+"}"}${d}}catch(e){}}()`:`!function(){try{${u}var e=localStorage.getItem('${e}');if(e){${a?`var x=${JSON.stringify(a)};`:""}${h(a?"x[e]":"e",!0)}}else{${h(o,!1,!1)};}${d}}catch(t){}}();`;return b.createElement("script",{nonce:c,dangerouslySetInnerHTML:{__html:f}})});var AI=t=>{switch(t){case"success":return NI;case"info":return DI;case"warning":return MI;case"error":return $I;default:return null}},LI=Array(12).fill(0),II=({visible:t,className:e})=>G.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},G.createElement("div",{className:"sonner-spinner"},LI.map((r,n)=>G.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),NI=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),MI=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),DI=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),$I=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},G.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),FI=G.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},G.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),G.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),UI=()=>{let[t,e]=G.useState(document.hidden);return G.useEffect(()=>{let r=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),t},pp=1,BI=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:r,...n}=t,i=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:pp++,o=this.toasts.find(s=>s.id===i),a=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(s=>s.id===i?(this.publish({...s,...t,id:i,title:r}),{...s,...t,id:i,dismissible:a,title:r}):s):this.addToast({title:r,...n,dismissible:a,id:i}),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(r=>r({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let r;e.loading!==void 0&&(r=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let n=t instanceof Promise?t:t(),i=r!==void 0,o,a=n.then(async c=>{if(o=["resolve",c],G.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(zI(c)&&!c.ok){i=!1;let l=typeof e.error=="function"?await e.error(`HTTP error! status: ${c.status}`):e.error,u=typeof e.description=="function"?await e.description(`HTTP error! status: ${c.status}`):e.description;this.create({id:r,type:"error",message:l,description:u})}else if(e.success!==void 0){i=!1;let l=typeof e.success=="function"?await e.success(c):e.success,u=typeof e.description=="function"?await e.description(c):e.description;this.create({id:r,type:"success",message:l,description:u})}}).catch(async c=>{if(o=["reject",c],e.error!==void 0){i=!1;let l=typeof e.error=="function"?await e.error(c):e.error,u=typeof e.description=="function"?await e.description(c):e.description;this.create({id:r,type:"error",message:l,description:u})}}).finally(()=>{var c;i&&(this.dismiss(r),r=void 0),(c=e.finally)==null||c.call(e)}),s=()=>new Promise((c,l)=>a.then(()=>o[0]==="reject"?l(o[1]):c(o[1])).catch(l));return typeof r!="string"&&typeof r!="number"?{unwrap:s}:Object.assign(r,{unwrap:s})},this.custom=(t,e)=>{let r=(e==null?void 0:e.id)||pp++;return this.create({jsx:t(r),id:r,...e}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Ct=new BI,VI=(t,e)=>{let r=(e==null?void 0:e.id)||pp++;return Ct.addToast({title:t,...e,id:r}),r},zI=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",WI=VI,HI=()=>Ct.toasts,qI=()=>Ct.getActiveToasts();Object.assign(WI,{success:Ct.success,info:Ct.info,warning:Ct.warning,error:Ct.error,custom:Ct.custom,message:Ct.message,promise:Ct.promise,dismiss:Ct.dismiss,loading:Ct.loading},{getHistory:HI,getToasts:qI});function KI(t,{insertAt:e}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}KI(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Gc(t){return t.label!==void 0}var GI=3,QI="32px",JI="16px",Zy=4e3,YI=356,XI=14,ZI=20,eN=200;function cr(...t){return t.filter(Boolean).join(" ")}function tN(t){let[e,r]=t.split("-"),n=[];return e&&n.push(e),r&&n.push(r),n}var rN=t=>{var e,r,n,i,o,a,s,c,l,u,d;let{invert:h,toast:f,unstyled:_,interacting:v,setHeights:g,visibleToasts:y,heights:m,index:w,toasts:S,expanded:k,removeToast:E,defaultRichColors:x,closeButton:C,style:R,cancelButtonStyle:A,actionButtonStyle:D,className:O="",descriptionClassName:I="",duration:P,position:L,gap:N,loadingIcon:$,expandByDefault:j,classNames:M,icons:B,closeButtonAriaLabel:U="Close toast",pauseWhenPageIsHidden:Q}=t,[K,V]=G.useState(null),[W,ee]=G.useState(null),[z,q]=G.useState(!1),[te,ce]=G.useState(!1),[ae,ue]=G.useState(!1),[ge,Oe]=G.useState(!1),[Xe,ft]=G.useState(!1),[Ue,Cr]=G.useState(0),[tr,gn]=G.useState(0),yn=G.useRef(f.duration||P||Zy),Tc=G.useRef(null),qt=G.useRef(null),pi=w===0,Ec=w+1<=y,xt=f.type,Pr=f.dismissible!==!1,vo=f.className||"",vi=f.descriptionClassName||"",Or=G.useMemo(()=>m.findIndex(de=>de.toastId===f.id)||0,[m,f.id]),Cc=G.useMemo(()=>{var de;return(de=f.closeButton)!=null?de:C},[f.closeButton,C]),mi=G.useMemo(()=>f.duration||P||Zy,[f.duration,P]),Kr=G.useRef(0),rr=G.useRef(0),_n=G.useRef(0),Rr=G.useRef(null),[It,nr]=L.split("-"),Se=G.useMemo(()=>m.reduce((de,ke,Ie)=>Ie>=Or?de:de+ke.height,0),[m,Or]),jg=UI(),Md=f.invert||h,Dd=xt==="loading";rr.current=G.useMemo(()=>Or*N+Se,[Or,Se]),G.useEffect(()=>{yn.current=mi},[mi]),G.useEffect(()=>{q(!0)},[]),G.useEffect(()=>{let de=qt.current;if(de){let ke=de.getBoundingClientRect().height;return gn(ke),g(Ie=>[{toastId:f.id,height:ke,position:f.position},...Ie]),()=>g(Ie=>Ie.filter(ir=>ir.toastId!==f.id))}},[g,f.id]),G.useLayoutEffect(()=>{if(!z)return;let de=qt.current,ke=de.style.height;de.style.height="auto";let Ie=de.getBoundingClientRect().height;de.style.height=ke,gn(Ie),g(ir=>ir.find(or=>or.toastId===f.id)?ir.map(or=>or.toastId===f.id?{...or,height:Ie}:or):[{toastId:f.id,height:Ie,position:f.position},...ir])},[z,f.title,f.description,g,f.id]);let wn=G.useCallback(()=>{ce(!0),Cr(rr.current),g(de=>de.filter(ke=>ke.toastId!==f.id)),setTimeout(()=>{E(f)},eN)},[f,E,g,rr]);G.useEffect(()=>{if(f.promise&&xt==="loading"||f.duration===1/0||f.type==="loading")return;let de;return k||v||Q&&jg?(()=>{if(_n.current<Kr.current){let ke=new Date().getTime()-Kr.current;yn.current=yn.current-ke}_n.current=new Date().getTime()})():yn.current!==1/0&&(Kr.current=new Date().getTime(),de=setTimeout(()=>{var ke;(ke=f.onAutoClose)==null||ke.call(f,f),wn()},yn.current)),()=>clearTimeout(de)},[k,v,f,xt,Q,jg,wn]),G.useEffect(()=>{f.delete&&wn()},[wn,f.delete]);function Q1(){var de,ke,Ie;return B!=null&&B.loading?G.createElement("div",{className:cr(M==null?void 0:M.loader,(de=f==null?void 0:f.classNames)==null?void 0:de.loader,"sonner-loader"),"data-visible":xt==="loading"},B.loading):$?G.createElement("div",{className:cr(M==null?void 0:M.loader,(ke=f==null?void 0:f.classNames)==null?void 0:ke.loader,"sonner-loader"),"data-visible":xt==="loading"},$):G.createElement(II,{className:cr(M==null?void 0:M.loader,(Ie=f==null?void 0:f.classNames)==null?void 0:Ie.loader),visible:xt==="loading"})}return G.createElement("li",{tabIndex:0,ref:qt,className:cr(O,vo,M==null?void 0:M.toast,(e=f==null?void 0:f.classNames)==null?void 0:e.toast,M==null?void 0:M.default,M==null?void 0:M[xt],(r=f==null?void 0:f.classNames)==null?void 0:r[xt]),"data-sonner-toast":"","data-rich-colors":(n=f.richColors)!=null?n:x,"data-styled":!(f.jsx||f.unstyled||_),"data-mounted":z,"data-promise":!!f.promise,"data-swiped":Xe,"data-removed":te,"data-visible":Ec,"data-y-position":It,"data-x-position":nr,"data-index":w,"data-front":pi,"data-swiping":ae,"data-dismissible":Pr,"data-type":xt,"data-invert":Md,"data-swipe-out":ge,"data-swipe-direction":W,"data-expanded":!!(k||j&&z),style:{"--index":w,"--toasts-before":w,"--z-index":S.length-w,"--offset":`${te?Ue:rr.current}px`,"--initial-height":j?"auto":`${tr}px`,...R,...f.style},onDragEnd:()=>{ue(!1),V(null),Rr.current=null},onPointerDown:de=>{Dd||!Pr||(Tc.current=new Date,Cr(rr.current),de.target.setPointerCapture(de.pointerId),de.target.tagName!=="BUTTON"&&(ue(!0),Rr.current={x:de.clientX,y:de.clientY}))},onPointerUp:()=>{var de,ke,Ie,ir;if(ge||!Pr)return;Rr.current=null;let or=Number(((de=qt.current)==null?void 0:de.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),bn=Number(((ke=qt.current)==null?void 0:ke.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),gi=new Date().getTime()-((Ie=Tc.current)==null?void 0:Ie.getTime()),ar=K==="x"?or:bn,Sn=Math.abs(ar)/gi;if(Math.abs(ar)>=ZI||Sn>.11){Cr(rr.current),(ir=f.onDismiss)==null||ir.call(f,f),ee(K==="x"?or>0?"right":"left":bn>0?"down":"up"),wn(),Oe(!0),ft(!1);return}ue(!1),V(null)},onPointerMove:de=>{var ke,Ie,ir,or;if(!Rr.current||!Pr||((ke=window.getSelection())==null?void 0:ke.toString().length)>0)return;let bn=de.clientY-Rr.current.y,gi=de.clientX-Rr.current.x,ar=(Ie=t.swipeDirections)!=null?Ie:tN(L);!K&&(Math.abs(gi)>1||Math.abs(bn)>1)&&V(Math.abs(gi)>Math.abs(bn)?"x":"y");let Sn={x:0,y:0};K==="y"?(ar.includes("top")||ar.includes("bottom"))&&(ar.includes("top")&&bn<0||ar.includes("bottom")&&bn>0)&&(Sn.y=bn):K==="x"&&(ar.includes("left")||ar.includes("right"))&&(ar.includes("left")&&gi<0||ar.includes("right")&&gi>0)&&(Sn.x=gi),(Math.abs(Sn.x)>0||Math.abs(Sn.y)>0)&&ft(!0),(ir=qt.current)==null||ir.style.setProperty("--swipe-amount-x",`${Sn.x}px`),(or=qt.current)==null||or.style.setProperty("--swipe-amount-y",`${Sn.y}px`)}},Cc&&!f.jsx?G.createElement("button",{"aria-label":U,"data-disabled":Dd,"data-close-button":!0,onClick:Dd||!Pr?()=>{}:()=>{var de;wn(),(de=f.onDismiss)==null||de.call(f,f)},className:cr(M==null?void 0:M.closeButton,(i=f==null?void 0:f.classNames)==null?void 0:i.closeButton)},(o=B==null?void 0:B.close)!=null?o:FI):null,f.jsx||b.isValidElement(f.title)?f.jsx?f.jsx:typeof f.title=="function"?f.title():f.title:G.createElement(G.Fragment,null,xt||f.icon||f.promise?G.createElement("div",{"data-icon":"",className:cr(M==null?void 0:M.icon,(a=f==null?void 0:f.classNames)==null?void 0:a.icon)},f.promise||f.type==="loading"&&!f.icon?f.icon||Q1():null,f.type!=="loading"?f.icon||(B==null?void 0:B[xt])||AI(xt):null):null,G.createElement("div",{"data-content":"",className:cr(M==null?void 0:M.content,(s=f==null?void 0:f.classNames)==null?void 0:s.content)},G.createElement("div",{"data-title":"",className:cr(M==null?void 0:M.title,(c=f==null?void 0:f.classNames)==null?void 0:c.title)},typeof f.title=="function"?f.title():f.title),f.description?G.createElement("div",{"data-description":"",className:cr(I,vi,M==null?void 0:M.description,(l=f==null?void 0:f.classNames)==null?void 0:l.description)},typeof f.description=="function"?f.description():f.description):null),b.isValidElement(f.cancel)?f.cancel:f.cancel&&Gc(f.cancel)?G.createElement("button",{"data-button":!0,"data-cancel":!0,style:f.cancelButtonStyle||A,onClick:de=>{var ke,Ie;Gc(f.cancel)&&Pr&&((Ie=(ke=f.cancel).onClick)==null||Ie.call(ke,de),wn())},className:cr(M==null?void 0:M.cancelButton,(u=f==null?void 0:f.classNames)==null?void 0:u.cancelButton)},f.cancel.label):null,b.isValidElement(f.action)?f.action:f.action&&Gc(f.action)?G.createElement("button",{"data-button":!0,"data-action":!0,style:f.actionButtonStyle||D,onClick:de=>{var ke,Ie;Gc(f.action)&&((Ie=(ke=f.action).onClick)==null||Ie.call(ke,de),!de.defaultPrevented&&wn())},className:cr(M==null?void 0:M.actionButton,(d=f==null?void 0:f.classNames)==null?void 0:d.actionButton)},f.action.label):null))};function e_(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function nN(t,e){let r={};return[t,e].forEach((n,i)=>{let o=i===1,a=o?"--mobile-offset":"--offset",s=o?JI:QI;function c(l){["top","right","bottom","left"].forEach(u=>{r[`${a}-${u}`]=typeof l=="number"?`${l}px`:l})}typeof n=="number"||typeof n=="string"?c(n):typeof n=="object"?["top","right","bottom","left"].forEach(l=>{n[l]===void 0?r[`${a}-${l}`]=s:r[`${a}-${l}`]=typeof n[l]=="number"?`${n[l]}px`:n[l]}):c(s)}),r}var iN=b.forwardRef(function(t,e){let{invert:r,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:o,closeButton:a,className:s,offset:c,mobileOffset:l,theme:u="light",richColors:d,duration:h,style:f,visibleToasts:_=GI,toastOptions:v,dir:g=e_(),gap:y=XI,loadingIcon:m,icons:w,containerAriaLabel:S="Notifications",pauseWhenPageIsHidden:k}=t,[E,x]=G.useState([]),C=G.useMemo(()=>Array.from(new Set([n].concat(E.filter(Q=>Q.position).map(Q=>Q.position)))),[E,n]),[R,A]=G.useState([]),[D,O]=G.useState(!1),[I,P]=G.useState(!1),[L,N]=G.useState(u!=="system"?u:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),$=G.useRef(null),j=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),M=G.useRef(null),B=G.useRef(!1),U=G.useCallback(Q=>{x(K=>{var V;return(V=K.find(W=>W.id===Q.id))!=null&&V.delete||Ct.dismiss(Q.id),K.filter(({id:W})=>W!==Q.id)})},[]);return G.useEffect(()=>Ct.subscribe(Q=>{if(Q.dismiss){x(K=>K.map(V=>V.id===Q.id?{...V,delete:!0}:V));return}setTimeout(()=>{yk.flushSync(()=>{x(K=>{let V=K.findIndex(W=>W.id===Q.id);return V!==-1?[...K.slice(0,V),{...K[V],...Q},...K.slice(V+1)]:[Q,...K]})})})}),[]),G.useEffect(()=>{if(u!=="system"){N(u);return}if(u==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?N("dark"):N("light")),typeof window>"u")return;let Q=window.matchMedia("(prefers-color-scheme: dark)");try{Q.addEventListener("change",({matches:K})=>{N(K?"dark":"light")})}catch{Q.addListener(({matches:V})=>{try{N(V?"dark":"light")}catch(W){console.error(W)}})}},[u]),G.useEffect(()=>{E.length<=1&&O(!1)},[E]),G.useEffect(()=>{let Q=K=>{var V,W;i.every(ee=>K[ee]||K.code===ee)&&(O(!0),(V=$.current)==null||V.focus()),K.code==="Escape"&&(document.activeElement===$.current||(W=$.current)!=null&&W.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",Q),()=>document.removeEventListener("keydown",Q)},[i]),G.useEffect(()=>{if($.current)return()=>{M.current&&(M.current.focus({preventScroll:!0}),M.current=null,B.current=!1)}},[$.current]),G.createElement("section",{ref:e,"aria-label":`${S} ${j}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},C.map((Q,K)=>{var V;let[W,ee]=Q.split("-");return E.length?G.createElement("ol",{key:Q,dir:g==="auto"?e_():g,tabIndex:-1,ref:$,className:s,"data-sonner-toaster":!0,"data-theme":L,"data-y-position":W,"data-lifted":D&&E.length>1&&!o,"data-x-position":ee,style:{"--front-toast-height":`${((V=R[0])==null?void 0:V.height)||0}px`,"--width":`${YI}px`,"--gap":`${y}px`,...f,...nN(c,l)},onBlur:z=>{B.current&&!z.currentTarget.contains(z.relatedTarget)&&(B.current=!1,M.current&&(M.current.focus({preventScroll:!0}),M.current=null))},onFocus:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||B.current||(B.current=!0,M.current=z.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{I||O(!1)},onDragEnd:()=>O(!1),onPointerDown:z=>{z.target instanceof HTMLElement&&z.target.dataset.dismissible==="false"||P(!0)},onPointerUp:()=>P(!1)},E.filter(z=>!z.position&&K===0||z.position===Q).map((z,q)=>{var te,ce;return G.createElement(rN,{key:z.id,icons:w,index:q,toast:z,defaultRichColors:d,duration:(te=v==null?void 0:v.duration)!=null?te:h,className:v==null?void 0:v.className,descriptionClassName:v==null?void 0:v.descriptionClassName,invert:r,visibleToasts:_,closeButton:(ce=v==null?void 0:v.closeButton)!=null?ce:a,interacting:I,position:Q,style:v==null?void 0:v.style,unstyled:v==null?void 0:v.unstyled,classNames:v==null?void 0:v.classNames,cancelButtonStyle:v==null?void 0:v.cancelButtonStyle,actionButtonStyle:v==null?void 0:v.actionButtonStyle,removeToast:U,toasts:E.filter(ae=>ae.position==z.position),heights:R.filter(ae=>ae.position==z.position),setHeights:A,expandByDefault:o,gap:y,loadingIcon:m,expanded:D,pauseWhenPageIsHidden:k,swipeDirections:t.swipeDirections})})):null}))});const oN=({...t})=>{const{theme:e="system"}=jI();return p.jsx(iN,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})};var aN=Nu[" useId ".trim().toString()]||(()=>{}),sN=0;function mm(t){const[e,r]=b.useState(aN());return at(()=>{r(n=>n??String(sN++))},[t]),e?`radix-${e}`:""}const cN=["top","right","bottom","left"],ii=Math.min,Dt=Math.max,yu=Math.round,Qc=Math.floor,Vr=t=>({x:t,y:t}),lN={left:"right",right:"left",bottom:"top",top:"bottom"},uN={start:"end",end:"start"};function vp(t,e,r){return Dt(t,ii(e,r))}function un(t,e){return typeof t=="function"?t(e):t}function dn(t){return t.split("-")[0]}function ja(t){return t.split("-")[1]}function gm(t){return t==="x"?"y":"x"}function ym(t){return t==="y"?"height":"width"}const dN=new Set(["top","bottom"]);function $r(t){return dN.has(dn(t))?"y":"x"}function _m(t){return gm($r(t))}function fN(t,e,r){r===void 0&&(r=!1);const n=ja(t),i=_m(t),o=ym(i);let a=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=_u(a)),[a,_u(a)]}function hN(t){const e=_u(t);return[mp(t),e,mp(e)]}function mp(t){return t.replace(/start|end/g,e=>uN[e])}const t_=["left","right"],r_=["right","left"],pN=["top","bottom"],vN=["bottom","top"];function mN(t,e,r){switch(t){case"top":case"bottom":return r?e?r_:t_:e?t_:r_;case"left":case"right":return e?pN:vN;default:return[]}}function gN(t,e,r,n){const i=ja(t);let o=mN(dn(t),r==="start",n);return i&&(o=o.map(a=>a+"-"+i),e&&(o=o.concat(o.map(mp)))),o}function _u(t){return t.replace(/left|right|bottom|top/g,e=>lN[e])}function yN(t){return{top:0,right:0,bottom:0,left:0,...t}}function fx(t){return typeof t!="number"?yN(t):{top:t,right:t,bottom:t,left:t}}function wu(t){const{x:e,y:r,width:n,height:i}=t;return{width:n,height:i,top:r,left:e,right:e+n,bottom:r+i,x:e,y:r}}function n_(t,e,r){let{reference:n,floating:i}=t;const o=$r(e),a=_m(e),s=ym(a),c=dn(e),l=o==="y",u=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,h=n[s]/2-i[s]/2;let f;switch(c){case"top":f={x:u,y:n.y-i.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-i.width,y:d};break;default:f={x:n.x,y:n.y}}switch(ja(e)){case"start":f[a]-=h*(r&&l?-1:1);break;case"end":f[a]+=h*(r&&l?-1:1);break}return f}const _N=async(t,e,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:o=[],platform:a}=r,s=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let l=await a.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=n_(l,n,c),h=n,f={},_=0;for(let v=0;v<s.length;v++){const{name:g,fn:y}=s[v],{x:m,y:w,data:S,reset:k}=await y({x:u,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:l,platform:a,elements:{reference:t,floating:e}});u=m??u,d=w??d,f={...f,[g]:{...f[g],...S}},k&&_<=50&&(_++,typeof k=="object"&&(k.placement&&(h=k.placement),k.rects&&(l=k.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:i}):k.rects),{x:u,y:d}=n_(l,h,c)),v=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function Us(t,e){var r;e===void 0&&(e={});const{x:n,y:i,platform:o,rects:a,elements:s,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=un(e,t),_=fx(f),g=s[h?d==="floating"?"reference":"floating":d],y=wu(await o.getClippingRect({element:(r=await(o.isElement==null?void 0:o.isElement(g)))==null||r?g:g.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(s.floating)),boundary:l,rootBoundary:u,strategy:c})),m=d==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(s.floating)),S=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},k=wu(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:s,rect:m,offsetParent:w,strategy:c}):m);return{top:(y.top-k.top+_.top)/S.y,bottom:(k.bottom-y.bottom+_.bottom)/S.y,left:(y.left-k.left+_.left)/S.x,right:(k.right-y.right+_.right)/S.x}}const wN=t=>({name:"arrow",options:t,async fn(e){const{x:r,y:n,placement:i,rects:o,platform:a,elements:s,middlewareData:c}=e,{element:l,padding:u=0}=un(t,e)||{};if(l==null)return{};const d=fx(u),h={x:r,y:n},f=_m(i),_=ym(f),v=await a.getDimensions(l),g=f==="y",y=g?"top":"left",m=g?"bottom":"right",w=g?"clientHeight":"clientWidth",S=o.reference[_]+o.reference[f]-h[f]-o.floating[_],k=h[f]-o.reference[f],E=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l));let x=E?E[w]:0;(!x||!await(a.isElement==null?void 0:a.isElement(E)))&&(x=s.floating[w]||o.floating[_]);const C=S/2-k/2,R=x/2-v[_]/2-1,A=ii(d[y],R),D=ii(d[m],R),O=A,I=x-v[_]-D,P=x/2-v[_]/2+C,L=vp(O,P,I),N=!c.arrow&&ja(i)!=null&&P!==L&&o.reference[_]/2-(P<O?A:D)-v[_]/2<0,$=N?P<O?P-O:P-I:0;return{[f]:h[f]+$,data:{[f]:L,centerOffset:P-L-$,...N&&{alignmentOffset:$}},reset:N}}}),bN=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var r,n;const{placement:i,middlewareData:o,rects:a,initialPlacement:s,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:v=!0,...g}=un(t,e);if((r=o.arrow)!=null&&r.alignmentOffset)return{};const y=dn(i),m=$r(s),w=dn(s)===s,S=await(c.isRTL==null?void 0:c.isRTL(l.floating)),k=h||(w||!v?[_u(s)]:hN(s)),E=_!=="none";!h&&E&&k.push(...gN(s,v,_,S));const x=[s,...k],C=await Us(e,g),R=[];let A=((n=o.flip)==null?void 0:n.overflows)||[];if(u&&R.push(C[y]),d){const P=fN(i,a,S);R.push(C[P[0]],C[P[1]])}if(A=[...A,{placement:i,overflows:R}],!R.every(P=>P<=0)){var D,O;const P=(((D=o.flip)==null?void 0:D.index)||0)+1,L=x[P];if(L&&(!(d==="alignment"?m!==$r(L):!1)||A.every(j=>$r(j.placement)===m?j.overflows[0]>0:!0)))return{data:{index:P,overflows:A},reset:{placement:L}};let N=(O=A.filter($=>$.overflows[0]<=0).sort(($,j)=>$.overflows[1]-j.overflows[1])[0])==null?void 0:O.placement;if(!N)switch(f){case"bestFit":{var I;const $=(I=A.filter(j=>{if(E){const M=$r(j.placement);return M===m||M==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(M=>M>0).reduce((M,B)=>M+B,0)]).sort((j,M)=>j[1]-M[1])[0])==null?void 0:I[0];$&&(N=$);break}case"initialPlacement":N=s;break}if(i!==N)return{reset:{placement:N}}}return{}}}};function i_(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function o_(t){return cN.some(e=>t[e]>=0)}const SN=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:r}=e,{strategy:n="referenceHidden",...i}=un(t,e);switch(n){case"referenceHidden":{const o=await Us(e,{...i,elementContext:"reference"}),a=i_(o,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:o_(a)}}}case"escaped":{const o=await Us(e,{...i,altBoundary:!0}),a=i_(o,r.floating);return{data:{escapedOffsets:a,escaped:o_(a)}}}default:return{}}}}},hx=new Set(["left","top"]);async function kN(t,e){const{placement:r,platform:n,elements:i}=t,o=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=dn(r),s=ja(r),c=$r(r)==="y",l=hx.has(a)?-1:1,u=o&&c?-1:1,d=un(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:_}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return s&&typeof _=="number"&&(f=s==="end"?_*-1:_),c?{x:f*u,y:h*l}:{x:h*l,y:f*u}}const xN=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var r,n;const{x:i,y:o,placement:a,middlewareData:s}=e,c=await kN(e,t);return a===((r=s.offset)==null?void 0:r.placement)&&(n=s.arrow)!=null&&n.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:a}}}}},TN=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:r,y:n,placement:i}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:s={fn:g=>{let{x:y,y:m}=g;return{x:y,y:m}}},...c}=un(t,e),l={x:r,y:n},u=await Us(e,c),d=$r(dn(i)),h=gm(d);let f=l[h],_=l[d];if(o){const g=h==="y"?"top":"left",y=h==="y"?"bottom":"right",m=f+u[g],w=f-u[y];f=vp(m,f,w)}if(a){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",m=_+u[g],w=_-u[y];_=vp(m,_,w)}const v=s.fn({...e,[h]:f,[d]:_});return{...v,data:{x:v.x-r,y:v.y-n,enabled:{[h]:o,[d]:a}}}}}},EN=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:r,y:n,placement:i,rects:o,middlewareData:a}=e,{offset:s=0,mainAxis:c=!0,crossAxis:l=!0}=un(t,e),u={x:r,y:n},d=$r(i),h=gm(d);let f=u[h],_=u[d];const v=un(s,e),g=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const w=h==="y"?"height":"width",S=o.reference[h]-o.floating[w]+g.mainAxis,k=o.reference[h]+o.reference[w]-g.mainAxis;f<S?f=S:f>k&&(f=k)}if(l){var y,m;const w=h==="y"?"width":"height",S=hx.has(dn(i)),k=o.reference[d]-o.floating[w]+(S&&((y=a.offset)==null?void 0:y[d])||0)+(S?0:g.crossAxis),E=o.reference[d]+o.reference[w]+(S?0:((m=a.offset)==null?void 0:m[d])||0)-(S?g.crossAxis:0);_<k?_=k:_>E&&(_=E)}return{[h]:f,[d]:_}}}},CN=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var r,n;const{placement:i,rects:o,platform:a,elements:s}=e,{apply:c=()=>{},...l}=un(t,e),u=await Us(e,l),d=dn(i),h=ja(i),f=$r(i)==="y",{width:_,height:v}=o.floating;let g,y;d==="top"||d==="bottom"?(g=d,y=h===(await(a.isRTL==null?void 0:a.isRTL(s.floating))?"start":"end")?"left":"right"):(y=d,g=h==="end"?"top":"bottom");const m=v-u.top-u.bottom,w=_-u.left-u.right,S=ii(v-u[g],m),k=ii(_-u[y],w),E=!e.middlewareData.shift;let x=S,C=k;if((r=e.middlewareData.shift)!=null&&r.enabled.x&&(C=w),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(x=m),E&&!h){const A=Dt(u.left,0),D=Dt(u.right,0),O=Dt(u.top,0),I=Dt(u.bottom,0);f?C=_-2*(A!==0||D!==0?A+D:Dt(u.left,u.right)):x=v-2*(O!==0||I!==0?O+I:Dt(u.top,u.bottom))}await c({...e,availableWidth:C,availableHeight:x});const R=await a.getDimensions(s.floating);return _!==R.width||v!==R.height?{reset:{rects:!0}}:{}}}};function id(){return typeof window<"u"}function Aa(t){return px(t)?(t.nodeName||"").toLowerCase():"#document"}function Vt(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Hr(t){var e;return(e=(px(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function px(t){return id()?t instanceof Node||t instanceof Vt(t).Node:!1}function xr(t){return id()?t instanceof Element||t instanceof Vt(t).Element:!1}function Wr(t){return id()?t instanceof HTMLElement||t instanceof Vt(t).HTMLElement:!1}function a_(t){return!id()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Vt(t).ShadowRoot}const PN=new Set(["inline","contents"]);function fc(t){const{overflow:e,overflowX:r,overflowY:n,display:i}=Tr(t);return/auto|scroll|overlay|hidden|clip/.test(e+n+r)&&!PN.has(i)}const ON=new Set(["table","td","th"]);function RN(t){return ON.has(Aa(t))}const jN=[":popover-open",":modal"];function od(t){return jN.some(e=>{try{return t.matches(e)}catch{return!1}})}const AN=["transform","translate","scale","rotate","perspective"],LN=["transform","translate","scale","rotate","perspective","filter"],IN=["paint","layout","strict","content"];function wm(t){const e=bm(),r=xr(t)?Tr(t):t;return AN.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!e&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!e&&(r.filter?r.filter!=="none":!1)||LN.some(n=>(r.willChange||"").includes(n))||IN.some(n=>(r.contain||"").includes(n))}function NN(t){let e=oi(t);for(;Wr(e)&&!Sa(e);){if(wm(e))return e;if(od(e))return null;e=oi(e)}return null}function bm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const MN=new Set(["html","body","#document"]);function Sa(t){return MN.has(Aa(t))}function Tr(t){return Vt(t).getComputedStyle(t)}function ad(t){return xr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function oi(t){if(Aa(t)==="html")return t;const e=t.assignedSlot||t.parentNode||a_(t)&&t.host||Hr(t);return a_(e)?e.host:e}function vx(t){const e=oi(t);return Sa(e)?t.ownerDocument?t.ownerDocument.body:t.body:Wr(e)&&fc(e)?e:vx(e)}function Bs(t,e,r){var n;e===void 0&&(e=[]),r===void 0&&(r=!0);const i=vx(t),o=i===((n=t.ownerDocument)==null?void 0:n.body),a=Vt(i);if(o){const s=gp(a);return e.concat(a,a.visualViewport||[],fc(i)?i:[],s&&r?Bs(s):[])}return e.concat(i,Bs(i,[],r))}function gp(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function mx(t){const e=Tr(t);let r=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=Wr(t),o=i?t.offsetWidth:r,a=i?t.offsetHeight:n,s=yu(r)!==o||yu(n)!==a;return s&&(r=o,n=a),{width:r,height:n,$:s}}function Sm(t){return xr(t)?t:t.contextElement}function ea(t){const e=Sm(t);if(!Wr(e))return Vr(1);const r=e.getBoundingClientRect(),{width:n,height:i,$:o}=mx(e);let a=(o?yu(r.width):r.width)/n,s=(o?yu(r.height):r.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!s||!Number.isFinite(s))&&(s=1),{x:a,y:s}}const DN=Vr(0);function gx(t){const e=Vt(t);return!bm()||!e.visualViewport?DN:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function $N(t,e,r){return e===void 0&&(e=!1),!r||e&&r!==Vt(t)?!1:e}function no(t,e,r,n){e===void 0&&(e=!1),r===void 0&&(r=!1);const i=t.getBoundingClientRect(),o=Sm(t);let a=Vr(1);e&&(n?xr(n)&&(a=ea(n)):a=ea(t));const s=$N(o,r,n)?gx(o):Vr(0);let c=(i.left+s.x)/a.x,l=(i.top+s.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(o){const h=Vt(o),f=n&&xr(n)?Vt(n):n;let _=h,v=gp(_);for(;v&&n&&f!==_;){const g=ea(v),y=v.getBoundingClientRect(),m=Tr(v),w=y.left+(v.clientLeft+parseFloat(m.paddingLeft))*g.x,S=y.top+(v.clientTop+parseFloat(m.paddingTop))*g.y;c*=g.x,l*=g.y,u*=g.x,d*=g.y,c+=w,l+=S,_=Vt(v),v=gp(_)}}return wu({width:u,height:d,x:c,y:l})}function sd(t,e){const r=ad(t).scrollLeft;return e?e.left+r:no(Hr(t)).left+r}function yx(t,e){const r=t.getBoundingClientRect(),n=r.left+e.scrollLeft-sd(t,r),i=r.top+e.scrollTop;return{x:n,y:i}}function FN(t){let{elements:e,rect:r,offsetParent:n,strategy:i}=t;const o=i==="fixed",a=Hr(n),s=e?od(e.floating):!1;if(n===a||s&&o)return r;let c={scrollLeft:0,scrollTop:0},l=Vr(1);const u=Vr(0),d=Wr(n);if((d||!d&&!o)&&((Aa(n)!=="body"||fc(a))&&(c=ad(n)),Wr(n))){const f=no(n);l=ea(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const h=a&&!d&&!o?yx(a,c):Vr(0);return{width:r.width*l.x,height:r.height*l.y,x:r.x*l.x-c.scrollLeft*l.x+u.x+h.x,y:r.y*l.y-c.scrollTop*l.y+u.y+h.y}}function UN(t){return Array.from(t.getClientRects())}function BN(t){const e=Hr(t),r=ad(t),n=t.ownerDocument.body,i=Dt(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),o=Dt(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-r.scrollLeft+sd(t);const s=-r.scrollTop;return Tr(n).direction==="rtl"&&(a+=Dt(e.clientWidth,n.clientWidth)-i),{width:i,height:o,x:a,y:s}}const s_=25;function VN(t,e){const r=Vt(t),n=Hr(t),i=r.visualViewport;let o=n.clientWidth,a=n.clientHeight,s=0,c=0;if(i){o=i.width,a=i.height;const u=bm();(!u||u&&e==="fixed")&&(s=i.offsetLeft,c=i.offsetTop)}const l=sd(n);if(l<=0){const u=n.ownerDocument,d=u.body,h=getComputedStyle(d),f=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,_=Math.abs(n.clientWidth-d.clientWidth-f);_<=s_&&(o-=_)}else l<=s_&&(o+=l);return{width:o,height:a,x:s,y:c}}const zN=new Set(["absolute","fixed"]);function WN(t,e){const r=no(t,!0,e==="fixed"),n=r.top+t.clientTop,i=r.left+t.clientLeft,o=Wr(t)?ea(t):Vr(1),a=t.clientWidth*o.x,s=t.clientHeight*o.y,c=i*o.x,l=n*o.y;return{width:a,height:s,x:c,y:l}}function c_(t,e,r){let n;if(e==="viewport")n=VN(t,r);else if(e==="document")n=BN(Hr(t));else if(xr(e))n=WN(e,r);else{const i=gx(t);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return wu(n)}function _x(t,e){const r=oi(t);return r===e||!xr(r)||Sa(r)?!1:Tr(r).position==="fixed"||_x(r,e)}function HN(t,e){const r=e.get(t);if(r)return r;let n=Bs(t,[],!1).filter(s=>xr(s)&&Aa(s)!=="body"),i=null;const o=Tr(t).position==="fixed";let a=o?oi(t):t;for(;xr(a)&&!Sa(a);){const s=Tr(a),c=wm(a);!c&&s.position==="fixed"&&(i=null),(o?!c&&!i:!c&&s.position==="static"&&!!i&&zN.has(i.position)||fc(a)&&!c&&_x(t,a))?n=n.filter(u=>u!==a):i=s,a=oi(a)}return e.set(t,n),n}function qN(t){let{element:e,boundary:r,rootBoundary:n,strategy:i}=t;const a=[...r==="clippingAncestors"?od(e)?[]:HN(e,this._c):[].concat(r),n],s=a[0],c=a.reduce((l,u)=>{const d=c_(e,u,i);return l.top=Dt(d.top,l.top),l.right=ii(d.right,l.right),l.bottom=ii(d.bottom,l.bottom),l.left=Dt(d.left,l.left),l},c_(e,s,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function KN(t){const{width:e,height:r}=mx(t);return{width:e,height:r}}function GN(t,e,r){const n=Wr(e),i=Hr(e),o=r==="fixed",a=no(t,!0,o,e);let s={scrollLeft:0,scrollTop:0};const c=Vr(0);function l(){c.x=sd(i)}if(n||!n&&!o)if((Aa(e)!=="body"||fc(i))&&(s=ad(e)),n){const f=no(e,!0,o,e);c.x=f.x+e.clientLeft,c.y=f.y+e.clientTop}else i&&l();o&&!n&&i&&l();const u=i&&!n&&!o?yx(i,s):Vr(0),d=a.left+s.scrollLeft-c.x-u.x,h=a.top+s.scrollTop-c.y-u.y;return{x:d,y:h,width:a.width,height:a.height}}function mf(t){return Tr(t).position==="static"}function l_(t,e){if(!Wr(t)||Tr(t).position==="fixed")return null;if(e)return e(t);let r=t.offsetParent;return Hr(t)===r&&(r=r.ownerDocument.body),r}function wx(t,e){const r=Vt(t);if(od(t))return r;if(!Wr(t)){let i=oi(t);for(;i&&!Sa(i);){if(xr(i)&&!mf(i))return i;i=oi(i)}return r}let n=l_(t,e);for(;n&&RN(n)&&mf(n);)n=l_(n,e);return n&&Sa(n)&&mf(n)&&!wm(n)?r:n||NN(t)||r}const QN=async function(t){const e=this.getOffsetParent||wx,r=this.getDimensions,n=await r(t.floating);return{reference:GN(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function JN(t){return Tr(t).direction==="rtl"}const YN={convertOffsetParentRelativeRectToViewportRelativeRect:FN,getDocumentElement:Hr,getClippingRect:qN,getOffsetParent:wx,getElementRects:QN,getClientRects:UN,getDimensions:KN,getScale:ea,isElement:xr,isRTL:JN};function bx(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function XN(t,e){let r=null,n;const i=Hr(t);function o(){var s;clearTimeout(n),(s=r)==null||s.disconnect(),r=null}function a(s,c){s===void 0&&(s=!1),c===void 0&&(c=1),o();const l=t.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=l;if(s||e(),!h||!f)return;const _=Qc(d),v=Qc(i.clientWidth-(u+h)),g=Qc(i.clientHeight-(d+f)),y=Qc(u),w={rootMargin:-_+"px "+-v+"px "+-g+"px "+-y+"px",threshold:Dt(0,ii(1,c))||1};let S=!0;function k(E){const x=E[0].intersectionRatio;if(x!==c){if(!S)return a();x?a(!1,x):n=setTimeout(()=>{a(!1,1e-7)},1e3)}x===1&&!bx(l,t.getBoundingClientRect())&&a(),S=!1}try{r=new IntersectionObserver(k,{...w,root:i.ownerDocument})}catch{r=new IntersectionObserver(k,w)}r.observe(t)}return a(!0),o}function ZN(t,e,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:s=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,l=Sm(t),u=i||o?[...l?Bs(l):[],...Bs(e)]:[];u.forEach(y=>{i&&y.addEventListener("scroll",r,{passive:!0}),o&&y.addEventListener("resize",r)});const d=l&&s?XN(l,r):null;let h=-1,f=null;a&&(f=new ResizeObserver(y=>{let[m]=y;m&&m.target===l&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),r()}),l&&!c&&f.observe(l),f.observe(e));let _,v=c?no(t):null;c&&g();function g(){const y=no(t);v&&!bx(v,y)&&r(),v=y,_=requestAnimationFrame(g)}return r(),()=>{var y;u.forEach(m=>{i&&m.removeEventListener("scroll",r),o&&m.removeEventListener("resize",r)}),d==null||d(),(y=f)==null||y.disconnect(),f=null,c&&cancelAnimationFrame(_)}}const eM=xN,tM=TN,rM=bN,nM=CN,iM=SN,u_=wN,oM=EN,aM=(t,e,r)=>{const n=new Map,i={platform:YN,...r},o={...i.platform,_c:n};return _N(t,e,{...i,platform:o})};var sM=typeof document<"u",cM=function(){},Ul=sM?b.useLayoutEffect:cM;function bu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let r,n,i;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(r=t.length,r!==e.length)return!1;for(n=r;n--!==0;)if(!bu(t[n],e[n]))return!1;return!0}if(i=Object.keys(t),r=i.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=r;n--!==0;){const o=i[n];if(!(o==="_owner"&&t.$$typeof)&&!bu(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function Sx(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function d_(t,e){const r=Sx(t);return Math.round(e*r)/r}function gf(t){const e=b.useRef(t);return Ul(()=>{e.current=t}),e}function lM(t){t===void 0&&(t={});const{placement:e="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:o,floating:a}={},transform:s=!0,whileElementsMounted:c,open:l}=t,[u,d]=b.useState({x:0,y:0,strategy:r,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=b.useState(n);bu(h,n)||f(n);const[_,v]=b.useState(null),[g,y]=b.useState(null),m=b.useCallback(j=>{j!==E.current&&(E.current=j,v(j))},[]),w=b.useCallback(j=>{j!==x.current&&(x.current=j,y(j))},[]),S=o||_,k=a||g,E=b.useRef(null),x=b.useRef(null),C=b.useRef(u),R=c!=null,A=gf(c),D=gf(i),O=gf(l),I=b.useCallback(()=>{if(!E.current||!x.current)return;const j={placement:e,strategy:r,middleware:h};D.current&&(j.platform=D.current),aM(E.current,x.current,j).then(M=>{const B={...M,isPositioned:O.current!==!1};P.current&&!bu(C.current,B)&&(C.current=B,lo.flushSync(()=>{d(B)}))})},[h,e,r,D,O]);Ul(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(j=>({...j,isPositioned:!1})))},[l]);const P=b.useRef(!1);Ul(()=>(P.current=!0,()=>{P.current=!1}),[]),Ul(()=>{if(S&&(E.current=S),k&&(x.current=k),S&&k){if(A.current)return A.current(S,k,I);I()}},[S,k,I,A,R]);const L=b.useMemo(()=>({reference:E,floating:x,setReference:m,setFloating:w}),[m,w]),N=b.useMemo(()=>({reference:S,floating:k}),[S,k]),$=b.useMemo(()=>{const j={position:r,left:0,top:0};if(!N.floating)return j;const M=d_(N.floating,u.x),B=d_(N.floating,u.y);return s?{...j,transform:"translate("+M+"px, "+B+"px)",...Sx(N.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:M,top:B}},[r,s,N.floating,u.x,u.y]);return b.useMemo(()=>({...u,update:I,refs:L,elements:N,floatingStyles:$}),[u,I,L,N,$])}const uM=t=>{function e(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:t,fn(r){const{element:n,padding:i}=typeof t=="function"?t(r):t;return n&&e(n)?n.current!=null?u_({element:n.current,padding:i}).fn(r):{}:n?u_({element:n,padding:i}).fn(r):{}}}},dM=(t,e)=>({...eM(t),options:[t,e]}),fM=(t,e)=>({...tM(t),options:[t,e]}),hM=(t,e)=>({...oM(t),options:[t,e]}),pM=(t,e)=>({...rM(t),options:[t,e]}),vM=(t,e)=>({...nM(t),options:[t,e]}),mM=(t,e)=>({...iM(t),options:[t,e]}),gM=(t,e)=>({...uM(t),options:[t,e]});var yM="Arrow",kx=b.forwardRef((t,e)=>{const{children:r,width:n=10,height:i=5,...o}=t;return p.jsx(Te.svg,{...o,ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?r:p.jsx("polygon",{points:"0,0 30,0 15,10"})})});kx.displayName=yM;var _M=kx;function wM(t){const[e,r]=b.useState(void 0);return at(()=>{if(t){r({width:t.offsetWidth,height:t.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const o=i[0];let a,s;if("borderBoxSize"in o){const c=o.borderBoxSize,l=Array.isArray(c)?c[0]:c;a=l.inlineSize,s=l.blockSize}else a=t.offsetWidth,s=t.offsetHeight;r({width:a,height:s})});return n.observe(t,{box:"border-box"}),()=>n.unobserve(t)}else r(void 0)},[t]),e}var km="Popper",[xx,cd]=uc(km),[bM,Tx]=xx(km),Ex=t=>{const{__scopePopper:e,children:r}=t,[n,i]=b.useState(null);return p.jsx(bM,{scope:e,anchor:n,onAnchorChange:i,children:r})};Ex.displayName=km;var Cx="PopperAnchor",Px=b.forwardRef((t,e)=>{const{__scopePopper:r,virtualRef:n,...i}=t,o=Tx(Cx,r),a=b.useRef(null),s=ze(e,a),c=b.useRef(null);return b.useEffect(()=>{const l=c.current;c.current=(n==null?void 0:n.current)||a.current,l!==c.current&&o.onAnchorChange(c.current)}),n?null:p.jsx(Te.div,{...i,ref:s})});Px.displayName=Cx;var xm="PopperContent",[SM,kM]=xx(xm),Ox=b.forwardRef((t,e)=>{var z,q,te,ce,ae,ue;const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:o="center",alignOffset:a=0,arrowPadding:s=0,avoidCollisions:c=!0,collisionBoundary:l=[],collisionPadding:u=0,sticky:d="partial",hideWhenDetached:h=!1,updatePositionStrategy:f="optimized",onPlaced:_,...v}=t,g=Tx(xm,r),[y,m]=b.useState(null),w=ze(e,ge=>m(ge)),[S,k]=b.useState(null),E=wM(S),x=(E==null?void 0:E.width)??0,C=(E==null?void 0:E.height)??0,R=n+(o!=="center"?"-"+o:""),A=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},D=Array.isArray(l)?l:[l],O=D.length>0,I={padding:A,boundary:D.filter(TM),altBoundary:O},{refs:P,floatingStyles:L,placement:N,isPositioned:$,middlewareData:j}=lM({strategy:"fixed",placement:R,whileElementsMounted:(...ge)=>ZN(...ge,{animationFrame:f==="always"}),elements:{reference:g.anchor},middleware:[dM({mainAxis:i+C,alignmentAxis:a}),c&&fM({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?hM():void 0,...I}),c&&pM({...I}),vM({...I,apply:({elements:ge,rects:Oe,availableWidth:Xe,availableHeight:ft})=>{const{width:Ue,height:Cr}=Oe.reference,tr=ge.floating.style;tr.setProperty("--radix-popper-available-width",`${Xe}px`),tr.setProperty("--radix-popper-available-height",`${ft}px`),tr.setProperty("--radix-popper-anchor-width",`${Ue}px`),tr.setProperty("--radix-popper-anchor-height",`${Cr}px`)}}),S&&gM({element:S,padding:s}),EM({arrowWidth:x,arrowHeight:C}),h&&mM({strategy:"referenceHidden",...I})]}),[M,B]=Ax(N),U=kr(_);at(()=>{$&&(U==null||U())},[$,U]);const Q=(z=j.arrow)==null?void 0:z.x,K=(q=j.arrow)==null?void 0:q.y,V=((te=j.arrow)==null?void 0:te.centerOffset)!==0,[W,ee]=b.useState();return at(()=>{y&&ee(window.getComputedStyle(y).zIndex)},[y]),p.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...L,transform:$?L.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:W,"--radix-popper-transform-origin":[(ce=j.transformOrigin)==null?void 0:ce.x,(ae=j.transformOrigin)==null?void 0:ae.y].join(" "),...((ue=j.hide)==null?void 0:ue.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:p.jsx(SM,{scope:r,placedSide:M,onArrowChange:k,arrowX:Q,arrowY:K,shouldHideArrow:V,children:p.jsx(Te.div,{"data-side":M,"data-align":B,...v,ref:w,style:{...v.style,animation:$?void 0:"none"}})})})});Ox.displayName=xm;var Rx="PopperArrow",xM={top:"bottom",right:"left",bottom:"top",left:"right"},jx=b.forwardRef(function(e,r){const{__scopePopper:n,...i}=e,o=kM(Rx,n),a=xM[o.placedSide];return p.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:p.jsx(_M,{...i,ref:r,style:{...i.style,display:"block"}})})});jx.displayName=Rx;function TM(t){return t!==null}var EM=t=>({name:"transformOrigin",options:t,fn(e){var g,y,m;const{placement:r,rects:n,middlewareData:i}=e,a=((g=i.arrow)==null?void 0:g.centerOffset)!==0,s=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[l,u]=Ax(r),d={start:"0%",center:"50%",end:"100%"}[u],h=(((y=i.arrow)==null?void 0:y.x)??0)+s/2,f=(((m=i.arrow)==null?void 0:m.y)??0)+c/2;let _="",v="";return l==="bottom"?(_=a?d:`${h}px`,v=`${-c}px`):l==="top"?(_=a?d:`${h}px`,v=`${n.floating.height+c}px`):l==="right"?(_=`${-c}px`,v=a?d:`${f}px`):l==="left"&&(_=`${n.floating.width+c}px`,v=a?d:`${f}px`),{data:{x:_,y:v}}}});function Ax(t){const[e,r="center"]=t.split("-");return[e,r]}var CM=Ex,Lx=Px,Ix=Ox,Nx=jx,PM=Symbol("radix.slottable");function OM(t){const e=({children:r})=>p.jsx(p.Fragment,{children:r});return e.displayName=`${t}.Slottable`,e.__radixId=PM,e}var[ld]=uc("Tooltip",[cd]),Tm=cd(),Mx="TooltipProvider",RM=700,f_="tooltip.open",[jM,Dx]=ld(Mx),$x=t=>{const{__scopeTooltip:e,delayDuration:r=RM,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:o}=t,a=b.useRef(!0),s=b.useRef(!1),c=b.useRef(0);return b.useEffect(()=>{const l=c.current;return()=>window.clearTimeout(l)},[]),p.jsx(jM,{scope:e,isOpenDelayedRef:a,delayDuration:r,onOpen:b.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:b.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,n)},[n]),isPointerInTransitRef:s,onPointerInTransitChange:b.useCallback(l=>{s.current=l},[]),disableHoverableContent:i,children:o})};$x.displayName=Mx;var Fx="Tooltip",[yee,ud]=ld(Fx),yp="TooltipTrigger",AM=b.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=ud(yp,r),o=Dx(yp,r),a=Tm(r),s=b.useRef(null),c=ze(e,s,i.onTriggerChange),l=b.useRef(!1),u=b.useRef(!1),d=b.useCallback(()=>l.current=!1,[]);return b.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),p.jsx(Lx,{asChild:!0,...a,children:p.jsx(Te.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:c,onPointerMove:pe(t.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!o.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:pe(t.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:pe(t.onPointerDown,()=>{i.open&&i.onClose(),l.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:pe(t.onFocus,()=>{l.current||i.onOpen()}),onBlur:pe(t.onBlur,i.onClose),onClick:pe(t.onClick,i.onClose)})})});AM.displayName=yp;var LM="TooltipPortal",[_ee,IM]=ld(LM,{forceMount:void 0}),ka="TooltipContent",Ux=b.forwardRef((t,e)=>{const r=IM(ka,t.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...o}=t,a=ud(ka,t.__scopeTooltip);return p.jsx(cm,{present:n||a.open,children:a.disableHoverableContent?p.jsx(Bx,{side:i,...o,ref:e}):p.jsx(NM,{side:i,...o,ref:e})})}),NM=b.forwardRef((t,e)=>{const r=ud(ka,t.__scopeTooltip),n=Dx(ka,t.__scopeTooltip),i=b.useRef(null),o=ze(e,i),[a,s]=b.useState(null),{trigger:c,onClose:l}=r,u=i.current,{onPointerInTransitChange:d}=n,h=b.useCallback(()=>{s(null),d(!1)},[d]),f=b.useCallback((_,v)=>{const g=_.currentTarget,y={x:_.clientX,y:_.clientY},m=UM(y,g.getBoundingClientRect()),w=BM(y,m),S=VM(v.getBoundingClientRect()),k=WM([...w,...S]);s(k),d(!0)},[d]);return b.useEffect(()=>()=>h(),[h]),b.useEffect(()=>{if(c&&u){const _=g=>f(g,u),v=g=>f(g,c);return c.addEventListener("pointerleave",_),u.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",_),u.removeEventListener("pointerleave",v)}}},[c,u,f,h]),b.useEffect(()=>{if(a){const _=v=>{const g=v.target,y={x:v.clientX,y:v.clientY},m=(c==null?void 0:c.contains(g))||(u==null?void 0:u.contains(g)),w=!zM(y,a);m?h():w&&(h(),l())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[c,u,a,l,h]),p.jsx(Bx,{...t,ref:o})}),[MM,DM]=ld(Fx,{isInside:!1}),$M=OM("TooltipContent"),Bx=b.forwardRef((t,e)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:o,onPointerDownOutside:a,...s}=t,c=ud(ka,r),l=Tm(r),{onClose:u}=c;return b.useEffect(()=>(document.addEventListener(f_,u),()=>document.removeEventListener(f_,u)),[u]),b.useEffect(()=>{if(c.trigger){const d=h=>{const f=h.target;f!=null&&f.contains(c.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[c.trigger,u]),p.jsx(Xu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:u,children:p.jsxs(Ix,{"data-state":c.stateAttribute,...l,...s,ref:e,style:{...s.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[p.jsx($M,{children:n}),p.jsx(MM,{scope:r,isInside:!0,children:p.jsx(nL,{id:c.contentId,role:"tooltip",children:i||n})})]})})});Ux.displayName=ka;var Vx="TooltipArrow",FM=b.forwardRef((t,e)=>{const{__scopeTooltip:r,...n}=t,i=Tm(r);return DM(Vx,r).isInside?null:p.jsx(Nx,{...i,...n,ref:e})});FM.displayName=Vx;function UM(t,e){const r=Math.abs(e.top-t.y),n=Math.abs(e.bottom-t.y),i=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(r,n,i,o)){case o:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function BM(t,e,r=5){const n=[];switch(e){case"top":n.push({x:t.x-r,y:t.y+r},{x:t.x+r,y:t.y+r});break;case"bottom":n.push({x:t.x-r,y:t.y-r},{x:t.x+r,y:t.y-r});break;case"left":n.push({x:t.x+r,y:t.y-r},{x:t.x+r,y:t.y+r});break;case"right":n.push({x:t.x-r,y:t.y-r},{x:t.x-r,y:t.y+r});break}return n}function VM(t){const{top:e,right:r,bottom:n,left:i}=t;return[{x:i,y:e},{x:r,y:e},{x:r,y:n},{x:i,y:n}]}function zM(t,e){const{x:r,y:n}=t;let i=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const s=e[o],c=e[a],l=s.x,u=s.y,d=c.x,h=c.y;u>n!=h>n&&r<(d-l)*(n-u)/(h-u)+l&&(i=!i)}return i}function WM(t){const e=t.slice();return e.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),HM(e)}function HM(t){if(t.length<=1)return t.slice();const e=[];for(let n=0;n<t.length;n++){const i=t[n];for(;e.length>=2;){const o=e[e.length-1],a=e[e.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const r=[];for(let n=t.length-1;n>=0;n--){const i=t[n];for(;r.length>=2;){const o=r[r.length-1],a=r[r.length-2];if((o.x-a.x)*(i.y-a.y)>=(o.y-a.y)*(i.x-a.x))r.pop();else break}r.push(i)}return r.pop(),e.length===1&&r.length===1&&e[0].x===r[0].x&&e[0].y===r[0].y?e:e.concat(r)}var qM=$x,zx=Ux;const KM=qM,GM=b.forwardRef(({className:t,sideOffset:e=4,...r},n)=>p.jsx(zx,{ref:n,sideOffset:e,className:Le("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r}));GM.displayName=zx.displayName;var dd=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},QM={setTimeout:(t,e)=>setTimeout(t,e),clearTimeout:t=>clearTimeout(t),setInterval:(t,e)=>setInterval(t,e),clearInterval:t=>clearInterval(t)},$n,dv,Jb,JM=(Jb=class{constructor(){ve(this,$n,QM);ve(this,dv,!1)}setTimeoutProvider(t){le(this,$n,t)}setTimeout(t,e){return F(this,$n).setTimeout(t,e)}clearTimeout(t){F(this,$n).clearTimeout(t)}setInterval(t,e){return F(this,$n).setInterval(t,e)}clearInterval(t){F(this,$n).clearInterval(t)}},$n=new WeakMap,dv=new WeakMap,Jb),_p=new JM;function YM(t){setTimeout(t,0)}var fd=typeof window>"u"||"Deno"in globalThis;function fr(){}function XM(t,e){return typeof t=="function"?t(e):t}function ZM(t){return typeof t=="number"&&t>=0&&t!==1/0}function e2(t,e){return Math.max(t+(e||0)-Date.now(),0)}function wp(t,e){return typeof t=="function"?t(e):t}function t2(t,e){return typeof t=="function"?t(e):t}function h_(t,e){const{type:r="all",exact:n,fetchStatus:i,predicate:o,queryKey:a,stale:s}=t;if(a){if(n){if(e.queryHash!==Em(a,e.options))return!1}else if(!zs(e.queryKey,a))return!1}if(r!=="all"){const c=e.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof s=="boolean"&&e.isStale()!==s||i&&i!==e.state.fetchStatus||o&&!o(e))}function p_(t,e){const{exact:r,status:n,predicate:i,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(r){if(Vs(e.options.mutationKey)!==Vs(o))return!1}else if(!zs(e.options.mutationKey,o))return!1}return!(n&&e.state.status!==n||i&&!i(e))}function Em(t,e){return((e==null?void 0:e.queryKeyHashFn)||Vs)(t)}function Vs(t){return JSON.stringify(t,(e,r)=>bp(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function zs(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(r=>zs(t[r],e[r])):!1}var r2=Object.prototype.hasOwnProperty;function Wx(t,e){if(t===e)return t;const r=v_(t)&&v_(e);if(!r&&!(bp(t)&&bp(e)))return e;const i=(r?t:Object.keys(t)).length,o=r?e:Object.keys(e),a=o.length,s=r?new Array(a):{};let c=0;for(let l=0;l<a;l++){const u=r?l:o[l],d=t[u],h=e[u];if(d===h){s[u]=d,(r?l<i:r2.call(t,u))&&c++;continue}if(d===null||h===null||typeof d!="object"||typeof h!="object"){s[u]=h;continue}const f=Wx(d,h);s[u]=f,f===d&&c++}return i===a&&c===i?t:s}function v_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function bp(t){if(!m_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const r=e.prototype;return!(!m_(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function m_(t){return Object.prototype.toString.call(t)==="[object Object]"}function n2(t){return new Promise(e=>{_p.setTimeout(e,t)})}function i2(t,e,r){return typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?Wx(t,e):e}function o2(t,e,r=0){const n=[...t,e];return r&&n.length>r?n.slice(1):n}function a2(t,e,r=0){const n=[e,...t];return r&&n.length>r?n.slice(0,-1):n}var Cm=Symbol();function Hx(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Cm?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Mi,Fn,aa,Yb,s2=(Yb=class extends dd{constructor(){super();ve(this,Mi);ve(this,Fn);ve(this,aa);le(this,aa,e=>{if(!fd&&window.addEventListener){const r=()=>e();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){F(this,Fn)||this.setEventListener(F(this,aa))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,Fn))==null||e.call(this),le(this,Fn,void 0))}setEventListener(e){var r;le(this,aa,e),(r=F(this,Fn))==null||r.call(this),le(this,Fn,e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(e){F(this,Mi)!==e&&(le(this,Mi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(r=>{r(e)})}isFocused(){var e;return typeof F(this,Mi)=="boolean"?F(this,Mi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Mi=new WeakMap,Fn=new WeakMap,aa=new WeakMap,Yb),qx=new s2;function c2(){let t,e;const r=new Promise((i,o)=>{t=i,e=o});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),t(i)},r.reject=i=>{n({status:"rejected",reason:i}),e(i)},r}var l2=YM;function u2(){let t=[],e=0,r=s=>{s()},n=s=>{s()},i=l2;const o=s=>{e?t.push(s):i(()=>{r(s)})},a=()=>{const s=t;t=[],s.length&&i(()=>{n(()=>{s.forEach(c=>{r(c)})})})};return{batch:s=>{let c;e++;try{c=s()}finally{e--,e||a()}return c},batchCalls:s=>(...c)=>{o(()=>{s(...c)})},schedule:o,setNotifyFunction:s=>{r=s},setBatchNotifyFunction:s=>{n=s},setScheduler:s=>{i=s}}}var mt=u2(),sa,Un,ca,Xb,d2=(Xb=class extends dd{constructor(){super();ve(this,sa,!0);ve(this,Un);ve(this,ca);le(this,ca,e=>{if(!fd&&window.addEventListener){const r=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){F(this,Un)||this.setEventListener(F(this,ca))}onUnsubscribe(){var e;this.hasListeners()||((e=F(this,Un))==null||e.call(this),le(this,Un,void 0))}setEventListener(e){var r;le(this,ca,e),(r=F(this,Un))==null||r.call(this),le(this,Un,e(this.setOnline.bind(this)))}setOnline(e){F(this,sa)!==e&&(le(this,sa,e),this.listeners.forEach(n=>{n(e)}))}isOnline(){return F(this,sa)}},sa=new WeakMap,Un=new WeakMap,ca=new WeakMap,Xb),Su=new d2;function f2(t){return Math.min(1e3*2**t,3e4)}function Kx(t){return(t??"online")==="online"?Su.isOnline():!0}var Sp=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Gx(t){let e=!1,r=0,n;const i=c2(),o=()=>i.status!=="pending",a=v=>{var g;if(!o()){const y=new Sp(v);h(y),(g=t.onCancel)==null||g.call(t,y)}},s=()=>{e=!0},c=()=>{e=!1},l=()=>qx.isFocused()&&(t.networkMode==="always"||Su.isOnline())&&t.canRun(),u=()=>Kx(t.networkMode)&&t.canRun(),d=v=>{o()||(n==null||n(),i.resolve(v))},h=v=>{o()||(n==null||n(),i.reject(v))},f=()=>new Promise(v=>{var g;n=y=>{(o()||l())&&v(y)},(g=t.onPause)==null||g.call(t)}).then(()=>{var v;n=void 0,o()||(v=t.onContinue)==null||v.call(t)}),_=()=>{if(o())return;let v;const g=r===0?t.initialPromise:void 0;try{v=g??t.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(d).catch(y=>{var E;if(o())return;const m=t.retry??(fd?0:3),w=t.retryDelay??f2,S=typeof w=="function"?w(r,y):w,k=m===!0||typeof m=="number"&&r<m||typeof m=="function"&&m(r,y);if(e||!k){h(y);return}r++,(E=t.onFail)==null||E.call(t,r,y),n2(S).then(()=>l()?void 0:f()).then(()=>{e?h(y):_()})})};return{promise:i,status:()=>i.status,cancel:a,continue:()=>(n==null||n(),i),cancelRetry:s,continueRetry:c,canStart:u,start:()=>(u()?_():f().then(_),i)}}var Di,Zb,Qx=(Zb=class{constructor(){ve(this,Di)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ZM(this.gcTime)&&le(this,Di,_p.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(fd?1/0:5*60*1e3))}clearGcTimeout(){F(this,Di)&&(_p.clearTimeout(F(this,Di)),le(this,Di,void 0))}},Di=new WeakMap,Zb),$i,la,Kt,Fi,Ze,tc,Ui,pr,Jr,e0,h2=(e0=class extends Qx{constructor(e){super();ve(this,pr);ve(this,$i);ve(this,la);ve(this,Kt);ve(this,Fi);ve(this,Ze);ve(this,tc);ve(this,Ui);le(this,Ui,!1),le(this,tc,e.defaultOptions),this.setOptions(e.options),this.observers=[],le(this,Fi,e.client),le(this,Kt,F(this,Fi).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,le(this,$i,y_(this.options)),this.state=e.state??F(this,$i),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=F(this,Ze))==null?void 0:e.promise}setOptions(e){if(this.options={...F(this,tc),...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=y_(this.options);r.data!==void 0&&(this.setState(g_(r.data,r.dataUpdatedAt)),le(this,$i,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&F(this,Kt).remove(this)}setData(e,r){const n=i2(this.state.data,e,this.options);return st(this,pr,Jr).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(e,r){st(this,pr,Jr).call(this,{type:"setState",state:e,setStateOptions:r})}cancel(e){var n,i;const r=(n=F(this,Ze))==null?void 0:n.promise;return(i=F(this,Ze))==null||i.cancel(e),r?r.then(fr).catch(fr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(F(this,$i))}isActive(){return this.observers.some(e=>t2(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Cm||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>wp(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!e2(this.state.dataUpdatedAt,e)}onFocus(){var r;const e=this.observers.find(n=>n.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(r=F(this,Ze))==null||r.continue()}onOnline(){var r;const e=this.observers.find(n=>n.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(r=F(this,Ze))==null||r.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),F(this,Kt).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(F(this,Ze)&&(F(this,Ui)?F(this,Ze).cancel({revert:!0}):F(this,Ze).cancelRetry()),this.scheduleGc()),F(this,Kt).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||st(this,pr,Jr).call(this,{type:"invalidate"})}async fetch(e,r){var c,l,u,d,h,f,_,v,g,y,m,w;if(this.state.fetchStatus!=="idle"&&((c=F(this,Ze))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(F(this,Ze))return F(this,Ze).continueRetry(),F(this,Ze).promise}if(e&&this.setOptions(e),!this.options.queryFn){const S=this.observers.find(k=>k.options.queryFn);S&&this.setOptions(S.options)}const n=new AbortController,i=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(le(this,Ui,!0),n.signal)})},o=()=>{const S=Hx(this.options,r),E=(()=>{const x={client:F(this,Fi),queryKey:this.queryKey,meta:this.meta};return i(x),x})();return le(this,Ui,!1),this.options.persister?this.options.persister(S,E,this):S(E)},s=(()=>{const S={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:F(this,Fi),state:this.state,fetchFn:o};return i(S),S})();(l=this.options.behavior)==null||l.onFetch(s,this),le(this,la,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((u=s.fetchOptions)==null?void 0:u.meta))&&st(this,pr,Jr).call(this,{type:"fetch",meta:(d=s.fetchOptions)==null?void 0:d.meta}),le(this,Ze,Gx({initialPromise:r==null?void 0:r.initialPromise,fn:s.fetchFn,onCancel:S=>{S instanceof Sp&&S.revert&&this.setState({...F(this,la),fetchStatus:"idle"}),n.abort()},onFail:(S,k)=>{st(this,pr,Jr).call(this,{type:"failed",failureCount:S,error:k})},onPause:()=>{st(this,pr,Jr).call(this,{type:"pause"})},onContinue:()=>{st(this,pr,Jr).call(this,{type:"continue"})},retry:s.options.retry,retryDelay:s.options.retryDelay,networkMode:s.options.networkMode,canRun:()=>!0}));try{const S=await F(this,Ze).start();if(S===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(S),(f=(h=F(this,Kt).config).onSuccess)==null||f.call(h,S,this),(v=(_=F(this,Kt).config).onSettled)==null||v.call(_,S,this.state.error,this),S}catch(S){if(S instanceof Sp){if(S.silent)return F(this,Ze).promise;if(S.revert){if(this.state.data===void 0)throw S;return this.state.data}}throw st(this,pr,Jr).call(this,{type:"error",error:S}),(y=(g=F(this,Kt).config).onError)==null||y.call(g,S,this),(w=(m=F(this,Kt).config).onSettled)==null||w.call(m,this.state.data,S,this),S}finally{this.scheduleGc()}}},$i=new WeakMap,la=new WeakMap,Kt=new WeakMap,Fi=new WeakMap,Ze=new WeakMap,tc=new WeakMap,Ui=new WeakMap,pr=new WeakSet,Jr=function(e){const r=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...p2(n.data,this.options),fetchMeta:e.meta??null};case"success":const i={...n,...g_(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return le(this,la,e.manual?i:void 0),i;case"error":const o=e.error;return{...n,error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=r(this.state),mt.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),F(this,Kt).notify({query:this,type:"updated",action:e})})},e0);function p2(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Kx(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function g_(t,e){return{data:t,dataUpdatedAt:e??Date.now(),error:null,isInvalidated:!1,status:"success"}}function y_(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=e!==void 0,n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function __(t){return{onFetch:(e,r)=>{var u,d,h,f,_;const n=e.options,i=(h=(d=(u=e.fetchOptions)==null?void 0:u.meta)==null?void 0:d.fetchMore)==null?void 0:h.direction,o=((f=e.state.data)==null?void 0:f.pages)||[],a=((_=e.state.data)==null?void 0:_.pageParams)||[];let s={pages:[],pageParams:[]},c=0;const l=async()=>{let v=!1;const g=w=>{Object.defineProperty(w,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},y=Hx(e.options,e.fetchOptions),m=async(w,S,k)=>{if(v)return Promise.reject();if(S==null&&w.pages.length)return Promise.resolve(w);const x=(()=>{const D={client:e.client,queryKey:e.queryKey,pageParam:S,direction:k?"backward":"forward",meta:e.options.meta};return g(D),D})(),C=await y(x),{maxPages:R}=e.options,A=k?a2:o2;return{pages:A(w.pages,C,R),pageParams:A(w.pageParams,S,R)}};if(i&&o.length){const w=i==="backward",S=w?v2:w_,k={pages:o,pageParams:a},E=S(n,k);s=await m(k,E,w)}else{const w=t??o.length;do{const S=c===0?a[0]??n.initialPageParam:w_(n,s);if(c>0&&S==null)break;s=await m(s,S),c++}while(c<w)}return s};e.options.persister?e.fetchFn=()=>{var v,g;return(g=(v=e.options).persister)==null?void 0:g.call(v,l,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},r)}:e.fetchFn=l}}}function w_(t,{pages:e,pageParams:r}){const n=e.length-1;return e.length>0?t.getNextPageParam(e[n],e,r[n],r):void 0}function v2(t,{pages:e,pageParams:r}){var n;return e.length>0?(n=t.getPreviousPageParam)==null?void 0:n.call(t,e[0],e,r[0],r):void 0}var rc,Ir,ht,Bi,Nr,On,t0,m2=(t0=class extends Qx{constructor(e){super();ve(this,Nr);ve(this,rc);ve(this,Ir);ve(this,ht);ve(this,Bi);le(this,rc,e.client),this.mutationId=e.mutationId,le(this,ht,e.mutationCache),le(this,Ir,[]),this.state=e.state||g2(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){F(this,Ir).includes(e)||(F(this,Ir).push(e),this.clearGcTimeout(),F(this,ht).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){le(this,Ir,F(this,Ir).filter(r=>r!==e)),this.scheduleGc(),F(this,ht).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){F(this,Ir).length||(this.state.status==="pending"?this.scheduleGc():F(this,ht).remove(this))}continue(){var e;return((e=F(this,Bi))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var a,s,c,l,u,d,h,f,_,v,g,y,m,w,S,k,E,x,C,R;const r=()=>{st(this,Nr,On).call(this,{type:"continue"})},n={client:F(this,rc),meta:this.options.meta,mutationKey:this.options.mutationKey};le(this,Bi,Gx({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(A,D)=>{st(this,Nr,On).call(this,{type:"failed",failureCount:A,error:D})},onPause:()=>{st(this,Nr,On).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>F(this,ht).canRun(this)}));const i=this.state.status==="pending",o=!F(this,Bi).canStart();try{if(i)r();else{st(this,Nr,On).call(this,{type:"pending",variables:e,isPaused:o}),await((s=(a=F(this,ht).config).onMutate)==null?void 0:s.call(a,e,this,n));const D=await((l=(c=this.options).onMutate)==null?void 0:l.call(c,e,n));D!==this.state.context&&st(this,Nr,On).call(this,{type:"pending",context:D,variables:e,isPaused:o})}const A=await F(this,Bi).start();return await((d=(u=F(this,ht).config).onSuccess)==null?void 0:d.call(u,A,e,this.state.context,this,n)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,A,e,this.state.context,n)),await((v=(_=F(this,ht).config).onSettled)==null?void 0:v.call(_,A,null,this.state.variables,this.state.context,this,n)),await((y=(g=this.options).onSettled)==null?void 0:y.call(g,A,null,e,this.state.context,n)),st(this,Nr,On).call(this,{type:"success",data:A}),A}catch(A){try{throw await((w=(m=F(this,ht).config).onError)==null?void 0:w.call(m,A,e,this.state.context,this,n)),await((k=(S=this.options).onError)==null?void 0:k.call(S,A,e,this.state.context,n)),await((x=(E=F(this,ht).config).onSettled)==null?void 0:x.call(E,void 0,A,this.state.variables,this.state.context,this,n)),await((R=(C=this.options).onSettled)==null?void 0:R.call(C,void 0,A,e,this.state.context,n)),A}finally{st(this,Nr,On).call(this,{type:"error",error:A})}}finally{F(this,ht).runNext(this)}}},rc=new WeakMap,Ir=new WeakMap,ht=new WeakMap,Bi=new WeakMap,Nr=new WeakSet,On=function(e){const r=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=r(this.state),mt.batch(()=>{F(this,Ir).forEach(n=>{n.onMutationUpdate(e)}),F(this,ht).notify({mutation:this,type:"updated",action:e})})},t0);function g2(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var en,vr,nc,r0,y2=(r0=class extends dd{constructor(e={}){super();ve(this,en);ve(this,vr);ve(this,nc);this.config=e,le(this,en,new Set),le(this,vr,new Map),le(this,nc,0)}build(e,r,n){const i=new m2({client:e,mutationCache:this,mutationId:++Pc(this,nc)._,options:e.defaultMutationOptions(r),state:n});return this.add(i),i}add(e){F(this,en).add(e);const r=Jc(e);if(typeof r=="string"){const n=F(this,vr).get(r);n?n.push(e):F(this,vr).set(r,[e])}this.notify({type:"added",mutation:e})}remove(e){if(F(this,en).delete(e)){const r=Jc(e);if(typeof r=="string"){const n=F(this,vr).get(r);if(n)if(n.length>1){const i=n.indexOf(e);i!==-1&&n.splice(i,1)}else n[0]===e&&F(this,vr).delete(r)}}this.notify({type:"removed",mutation:e})}canRun(e){const r=Jc(e);if(typeof r=="string"){const n=F(this,vr).get(r),i=n==null?void 0:n.find(o=>o.state.status==="pending");return!i||i===e}else return!0}runNext(e){var n;const r=Jc(e);if(typeof r=="string"){const i=(n=F(this,vr).get(r))==null?void 0:n.find(o=>o!==e&&o.state.isPaused);return(i==null?void 0:i.continue())??Promise.resolve()}else return Promise.resolve()}clear(){mt.batch(()=>{F(this,en).forEach(e=>{this.notify({type:"removed",mutation:e})}),F(this,en).clear(),F(this,vr).clear()})}getAll(){return Array.from(F(this,en))}find(e){const r={exact:!0,...e};return this.getAll().find(n=>p_(r,n))}findAll(e={}){return this.getAll().filter(r=>p_(e,r))}notify(e){mt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}resumePausedMutations(){const e=this.getAll().filter(r=>r.state.isPaused);return mt.batch(()=>Promise.all(e.map(r=>r.continue().catch(fr))))}},en=new WeakMap,vr=new WeakMap,nc=new WeakMap,r0);function Jc(t){var e;return(e=t.options.scope)==null?void 0:e.id}var Mr,n0,_2=(n0=class extends dd{constructor(e={}){super();ve(this,Mr);this.config=e,le(this,Mr,new Map)}build(e,r,n){const i=r.queryKey,o=r.queryHash??Em(i,r);let a=this.get(o);return a||(a=new h2({client:e,queryKey:i,queryHash:o,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(i)}),this.add(a)),a}add(e){F(this,Mr).has(e.queryHash)||(F(this,Mr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const r=F(this,Mr).get(e.queryHash);r&&(e.destroy(),r===e&&F(this,Mr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){mt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return F(this,Mr).get(e)}getAll(){return[...F(this,Mr).values()]}find(e){const r={exact:!0,...e};return this.getAll().find(n=>h_(r,n))}findAll(e={}){const r=this.getAll();return Object.keys(e).length>0?r.filter(n=>h_(e,n)):r}notify(e){mt.batch(()=>{this.listeners.forEach(r=>{r(e)})})}onFocus(){mt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){mt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Mr=new WeakMap,n0),Be,Bn,Vn,ua,da,zn,fa,ha,i0,w2=(i0=class{constructor(t={}){ve(this,Be);ve(this,Bn);ve(this,Vn);ve(this,ua);ve(this,da);ve(this,zn);ve(this,fa);ve(this,ha);le(this,Be,t.queryCache||new _2),le(this,Bn,t.mutationCache||new y2),le(this,Vn,t.defaultOptions||{}),le(this,ua,new Map),le(this,da,new Map),le(this,zn,0)}mount(){Pc(this,zn)._++,F(this,zn)===1&&(le(this,fa,qx.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,Be).onFocus())})),le(this,ha,Su.subscribe(async t=>{t&&(await this.resumePausedMutations(),F(this,Be).onOnline())})))}unmount(){var t,e;Pc(this,zn)._--,F(this,zn)===0&&((t=F(this,fa))==null||t.call(this),le(this,fa,void 0),(e=F(this,ha))==null||e.call(this),le(this,ha,void 0))}isFetching(t){return F(this,Be).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return F(this,Bn).findAll({...t,status:"pending"}).length}getQueryData(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=F(this,Be).get(e.queryHash))==null?void 0:r.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),r=F(this,Be).build(this,e),n=r.state.data;return n===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(wp(e.staleTime,r))&&this.prefetchQuery(e),Promise.resolve(n))}getQueriesData(t){return F(this,Be).findAll(t).map(({queryKey:e,state:r})=>{const n=r.data;return[e,n]})}setQueryData(t,e,r){const n=this.defaultQueryOptions({queryKey:t}),i=F(this,Be).get(n.queryHash),o=i==null?void 0:i.state.data,a=XM(e,o);if(a!==void 0)return F(this,Be).build(this,n).setData(a,{...r,manual:!0})}setQueriesData(t,e,r){return mt.batch(()=>F(this,Be).findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,e,r)]))}getQueryState(t){var r;const e=this.defaultQueryOptions({queryKey:t});return(r=F(this,Be).get(e.queryHash))==null?void 0:r.state}removeQueries(t){const e=F(this,Be);mt.batch(()=>{e.findAll(t).forEach(r=>{e.remove(r)})})}resetQueries(t,e){const r=F(this,Be);return mt.batch(()=>(r.findAll(t).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const r={revert:!0,...e},n=mt.batch(()=>F(this,Be).findAll(t).map(i=>i.cancel(r)));return Promise.all(n).then(fr).catch(fr)}invalidateQueries(t,e={}){return mt.batch(()=>(F(this,Be).findAll(t).forEach(r=>{r.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const r={...e,cancelRefetch:e.cancelRefetch??!0},n=mt.batch(()=>F(this,Be).findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(fr)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(n).then(fr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const r=F(this,Be).build(this,e);return r.isStaleByTime(wp(e.staleTime,r))?r.fetch(e):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(fr).catch(fr)}fetchInfiniteQuery(t){return t.behavior=__(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(fr).catch(fr)}ensureInfiniteQueryData(t){return t.behavior=__(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return Su.isOnline()?F(this,Bn).resumePausedMutations():Promise.resolve()}getQueryCache(){return F(this,Be)}getMutationCache(){return F(this,Bn)}getDefaultOptions(){return F(this,Vn)}setDefaultOptions(t){le(this,Vn,t)}setQueryDefaults(t,e){F(this,ua).set(Vs(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...F(this,ua).values()],r={};return e.forEach(n=>{zs(t,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(t,e){F(this,da).set(Vs(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...F(this,da).values()],r={};return e.forEach(n=>{zs(t,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const e={...F(this,Vn).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Em(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===Cm&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...F(this,Vn).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){F(this,Be).clear(),F(this,Bn).clear()}},Be=new WeakMap,Bn=new WeakMap,Vn=new WeakMap,ua=new WeakMap,da=new WeakMap,zn=new WeakMap,fa=new WeakMap,ha=new WeakMap,i0),b2=b.createContext(void 0),S2=({client:t,children:e})=>(b.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),p.jsx(b2.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ws(){return Ws=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ws.apply(this,arguments)}var qn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qn||(qn={}));const b_="popstate";function k2(t){t===void 0&&(t={});function e(n,i){let{pathname:o,search:a,hash:s}=n.location;return kp("",{pathname:o,search:a,hash:s},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Jx(i)}return T2(e,r,null,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Pm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function x2(){return Math.random().toString(36).substr(2,8)}function S_(t,e){return{usr:t.state,key:t.key,idx:e}}function kp(t,e,r,n){return r===void 0&&(r=null),Ws({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?La(e):e,{state:r,key:e&&e.key||n||x2()})}function Jx(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function La(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function T2(t,e,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,a=i.history,s=qn.Pop,c=null,l=u();l==null&&(l=0,a.replaceState(Ws({},a.state,{idx:l}),""));function u(){return(a.state||{idx:null}).idx}function d(){s=qn.Pop;let g=u(),y=g==null?null:g-l;l=g,c&&c({action:s,location:v.location,delta:y})}function h(g,y){s=qn.Push;let m=kp(v.location,g,y);l=u()+1;let w=S_(m,l),S=v.createHref(m);try{a.pushState(w,"",S)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(S)}o&&c&&c({action:s,location:v.location,delta:1})}function f(g,y){s=qn.Replace;let m=kp(v.location,g,y);l=u();let w=S_(m,l),S=v.createHref(m);a.replaceState(w,"",S),o&&c&&c({action:s,location:v.location,delta:0})}function _(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof g=="string"?g:Jx(g);return m=m.replace(/ $/,"%20"),Ke(y,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,y)}let v={get action(){return s},get location(){return t(i,a)},listen(g){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(b_,d),c=g,()=>{i.removeEventListener(b_,d),c=null}},createHref(g){return e(i,g)},createURL:_,encodeLocation(g){let y=_(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(g){return a.go(g)}};return v}var k_;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(k_||(k_={}));function E2(t,e,r){return r===void 0&&(r="/"),C2(t,e,r)}function C2(t,e,r,n){let i=typeof e=="string"?La(e):e,o=Zx(i.pathname||"/",r);if(o==null)return null;let a=Yx(t);P2(a);let s=null;for(let c=0;s==null&&c<a.length;++c){let l=U2(o);s=D2(a[c],l)}return s}function Yx(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(o,a,s)=>{let c={relativePath:s===void 0?o.path||"":s,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};c.relativePath.startsWith("/")&&(Ke(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let l=Wi([n,c.relativePath]),u=r.concat(c);o.children&&o.children.length>0&&(Ke(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Yx(o.children,e,u,l)),!(o.path==null&&!o.index)&&e.push({path:l,score:N2(l,o.index),routesMeta:u})};return t.forEach((o,a)=>{var s;if(o.path===""||!((s=o.path)!=null&&s.includes("?")))i(o,a);else for(let c of Xx(o.path))i(o,a,c)}),e}function Xx(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(n.length===0)return i?[o,""]:[o];let a=Xx(n.join("/")),s=[];return s.push(...a.map(c=>c===""?o:[o,c].join("/"))),i&&s.push(...a),s.map(c=>t.startsWith("/")&&c===""?"/":c)}function P2(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:M2(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const O2=/^:[\w-]+$/,R2=3,j2=2,A2=1,L2=10,I2=-2,x_=t=>t==="*";function N2(t,e){let r=t.split("/"),n=r.length;return r.some(x_)&&(n+=I2),e&&(n+=j2),r.filter(i=>!x_(i)).reduce((i,o)=>i+(O2.test(o)?R2:o===""?A2:L2),n)}function M2(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function D2(t,e,r){let{routesMeta:n}=t,i={},o="/",a=[];for(let s=0;s<n.length;++s){let c=n[s],l=s===n.length-1,u=o==="/"?e:e.slice(o.length)||"/",d=$2({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:Wi([o,d.pathname]),pathnameBase:H2(Wi([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=Wi([o,d.pathnameBase]))}return a}function $2(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=F2(t.path,t.caseSensitive,t.end),i=e.match(r);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1);return{params:n.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let v=s[d]||"";a=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const _=s[d];return f&&!_?l[h]=void 0:l[h]=(_||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:a,pattern:t}}function F2(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Pm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,s,c)=>(n.push({paramName:s,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function U2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Zx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const B2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,V2=t=>B2.test(t);function z2(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:i=""}=typeof t=="string"?La(t):t,o;if(r)if(V2(r))o=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),Pm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?o=T_(r.substring(1),"/"):o=T_(r,e)}else o=e;return{pathname:o,search:q2(n),hash:K2(i)}}function T_(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function yf(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function W2(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function eT(t,e){let r=W2(t);return e?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function tT(t,e,r,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=La(t):(i=Ws({},t),Ke(!i.pathname||!i.pathname.includes("?"),yf("?","pathname","search",i)),Ke(!i.pathname||!i.pathname.includes("#"),yf("#","pathname","hash",i)),Ke(!i.search||!i.search.includes("#"),yf("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,s;if(a==null)s=r;else{let d=e.length-1;if(!n&&a.startsWith("..")){let h=a.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}s=d>=0?e[d]:"/"}let c=z2(i,s),l=a&&a!=="/"&&a.endsWith("/"),u=(o||a===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Wi=t=>t.join("/").replace(/\/\/+/g,"/"),H2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),q2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,K2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function G2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rT=["post","put","patch","delete"];new Set(rT);const Q2=["get",...rT];new Set(Q2);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hs(){return Hs=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hs.apply(this,arguments)}const Om=b.createContext(null),J2=b.createContext(null),hc=b.createContext(null),hd=b.createContext(null),li=b.createContext({outlet:null,matches:[],isDataRoute:!1}),nT=b.createContext(null);function pc(){return b.useContext(hd)!=null}function pd(){return pc()||Ke(!1),b.useContext(hd).location}function iT(t){b.useContext(hc).static||b.useLayoutEffect(t)}function hn(){let{isDataRoute:t}=b.useContext(li);return t?lD():Y2()}function Y2(){pc()||Ke(!1);let t=b.useContext(Om),{basename:e,future:r,navigator:n}=b.useContext(hc),{matches:i}=b.useContext(li),{pathname:o}=pd(),a=JSON.stringify(eT(i,r.v7_relativeSplatPath)),s=b.useRef(!1);return iT(()=>{s.current=!0}),b.useCallback(function(l,u){if(u===void 0&&(u={}),!s.current)return;if(typeof l=="number"){n.go(l);return}let d=tT(l,JSON.parse(a),o,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Wi([e,d.pathname])),(u.replace?n.replace:n.push)(d,u.state,u)},[e,n,a,o,t])}function oT(){let{matches:t}=b.useContext(li),e=t[t.length-1];return e?e.params:{}}function X2(t,e){return Z2(t,e)}function Z2(t,e,r,n){pc()||Ke(!1);let{navigator:i}=b.useContext(hc),{matches:o}=b.useContext(li),a=o[o.length-1],s=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let l=pd(),u;if(e){var d;let g=typeof e=="string"?La(e):e;c==="/"||(d=g.pathname)!=null&&d.startsWith(c)||Ke(!1),u=g}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let g=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let _=E2(t,{pathname:f}),v=iD(_&&_.map(g=>Object.assign({},g,{params:Object.assign({},s,g.params),pathname:Wi([c,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Wi([c,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,r,n);return e&&v?b.createElement(hd.Provider,{value:{location:Hs({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:qn.Pop}},v):v}function eD(){let t=cD(),e=G2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),r?b.createElement("pre",{style:i},r):null,null)}const tD=b.createElement(eD,null);class rD extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?b.createElement(li.Provider,{value:this.props.routeContext},b.createElement(nT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function nD(t){let{routeContext:e,match:r,children:n}=t,i=b.useContext(Om);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),b.createElement(li.Provider,{value:e},n)}function iD(t,e,r,n){var i;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var o;if(!r)return null;if(r.errors)t=r.matches;else if((o=n)!=null&&o.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,s=(i=r)==null?void 0:i.errors;if(s!=null){let u=a.findIndex(d=>d.route.id&&(s==null?void 0:s[d.route.id])!==void 0);u>=0||Ke(!1),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,l=-1;if(r&&n&&n.v7_partialHydration)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=r,_=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||_){c=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((u,d,h)=>{let f,_=!1,v=null,g=null;r&&(f=s&&d.route.id?s[d.route.id]:void 0,v=d.route.errorElement||tD,c&&(l<0&&h===0?(uD("route-fallback"),_=!0,g=null):l===h&&(_=!0,g=d.route.hydrateFallbackElement||null)));let y=e.concat(a.slice(0,h+1)),m=()=>{let w;return f?w=v:_?w=g:d.route.Component?w=b.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=u,b.createElement(nD,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:r!=null},children:w})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?b.createElement(rD,{location:r.location,revalidation:r.revalidation,component:v,error:f,children:m(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):m()},null)}var aT=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(aT||{}),sT=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(sT||{});function oD(t){let e=b.useContext(Om);return e||Ke(!1),e}function aD(t){let e=b.useContext(J2);return e||Ke(!1),e}function sD(t){let e=b.useContext(li);return e||Ke(!1),e}function cT(t){let e=sD(),r=e.matches[e.matches.length-1];return r.route.id||Ke(!1),r.route.id}function cD(){var t;let e=b.useContext(nT),r=aD(),n=cT();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function lD(){let{router:t}=oD(aT.UseNavigateStable),e=cT(sT.UseNavigateStable),r=b.useRef(!1);return iT(()=>{r.current=!0}),b.useCallback(function(i,o){o===void 0&&(o={}),r.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Hs({fromRouteId:e},o)))},[t,e])}const E_={};function uD(t,e,r){E_[t]||(E_[t]=!0)}function dD(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function lT(t){let{to:e,replace:r,state:n,relative:i}=t;pc()||Ke(!1);let{future:o,static:a}=b.useContext(hc),{matches:s}=b.useContext(li),{pathname:c}=pd(),l=hn(),u=tT(e,eT(s,o.v7_relativeSplatPath),c,i==="path"),d=JSON.stringify(u);return b.useEffect(()=>l(JSON.parse(d),{replace:r,state:n,relative:i}),[l,d,i,r,n]),null}function Rn(t){Ke(!1)}function fD(t){let{basename:e="/",children:r=null,location:n,navigationType:i=qn.Pop,navigator:o,static:a=!1,future:s}=t;pc()&&Ke(!1);let c=e.replace(/^\/*/,"/"),l=b.useMemo(()=>({basename:c,navigator:o,static:a,future:Hs({v7_relativeSplatPath:!1},s)}),[c,s,o,a]);typeof n=="string"&&(n=La(n));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:_="default"}=n,v=b.useMemo(()=>{let g=Zx(u,c);return g==null?null:{location:{pathname:g,search:d,hash:h,state:f,key:_},navigationType:i}},[c,u,d,h,f,_,i]);return v==null?null:b.createElement(hc.Provider,{value:l},b.createElement(hd.Provider,{children:r,value:v}))}function hD(t){let{children:e,location:r}=t;return X2(xp(e),r)}new Promise(()=>{});function xp(t,e){e===void 0&&(e=[]);let r=[];return b.Children.forEach(t,(n,i)=>{if(!b.isValidElement(n))return;let o=[...e,i];if(n.type===b.Fragment){r.push.apply(r,xp(n.props.children,o));return}n.type!==Rn&&Ke(!1),!n.props.index||!n.props.children||Ke(!1);let a={id:n.props.id||o.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=xp(n.props.children,o)),r.push(a)}),r}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const pD="6";try{window.__reactRouterVersion=pD}catch{}const vD="startTransition",C_=Nu[vD];function mD(t){let{basename:e,children:r,future:n,window:i}=t,o=b.useRef();o.current==null&&(o.current=k2({window:i,v5Compat:!0}));let a=o.current,[s,c]=b.useState({action:a.action,location:a.location}),{v7_startTransition:l}=n||{},u=b.useCallback(d=>{l&&C_?C_(()=>c(d)):c(d)},[c,l]);return b.useLayoutEffect(()=>a.listen(u),[a,u]),b.useEffect(()=>dD(n),[n]),b.createElement(fD,{basename:e,children:r,location:s.location,navigationType:s.action,navigator:a,future:n})}var P_;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(P_||(P_={}));var O_;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(O_||(O_={}));const gD=()=>p.jsx(lT,{to:"/landing",replace:!0});var yD=Symbol.for("react.lazy"),ku=Nu[" use ".trim().toString()];function _D(t){return typeof t=="object"&&t!==null&&"then"in t}function uT(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===yD&&"_payload"in t&&_D(t._payload)}function dT(t){const e=bD(t),r=b.forwardRef((n,i)=>{let{children:o,...a}=n;uT(o)&&typeof ku=="function"&&(o=ku(o._payload));const s=b.Children.toArray(o),c=s.find(kD);if(c){const l=c.props.children,u=s.map(d=>d===c?b.Children.count(l)>1?b.Children.only(null):b.isValidElement(l)?l.props.children:null:d);return p.jsx(e,{...a,ref:i,children:b.isValidElement(l)?b.cloneElement(l,void 0,u):null})}return p.jsx(e,{...a,ref:i,children:o})});return r.displayName=`${t}.Slot`,r}var wD=dT("Slot");function bD(t){const e=b.forwardRef((r,n)=>{let{children:i,...o}=r;if(uT(i)&&typeof ku=="function"&&(i=ku(i._payload)),b.isValidElement(i)){const a=TD(i),s=xD(o,i.props);return i.type!==b.Fragment&&(s.ref=n?lc(n,a):a),b.cloneElement(i,s)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var SD=Symbol("radix.slottable");function kD(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===SD}function xD(t,e){const r={...e};for(const n in e){const i=t[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...s)=>{const c=o(...s);return i(...s),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...t,...r}}function TD(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}const ED=td("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-xl text-sm font-semibold ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 transform active:scale-[0.98]",{variants:{variant:{default:"bg-gradient-to-r from-blue-600 via-blue-500 to-cyan-500 text-white shadow-[0_4px_20px_-4px_rgba(59,130,246,0.5)] hover:shadow-[0_8px_30px_-4px_rgba(59,130,246,0.6)] hover:from-blue-500 hover:via-blue-400 hover:to-cyan-400 hover:-translate-y-0.5 border border-blue-400/30",destructive:"bg-gradient-to-r from-red-600 to-rose-500 text-white shadow-[0_4px_20px_-4px_rgba(239,68,68,0.5)] hover:shadow-[0_8px_30px_-4px_rgba(239,68,68,0.6)] hover:from-red-500 hover:to-rose-400 hover:-translate-y-0.5 border border-red-400/30",outline:"border-2 border-blue-500/50 bg-white/80 dark:bg-slate-900/80 backdrop-blur-sm text-blue-600 dark:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-950/50 hover:border-blue-500 hover:shadow-[0_4px_20px_-4px_rgba(59,130,246,0.3)] hover:-translate-y-0.5",secondary:"bg-gradient-to-r from-teal-500 to-cyan-500 text-white shadow-[0_4px_20px_-4px_rgba(20,184,166,0.5)] hover:shadow-[0_8px_30px_-4px_rgba(20,184,166,0.6)] hover:from-teal-400 hover:to-cyan-400 hover:-translate-y-0.5 border border-teal-400/30",ghost:"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 hover:text-blue-600 dark:hover:text-blue-400",link:"text-blue-600 dark:text-blue-400 underline-offset-4 hover:underline hover:text-blue-500"},size:{default:"h-11 px-6 py-2.5",sm:"h-9 rounded-lg px-4 text-xs",lg:"h-12 rounded-xl px-10 text-base",icon:"h-11 w-11 rounded-xl"}},defaultVariants:{variant:"default",size:"default"}}),me=b.forwardRef(({className:t,variant:e,size:r,asChild:n=!1,...i},o)=>{const a=n?wD:"button";return p.jsx(a,{className:Le(ED({variant:e,size:r,className:t})),ref:o,...i})});me.displayName="Button";var Tp=function(t,e){return Tp=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},Tp(t,e)};function fT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Tp(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Jt=function(){return Jt=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Jt.apply(this,arguments)};function ui(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function hT(t,e,r,n){var i=arguments.length,o=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,n);else for(var s=t.length-1;s>=0;s--)(a=t[s])&&(o=(i<3?a(o):i>3?a(e,r,o):a(e,r))||o);return i>3&&o&&Object.defineProperty(e,r,o),o}function pT(t,e){return function(r,n){e(r,n,t)}}function vT(t,e,r,n,i,o){function a(y){if(y!==void 0&&typeof y!="function")throw new TypeError("Function expected");return y}for(var s=n.kind,c=s==="getter"?"get":s==="setter"?"set":"value",l=!e&&t?n.static?t:t.prototype:null,u=e||(l?Object.getOwnPropertyDescriptor(l,n.name):{}),d,h=!1,f=r.length-1;f>=0;f--){var _={};for(var v in n)_[v]=v==="access"?{}:n[v];for(var v in n.access)_.access[v]=n.access[v];_.addInitializer=function(y){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(y||null))};var g=(0,r[f])(s==="accessor"?{get:u.get,set:u.set}:u[c],_);if(s==="accessor"){if(g===void 0)continue;if(g===null||typeof g!="object")throw new TypeError("Object expected");(d=a(g.get))&&(u.get=d),(d=a(g.set))&&(u.set=d),(d=a(g.init))&&i.unshift(d)}else(d=a(g))&&(s==="field"?i.unshift(d):u[c]=d)}l&&Object.defineProperty(l,n.name,u),h=!0}function mT(t,e,r){for(var n=arguments.length>2,i=0;i<e.length;i++)r=n?e[i].call(t,r):e[i].call(t);return n?r:void 0}function gT(t){return typeof t=="symbol"?t:"".concat(t)}function yT(t,e,r){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:r?"".concat(r," ",e):e})}function _T(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function X(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})}function wT(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}var vd=Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]};function bT(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&vd(e,t,r)}function xu(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Rm(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o}function ST(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Rm(arguments[e]));return t}function kT(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function jm(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))}function xa(t){return this instanceof xa?(this.v=t,this):new xa(t)}function xT(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",a),i[Symbol.asyncIterator]=function(){return this},i;function a(f){return function(_){return Promise.resolve(_).then(f,d)}}function s(f,_){n[f]&&(i[f]=function(v){return new Promise(function(g,y){o.push([f,v,g,y])>1||c(f,v)})},_&&(i[f]=_(i[f])))}function c(f,_){try{l(n[f](_))}catch(v){h(o[0][3],v)}}function l(f){f.value instanceof xa?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,_){f(_),o.shift(),o.length&&c(o[0][0],o[0][1])}}function TT(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,o){e[i]=t[i]?function(a){return(r=!r)?{value:xa(t[i](a)),done:!1}:o?o(a):a}:o}}function ET(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof xu=="function"?xu(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(o){r[o]=t[o]&&function(a){return new Promise(function(s,c){a=t[o](a),i(s,c,a.done,a.value)})}}function i(o,a,s,c){Promise.resolve(c).then(function(l){o({value:l,done:s})},a)}}function CT(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var CD=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},Ep=function(t){return Ep=Object.getOwnPropertyNames||function(e){var r=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[r.length]=n);return r},Ep(t)};function PT(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r=Ep(t),n=0;n<r.length;n++)r[n]!=="default"&&vd(e,t,r[n]);return CD(e,t),e}function OT(t){return t&&t.__esModule?t:{default:t}}function RT(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)}function jT(t,e,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(t,r):i?i.value=r:e.set(t,r),r}function AT(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function LT(t,e,r){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=e[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=e[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.stack.push({value:e,dispose:n,async:r})}else r&&t.stack.push({async:!0});return e}var PD=typeof SuppressedError=="function"?SuppressedError:function(t,e,r){var n=new Error(r);return n.name="SuppressedError",n.error=t,n.suppressed=e,n};function IT(t){function e(o){t.error=t.hasError?new PD(o,t.error,"An error was suppressed during disposal."):o,t.hasError=!0}var r,n=0;function i(){for(;r=t.stack.pop();)try{if(!r.async&&n===1)return n=0,t.stack.push(r),Promise.resolve().then(i);if(r.dispose){var o=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(o).then(i,function(a){return e(a),i()})}else n|=1}catch(a){e(a)}if(n===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function NT(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,o,a){return n?e?".jsx":".js":i&&(!o||!a)?r:i+o+"."+a.toLowerCase()+"js"}):t}const OD={__extends:fT,__assign:Jt,__rest:ui,__decorate:hT,__param:pT,__esDecorate:vT,__runInitializers:mT,__propKey:gT,__setFunctionName:yT,__metadata:_T,__awaiter:X,__generator:wT,__createBinding:vd,__exportStar:bT,__values:xu,__read:Rm,__spread:ST,__spreadArrays:kT,__spreadArray:jm,__await:xa,__asyncGenerator:xT,__asyncDelegator:TT,__asyncValues:ET,__makeTemplateObject:CT,__importStar:PT,__importDefault:OT,__classPrivateFieldGet:RT,__classPrivateFieldSet:jT,__classPrivateFieldIn:AT,__addDisposableResource:LT,__disposeResources:IT,__rewriteRelativeImportExtension:NT},RD=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:LT,get __assign(){return Jt},__asyncDelegator:TT,__asyncGenerator:xT,__asyncValues:ET,__await:xa,__awaiter:X,__classPrivateFieldGet:RT,__classPrivateFieldIn:AT,__classPrivateFieldSet:jT,__createBinding:vd,__decorate:hT,__disposeResources:IT,__esDecorate:vT,__exportStar:bT,__extends:fT,__generator:wT,__importDefault:OT,__importStar:PT,__makeTemplateObject:CT,__metadata:_T,__param:pT,__propKey:gT,__read:Rm,__rest:ui,__rewriteRelativeImportExtension:NT,__runInitializers:mT,__setFunctionName:yT,__spread:ST,__spreadArray:jm,__spreadArrays:kT,__values:xu,default:OD},Symbol.toStringTag,{value:"Module"})),jD=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class Am extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class AD extends Am{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class R_ extends Am{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class j_ extends Am{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Cp;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Cp||(Cp={}));class LD{constructor(e,{headers:r={},customFetch:n,region:i=Cp.Any}={}){this.url=e,this.headers=r,this.region=i,this.fetch=jD(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return X(this,arguments,void 0,function*(r,n={}){var i;let o,a;try{const{headers:s,method:c,body:l,signal:u,timeout:d}=n;let h={},{region:f}=n;f||(f=this.region);const _=new URL(`${this.url}/${r}`);f&&f!=="any"&&(h["x-region"]=f,_.searchParams.set("forceFunctionRegion",f));let v;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",v=l):typeof l=="string"?(h["Content-Type"]="text/plain",v=l):typeof FormData<"u"&&l instanceof FormData?v=l:(h["Content-Type"]="application/json",v=JSON.stringify(l)):v=l;let g=u;d&&(a=new AbortController,o=setTimeout(()=>a.abort(),d),u?(g=a.signal,u.addEventListener("abort",()=>a.abort())):g=a.signal);const y=yield this.fetch(_.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),s),body:v,signal:g}).catch(k=>{throw new AD(k)}),m=y.headers.get("x-relay-error");if(m&&m==="true")throw new R_(y);if(!y.ok)throw new j_(y);let w=((i=y.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),S;return w==="application/json"?S=yield y.json():w==="application/octet-stream"||w==="application/pdf"?S=yield y.blob():w==="text/event-stream"?S=y:w==="multipart/form-data"?S=yield y.formData():S=yield y.text(),{data:S,error:null,response:y}}catch(s){return{data:null,error:s,response:s instanceof j_||s instanceof R_?s.context:void 0}}finally{o&&clearTimeout(o)}})}}var gt={};const Ia=J1(RD);var Yc={},Xc={},Zc={},el={},tl={},rl={},A_;function MT(){if(A_)return rl;A_=1,Object.defineProperty(rl,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return rl.default=t,rl}var L_;function DT(){if(L_)return tl;L_=1,Object.defineProperty(tl,"__esModule",{value:!0});const e=Ia.__importDefault(MT());class r{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let s=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var l,u,d,h;let f=null,_=null,v=null,g=c.status,y=c.statusText;if(c.ok){if(this.method!=="HEAD"){const k=await c.text();k===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?_=k:_=JSON.parse(k))}const w=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),S=(d=c.headers.get("content-range"))===null||d===void 0?void 0:d.split("/");w&&S&&S.length>1&&(v=parseInt(S[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(f={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,v=null,g=406,y="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const w=await c.text();try{f=JSON.parse(w),Array.isArray(f)&&c.status===404&&(_=[],f=null,g=200,y="OK")}catch{c.status===404&&w===""?(g=204,y="No Content"):f={message:w}}if(f&&this.isMaybeSingle&&(!((h=f==null?void 0:f.details)===null||h===void 0)&&h.includes("0 rows"))&&(f=null,g=200,y="OK"),f&&this.shouldThrowOnError)throw new e.default(f)}return{error:f,data:_,count:v,status:g,statusText:y}});return this.shouldThrowOnError||(s=s.catch(c=>{var l,u,d,h,f,_;let v="";const g=c==null?void 0:c.cause;if(g){const y=(l=g==null?void 0:g.message)!==null&&l!==void 0?l:"",m=(u=g==null?void 0:g.code)!==null&&u!==void 0?u:"";v=`${(d=c==null?void 0:c.name)!==null&&d!==void 0?d:"FetchError"}: ${c==null?void 0:c.message}`,v+=`

Caused by: ${(h=g==null?void 0:g.name)!==null&&h!==void 0?h:"Error"}: ${y}`,m&&(v+=` (${m})`),g!=null&&g.stack&&(v+=`
${g.stack}`)}else v=(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:"";return{error:{message:`${(_=c==null?void 0:c.name)!==null&&_!==void 0?_:"FetchError"}: ${c==null?void 0:c.message}`,details:v,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),s.then(i,o)}returns(){return this}overrideTypes(){return this}}return tl.default=r,tl}var I_;function $T(){if(I_)return el;I_=1,Object.defineProperty(el,"__esModule",{value:!0});const e=Ia.__importDefault(DT());class r extends e.default{select(i){let o=!1;const a=(i??"*").split("").map(s=>/\s/.test(s)&&!o?"":(s==='"'&&(o=!o),s)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:o=!0,nullsFirst:a,foreignTable:s,referencedTable:c=s}={}){const l=c?`${c}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${i}.${o?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:o,referencedTable:a=o}={}){const s=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(s,`${i}`),this}range(i,o,{foreignTable:a,referencedTable:s=a}={}){const c=typeof s>"u"?"offset":`${s}.offset`,l=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(c,`${i}`),this.url.searchParams.set(l,`${o-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:o=!1,settings:a=!1,buffers:s=!1,wal:c=!1,format:l="text"}={}){var u;const d=[i?"analyze":null,o?"verbose":null,a?"settings":null,s?"buffers":null,c?"wal":null].filter(Boolean).join("|"),h=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${h}"; options=${d};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return el.default=r,el}var N_;function Lm(){if(N_)return Zc;N_=1,Object.defineProperty(Zc,"__esModule",{value:!0});const e=Ia.__importDefault($T()),r=new RegExp("[,()]");class n extends e.default{eq(o,a){return this.url.searchParams.append(o,`eq.${a}`),this}neq(o,a){return this.url.searchParams.append(o,`neq.${a}`),this}gt(o,a){return this.url.searchParams.append(o,`gt.${a}`),this}gte(o,a){return this.url.searchParams.append(o,`gte.${a}`),this}lt(o,a){return this.url.searchParams.append(o,`lt.${a}`),this}lte(o,a){return this.url.searchParams.append(o,`lte.${a}`),this}like(o,a){return this.url.searchParams.append(o,`like.${a}`),this}likeAllOf(o,a){return this.url.searchParams.append(o,`like(all).{${a.join(",")}}`),this}likeAnyOf(o,a){return this.url.searchParams.append(o,`like(any).{${a.join(",")}}`),this}ilike(o,a){return this.url.searchParams.append(o,`ilike.${a}`),this}ilikeAllOf(o,a){return this.url.searchParams.append(o,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(o,a){return this.url.searchParams.append(o,`ilike(any).{${a.join(",")}}`),this}regexMatch(o,a){return this.url.searchParams.append(o,`match.${a}`),this}regexIMatch(o,a){return this.url.searchParams.append(o,`imatch.${a}`),this}is(o,a){return this.url.searchParams.append(o,`is.${a}`),this}isDistinct(o,a){return this.url.searchParams.append(o,`isdistinct.${a}`),this}in(o,a){const s=Array.from(new Set(a)).map(c=>typeof c=="string"&&r.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(o,`in.(${s})`),this}contains(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cs.{${a.join(",")}}`):this.url.searchParams.append(o,`cs.${JSON.stringify(a)}`),this}containedBy(o,a){return typeof a=="string"?this.url.searchParams.append(o,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(o,`cd.{${a.join(",")}}`):this.url.searchParams.append(o,`cd.${JSON.stringify(a)}`),this}rangeGt(o,a){return this.url.searchParams.append(o,`sr.${a}`),this}rangeGte(o,a){return this.url.searchParams.append(o,`nxl.${a}`),this}rangeLt(o,a){return this.url.searchParams.append(o,`sl.${a}`),this}rangeLte(o,a){return this.url.searchParams.append(o,`nxr.${a}`),this}rangeAdjacent(o,a){return this.url.searchParams.append(o,`adj.${a}`),this}overlaps(o,a){return typeof a=="string"?this.url.searchParams.append(o,`ov.${a}`):this.url.searchParams.append(o,`ov.{${a.join(",")}}`),this}textSearch(o,a,{config:s,type:c}={}){let l="";c==="plain"?l="pl":c==="phrase"?l="ph":c==="websearch"&&(l="w");const u=s===void 0?"":`(${s})`;return this.url.searchParams.append(o,`${l}fts${u}.${a}`),this}match(o){return Object.entries(o).forEach(([a,s])=>{this.url.searchParams.append(a,`eq.${s}`)}),this}not(o,a,s){return this.url.searchParams.append(o,`not.${a}.${s}`),this}or(o,{foreignTable:a,referencedTable:s=a}={}){const c=s?`${s}.or`:"or";return this.url.searchParams.append(c,`(${o})`),this}filter(o,a,s){return this.url.searchParams.append(o,`${a}.${s}`),this}}return Zc.default=n,Zc}var M_;function FT(){if(M_)return Xc;M_=1,Object.defineProperty(Xc,"__esModule",{value:!0});const e=Ia.__importDefault(Lm());class r{constructor(i,{headers:o={},schema:a,fetch:s}){this.url=i,this.headers=new Headers(o),this.schema=a,this.fetch=s}select(i,o){const{head:a=!1,count:s}=o??{},c=a?"HEAD":"GET";let l=!1;const u=(i??"*").split("").map(d=>/\s/.test(d)&&!l?"":(d==='"'&&(l=!l),d)).join("");return this.url.searchParams.set("select",u),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:o,defaultToNull:a=!0}={}){var s;const c="POST";if(o&&this.headers.append("Prefer",`count=${o}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const l=i.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}upsert(i,{onConflict:o,ignoreDuplicates:a=!1,count:s,defaultToNull:c=!0}={}){var l;const u="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),o!==void 0&&this.url.searchParams.set("on_conflict",o),s&&this.headers.append("Prefer",`count=${s}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const d=i.reduce((h,f)=>h.concat(Object.keys(f)),[]);if(d.length>0){const h=[...new Set(d)].map(f=>`"${f}"`);this.url.searchParams.set("columns",h.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(i,{count:o}={}){var a;const s="PATCH";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:i}={}){var o;const a="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}}return Xc.default=r,Xc}var D_;function ID(){if(D_)return Yc;D_=1,Object.defineProperty(Yc,"__esModule",{value:!0});const t=Ia,e=t.__importDefault(FT()),r=t.__importDefault(Lm());class n{constructor(o,{headers:a={},schema:s,fetch:c}={}){this.url=o,this.headers=new Headers(a),this.schemaName=s,this.fetch=c}from(o){if(!o||typeof o!="string"||o.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const a=new URL(`${this.url}/${o}`);return new e.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(o){return new n(this.url,{headers:this.headers,schema:o,fetch:this.fetch})}rpc(o,a={},{head:s=!1,get:c=!1,count:l}={}){var u;let d;const h=new URL(`${this.url}/rpc/${o}`);let f;s||c?(d=s?"HEAD":"GET",Object.entries(a).filter(([v,g])=>g!==void 0).map(([v,g])=>[v,Array.isArray(g)?`{${g.join(",")}}`:`${g}`]).forEach(([v,g])=>{h.searchParams.append(v,g)})):(d="POST",f=a);const _=new Headers(this.headers);return l&&_.set("Prefer",`count=${l}`),new r.default({method:d,url:h,headers:_,schema:this.schemaName,body:f,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Yc.default=n,Yc}Object.defineProperty(gt,"__esModule",{value:!0});var UT=gt.PostgrestError=JT=gt.PostgrestBuilder=GT=gt.PostgrestTransformBuilder=qT=gt.PostgrestFilterBuilder=WT=gt.PostgrestQueryBuilder=VT=gt.PostgrestClient=void 0;const Na=Ia,BT=Na.__importDefault(ID());var VT=gt.PostgrestClient=BT.default;const zT=Na.__importDefault(FT());var WT=gt.PostgrestQueryBuilder=zT.default;const HT=Na.__importDefault(Lm());var qT=gt.PostgrestFilterBuilder=HT.default;const KT=Na.__importDefault($T());var GT=gt.PostgrestTransformBuilder=KT.default;const QT=Na.__importDefault(DT());var JT=gt.PostgrestBuilder=QT.default;const YT=Na.__importDefault(MT());UT=gt.PostgrestError=YT.default;var XT=gt.default={PostgrestClient:BT.default,PostgrestQueryBuilder:zT.default,PostgrestFilterBuilder:HT.default,PostgrestTransformBuilder:KT.default,PostgrestBuilder:QT.default,PostgrestError:YT.default};const ND=o0({__proto__:null,get PostgrestBuilder(){return JT},get PostgrestClient(){return VT},get PostgrestError(){return UT},get PostgrestFilterBuilder(){return qT},get PostgrestQueryBuilder(){return WT},get PostgrestTransformBuilder(){return GT},default:XT},[gt]),{PostgrestClient:MD,PostgrestQueryBuilder:wee,PostgrestFilterBuilder:bee,PostgrestTransformBuilder:See,PostgrestBuilder:kee,PostgrestError:xee}=XT||ND;class DD{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const $D="2.86.0",FD=`realtime-js/${$D}`,ZT="1.0.0",UD="2.0.0",$_=ZT,Pp=1e4,BD=1e3,VD=100;var Pi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Pi||(Pi={}));var Ge;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Ge||(Ge={}));var gr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gr||(gr={}));var Op;(function(t){t.websocket="websocket"})(Op||(Op={}));var Oi;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Oi||(Oi={}));class zD{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,r){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(e));let n=[e.join_ref,e.ref,e.topic,e.event,e.payload];return r(JSON.stringify(n))}_binaryEncodeUserBroadcastPush(e){var r;return this._isArrayBuffer((r=e.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(e){var r,n;const i=(n=(r=e.payload)===null||r===void 0?void 0:r.payload)!==null&&n!==void 0?n:{},a=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,a)}_encodeUserBroadcastPush(e,r,n){var i,o;const a=e.topic,s=(i=e.ref)!==null&&i!==void 0?i:"",c=(o=e.join_ref)!==null&&o!==void 0?o:"",l=e.payload.event,u=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},d=Object.keys(u).length===0?"":JSON.stringify(u);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`topic length ${a.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);const h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+s.length+a.length+l.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h);let _=new DataView(f),v=0;_.setUint8(v++,this.KINDS.userBroadcastPush),_.setUint8(v++,c.length),_.setUint8(v++,s.length),_.setUint8(v++,a.length),_.setUint8(v++,l.length),_.setUint8(v++,d.length),_.setUint8(v++,r),Array.from(c,y=>_.setUint8(v++,y.charCodeAt(0))),Array.from(s,y=>_.setUint8(v++,y.charCodeAt(0))),Array.from(a,y=>_.setUint8(v++,y.charCodeAt(0))),Array.from(l,y=>_.setUint8(v++,y.charCodeAt(0))),Array.from(d,y=>_.setUint8(v++,y.charCodeAt(0)));var g=new Uint8Array(f.byteLength+n.byteLength);return g.set(new Uint8Array(f),0),g.set(new Uint8Array(n),f.byteLength),g.buffer}decode(e,r){if(this._isArrayBuffer(e)){let n=this._binaryDecode(e);return r(n)}if(typeof e=="string"){const n=JSON.parse(e),[i,o,a,s,c]=n;return r({join_ref:i,ref:o,topic:a,event:s,payload:c})}return r({})}_binaryDecode(e){const r=new DataView(e),n=r.getUint8(0),i=new TextDecoder;switch(n){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,r,i)}}_decodeUserBroadcast(e,r,n){const i=r.getUint8(1),o=r.getUint8(2),a=r.getUint8(3),s=r.getUint8(4);let c=this.HEADER_LENGTH+4;const l=n.decode(e.slice(c,c+i));c=c+i;const u=n.decode(e.slice(c,c+o));c=c+o;const d=n.decode(e.slice(c,c+a));c=c+a;const h=e.slice(c,e.byteLength),f=s===this.JSON_ENCODING?JSON.parse(n.decode(h)):h,_={type:this.BROADCAST_EVENT,event:u,payload:f};return a>0&&(_.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:_}}_isArrayBuffer(e){var r;return e instanceof ArrayBuffer||((r=e==null?void 0:e.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}_pick(e,r){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([n])=>r.includes(n)))}}let eE=class{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Ce;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ce||(Ce={}));const F_=(t,e,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((o,a)=>(o[a]=WD(a,t,e,i),o),{}):{}},WD=(t,e,r,n)=>{const i=e.find(s=>s.name===t),o=i==null?void 0:i.type,a=r[t];return o&&!n.includes(o)?tE(o,a):Rp(a)},tE=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return GD(e,r)}switch(t){case Ce.bool:return HD(e);case Ce.float4:case Ce.float8:case Ce.int2:case Ce.int4:case Ce.int8:case Ce.numeric:case Ce.oid:return qD(e);case Ce.json:case Ce.jsonb:return KD(e);case Ce.timestamp:return QD(e);case Ce.abstime:case Ce.date:case Ce.daterange:case Ce.int4range:case Ce.int8range:case Ce.money:case Ce.reltime:case Ce.text:case Ce.time:case Ce.timestamptz:case Ce.timetz:case Ce.tsrange:case Ce.tstzrange:return Rp(e);default:return Rp(e)}},Rp=t=>t,HD=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},qD=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},KD=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},GD=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let o;const a=t.slice(1,r);try{o=JSON.parse("["+a+"]")}catch{o=a?a.split(","):[]}return o.map(s=>tE(e,s))}return t},QD=t=>typeof t=="string"?t.replace(" ","T"):t,rE=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class _f{constructor(e,r,n={},i=Pp){this.channel=e,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var U_;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(U_||(U_={}));class ws{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ws.syncState(this.state,i,o,a),this.pendingDiffs.forEach(c=>{this.state=ws.syncDiff(this.state,c,o,a)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},i=>{const{onJoin:o,onLeave:a,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=ws.syncDiff(this.state,i,o,a),s())}),this.onJoin((i,o,a)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:a})}),this.onLeave((i,o,a)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,i){const o=this.cloneDeep(e),a=this.transformState(r),s={},c={};return this.map(o,(l,u)=>{a[l]||(c[l]=u)}),this.map(a,(l,u)=>{const d=o[l];if(d){const h=u.map(g=>g.presence_ref),f=d.map(g=>g.presence_ref),_=u.filter(g=>f.indexOf(g.presence_ref)<0),v=d.filter(g=>h.indexOf(g.presence_ref)<0);_.length>0&&(s[l]=_),v.length>0&&(c[l]=v)}else s[l]=u}),this.syncDiff(o,{joins:s,leaves:c},n,i)}static syncDiff(e,r,n,i){const{joins:o,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(o,(s,c)=>{var l;const u=(l=e[s])!==null&&l!==void 0?l:[];if(e[s]=this.cloneDeep(c),u.length>0){const d=e[s].map(f=>f.presence_ref),h=u.filter(f=>d.indexOf(f.presence_ref)<0);e[s].unshift(...h)}n(s,u,c)}),this.map(a,(s,c)=>{let l=e[s];if(!l)return;const u=c.map(d=>d.presence_ref);l=l.filter(d=>u.indexOf(d.presence_ref)<0),e[s]=l,i(s,l,c),l.length===0&&delete e[s]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const i=e[n];return"metas"in i?r[n]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):r[n]=i,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var B_;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(B_||(B_={}));var bs;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(bs||(bs={}));var Xr;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Xr||(Xr={}));class Im{constructor(e,r={config:{}},n){var i,o;if(this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=Ge.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new _f(this,gr.join,this.params,this.timeout),this.rejoinTimer=new eE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ge.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ge.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ge.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gr.reply,{},(a,s)=>{this._trigger(this._replyEventName(s),a)}),this.presence=new ws(this),this.broadcastEndpointURL=rE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,r=this.timeout){var n,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==Ge.closed){const{config:{broadcast:a,presence:s,private:c}}=this.params,l=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(f=>f.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[bs.PRESENCE]&&this.bindings[bs.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:a,presence:Object.assign(Object.assign({},s),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>e==null?void 0:e(Xr.CHANNEL_ERROR,f)),this._onClose(()=>e==null?void 0:e(Xr.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:f})=>{var _;if(this.socket.setAuth(),f===void 0){e==null||e(Xr.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,g=(_=v==null?void 0:v.length)!==null&&_!==void 0?_:0,y=[];for(let m=0;m<g;m++){const w=v[m],{filter:{event:S,schema:k,table:E,filter:x}}=w,C=f&&f[m];if(C&&C.event===S&&C.schema===k&&C.table===E&&C.filter===x)y.push(Object.assign(Object.assign({},w),{id:C.id}));else{this.unsubscribe(),this.state=Ge.errored,e==null||e(Xr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,e&&e(Xr.SUBSCRIBED);return}}).receive("error",f=>{this.state=Ge.errored,e==null||e(Xr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Xr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===Ge.joined&&e===bs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async httpSend(e,r,n={}){var i;const o=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:o,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:r,private:this.private}]})},s=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(s.status===202)return{success:!0};let c=s.statusText;try{const l=await s.json();c=l.error||l.message||c}catch{}return Promise.reject(new Error(c))}async send(e,r={}){var n,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:o,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=l.body)===null||i===void 0?void 0:i.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,s,c;const l=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(s=(a=this.params)===null||a===void 0?void 0:a.config)===null||s===void 0?void 0:s.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),l.receive("ok",()=>o("ok")),l.receive("error",()=>o("error")),l.receive("timeout",()=>o("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Ge.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gr.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new _f(this,gr.leave,{},e),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ge.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const i=new AbortController,o=setTimeout(()=>i.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(o),a}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new _f(this,e,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>VD){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var i,o;const a=e.toLocaleLowerCase(),{close:s,error:c,leave:l,join:u}=gr;if(n&&[s,c,l,u].indexOf(a)>=0&&n!==this._joinRef())return;let h=this._onMessage(a,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var _,v,g;return((_=f.filter)===null||_===void 0?void 0:_.event)==="*"||((g=(v=f.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===a}).map(f=>f.callback(h,n)):(o=this.bindings[a])===null||o===void 0||o.filter(f=>{var _,v,g,y,m,w;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const S=f.id,k=(_=f.filter)===null||_===void 0?void 0:_.event;return S&&((v=r.ids)===null||v===void 0?void 0:v.includes(S))&&(k==="*"||(k==null?void 0:k.toLocaleLowerCase())===((g=r.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const S=(m=(y=f==null?void 0:f.filter)===null||y===void 0?void 0:y.event)===null||m===void 0?void 0:m.toLocaleLowerCase();return S==="*"||S===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof h=="object"&&"ids"in h){const _=h.data,{schema:v,table:g,commit_timestamp:y,type:m,errors:w}=_;h=Object.assign(Object.assign({},{schema:v,table:g,commit_timestamp:y,eventType:m,new:{},old:{},errors:w}),this._getPayloadRecords(_))}f.callback(h,n)})}_isClosed(){return this.state===Ge.closed}_isJoined(){return this.state===Ge.joined}_isJoining(){return this.state===Ge.joining}_isLeaving(){return this.state===Ge.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const i=e.toLocaleLowerCase(),o={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===n&&Im.isEqual(i.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gr.close,{},e)}_onError(e){this._on(gr.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ge.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=F_(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=F_(e.columns,e.old_record)),r}}const wf=()=>{},nl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},JD=[1e3,2e3,5e3,1e4],YD=1e4,XD=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class ZD{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Pp,this.transport=null,this.heartbeatIntervalMs=nl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=wf,this.ref=0,this.reconnectTimer=null,this.vsn=$_,this.logger=wf,this.conn=null,this.sendBuffer=[],this.serializer=new zD,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Op.websocket}`,this.httpEndpoint=rE(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=DD.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Pi.connecting:return Oi.Connecting;case Pi.open:return Oi.Open;case Pi.closing:return Oi.Closing;default:return Oi.Closed}}isConnected(){return this.connectionState()===Oi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,i=this.getChannels().find(o=>o.topic===n);if(i)return i;{const o=new Im(`realtime:${e}`,r,this);return this.channels.push(o),o}}push(e){const{topic:r,event:n,payload:i,ref:o}=e,a=()=>{this.encode(e,s=>{var c;(c=this.conn)===null||c===void 0||c.send(s)})};this.log("push",`${r} ${n} (${o})`,i),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(BD,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},nl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(l){this.log("error","error in heartbeat callback",l)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:o,ref:a}=r,s=a?`(${a})`:"",c=o.status||"";this.log("receive",`${c} ${n} ${i} ${s}`.trim(),o),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(i,o,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Pi.open||this.conn.readyState===Pi.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(gr.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${e}${n}${i}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([XD],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:FD};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(gr.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new eE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},nl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,i,o,a,s,c,l,u,d,h,f;switch(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Pp,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:nl.HEARTBEAT_INTERVAL,this.worker=(o=e==null?void 0:e.worker)!==null&&o!==void 0?o:!1,this.accessToken=(a=e==null?void 0:e.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(s=e==null?void 0:e.heartbeatCallback)!==null&&s!==void 0?s:wf,this.vsn=(c=e==null?void 0:e.vsn)!==null&&c!==void 0?c:$_,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:_=>JD[_-1]||YD,this.vsn){case ZT:this.encode=(u=e==null?void 0:e.encode)!==null&&u!==void 0?u:(_,v)=>v(JSON.stringify(_)),this.decode=(d=e==null?void 0:e.decode)!==null&&d!==void 0?d:(_,v)=>v(JSON.parse(_));break;case UD:this.encode=(h=e==null?void 0:e.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=e==null?void 0:e.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class md extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Me(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class e$ extends md{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class jp extends md{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}const Nm=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),t$=()=>Response,Ap=t=>{if(Array.isArray(t))return t.map(r=>Ap(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));e[i]=Ap(n)}),e},r$=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},n$=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t),bf=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},i$=(t,e,r)=>X(void 0,void 0,void 0,function*(){const n=yield t$();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(i=>{const o=t.status||500,a=(i==null?void 0:i.statusCode)||o+"";e(new e$(bf(i),o,a))}).catch(i=>{e(new jp(bf(i),i))}):e(new jp(bf(t),t))}),o$=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?i:(r$(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),r))};function vc(t,e,r,n,i,o){return X(this,void 0,void 0,function*(){return new Promise((a,s)=>{t(r,o$(e,n,i,o)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>i$(c,s,n))})})}function qs(t,e,r,n){return X(this,void 0,void 0,function*(){return vc(t,"GET",e,r,n)})}function hr(t,e,r,n,i){return X(this,void 0,void 0,function*(){return vc(t,"POST",e,n,i,r)})}function Lp(t,e,r,n,i){return X(this,void 0,void 0,function*(){return vc(t,"PUT",e,n,i,r)})}function a$(t,e,r,n){return X(this,void 0,void 0,function*(){return vc(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function Mm(t,e,r,n,i){return X(this,void 0,void 0,function*(){return vc(t,"DELETE",e,n,i,r)})}class s${constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r}then(e,r){return this.execute().then(e,r)}execute(){return X(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Me(e))return{data:null,error:e};throw e}})}}var nE;class c${constructor(e,r){this.downloadFn=e,this.shouldThrowOnError=r,this[nE]="BlobDownloadBuilder",this.promise=null}asStream(){return new s$(this.downloadFn,this.shouldThrowOnError)}then(e,r){return this.getPromise().then(e,r)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return X(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Me(e))return{data:null,error:e};throw e}})}}nE=Symbol.toStringTag;const l$={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},V_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class u${constructor(e,r={},n,i){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=Nm(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,i){return X(this,void 0,void 0,function*(){try{let o;const a=Object.assign(Object.assign({},V_),i);let s=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",a.cacheControl),c&&o.append("metadata",this.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",a.cacheControl),c&&!o.has("metadata")&&o.append("metadata",this.encodeMetadata(c))):(o=n,s["cache-control"]=`max-age=${a.cacheControl}`,s["content-type"]=a.contentType,c&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!a.duplex&&(a.duplex="half")),i!=null&&i.headers&&(s=Object.assign(Object.assign({},s),i.headers));const l=this._removeEmptyFolders(r),u=this._getFinalPath(l),d=yield(e=="PUT"?Lp:hr)(this.fetch,`${this.url}/object/${u}`,o,Object.assign({headers:s},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Me(o))return{data:null,error:o};throw o}})}upload(e,r,n){return X(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,i){return X(this,void 0,void 0,function*(){const o=this._removeEmptyFolders(e),a=this._getFinalPath(o),s=new URL(this.url+`/object/upload/sign/${a}`);s.searchParams.set("token",r);try{let c;const l=Object.assign({upsert:V_.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",l.cacheControl)):(c=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const d=yield Lp(this.fetch,s.toString(),c,{headers:u});return{data:{path:o,fullPath:d.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Me(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return X(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const o=yield hr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),a=new URL(this.url+o.url),s=a.searchParams.get("token");if(!s)throw new md("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:s},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}})}update(e,r,n){return X(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return X(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}copy(e,r,n){return X(this,void 0,void 0,function*(){try{return{data:{path:(yield hr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}createSignedUrl(e,r,n){return X(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),o=yield hr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o={signedUrl:encodeURI(`${this.url}${o.signedURL}${a}`)},{data:o,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}createSignedUrls(e,r,n){return X(this,void 0,void 0,function*(){try{const i=yield hr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${o}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}download(e,r){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=o?`?${o}`:"",s=this._getFinalPath(e),c=()=>qs(this.fetch,`${this.url}/${i}/${s}${a}`,{headers:this.headers,noResolveJson:!0});return new c$(c,this.shouldThrowOnError)}info(e){return X(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield qs(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ap(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}})}exists(e){return X(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield a$(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Me(n)&&n instanceof jp){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),i=[],o=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";o!==""&&i.push(o);const s=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&i.push(c);let l=i.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${s}/public/${n}${l}`)}}}remove(e){return X(this,void 0,void 0,function*(){try{return{data:yield Mm(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}list(e,r,n){return X(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},l$),r),{prefix:e||""});return{data:yield hr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}listV2(e,r){return X(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield hr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const iE="2.86.0",oE={"X-Client-Info":`storage-js/${iE}`};class d${constructor(e,r={},n,i){this.shouldThrowOnError=!1;const o=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oE),r),this.fetch=Nm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return X(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(e);return{data:yield qs(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}getBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield qs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}createBucket(e){return X(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield hr(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Me(i))return{data:null,error:i};throw i}})}updateBucket(e,r){return X(this,void 0,void 0,function*(){try{return{data:yield Lp(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Me(n))return{data:null,error:n};throw n}})}emptyBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}deleteBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield Mm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(e){const r={};return e&&("limit"in e&&(r.limit=String(e.limit)),"offset"in e&&(r.offset=String(e.offset)),e.search&&(r.search=e.search),e.sortColumn&&(r.sortColumn=e.sortColumn),e.sortOrder&&(r.sortOrder=e.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}var Ks=class extends Error{constructor(t,e){var r;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((r=e.icebergType)==null?void 0:r.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function f$(t,e,r){const n=new URL(e,t);if(r)for(const[i,o]of Object.entries(r))o!==void 0&&n.searchParams.set(i,o);return n.toString()}async function h$(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function p$(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:r,path:n,query:i,body:o,headers:a}){const s=f$(t.baseUrl,n,i),c=await h$(t.auth),l=await e(s,{method:r,headers:{...o?{"Content-Type":"application/json"}:{},...c,...a},body:o?JSON.stringify(o):void 0}),u=await l.text(),d=(l.headers.get("content-type")||"").includes("application/json"),h=d&&u?JSON.parse(u):u;if(!l.ok){const f=d?h:void 0,_=f==null?void 0:f.error;throw new Ks((_==null?void 0:_.message)??`Request failed with status ${l.status}`,{status:l.status,icebergType:_==null?void 0:_.type,icebergCode:_==null?void 0:_.code,details:f})}return{status:l.status,headers:l.headers,data:h}}}}function il(t){return t.join("")}var v$=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:il(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(n=>({namespace:n}))}async createNamespace(t,e){const r={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:r})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${il(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${il(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${il(t.namespace)}`}),!0}catch(e){if(e instanceof Ks&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(r){if(r instanceof Ks&&r.status===409)return;throw r}}};function go(t){return t.join("")}var m$=class{constructor(t,e="",r){this.client=t,this.prefix=e,this.accessDelegation=r}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${go(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${go(t.namespace)}/tables`,body:e,headers:r})).data.metadata}async updateTable(t,e){const r=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${go(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":r.data["metadata-location"],metadata:r.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${go(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${go(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${go(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(r){if(r instanceof Ks&&r.status===404)return!1;throw r}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(r){if(r instanceof Ks&&r.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw r}}},g$=class{constructor(t){var n;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const r=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=p$({baseUrl:r,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(n=t.accessDelegation)==null?void 0:n.join(","),this.namespaceOps=new v$(this.client,e),this.tableOps=new m$(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}};class y${constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},oE),r),this.fetch=Nm(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield hr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}listBuckets(e){return X(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&r.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&r.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&r.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&r.set("sortOrder",e.sortOrder),e!=null&&e.search&&r.set("search",e.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield qs(this.fetch,i,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}deleteBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield Mm(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Me(r))return{data:null,error:r};throw r}})}from(e){if(!n$(e))throw new md("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new g$({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:()=>X(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const Dm={"X-Client-Info":`storage-js/${iE}`,"Content-Type":"application/json"};class aE extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function $t(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Sf extends aE{constructor(e,r,n){super(e),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _$ extends aE{constructor(e,r){super(e),this.name="StorageVectorsUnknownError",this.originalError=r}}var z_;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(z_||(z_={}));const $m=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),w$=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},W_=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),b$=(t,e,r)=>X(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(r!=null&&r.noResolveJson)){const i=t.status||500,o=t;if(typeof o.json=="function")o.json().then(a=>{const s=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||i+"";e(new Sf(W_(a),i,s))}).catch(()=>{const a=i+"",s=o.statusText||`HTTP ${i} error`;e(new Sf(s,i,a))});else{const a=i+"",s=o.statusText||`HTTP ${i} error`;e(new Sf(s,i,a))}}else e(new _$(W_(t),t))}),S$=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return n?(w$(n)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function k$(t,e,r,n,i,o){return X(this,void 0,void 0,function*(){return new Promise((a,s)=>{t(r,S$(e,n,i,o)).then(c=>{if(!c.ok)throw c;if(n!=null&&n.noResolveJson)return c;const l=c.headers.get("content-type");return!l||!l.includes("application/json")?{}:c.json()}).then(c=>a(c)).catch(c=>b$(c,s,n))})})}function Ft(t,e,r,n,i){return X(this,void 0,void 0,function*(){return k$(t,"POST",e,n,i,r)})}class x${constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Dm),r),this.fetch=$m(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return X(this,void 0,void 0,function*(){try{return{data:(yield Ft(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}getIndex(e,r){return X(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}listIndexes(e){return X(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}deleteIndex(e,r){return X(this,void 0,void 0,function*(){try{return{data:(yield Ft(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}}class T${constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Dm),r),this.fetch=$m(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return X(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ft(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}getVectors(e){return X(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}listVectors(e){return X(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Ft(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}queryVectors(e){return X(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}deleteVectors(e){return X(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ft(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}}class E${constructor(e,r={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Dm),r),this.fetch=$m(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return X(this,void 0,void 0,function*(){try{return{data:(yield Ft(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}getBucket(e){return X(this,void 0,void 0,function*(){try{return{data:yield Ft(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}listBuckets(){return X(this,arguments,void 0,function*(e={}){try{return{data:yield Ft(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}deleteBucket(e){return X(this,void 0,void 0,function*(){try{return{data:(yield Ft(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}}class C$ extends E${constructor(e,r={}){super(e,r.headers||{},r.fetch)}from(e){return new P$(this.url,this.headers,e,this.fetch)}createBucket(e){const r=Object.create(null,{createBucket:{get:()=>super.createBucket}});return X(this,void 0,void 0,function*(){return r.createBucket.call(this,e)})}getBucket(e){const r=Object.create(null,{getBucket:{get:()=>super.getBucket}});return X(this,void 0,void 0,function*(){return r.getBucket.call(this,e)})}listBuckets(){const e=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return X(this,arguments,void 0,function*(r={}){return e.listBuckets.call(this,r)})}deleteBucket(e){const r=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return X(this,void 0,void 0,function*(){return r.deleteBucket.call(this,e)})}}class P$ extends x${constructor(e,r,n,i){super(e,r,i),this.vectorBucketName=n}createIndex(e){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return X(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return X(this,arguments,void 0,function*(r={}){return e.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return X(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return X(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new O$(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class O$ extends T${constructor(e,r,n,i,o){super(e,r,o),this.vectorBucketName=n,this.indexName=i}putVectors(e){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return X(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return X(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return X(this,arguments,void 0,function*(r={}){return e.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return X(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return X(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class R$ extends d${constructor(e,r={},n,i){super(e,r,n,i)}from(e){return new u$(this.url,this.headers,e,this.fetch)}get vectors(){return new C$(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new y$(this.url+"/iceberg",this.headers,this.fetch)}}const j$="2.86.0";let os="";typeof Deno<"u"?os="deno":typeof document<"u"?os="web":typeof navigator<"u"&&navigator.product==="ReactNative"?os="react-native":os="node";const A$={"X-Client-Info":`supabase-js-${os}/${j$}`},L$={headers:A$},I$={schema:"public"},N$={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},M$={},D$=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),$$=()=>Headers,F$=(t,e,r)=>{const n=D$(r),i=$$();return async(o,a)=>{var s;const c=(s=await e())!==null&&s!==void 0?s:t;let l=new i(a==null?void 0:a.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),n(o,Object.assign(Object.assign({},a),{headers:l}))}};function U$(t){return t.endsWith("/")?t:t+"/"}function B$(t,e){var r,n;const{db:i,auth:o,realtime:a,global:s}=t,{db:c,auth:l,realtime:u,global:d}=e,h={db:Object.assign(Object.assign({},c),i),auth:Object.assign(Object.assign({},l),o),realtime:Object.assign(Object.assign({},u),a),storage:{},global:Object.assign(Object.assign(Object.assign({},d),s),{headers:Object.assign(Object.assign({},(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{}),(n=s==null?void 0:s.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return t.accessToken?h.accessToken=t.accessToken:delete h.accessToken,h}function V$(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(U$(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const sE="2.86.0",Oo=30*1e3,Ip=3,kf=Ip*Oo,z$="http://localhost:9999",W$="supabase.auth.token",H$={"X-Client-Info":`gotrue-js/${sE}`},Np="X-Supabase-Api-Version",cE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},q$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,K$=10*60*1e3;class Gs extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function re(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class G$ extends Gs{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Q$(t){return re(t)&&t.name==="AuthApiError"}class Ri extends Gs{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class di extends Gs{constructor(e,r,n,i){super(e,n,i),this.name=r,this.status=n}}class Nt extends di{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function J$(t){return re(t)&&t.name==="AuthSessionMissingError"}class yo extends di{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ol extends di{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class al extends di{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Y$(t){return re(t)&&t.name==="AuthImplicitGrantRedirectError"}class H_ extends di{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mp extends di{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function xf(t){return re(t)&&t.name==="AuthRetryableFetchError"}class q_ extends di{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Dp extends di{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),K_=` 	
\r=`.split(""),X$=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<K_.length;e+=1)t[K_[e].charCodeAt(0)]=-2;for(let e=0;e<Tu.length;e+=1)t[Tu[e].charCodeAt(0)]=e;return t})();function G_(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Tu[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Tu[n]),e.queuedBits-=6}}function lE(t,e,r){const n=X$[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Q_(t){const e=[],r=a=>{e.push(String.fromCodePoint(a))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=a=>{tF(a,n,r)};for(let a=0;a<t.length;a+=1)lE(t.charCodeAt(a),i,o);return e.join("")}function Z$(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function eF(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}Z$(n,e)}}function tF(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function ta(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)lE(t.charCodeAt(i),r,n);return new Uint8Array(e)}function rF(t){const e=[];return eF(t,r=>e.push(r)),new Uint8Array(e)}function Ni(t){const e=[],r={queue:0,queuedBits:0},n=i=>{e.push(i)};return t.forEach(i=>G_(i,r,n)),G_(null,r,n),e.join("")}function nF(t){return Math.round(Date.now()/1e3)+t}function iF(){return Symbol("auth-callback")}const rt=()=>typeof window<"u"&&typeof document<"u",yi={tested:!1,writable:!1},uE=()=>{if(!rt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(yi.tested)return yi.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),yi.tested=!0,yi.writable=!0}catch{yi.tested=!0,yi.writable=!1}return yi.writable};function oF(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,o)=>{e[o]=i})}catch{}return r.searchParams.forEach((n,i)=>{e[i]=n}),e}const dE=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),aF=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Ro=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},_i=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},En=async(t,e)=>{await t.removeItem(e)};class gd{constructor(){this.promise=new gd.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}gd.promiseConstructor=Promise;function Tf(t){const e=t.split(".");if(e.length!==3)throw new Dp("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!q$.test(e[n]))throw new Dp("JWT not in base64url format");return{header:JSON.parse(Q_(e[0])),payload:JSON.parse(Q_(e[1])),signature:ta(e[2]),raw:{header:e[0],payload:e[1]}}}async function sF(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function cF(t,e){return new Promise((n,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{const a=await t(o);if(!e(o,null,a)){n(a);return}}catch(a){if(!e(o,a)){i(a);return}}})()})}function lF(t){return("0"+t.toString(16)).substr(-2)}function uF(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let o=0;o<56;o++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(e),Array.from(e,lF).join("")}async function dF(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function fF(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await dF(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function _o(t,e,r=!1){const n=uF();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await Ro(t,`${e}-code-verifier`,i);const o=await fF(n);return[o,n===o?"plain":"s256"]}const hF=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pF(t){const e=t.headers.get(Np);if(!e||!e.match(hF))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vF(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function mF(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const gF=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function wo(t){if(!gF.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Ef(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yF(t,e){return new Proxy(t,{get:(r,n,i)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,n,i)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(r,n,i)}})}function J_(t){return JSON.parse(JSON.stringify(t))}const Ci=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),_F=[502,503,504];async function Y_(t){var e;if(!aF(t))throw new Mp(Ci(t),0);if(_F.includes(t.status))throw new Mp(Ci(t),t.status);let r;try{r=await t.json()}catch(o){throw new Ri(Ci(o),o)}let n;const i=pF(t);if(i&&i.getTime()>=cE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new q_(Ci(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Nt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((o,a)=>o&&typeof a=="string",!0))throw new q_(Ci(r),t.status,r.weak_password.reasons);throw new G$(Ci(r),t.status||500,n)}const wF=(t,e,r,n)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function se(t,e,r,n){var i;const o=Object.assign({},n==null?void 0:n.headers);o[Np]||(o[Np]=cE["2024-01-01"].name),n!=null&&n.jwt&&(o.Authorization=`Bearer ${n.jwt}`);const a=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(a.redirect_to=n.redirectTo);const s=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await bF(t,e,r+s,{headers:o,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function bF(t,e,r,n,i,o){const a=wF(e,n,i,o);let s;try{s=await t(r,Object.assign({},a))}catch(c){throw console.error(c),new Mp(Ci(c),0)}if(s.ok||await Y_(s),n!=null&&n.noResolveJson)return s;try{return await s.json()}catch(c){await Y_(c)}}function lr(t){var e;let r=null;xF(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=nF(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function X_(t){const e=lr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Dn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function SF(t){return{data:t,error:null}}function kF(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o}=t,a=ui(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:e,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o},c=Object.assign({},a);return{data:{properties:s,user:c},error:null}}function Z_(t){return t}function xF(t){return t.access_token&&t.refresh_token&&t.expires_in}const Cf=["global","local","others"];class TF{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=dE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,r=Cf[0]){if(Cf.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cf.join(", ")}`);try{return await se(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(re(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await se(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Dn})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=ui(e,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await se(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:kF,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(re(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await se(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Dn})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,i,o,a,s,c;try{const l={nextPage:null,lastPage:0,total:0},u=await se(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Z_});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(c=(s=u.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(_=>{const v=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(_.split(";")[1].split("=")[1]);l[`${g}Page`]=v}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(re(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){wo(e);try{return await se(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Dn})}catch(r){if(re(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){wo(e);try{return await se(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:Dn})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){wo(e);try{return await se(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:Dn})}catch(n){if(re(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){wo(e.userId);try{const{data:r,error:n}=await se(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _deleteFactor(e){wo(e.userId),wo(e.id);try{return{data:await se(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _listOAuthClients(e){var r,n,i,o,a,s,c;try{const l={nextPage:null,lastPage:0,total:0},u=await se(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(o=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Z_});if(u.error)throw u.error;const d=await u.json(),h=(a=u.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(c=(s=u.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(_=>{const v=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(_.split(";")[1].split("=")[1]);l[`${g}Page`]=v}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(re(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _getOAuthClient(e){try{return await se(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}async _updateOAuthClient(e,r){try{return await se(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(re(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await se(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(re(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(e){try{return await se(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(re(r))return{data:null,error:r};throw r}}}function ew(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}const bo={debug:!!(globalThis&&uE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fE extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class EF extends fE{}async function CF(t,e,r){bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),bo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await r()}finally{bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new EF(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(bo.debug)try{const o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function PF(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function hE(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function OF(t){return parseInt(t,16)}function RF(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function jF(t){var e;const{chainId:r,domain:n,expirationTime:i,issuedAt:o=new Date,nonce:a,notBefore:s,requestId:c,resources:l,scheme:u,uri:d,version:h}=t;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const f=hE(t.address),_=u?`${u}://${n}`:n,v=t.statement?`${t.statement}
`:"",g=`${_} wants you to sign in with your Ethereum account:
${f}

${v}`;let y=`URI: ${d}
Version: ${h}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${o.toISOString()}`;if(i&&(y+=`
Expiration Time: ${i.toISOString()}`),s&&(y+=`
Not Before: ${s.toISOString()}`),c&&(y+=`
Request ID: ${c}`),l){let m=`
Resources:`;for(const w of l){if(!w||typeof w!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${w}`);m+=`
- ${w}`}y+=m}return`${g}
${y}`}class He extends Error{constructor({message:e,code:r,cause:n,name:i}){var o;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(o=i??(n instanceof Error?n.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=r}}class Eu extends He{constructor(e,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:e}),this.name="WebAuthnUnknownError",this.originalError=r}}function AF({error:t,options:e}){var r,n,i;const{publicKey:o}=e;if(!o)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new He({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((r=o.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new He({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((n=o.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new He({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new He({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new He({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new He({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return o.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new He({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new He({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const a=window.location.hostname;if(pE(a)){if(o.rp.id!==a)return new He({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new He({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new He({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new He({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new He({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function LF({error:t,options:e}){const{publicKey:r}=e;if(!r)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new He({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new He({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const n=window.location.hostname;if(pE(n)){if(r.rpId!==n)return new He({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new He({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new He({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new He({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class IF{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const NF=new IF;function MF(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:r,excludeCredentials:n}=t,i=ui(t,["challenge","user","excludeCredentials"]),o=ta(e).buffer,a=Object.assign(Object.assign({},r),{id:ta(r.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:o,user:a});if(n&&n.length>0){s.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const l=n[c];s.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:ta(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function DF(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:r}=t,n=ui(t,["challenge","allowCredentials"]),i=ta(e).buffer,o=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){o.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const s=r[a];o.allowCredentials[a]=Object.assign(Object.assign({},s),{id:ta(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return o}function $F(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ni(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ni(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function FF(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const r=t,n=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ni(new Uint8Array(i.authenticatorData)),clientDataJSON:Ni(new Uint8Array(i.clientDataJSON)),signature:Ni(new Uint8Array(i.signature)),userHandle:i.userHandle?Ni(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=r.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function pE(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function tw(){var t,e;return!!(rt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function UF(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Eu("Browser returned unexpected credential type",e)}:{data:null,error:new Eu("Empty credential response",e)}}catch(e){return{data:null,error:AF({error:e,options:t})}}}async function BF(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Eu("Browser returned unexpected credential type",e)}:{data:null,error:new Eu("Empty credential response",e)}}catch(e){return{data:null,error:LF({error:e,options:t})}}}const VF={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},zF={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Cu(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of t)if(i)for(const o in i){const a=i[o];if(a!==void 0)if(Array.isArray(a))n[o]=a;else if(r(a))n[o]=a;else if(e(a)){const s=n[o];e(s)?n[o]=Cu(s,a):n[o]=Cu(a)}else n[o]=a}return n}function WF(t,e){return Cu(VF,t,e||{})}function HF(t,e){return Cu(zF,t,e||{})}class qF{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:r,friendlyName:n,signal:i},o){try{const{data:a,error:s}=await this.client.mfa.challenge({factorId:e,webauthn:r});if(!a)return{data:null,error:s};const c=i??NF.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:l}=a.webauthn.credential_options.publicKey;l.name||(l.name=`${l.id}:${n}`),l.displayName||(l.displayName=l.name)}switch(a.webauthn.type){case"create":{const l=WF(a.webauthn.credential_options.publicKey,o==null?void 0:o.create),{data:u,error:d}=await UF({publicKey:l,signal:c});return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}case"request":{const l=HF(a.webauthn.credential_options.publicKey,o==null?void 0:o.request),{data:u,error:d}=await BF(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:l,signal:c}));return u?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:u}},error:null}:{data:null,error:d}}}}catch(a){return re(a)?{data:null,error:a}:{data:null,error:new Ri("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!r)return{data:null,error:new Gs("rpId is required for WebAuthn authentication")};try{if(!tw())return{data:null,error:new Ri("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this.challenge({factorId:e,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:o});if(!a)return{data:null,error:s};const{webauthn:c}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:c.type,rpId:r,rpOrigins:n,credential_response:c.credential_response}})}catch(a){return re(a)?{data:null,error:a}:{data:null,error:new Ri("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!r)return{data:null,error:new Gs("rpId is required for WebAuthn registration")};try{if(!tw())return{data:null,error:new Ri("Browser does not support WebAuthn",null)};const{data:a,error:s}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(u=>{var d;return(d=u.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===e&&h.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:s};const{data:c,error:l}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:o});return c?this._verify({factorId:a.id,challengeId:c.challengeId,webauthn:{rpId:r,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:l}}catch(a){return re(a)?{data:null,error:a}:{data:null,error:new Ri("Unexpected error in register",a)}}}}PF();const KF={url:z$,storageKey:W$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:H$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function rw(t,e,r){return await r()}const So={};class Qs{get jwks(){var e,r;return(r=(e=So[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){So[this.storageKey]=Object.assign(Object.assign({},So[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=So[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){So[this.storageKey]=Object.assign(Object.assign({},So[this.storageKey]),{cachedAt:e})}constructor(e){var r,n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const o=Object.assign(Object.assign({},KF),e);if(this.storageKey=o.storageKey,this.instanceID=(r=Qs.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Qs.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&rt()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new TF({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=dE(o.fetch),this.lock=o.lock||rw,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,o.lock?this.lock=o.lock:rt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=CF:this.lock=rw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new qF(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:uE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ew(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=ew(this.memoryStorage)),rt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${sE}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let r={},n="none";if(rt()&&(r=oF(window.location.href),this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce")),rt()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:o}=await this._getSessionFromURL(r,n);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),Y$(o)){const c=(e=o.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:o}}return await this._removeSession(),{error:o}}const{session:a,redirectType:s}=i;return this._debug("#_initialize()","detected session in URL",a,"redirect type",s),await this._saveSession(a),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return re(r)?this._returnResult({error:r}):this._returnResult({error:new Ri("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,i;try{const o=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:lr}),{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const c=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(o){if(re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signUp(e){var r,n,i;try{let o;if("email"in e){const{email:u,password:d,options:h}=e;let f=null,_=null;this.flowType==="pkce"&&([f,_]=await _o(this.storage,this.storageKey)),o=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:u,password:d,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:f,code_challenge_method:_},xform:lr})}else if("phone"in e){const{phone:u,password:d,options:h}=e;o=await se(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:lr})}else throw new ol("You must provide either an email or phone number and a password");const{data:a,error:s}=o;if(s||!a)return this._returnResult({data:{user:null,session:null},error:s});const c=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(o){if(re(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithPassword(e){try{let r;if("email"in e){const{email:o,password:a,options:s}=e;r=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:X_})}else if("phone"in e){const{phone:o,password:a,options:s}=e;r=await se(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:X_})}else throw new ol("You must provide either an email or phone number and a password");const{data:n,error:i}=r;if(i)return this._returnResult({data:{user:null,session:null},error:i});if(!n||!n.session||!n.user){const o=new yo;return this._returnResult({data:{user:null,session:null},error:o})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(e){var r,n,i,o;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;switch(r){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(e){var r,n,i,o,a,s,c,l,u,d,h;let f,_;if("message"in e)f=e.message,_=e.signature;else{const{chain:v,wallet:g,statement:y,options:m}=e;let w;if(rt())if(typeof g=="object")w=g;else{const R=window;if("ethereum"in R&&typeof R.ethereum=="object"&&"request"in R.ethereum&&typeof R.ethereum.request=="function")w=R.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(m!=null&&m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}const S=new URL((r=m==null?void 0:m.url)!==null&&r!==void 0?r:window.location.href),k=await w.request({method:"eth_requestAccounts"}).then(R=>R).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!k||k.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const E=hE(k[0]);let x=(n=m==null?void 0:m.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!x){const R=await w.request({method:"eth_chainId"});x=OF(R)}const C={domain:S.host,address:E,statement:y,uri:S.href,version:"1",chainId:x,nonce:(i=m==null?void 0:m.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(a=(o=m==null?void 0:m.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(s=m==null?void 0:m.signInWithEthereum)===null||s===void 0?void 0:s.expirationTime,notBefore:(c=m==null?void 0:m.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(l=m==null?void 0:m.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(u=m==null?void 0:m.signInWithEthereum)===null||u===void 0?void 0:u.resources};f=jF(C),_=await w.request({method:"personal_sign",params:[RF(f),E]})}try{const{data:v,error:g}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:f,signature:_},!((d=e.options)===null||d===void 0)&&d.captchaToken?{gotrue_meta_security:{captcha_token:(h=e.options)===null||h===void 0?void 0:h.captchaToken}}:null),xform:lr});if(g)throw g;if(!v||!v.session||!v.user){const y=new yo;return this._returnResult({data:{user:null,session:null},error:y})}return v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),this._returnResult({data:Object.assign({},v),error:g})}catch(v){if(re(v))return this._returnResult({data:{user:null,session:null},error:v});throw v}}async signInWithSolana(e){var r,n,i,o,a,s,c,l,u,d,h,f;let _,v;if("message"in e)_=e.message,v=e.signature;else{const{chain:g,wallet:y,statement:m,options:w}=e;let S;if(rt())if(typeof y=="object")S=y;else{const E=window;if("solana"in E&&typeof E.solana=="object"&&("signIn"in E.solana&&typeof E.solana.signIn=="function"||"signMessage"in E.solana&&typeof E.solana.signMessage=="function"))S=E.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");S=y}const k=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in S&&S.signIn){const E=await S.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:k.host,uri:k.href}),m?{statement:m}:null));let x;if(Array.isArray(E)&&E[0]&&typeof E[0]=="object")x=E[0];else if(E&&typeof E=="object"&&"signedMessage"in E&&"signature"in E)x=E;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in x&&"signature"in x&&(typeof x.signedMessage=="string"||x.signedMessage instanceof Uint8Array)&&x.signature instanceof Uint8Array)_=typeof x.signedMessage=="string"?x.signedMessage:new TextDecoder().decode(x.signedMessage),v=x.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in S)||typeof S.signMessage!="function"||!("publicKey"in S)||typeof S!="object"||!S.publicKey||!("toBase58"in S.publicKey)||typeof S.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");_=[`${k.host} wants you to sign in with your Solana account:`,S.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${k.href}`,`Issued At: ${(i=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w==null?void 0:w.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((s=w==null?void 0:w.signInWithSolana)===null||s===void 0)&&s.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((d=(u=w==null?void 0:w.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||d===void 0)&&d.length?["Resources",...w.signInWithSolana.resources.map(x=>`- ${x}`)]:[]].join(`
`);const E=await S.signMessage(new TextEncoder().encode(_),"utf8");if(!E||!(E instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=E}}try{const{data:g,error:y}=await se(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:_,signature:Ni(v)},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:lr});if(y)throw y;if(!g||!g.session||!g.user){const m=new yo;return this._returnResult({data:{user:null,session:null},error:m})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:y})}catch(g){if(re(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(e){const r=await _i(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:o,error:a}=await se(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:lr});if(await En(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!o||!o.session||!o.user){const s=new yo;return this._returnResult({data:{user:null,session:null,redirectType:null},error:s})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:i??null}),error:a})}catch(o){if(re(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}}async signInWithIdToken(e){try{const{options:r,provider:n,token:i,access_token:o,nonce:a}=e,s=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:lr}),{data:c,error:l}=s;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c||!c.session||!c.user){const u=new yo;return this._returnResult({data:{user:null,session:null},error:u})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:l})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(e){var r,n,i,o,a;try{if("email"in e){const{email:s,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await _o(this.storage,this.storageKey));const{error:d}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}if("phone"in e){const{phone:s,options:c}=e,{data:l,error:u}=await se(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:(i=c==null?void 0:c.data)!==null&&i!==void 0?i:{},create_user:(o=c==null?void 0:c.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(a=c==null?void 0:c.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u})}throw new ol("You must provide either an email or phone number.")}catch(s){if(re(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async verifyOtp(e){var r,n;try{let i,o;"options"in e&&(i=(r=e.options)===null||r===void 0?void 0:r.redirectTo,o=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:a,error:s}=await se(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:i,xform:lr});if(s)throw s;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,l=a.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(i){if(re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithSSO(e){var r,n,i,o,a;try{let s=null,c=null;this.flowType==="pkce"&&([s,c]=await _o(this.storage,this.storageKey));const l=await se(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:c}),headers:this.headers,xform:SF});return!((o=l.data)===null||o===void 0)&&o.url&&rt()&&!(!((a=e.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(s){if(re(s))return this._returnResult({data:null,error:s});throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Nt;const{error:i}=await se(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:i})})}catch(e){if(re(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:i,options:o}=e,{error:a}=await se(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},redirectTo:o==null?void 0:o.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in e){const{phone:n,type:i,options:o}=e,{data:a,error:s}=await se(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:s})}throw new ol("You must provide either an email or phone number and a type")}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await _i(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<kf:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const a=await _i(this.userStorage,this.storageKey+"-user");a!=null&&a.user?e.user=a.user:e.user=Ef()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};e.user=yF(e.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:i},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Dn}):await this._useSession(async r=>{var n,i,o;const{data:a,error:s}=r;if(s)throw s;return!(!((n=a.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Nt}:await se(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0,xform:Dn})})}catch(r){if(re(r))return J$(r)&&(await this._removeSession(),await En(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:i,error:o}=n;if(o)throw o;if(!i.session)throw new Nt;const a=i.session;let s=null,c=null;this.flowType==="pkce"&&e.email!=null&&([s,c]=await _o(this.storage,this.storageKey));const{data:l,error:u}=await se(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:c}),jwt:a.access_token,xform:Dn});if(u)throw u;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(n){if(re(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Nt;const r=Date.now()/1e3;let n=r,i=!0,o=null;const{payload:a}=Tf(e.access_token);if(a.exp&&(n=a.exp,i=n<=r),i){const{data:s,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!s)return{data:{user:null,session:null},error:null};o=s}else{const{data:s,error:c}=await this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(r){if(re(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:a,error:s}=r;if(s)throw s;e=(n=a.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Nt;const{data:i,error:o}=await this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):i?this._returnResult({data:{user:i.user,session:i},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(re(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(e,r){try{if(!rt())throw new al("No browser detected.");if(e.error||e.error_description||e.error_code)throw new al(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new H_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new al("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new H_("No code detected.");const{data:m,error:w}=await this._exchangeCodeForSession(e.code);if(w)throw w;const S=new URL(window.location.href);return S.searchParams.delete("code"),window.history.replaceState(window.history.state,"",S.toString()),{data:{session:m.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:o,refresh_token:a,expires_in:s,expires_at:c,token_type:l}=e;if(!o||!s||!a||!l)throw new al("No session defined in URL");const u=Math.round(Date.now()/1e3),d=parseInt(s);let h=u+d;c&&(h=parseInt(c));const f=h-u;f*1e3<=Oo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${d}s`);const _=h-d;u-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,h,u):u-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",_,h,u);const{data:v,error:g}=await this._getUser(o);if(g)throw g;const y={provider_token:n,provider_refresh_token:i,access_token:o,expires_in:d,expires_at:h,refresh_token:a,token_type:l,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:y,redirectType:e.type},error:null})}catch(n){if(re(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await _i(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({error:o});const a=(n=i.session)===null||n===void 0?void 0:n.access_token;if(a){const{error:s}=await this.admin.signOut(a,e);if(s&&!(Q$(s)&&(s.status===404||s.status===401||s.status===403)))return this._returnResult({error:s})}return e!=="others"&&(await this._removeSession(),await En(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const r=iF(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,i;try{const{data:{session:o},error:a}=r;if(a)throw a;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",o)),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}})}async resetPasswordForEmail(e,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await _o(this.storage,this.storageKey,!0));try{return await se(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(o){if(re(o))return this._returnResult({data:null,error:o});throw o}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var r;try{const{data:n,error:i}=await this._useSession(async o=>{var a,s,c,l,u;const{data:d,error:h}=o;if(h)throw h;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(s=e.options)===null||s===void 0?void 0:s.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await se(this.fetch,"GET",f,{headers:this.headers,jwt:(u=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return rt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),this._returnResult({data:{provider:e.provider,url:n==null?void 0:n.url},error:null})}catch(n){if(re(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:o}}=r;if(i)throw i;const{options:a,provider:s,token:c,access_token:l,nonce:u}=e,d=await se(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=o==null?void 0:o.access_token)!==null&&n!==void 0?n:void 0,body:{provider:s,id_token:c,access_token:l,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:lr}),{data:h,error:f}=d;return f?this._returnResult({data:{user:null,session:null},error:f}):!h||!h.session||!h.user?this._returnResult({data:{user:null,session:null},error:new yo}):(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("USER_UPDATED",h.session)),this._returnResult({data:h,error:f}))}catch(i){if(re(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}})}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,i;const{data:o,error:a}=r;if(a)throw a;return await se(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(n=o.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await cF(async i=>(i>0&&await sF(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await se(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:lr})),(i,o)=>{const a=200*Math.pow(2,i);return o&&xf(o)&&Date.now()+a-n<Oo})}catch(n){if(this._debug(r,"error",n),re(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),rt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await _i(this.storage,this.storageKey);if(i&&this.userStorage){let a=await _i(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:i.user},await Ro(this.userStorage,this.storageKey+"-user",a)),i.user=(e=a==null?void 0:a.user)!==null&&e!==void 0?e:Ef()}else if(i&&!i.user&&!i.user){const a=await _i(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(i.user=a.user,await En(this.storage,this.storageKey+"-user"),await Ro(this.storage,this.storageKey,i)):i.user=Ef()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const o=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<kf;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${kf}s`),o){if(this.autoRefreshToken&&i.refresh_token){const{error:a}=await this._callRefreshToken(i.refresh_token);a&&(console.error(a),xf(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:s}=await this._getUser(i.access_token);!s&&(a!=null&&a.user)?(i.user=a.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(n,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Nt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new gd;const{data:o,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new Nt;await this._saveSession(o.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);const s={data:o.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(o){if(this._debug(i,"error",o),re(o)){const a={data:null,error:o};return xf(o)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(o),o}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,r,n=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const o=[],a=Array.from(this.stateChangeEmitters.values()).map(async s=>{try{await s.callback(e,r)}catch(c){o.push(c)}});if(await Promise.all(a),o.length>0){for(let s=0;s<o.length;s+=1)console.error(o[s]);throw o[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Ro(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const o=J_(i);await Ro(this.storage,this.storageKey,o)}else{const i=J_(r);await Ro(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await En(this.storage,this.storageKey),await En(this.storage,this.storageKey+"-code-verifier"),await En(this.storage,this.storageKey+"-user"),this.userStorage&&await En(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&rt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Oo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-e)/Oo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Oo}ms, refresh threshold is ${Ip} ticks`),i<=Ip&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof fE)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!rt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[o,a]=await _o(this.storage,this.storageKey),s=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});i.push(s.toString())}if(n!=null&&n.queryParams){const o=new URLSearchParams(n.queryParams);i.push(o.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;return o?this._returnResult({data:null,error:o}):await se(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,i;const{data:o,error:a}=r;if(a)return this._returnResult({data:null,error:a});const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:l}=await se(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:(n=o==null?void 0:o.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(e.factorType==="totp"&&c.type==="totp"&&(!((i=c==null?void 0:c.totp)===null||i===void 0)&&i.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?$F(e.webauthn.credential_response):FF(e.webauthn.credential_response)})}:{code:e.code}),{data:s,error:c}=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),this._returnResult({data:s,error:c}))})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:o}=r;if(o)return this._returnResult({data:null,error:o});const a=await se(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});if(a.error)return a;const{data:s}=a;if(s.type!=="webauthn")return{data:s,error:null};switch(s.webauthn.type){case"create":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:MF(s.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},s),{webauthn:Object.assign(Object.assign({},s.webauthn),{credential_options:Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:DF(s.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){var e;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const o of(e=r==null?void 0:r.factors)!==null&&e!==void 0?e:[])i.all.push(o),o.status==="verified"&&i[o.factor_type].push(o);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){var e,r;const{data:{session:n},error:i}=await this.getSession();if(i)return this._returnResult({data:null,error:i});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Tf(n.access_token);let a=null;o.aal&&(a=o.aal);let s=a;((r=(e=n.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(s="aal2");const l=o.amr||[];return{data:{currentLevel:a,nextLevel:s,currentAuthenticationMethods:l},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?await se(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Nt})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Nt});const a=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"approve"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&rt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,r){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;if(o)return this._returnResult({data:null,error:o});if(!i)return this._returnResult({data:null,error:new Nt});const a=await se(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:i.access_token,body:{action:"deny"},xform:s=>({data:s,error:null})});return a.data&&a.data.redirect_url&&rt()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;return n?this._returnResult({data:null,error:n}):r?await se(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Nt})})}catch(e){if(re(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async r=>{const{data:{session:n},error:i}=r;return i?this._returnResult({data:null,error:i}):n?(await se(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Nt})})}catch(r){if(re(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(s=>s.kid===e);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(s=>s.kid===e),n&&this.jwks_cached_at+K$>i)return n;const{data:o,error:a}=await se(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!o.keys||o.keys.length===0||(this.jwks=o,this.jwks_cached_at=i,n=o.keys.find(s=>s.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:f,error:_}=await this.getSession();if(_||!f.session)return this._returnResult({data:null,error:_});n=f.session.access_token}const{header:i,payload:o,signature:a,raw:{header:s,payload:c}}=Tf(n);r!=null&&r.allowExpired||vF(o.exp);const l=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!l){const{error:f}=await this.getUser(n);if(f)throw f;return{data:{claims:o,header:i,signature:a},error:null}}const u=mF(i.alg),d=await crypto.subtle.importKey("jwk",l,u,!0,["verify"]);if(!await crypto.subtle.verify(u,d,a,rF(`${s}.${c}`)))throw new Dp("Invalid JWT signature");return{data:{claims:o,header:i,signature:a},error:null}}catch(n){if(re(n))return this._returnResult({data:null,error:n});throw n}}}Qs.nextInstanceID={};const GF=Qs;class QF extends GF{constructor(e){super(e)}}class JF{constructor(e,r,n){var i,o,a;this.supabaseUrl=e,this.supabaseKey=r;const s=V$(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",s),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",s),this.storageUrl=new URL("storage/v1",s),this.functionsUrl=new URL("functions/v1",s);const c=`sb-${s.hostname.split(".")[0]}-auth-token`,l={db:I$,realtime:M$,auth:Object.assign(Object.assign({},N$),{storageKey:c}),global:L$},u=B$(n??{},l);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=u.global.headers)!==null&&o!==void 0?o:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(d,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=u.auth)!==null&&a!==void 0?a:{},this.headers,u.global.fetch),this.fetch=F$(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.accessToken&&this.accessToken().then(d=>this.realtime.setAuth(d)).catch(d=>console.warn("Failed to set initial Realtime auth token:",d)),this.rest=new MD(new URL("rest/v1",s).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new R$(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new LD(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:o,storageKey:a,flowType:s,lock:c,debug:l,throwOnError:u},d,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new QF({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),d),storageKey:a,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:o,flowType:s,lock:c,debug:l,throwOnError:u,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new ZD(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const YF=(t,e,r)=>new JF(t,e,r);function XF(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}XF()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ZF=" https://klfkaebvuqdjgljomglo.supabase.co",eU="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtsZmthZWJ2dXFkamdsam9tZ2xvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ5MTA3MjgsImV4cCI6MjA4MDQ4NjcyOH0.AIyXiiHwEkqcorP08LBxC1po7Qx8B6uDM1FibjpxTwU",vt=YF(ZF,eU,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),Hi=()=>{const t=hn();return p.jsx("footer",{className:"border-t border-border bg-card/80 backdrop-blur-sm",children:p.jsxs("div",{className:"container mx-auto px-4 py-8 sm:py-12",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 sm:gap-10",children:[p.jsxs("div",{className:"space-y-4",children:[p.jsx("div",{onClick:()=>t("/landing"),className:"flex items-center gap-2 cursor-pointer w-fit",children:p.jsx("img",{src:"/logo.png",alt:"PrimeTalker Logo",className:"w-36 h-auto object-contain"})}),p.jsx("p",{className:"text-muted-foreground text-sm max-w-sm leading-relaxed",children:"Break language barriers in real-time. Connect with anyone, anywhere with instant voice translation during calls."})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx("h4",{className:"text-foreground font-semibold text-lg",children:"Contact Us"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex items-start gap-3 group",children:[p.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0 group-hover:bg-primary/20 transition-colors",children:p.jsx(LL,{className:"w-4 h-4 text-primary"})}),p.jsxs("div",{className:"text-sm text-muted-foreground leading-relaxed",children:[p.jsx("p",{className:"font-medium text-foreground",children:"Catalina Business Solutions Inc (CBS Inc)"}),p.jsx("p",{children:"8888 Keystone Crossing, Suite 1373"}),p.jsx("p",{children:"Indianapolis, IN 46240"})]})]}),p.jsxs("a",{href:"tel:+13175754181",className:"flex items-center gap-3 group hover:translate-x-1 transition-transform",children:[p.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0 group-hover:bg-primary/20 transition-colors",children:p.jsx(Zk,{className:"w-4 h-4 text-primary"})}),p.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-foreground transition-colors",children:"+1-317-575-4181"})]}),p.jsxs("a",{href:"mailto:info@cbs-corp.com",className:"flex items-center gap-3 group hover:translate-x-1 transition-transform",children:[p.jsx("div",{className:"w-9 h-9 rounded-lg bg-primary/10 flex items-center justify-center flex-shrink-0 group-hover:bg-primary/20 transition-colors",children:p.jsx(Yk,{className:"w-4 h-4 text-primary"})}),p.jsx("span",{className:"text-sm text-muted-foreground group-hover:text-foreground transition-colors",children:"info@cbs-corp.com"})]})]})]})]}),p.jsx("div",{className:"mt-6 sm:mt-10 pt-4 sm:pt-6 border-t border-border/50",children:p.jsx("p",{className:"text-muted-foreground text-xs sm:text-sm text-center",children:" 2025 PrimeTalker by Catalina Business Solutions Inc. All rights reserved."})})]})})},ra=()=>p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"premium-bg-layer","aria-hidden":"true",children:[p.jsx("div",{className:"premium-orb-1"}),p.jsx("div",{className:"premium-orb-2"}),p.jsx("div",{className:"premium-orb-3"})]}),p.jsx("div",{className:"premium-grid","aria-hidden":"true"}),p.jsx("div",{className:"premium-noise","aria-hidden":"true"})]}),tU=()=>{const t=hn(),[e,r]=b.useState(null),[n,i]=b.useState(!1);b.useEffect(()=>{vt.auth.getUser().then(({data:a})=>{r((a==null?void 0:a.user)||null)})},[]);const o=({user:a})=>{var s;return p.jsx("img",{src:((s=a.user_metadata)==null?void 0:s.avatar_url)||"/default-avatar.svg",className:"w-10 h-10 rounded-full border cursor-pointer hover:scale-105 transition",onClick:()=>i(!n)})};return p.jsxs("div",{className:"min-h-screen bg-gradient-hero",children:[p.jsx(ra,{}),p.jsx("nav",{className:"border-b border-border bg-background/80 backdrop-blur-sm sticky top-0 z-50",children:p.jsxs("div",{className:"container mx-auto px-4 py-3 sm:py-4 flex items-center justify-between",children:[p.jsx("div",{className:"flex items-center gap-2 cursor-pointer",onClick:()=>t("/landing"),children:p.jsx("img",{src:"/logo.png",alt:"Logo",className:"w-28 sm:w-40 h-auto object-contain select-none"})}),e?p.jsx(o,{user:e}):p.jsxs("div",{className:"flex items-center gap-2 sm:gap-4",children:[p.jsx(me,{variant:"ghost",size:"sm",onClick:()=>t("/auth"),className:"text-sm",children:"Sign In"}),p.jsx(me,{onClick:()=>t("/auth"),size:"sm",className:"shadow-primary text-sm",children:"Get Started"})]})]})}),p.jsx("section",{className:"container mx-auto px-4 py-12 sm:py-20 text-center animate-fade-in",children:p.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 sm:space-y-8",children:[p.jsxs("h2",{className:"text-3xl sm:text-5xl md:text-6xl font-bold text-foreground leading-tight",children:["Break Language Barriers in",p.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-primary",children:[" ","Real-Time"]})]}),p.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Connect with anyone, anywhere. PrimeTalker provides instant translation during calls, making global communication seamless."}),p.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center pt-4",children:[p.jsx(me,{size:"lg",onClick:()=>t(e?"/rooms":"/auth"),className:"shadow-primary text-lg px-8",children:"Start Meeting"}),p.jsx("a",{href:"/PrimeTalker-User-Guide.html",download:"PrimeTalker-User-Guide.html",className:"inline-flex",children:p.jsxs(me,{size:"lg",variant:"outline",className:"text-lg px-8 gap-2",children:[p.jsx(jL,{className:"w-5 h-5"}),"Download Guide"]})})]})]})}),p.jsx("section",{className:"container mx-auto px-4 py-20",children:p.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[p.jsx(sl,{icon:p.jsx(nd,{className:"w-8 h-8"}),title:"HD Voice Calls",description:"Crystal clear quality powered by Twilio Voice SDK."}),p.jsx(sl,{icon:p.jsx(rd,{className:"w-8 h-8"}),title:"Real-Time Translation",description:"Instant translation in 100+ languages."}),p.jsx(sl,{icon:p.jsx(fm,{className:"w-8 h-8"}),title:"Voice Recognition",description:"Advanced STT using Deepgram/Google Cloud."}),p.jsx(sl,{icon:p.jsx(FL,{className:"w-8 h-8"}),title:"Secure Platform",description:"Encrypted communication for safe meetings."})]})}),p.jsx("section",{className:"container mx-auto px-4 py-20",children:p.jsxs("div",{className:"bg-card rounded-2xl p-12 text-center shadow-primary border border-border",children:[p.jsx("h3",{className:"text-3xl md:text-4xl font-bold text-foreground mb-4",children:"Ready to Connect Globally?"}),p.jsx("p",{className:"text-lg text-muted-foreground mb-8 max-w-2xl mx-auto",children:"Join thousands of users breaking language barriers every day."}),p.jsx(me,{size:"lg",onClick:()=>t(e?"/rooms":"/auth"),className:"shadow-primary text-lg px-8",children:"Get Started Free"})]})}),p.jsx(Hi,{}),e&&p.jsx(rU,{user:e,open:n,onClose:()=>i(!1)})]})},sl=({icon:t,title:e,description:r})=>p.jsxs("div",{className:"bg-card rounded-xl p-6 border border-border hover:shadow-primary transition-all duration-300 hover:-translate-y-1",children:[p.jsx("div",{className:"w-14 h-14 rounded-lg bg-primary/10 flex items-center justify-center text-primary mb-4",children:t}),p.jsx("h4",{className:"text-xl font-semibold text-foreground mb-2",children:e}),p.jsx("p",{className:"text-muted-foreground",children:r})]}),rU=({user:t,open:e,onClose:r})=>{var S,k,E,x,C;const n=hn(),[i,o]=b.useState(!1),[a,s]=b.useState(((S=t.user_metadata)==null?void 0:S.full_name)||((k=t.user_metadata)==null?void 0:k.username)||t.email.split("@")[0]),[c,l]=b.useState(((E=t.user_metadata)==null?void 0:E.avatar_url)||"/default-avatar.svg"),[u,d]=b.useState(null),[h,f]=b.useState(!1),[_,v]=b.useState(null),g=async()=>{await vt.auth.signOut(),localStorage.removeItem("prime_user"),localStorage.removeItem("username"),window.location.href="/landing"},y=R=>{var D;const A=(D=R.target.files)==null?void 0:D[0];if(A){if(A.size>2*1024*1024){v("Image must be less than 2MB");return}v(null),d(A),l(URL.createObjectURL(A))}},m=async()=>{var R;try{f(!0),v(null);let A=(R=t.user_metadata)==null?void 0:R.avatar_url;if(u){const O=u.name.split(".").pop(),I=`${t.id}/${Date.now()}.${O}`,{error:P}=await vt.storage.from("avatars").upload(I,u,{upsert:!0});if(P)throw P.message.includes("bucket")||P.message.includes("not found")?new Error("Storage bucket not configured. Please create 'avatars' bucket in Supabase."):P;const{data:L}=vt.storage.from("avatars").getPublicUrl(I);A=L.publicUrl}const{error:D}=await vt.auth.updateUser({data:{full_name:a,avatar_url:A}});if(D)throw D;o(!1),d(null),window.location.reload()}catch(A){v(A.message||"Failed to update profile")}finally{f(!1)}},w=()=>{var R,A,D;o(!1),d(null),l(((R=t.user_metadata)==null?void 0:R.avatar_url)||"/default-avatar.svg"),s(((A=t.user_metadata)==null?void 0:A.full_name)||((D=t.user_metadata)==null?void 0:D.username)||t.email.split("@")[0]),v(null)};return p.jsxs(p.Fragment,{children:[p.jsx("div",{style:{position:"fixed",inset:0,zIndex:9998},className:`
          bg-black/40 transition-opacity duration-200
          ${e?"opacity-100":"opacity-0 pointer-events-none"}
        `,onClick:r}),p.jsxs("div",{style:{position:"fixed",top:"56px",right:"16px",zIndex:9999},className:`
          w-[320px] max-h-[80vh] overflow-y-auto
          bg-white dark:bg-slate-900 
          shadow-2xl rounded-2xl border border-gray-200 dark:border-slate-700
          transition-all duration-200 ease-out flex flex-col origin-top-right
          ${e?"opacity-100 scale-100":"opacity-0 scale-90 pointer-events-none"}
        `,children:[p.jsxs("div",{className:"px-6 py-5 border-b border-gray-100 dark:border-slate-800 flex items-center justify-between",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white tracking-tight",children:i?"Edit Profile":"Account"}),p.jsx("button",{onClick:r,className:"w-9 h-9 rounded-full bg-gray-100 dark:bg-slate-800 hover:bg-gray-200 dark:hover:bg-slate-700 flex items-center justify-center transition-colors",children:p.jsx(hm,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]}),p.jsxs("div",{className:"px-6 py-8 flex flex-col items-center text-center bg-gradient-to-b from-gray-50 to-white dark:from-slate-800/50 dark:to-slate-900",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"w-20 h-20 rounded-full ring-4 ring-white dark:ring-slate-800 shadow-xl overflow-hidden",children:p.jsx("img",{src:c,alt:"Profile",className:"w-full h-full object-cover",onError:R=>{R.target.src="/default-avatar.svg"}})}),i&&p.jsxs("label",{className:"absolute -bottom-1 -right-1 w-8 h-8 rounded-full bg-blue-600 hover:bg-blue-700 flex items-center justify-center cursor-pointer shadow-lg transition-colors",children:[p.jsx(CL,{className:"w-4 h-4 text-white"}),p.jsx("input",{type:"file",className:"hidden",accept:"image/png,image/jpeg,image/webp",onChange:y})]})]}),i?p.jsxs("div",{className:"mt-5 w-full",children:[p.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1.5 text-left uppercase tracking-wider",children:"Display Name"}),p.jsx("input",{value:a,onChange:R=>s(R.target.value),className:"w-full px-4 py-3 rounded-xl border border-gray-200 dark:border-slate-700 bg-white dark:bg-slate-800 text-gray-900 dark:text-white text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",placeholder:"Enter your name"})]}):p.jsxs("div",{className:"mt-4",children:[p.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-white",children:((x=t.user_metadata)==null?void 0:x.full_name)||((C=t.user_metadata)==null?void 0:C.username)||t.email.split("@")[0]}),p.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-0.5",children:t.email})]})]}),_&&p.jsx("div",{className:"mx-6 mt-4 px-4 py-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-900/50 rounded-xl",children:p.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:_})}),p.jsx("div",{className:"flex-1 px-4 py-4 overflow-y-auto",children:i?p.jsxs("div",{className:"space-y-3 pt-2",children:[p.jsx("button",{onClick:m,disabled:h,className:"w-full py-3.5 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-xl font-medium text-sm transition-colors flex items-center justify-center gap-2",children:h?p.jsxs(p.Fragment,{children:[p.jsx(AL,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):p.jsxs(p.Fragment,{children:[p.jsx(ML,{className:"w-4 h-4"}),"Save Changes"]})}),p.jsx("button",{onClick:w,disabled:h,className:"w-full py-3.5 bg-gray-100 dark:bg-slate-800 hover:bg-gray-200 dark:hover:bg-slate-700 text-gray-700 dark:text-gray-300 rounded-xl font-medium text-sm transition-colors",children:"Cancel"})]}):p.jsxs("div",{className:"space-y-1",children:[p.jsxs("button",{className:"w-full px-4 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-slate-800/50 rounded-xl transition-colors text-left group",onClick:()=>o(!0),children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center group-hover:bg-blue-100 dark:group-hover:bg-blue-900/30 transition-colors",children:p.jsx(NL,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Edit Profile"}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Update name and photo"})]})]}),p.jsxs("button",{className:"w-full px-4 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-slate-800/50 rounded-xl transition-colors text-left group",onClick:()=>{r(),n("/rooms")},children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 dark:bg-emerald-900/20 flex items-center justify-center group-hover:bg-emerald-100 dark:group-hover:bg-emerald-900/30 transition-colors",children:p.jsx(nd,{className:"w-5 h-5 text-emerald-600 dark:text-emerald-400"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"My Rooms"}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Create or join meetings"})]})]}),p.jsxs("a",{href:"/PrimeTalker-User-Guide.html",target:"_blank",className:"w-full px-4 py-3.5 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-slate-800/50 rounded-xl transition-colors text-left group block",children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-50 dark:bg-amber-900/20 flex items-center justify-center group-hover:bg-amber-100 dark:group-hover:bg-amber-900/30 transition-colors",children:p.jsx(EL,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:"User Guide"}),p.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Learn how to use the app"})]})]}),p.jsxs("button",{className:"w-full px-4 py-3.5 flex items-center gap-4 rounded-xl text-left opacity-50 cursor-not-allowed",disabled:!0,children:[p.jsx("div",{className:"w-10 h-10 rounded-xl bg-gray-100 dark:bg-slate-800 flex items-center justify-center",children:p.jsx(DL,{className:"w-5 h-5 text-gray-400 dark:text-gray-500"})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:"Settings"}),p.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Coming soon"})]})]})]})}),!i&&p.jsx("div",{className:"px-4 py-4 border-t border-gray-100 dark:border-slate-800",children:p.jsxs("button",{onClick:g,className:"w-full py-3 flex items-center justify-center gap-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-xl font-medium text-sm transition-colors",children:[p.jsx(Jk,{className:"w-4 h-4"}),"Sign Out"]})})]})]})},nU=td("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function $p({className:t,variant:e,...r}){return p.jsx("div",{className:Le(nU({variant:e}),t),...r})}function iU({roomId:t,userType:e,myLanguage:r,myName:n,onPartnerJoined:i,onPartnerLeft:o}){const[a,s]=b.useState("Disconnected"),[c,l]=b.useState(!1),[u,d]=b.useState(!0),[h,f]=b.useState(0),[_,v]=b.useState(0),[g,y]=b.useState([]),[m,w]=b.useState(""),S=b.useRef(null),k=b.useRef(null),E=b.useRef(null),x=b.useRef(null),C=b.useRef([]),R=b.useRef(null),A=b.useRef(null),D=b.useRef(null),O=b.useRef([]),I=b.useRef(!1),P=b.useRef(!0),L=b.useRef(null);b.useEffect(()=>{P.current=u},[u]);const N=b.useCallback(()=>{const K=new URL(ba);return`${K.protocol==="https:"?"wss:":"ws:"}//${K.host}/audio-stream`},[]),$=b.useCallback(async()=>{if(I.current||O.current.length===0)return;I.current=!0;const K=O.current.shift();try{const V=atob(K),W=new Uint8Array(V.length);for(let te=0;te<V.length;te++)W[te]=V.charCodeAt(te);const ee=new Blob([W],{type:"audio/wav"}),z=URL.createObjectURL(ee),q=new Audio(z);q.volume=1,q.onended=()=>{URL.revokeObjectURL(z),I.current=!1,$()},q.onerror=()=>{I.current=!1,$()},await q.play(),console.log(" Playing translated audio")}catch(V){console.error("Error playing audio:",V),I.current=!1,$()}},[]),j=b.useCallback(K=>{try{const V=JSON.parse(K.data);switch(V.event){case"user_joined":console.log(" Partner joined:",V.name),i==null||i(V.name,V.language);break;case"user_left":console.log(" Partner left"),o==null||o();break;case"transcript_interim":console.log(" INTERIM TEXT RECEIVED:",V.text),w(V.text||"");break;case"translation":w("");const W={id:`${Date.now()}-${Math.random()}`,originalText:V.originalText,translatedText:V.translatedText,fromUser:V.fromUser,fromLanguage:V.fromLanguage,toLanguage:V.toLanguage,timestamp:Date.now()};y(ee=>[...ee,W]);break;case"audio_playback":O.current.push(V.audio),$(),v(50),L.current&&clearTimeout(L.current),L.current=window.setTimeout(()=>v(0),2e3);break}}catch(V){console.error("Error parsing message:",V)}},[i,o,$]),M=b.useCallback(async()=>{try{const K=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:48e3,channelCount:1}});E.current=K;const V=new AudioContext({sampleRate:48e3});k.current=V;const W=V.createMediaStreamSource(K),ee=V.createAnalyser();ee.fftSize=256,D.current=ee,W.connect(ee);const z=new Uint8Array(ee.frequencyBinCount),q=()=>{if(!D.current)return;D.current.getByteFrequencyData(z);let ce=0;for(let ge=0;ge<z.length;ge++)ce+=z[ge];const ae=ce/z.length,ue=Math.min(100,Math.round(ae/255*100));f(ue),A.current=requestAnimationFrame(q)};A.current=requestAnimationFrame(q);const te=V.createScriptProcessor(8192,1,1);x.current=te,te.onaudioprocess=ce=>{if(!P.current)return;const ae=ce.inputBuffer.getChannelData(0),ue=new Int16Array(ae.length);for(let ge=0;ge<ae.length;ge++){const Oe=Math.max(-1,Math.min(1,ae[ge]));ue[ge]=Oe<0?Oe*32768:Oe*32767}C.current.push(ue)},W.connect(te),te.connect(V.destination),R.current=window.setInterval(()=>{const ce=S.current;if(!ce||ce.readyState!==WebSocket.OPEN)return;if(!P.current){C.current=[];return}if(C.current.length===0)return;const ae=C.current.reduce((Ue,Cr)=>Ue+Cr.length,0),ue=new Int16Array(ae);let ge=0;for(const Ue of C.current)ue.set(Ue,ge),ge+=Ue.length;C.current=[];const Oe=new Uint8Array(ue.buffer);let Xe="";for(let Ue=0;Ue<Oe.length;Ue++)Xe+=String.fromCharCode(Oe[Ue]);const ft=btoa(Xe);ce.send(JSON.stringify({event:"audio",audio:ft}))},200),console.log(" Audio capture started")}catch(K){console.error("Error starting audio:",K),s("Microphone Error")}},[u]),B=b.useCallback(async()=>{var W;if(((W=S.current)==null?void 0:W.readyState)===WebSocket.OPEN)return;s("Connecting...");const K=N();console.log(" Connecting to:",K);const V=new WebSocket(K);S.current=V,V.onopen=()=>{console.log(" WebSocket connected"),s("Connected"),l(!0),V.send(JSON.stringify({event:"connected",roomId:t,userType:e,myLanguage:r,myName:n})),M()},V.onmessage=j,V.onclose=()=>{console.log(" WebSocket closed"),s("Disconnected"),l(!1)},V.onerror=ee=>{console.error("WebSocket error:",ee),s("Connection Error")}},[t,e,r,n,N,j,M]),U=b.useCallback(()=>{R.current&&(clearInterval(R.current),R.current=null),A.current&&(cancelAnimationFrame(A.current),A.current=null),x.current&&(x.current.disconnect(),x.current=null),k.current&&(k.current.close(),k.current=null),E.current&&(E.current.getTracks().forEach(K=>K.stop()),E.current=null),D.current=null,S.current&&(S.current.readyState===WebSocket.OPEN&&S.current.send(JSON.stringify({event:"disconnect"})),S.current.close(),S.current=null),l(!1),s("Disconnected"),f(0)},[]),Q=b.useCallback(()=>{d(K=>{const V=!K;return P.current=V,E.current&&E.current.getAudioTracks().forEach(W=>{W.enabled=V}),V||(C.current=[]),console.log(` Mute toggled: ${V?"UNMUTED":"MUTED"}`),V})},[]);return b.useEffect(()=>()=>{U()},[U]),{status:a,isConnected:c,isAudioOn:u,localLevel:h,partnerLevel:_,transcripts:g,interimText:m,connect:B,disconnect:U,toggleMute:Q,setIsAudioOn:d}}var Fm={exports:{}},Um={},mc={},Bm={},oU=function(t){var e=t.location,r=t.URL;return[e,r].some(function(n){return!n})?function(i){return Promise.reject(new Error("Failed to import: ".concat(i,": dynamicImport is not supported")))}:(t.__twilioVideoImportedModules={},function(i){return i in t.__twilioVideoImportedModules?Promise.resolve(t.__twilioVideoImportedModules[i]):new Function("scope","return import('".concat(new r(i,e),"').then(m => scope.__twilioVideoImportedModules['").concat(i,"'] = m);"))(t)})}(globalThis),vE=function(){},Fr="undefined",aU=typeof window!==Fr&&typeof window.navigator!==Fr&&/Trident\/|MSIE /.test(window.navigator.userAgent),Fp=["trace","debug","info","warn","error"];function nw(t,e){var r=t[e];if(typeof r.bind=="function")return r.bind(t);try{return Function.prototype.bind.call(r,t)}catch{return function(){return Function.prototype.apply.apply(r,[t,arguments])}}}function sU(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function cU(t){return t==="debug"&&(t="log"),typeof console===Fr?!1:t==="trace"&&aU?sU:console[t]!==void 0?nw(console,t):console.log!==void 0?nw(console,"log"):vE}function mE(t,e){for(var r=0;r<Fp.length;r++){var n=Fp[r];this[n]=r<t?vE:this.methodFactory(n,t,e)}this.log=this.debug}function lU(t,e,r){return function(){typeof console!==Fr&&(mE.call(this,e,r),this[t].apply(this,arguments))}}function uU(t,e,r){return cU(t)||lU.apply(this,arguments)}function gE(t,e,r){var n=this,i,o="loglevel";typeof t=="string"?o+=":"+t:typeof t=="symbol"&&(o=void 0);function a(l){var u=(Fp[l]||"silent").toUpperCase();if(!(typeof window===Fr||!o)){try{window.localStorage[o]=u;return}catch{}try{window.document.cookie=encodeURIComponent(o)+"="+u+";"}catch{}}}function s(){var l;if(!(typeof window===Fr||!o)){try{l=window.localStorage[o]}catch{}if(typeof l===Fr)try{var u=window.document.cookie,d=u.indexOf(encodeURIComponent(o)+"=");d!==-1&&(l=/^([^;]+)/.exec(u.slice(d))[1])}catch{}return n.levels[l]===void 0&&(l=void 0),l}}n.name=t,n.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},n.methodFactory=r||uU,n.getLevel=function(){return i},n.setLevel=function(l,u){if(typeof l=="string"&&n.levels[l.toUpperCase()]!==void 0&&(l=n.levels[l.toUpperCase()]),typeof l=="number"&&l>=0&&l<=n.levels.SILENT){if(i=l,u!==!1&&a(l),mE.call(n,l,t),typeof console===Fr&&l<n.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+l},n.setDefaultLevel=function(l){s()||n.setLevel(l,!1)},n.enableAll=function(l){n.setLevel(n.levels.TRACE,l)},n.disableAll=function(l){n.setLevel(n.levels.SILENT,l)};var c=s();c==null&&(c=e??"WARN"),n.setLevel(c,!1)}var zr=new gE,Up={};zr.getLogger=function(e){if(typeof e!="symbol"&&typeof e!="string"||e==="")throw new TypeError("You must supply a name when creating a logger.");var r=Up[e];return r||(r=Up[e]=new gE(e,zr.getLevel(),zr.methodFactory)),r};var dU=typeof window!==Fr?window.log:void 0;zr.noConflict=function(){return typeof window!==Fr&&window.log===zr&&(window.log=dU),zr};zr.getLoggers=function(){return Up};zr.default=zr;var yE=zr,Vm={exports:{}};const fU="twilio-video",hU="2.33.0",_E={name:fU,version:hU};Vm.exports;(function(t){var e=_E;t.exports.SDK_NAME="".concat(e.name,".js"),t.exports.SDK_VERSION=e.version,t.exports.SDP_FORMAT="unified",t.exports.hardwareDevicePublisheriPad={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPad",hwDeviceType:"tablet",platformName:"iOS"},t.exports.hardwareDevicePublisheriPhone={hwDeviceManufacturer:"Apple",hwDeviceModel:"iPhone",hwDeviceType:"mobile",platformName:"iOS"},t.exports.DEFAULT_ENVIRONMENT="prod",t.exports.DEFAULT_REALM="us1",t.exports.DEFAULT_REGION="gll",t.exports.DEFAULT_LOG_LEVEL="warn",t.exports.DEFAULT_LOGGER_NAME="twilio-video",t.exports.WS_SERVER=function(n,i){return i=i==="gll"?"global":encodeURIComponent(i),n==="prod"?"wss://".concat(i,".vss.twilio.com/signaling"):"wss://".concat(i,".vss.").concat(n,".twilio.com/signaling")},t.exports.PUBLISH_MAX_ATTEMPTS=5,t.exports.PUBLISH_BACKOFF_JITTER=10,t.exports.PUBLISH_BACKOFF_MS=20;function r(n){return["a","e","i","o","u"].includes(n.toLowerCase()[0])?"an":"a"}t.exports.typeErrors={ILLEGAL_INVOKE:function(n,i){return new TypeError("Illegal call to ".concat(n,": ").concat(i))},INVALID_TYPE:function(n,i){return new TypeError("".concat(n," must be ").concat(r(i)," ").concat(i))},INVALID_VALUE:function(n,i){return new RangeError("".concat(n," must be one of ").concat(i.join(", ")))},REQUIRED_ARGUMENT:function(n){return new TypeError("".concat(n," must be specified"))}},t.exports.DEFAULT_FRAME_RATE=24,t.exports.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS=1e4,t.exports.DEFAULT_ICE_GATHERING_TIMEOUT_MS=15e3,t.exports.DEFAULT_SESSION_TIMEOUT_SEC=30,t.exports.DEFAULT_NQ_LEVEL_LOCAL=1,t.exports.DEFAULT_NQ_LEVEL_REMOTE=0,t.exports.MAX_NQ_LEVEL=3,t.exports.ICE_ACTIVITY_CHECK_PERIOD_MS=1e3,t.exports.ICE_INACTIVITY_THRESHOLD_MS=3e3,t.exports.iceRestartBackoffConfig={factor:1.1,min:1,max:t.exports.DEFAULT_SESSION_TIMEOUT_SEC*1e3,jitter:1},t.exports.reconnectBackoffConfig={factor:1.5,min:80,jitter:1},t.exports.subscriptionMode={MODE_COLLABORATION:"collaboration",MODE_GRID:"grid",MODE_PRESENTATION:"presentation"},t.exports.trackSwitchOffMode={MODE_DISABLED:"disabled",MODE_DETECTED:"detected",MODE_PREDICTED:"predicted"},t.exports.trackPriority={PRIORITY_HIGH:"high",PRIORITY_LOW:"low",PRIORITY_STANDARD:"standard"},t.exports.clientTrackSwitchOffControl={MODE_AUTO:"auto",MODE_MANUAL:"manual"},t.exports.videoContentPreferencesMode={MODE_AUTO:"auto",MODE_MANUAL:"manual"}})(Vm);var Ee=Vm.exports,pU=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},vU=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},mU=yE.getLogger,wE=Ee,iw=wE.DEFAULT_LOG_LEVEL,gU=wE.DEFAULT_LOGGER_NAME,Bl=Ee.typeErrors,Xa;function yU(t){if(Xa=Xa||new Map,Xa.has(t))return Xa.get(t);var e=new Set;return Xa.set(t,e),e}var zm=function(){function t(e,r,n,i,o){if(typeof e!="string")throw Bl.INVALID_TYPE("moduleName","string");if(!r)throw Bl.REQUIRED_ARGUMENT("component");typeof n!="object"&&(n={}),o=o||mU,ow(n),Object.defineProperties(this,{_component:{value:r},_logLevels:{value:n},_warnings:{value:new Set},_loggerName:{get:function(){var s=i&&typeof i=="string"?i:gU;return this._logLevelsEqual||(s="".concat(s,"-").concat(e)),s}},_logger:{get:function(){var s=o(this._loggerName),c=this._logLevels[e]||iw;return c=c==="off"?"silent":c,s.setDefaultLevel(c),s}},_logLevelsEqual:{get:function(){return new Set(Object.values(this._logLevels)).size===1}},logLevel:{get:function(){return t.getLevelByName(n[e]||iw)}},name:{get:r.toString.bind(r)}})}return t.getLevelByName=function(e){return isNaN(e)?(e=e.toUpperCase(),kE(e),t[e]):parseInt(e,10)},t.prototype.createLog=function(e,r){var n=this._loggerName;return this._logLevelsEqual||(n=n.substring(0,n.lastIndexOf("-"))),new t(e,r,this._logLevels,n)},t.prototype.setLevels=function(e){return ow(e),Object.assign(this._logLevels,e),this},t.prototype.log=function(e,r){var n=t._levels[e];if(!n)throw Bl.INVALID_VALUE("logLevel",SE);n=n.toLowerCase();var i=[new Date().toISOString(),n,this.name];return(this._logger[n]||function(){}).apply(void 0,vU([],pU(i.concat(r)),!1)),this},t.prototype.debug=function(){return this.log(t.DEBUG,[].slice.call(arguments))},t.prototype.deprecated=function(e){var r=yU(this._component.constructor);return r.has(e)?this:(r.add(e),this.warn(e))},t.prototype.info=function(){return this.log(t.INFO,[].slice.call(arguments))},t.prototype.warn=function(){return this.log(t.WARN,[].slice.call(arguments))},t.prototype.warnOnce=function(e){return this._warnings.has(e)?this:(this._warnings.add(e),this.warn(e))},t.prototype.error=function(){return this.log(t.ERROR,[].slice.call(arguments))},t.prototype.throw=function(e,r){throw e.clone&&(e=e.clone(r)),this.log(t.ERROR,e),e},t}();Object.defineProperties(zm,{DEBUG:{value:0},INFO:{value:1},WARN:{value:2},ERROR:{value:3},OFF:{value:4},_levels:{value:["DEBUG","INFO","WARN","ERROR","OFF"]}});var bE={},SE=[],_U=zm._levels.map(function(t,e){return bE[t]=!0,SE.push(e),t});function kE(t){if(!(t in bE))throw Bl.INVALID_VALUE("level",_U)}function ow(t){Object.keys(t).forEach(function(e){kE(t[e].toUpperCase())})}var pn=zm,wU=T&&T.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},bU=T&&T.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(Bm,"__esModule",{value:!0});Bm.createNoiseCancellationAudioProcessor=TU;var SU=oU,kU={krisp:{supportedVersion:"1.0.0",pluginFile:"krispsdk.mjs"},rnnoise:{supportedVersion:"0.6.0",pluginFile:"rnnoise_sdk.mjs"}},xU=function(t){var e=t.supportedVersion,r=t.plugin,n=t.log;if(!r.getVersion||!r.isSupported)throw new Error("Plugin does not export getVersion/isSupported api. Are you using old version of the plugin ?");var i=r.getVersion();n.debug("Plugin Version = ".concat(i));var o=e.split(".").map(function(l){return Number(l)}),a=i.split(".").map(function(l){return Number(l)});if(o.length!==3||a.length!==3)throw new Error("Unsupported Plugin version format: ".concat(e,", ").concat(i));if(o[0]!==a[0])throw new Error("Major version mismatch: [Plugin version ".concat(i,"],  [Supported Version ").concat(e,"]"));if(a[1]<o[1])throw new Error("Minor version mismatch: [Plugin version ".concat(i,"] < [Supported Version ").concat(e,"]"));var s=new AudioContext,c=r.isSupported(s);if(s.close(),!c)throw new Error("Noise Cancellation plugin is not supported on your browser")},aw=new Map;function TU(t,e){return wU(this,void 0,void 0,function(){var r,n,i,o,a,s,c,l,u;return bU(this,function(d){switch(d.label){case 0:if(r=aw.get(t.vendor),r)return[3,6];if(n=kU[t.vendor],!n)throw new Error("Unsupported NoiseCancellationOptions.vendor: ".concat(t.vendor));i=n.supportedVersion,o=n.pluginFile,a=t.sdkAssetsPath,s="".concat(a,"/").concat(o),d.label=1;case 1:return d.trys.push([1,5,,6]),e.debug("loading noise cancellation sdk: ",s),[4,SU(s)];case 2:return c=d.sent(),e.debug("Loaded noise cancellation sdk:",c),l=c.default,xU({supportedVersion:i,plugin:l,log:e}),l.isInitialized()?[3,4]:(e.debug("initializing noise cancellation sdk: ",a),[4,l.init({rootDir:a})]);case 3:d.sent(),e.debug("noise cancellation sdk initialized!"),d.label=4;case 4:return r={vendor:t.vendor,isInitialized:function(){return l.isInitialized()},isConnected:function(){return l.isConnected()},isEnabled:function(){return l.isEnabled()},disconnect:function(){return l.disconnect()},enable:function(){return l.enable()},disable:function(){return l.disable()},destroy:function(){return l.destroy()},setLogging:function(h){return l.setLogging(h)},connect:function(h){e.debug("connect: ",h.id),l.isConnected()&&l.disconnect();var f=l.connect(new MediaStream([h]));if(!f)throw new Error("Error connecting with noise cancellation sdk");var _=f.getAudioTracks()[0];if(!_)throw new Error("Error getting clean track from noise cancellation sdk");return l.enable(),_}},aw.set(t.vendor,r),[3,6];case 5:throw u=d.sent(),e.error("Error loading noise cancellation sdk:".concat(s),u),u;case 6:return[2,r]}})})}var xE=T&&T.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},TE=T&&T.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(mc,"__esModule",{value:!0});mc.NoiseCancellationImpl=void 0;mc.applyNoiseCancellation=CU;var EU=Bm,EE=function(){function t(e,r){this._processor=e,this._sourceTrack=r,this._disabledPermanent=!1}return Object.defineProperty(t.prototype,"vendor",{get:function(){return this._processor.vendor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sourceTrack",{get:function(){return this._sourceTrack},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._processor.isEnabled()},enumerable:!1,configurable:!0}),t.prototype.enable=function(){if(this._disabledPermanent)throw new Error("".concat(this.vendor," noise cancellation is disabled permanently for this track"));return this._processor.enable(),Promise.resolve()},t.prototype.disable=function(){return this._processor.disable(),Promise.resolve()},t.prototype.reacquireTrack=function(e){return xE(this,void 0,void 0,function(){var r,n,i;return TE(this,function(o){switch(o.label){case 0:return r=this._processor.isEnabled(),this._processor.disconnect(),[4,e()];case 1:return n=o.sent(),this._sourceTrack=n,[4,this._processor.connect(n)];case 2:return i=o.sent(),r?this._processor.enable():this._processor.disable(),[2,i]}})})},t.prototype.disablePermanently=function(){return this._disabledPermanent=!0,this.disable()},t.prototype.stop=function(){this._processor.disconnect(),this._sourceTrack.stop()},t}();mc.NoiseCancellationImpl=EE;function CU(t,e,r){return xE(this,void 0,void 0,function(){var n,i,o,a;return TE(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,(0,EU.createNoiseCancellationAudioProcessor)(e,r)];case 1:return n=s.sent(),i=n.connect(t),o=new EE(n,t),[2,{cleanTrack:i,noiseCancellation:o}];case 2:return a=s.sent(),r.warn("Failed to create noise cancellation. Returning normal audio track: ".concat(a)),[2,{cleanTrack:t}];case 3:return[2]}})})}var J={},be={},CE=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},PU=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};function OU(){var t={};return t.promise=new Promise(function(e,r){t.resolve=e,t.reject=r}),t}function RU(t,e,r,n){if(!(n in e)&&!n.match(/^on[a-z]+$/)){var i=!1;try{var o=Object.getOwnPropertyDescriptor(t,n);i=o&&!!o.get}catch{}if(!i){var a;try{a=typeof t[n]}catch{}a==="function"&&(e[n]=function(){return this[r][n].apply(this[r],arguments)})}}}function jU(t,e,r){for(var n in t)RU(t,e,r,n)}function AU(t,e){t=Array.isArray(t)?new Set(t):new Set(t.values()),e=Array.isArray(e)?new Set(e):new Set(e.values());var r=new Set;return t.forEach(function(n){e.has(n)||r.add(n)}),r}function LU(t,e){var r=t instanceof Map||t instanceof Set?Array.from(t.values()):t;return r.reduce(function(n,i){return n.concat(e(i))},[])}function Wm(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:null}function Hm(t){return typeof t>"u"&&(t=Wm()),/Chrome|CriOS/.test(t)?"chrome":/Firefox|FxiOS/.test(t)?"firefox":/Safari|iPhone|iPad|iPod/.test(t)?"safari":null}function IU(t){typeof t>"u"&&(t=Wm());var e={chrome:"Chrome|CriOS",firefox:"Firefox|FxiOS",safari:"Version"}[Hm(t)];if(!e)return null;var r=new RegExp("(".concat(e,")/([^\\s]+)")),n=CE(t.match(r)||[],3),i=n[2];if(!i)return null;var o=i.split(".").map(Number);return{major:isNaN(o[0])?null:o[0],minor:isNaN(o[1])?null:o[1]}}function NU(t){return typeof t>"u"&&(t=Wm()),/Mobi/.test(t)&&Hm()==="chrome"&&/iPad|iPhone|iPod/.test(t)}function MU(t,e){var r=null;Object.defineProperty(t,"on"+e,{get:function(){return r},set:function(n){r&&this.removeEventListener(e,r),typeof n=="function"?(r=n,this.addEventListener(e,r)):r=null}})}function DU(t,e,r){return e?t.then(e,r):t}function $U(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t==="x"?e:e&3|8;return r.toString(16)})}function FU(t,e,r){Object.getOwnPropertyNames(t).forEach(function(n){UU(t,e,r,n)})}function UU(t,e,r,n){if(!(n in e)){if(n.match(/^on[a-z]+$/)){Object.defineProperty(e,n,{value:null,writable:!0}),r.addEventListener(n.slice(2),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return e.dispatchEvent.apply(e,PU([],CE(i),!1))});return}Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[n]}})}}function BU(){return typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"&&typeof RTCPeerConnection=="function"}function VU(t){if(typeof RTCRtpSender<"u"&&typeof RTCRtpSender.getCapabilities=="function")return Promise.resolve(new Set(RTCRtpSender.getCapabilities(t).codecs.map(function(r){var n=r.mimeType;return n.split("/")[1].toLowerCase()})));if(typeof RTCPeerConnection>"u"||typeof RTCPeerConnection.prototype>"u"||typeof RTCPeerConnection.prototype.addTransceiver!="function"||typeof RTCPeerConnection.prototype.close!="function"||typeof RTCPeerConnection.prototype.createOffer!="function")return Promise.resolve(new Set);var e=new RTCPeerConnection;return e.addTransceiver(t),e.createOffer().then(function(r){var n=r.sdp;return e.close(),new Set((n.match(/^a=rtpmap:.+$/gm)||[]).map(function(i){return i.match(/^a=rtpmap:.+ ([^/]+)/)[1].toLowerCase()}))},function(){return e.close(),new Set})}var Bp=new Map;function zU(t,e){var r=Bp.get(e);return r?Promise.resolve(r.has(t.toLowerCase())):VU(e).then(function(n){return Bp.set(e,n),n.has(t.toLowerCase())})}function WU(){Bp.clear()}be.clearCachedSupportedCodecs=WU;be.defer=OU;be.delegateMethods=jU;be.difference=AU;be.flatMap=LU;be.guessBrowser=Hm;be.guessBrowserVersion=IU;be.isCodecSupported=zU;be.isIOSChrome=NU;be.interceptEvent=MU;be.legacyPromise=DU;be.makeUUID=$U;be.proxyProperties=FU;be.support=BU;var yd={},sw="1234567890abcdef",HU=32;function PE(t){for(var e="",r=0;r<HU;r++)e+=sw.charAt(Math.floor(Math.random()*sw.length));return"".concat(t).concat(e)}yd.sessionSID=PE("SS");yd.createSID=PE;var qU={recordingMediaLost:"recording-media-lost"},OE=qU,KU=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yt=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},io=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},qm=Ee,GU=qm.typeErrors,Pf=qm.trackPriority,QU=be,JU=yd.sessionSID,YU=OE;function XU(t,e){if(t instanceof e.LocalAudioTrack||t instanceof e.LocalVideoTrack||t instanceof e.LocalDataTrack)return t;if(t instanceof e.MediaStreamTrack)return t.kind==="audio"?new e.LocalAudioTrack(t,e):new e.LocalVideoTrack(t,e);throw GU.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function ZU(t,e,r,n){var i={audio:n.LocalAudioTrackPublication,video:n.LocalVideoTrackPublication,data:n.LocalDataTrackPublication}[t.kind];return new i(e,t,r,n)}function e3(t){return t[0].toUpperCase()+t.slice(1)}function t3(t,e,r,n){var i=new Set;e.on("newListener",function o(a){r.has(a)&&!i.has(a)&&(n.deprecated("".concat(t,"#").concat(a," has been deprecated and scheduled for removal in twilio-video.js@2.0.0.").concat(r.get(a)?" Use ".concat(t,"#").concat(r.get(a)," instead."):"")),i.add(a)),i.size>=r.size&&e.removeListener("newListener",o)})}function r3(t,e){t=Array.isArray(t)?new Set(t):new Set(t.values()),e=Array.isArray(e)?new Set(e):new Set(e.values());var r=new Set;return t.forEach(function(n){e.has(n)||r.add(n)}),r}function n3(t,e){return Object.keys(t).reduce(function(r,n){return t[n]!==e&&(r[n]=t[n]),r},{})}function i3(t,e){var r=t instanceof Map||t instanceof Set?Array.from(t.values()):t;return e=e||function(i){return i},r.reduce(function(n,i){var o=e(i);return n.concat(o)},[])}function RE(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent:"Unknown"}function o3(){var t=RE(),e=yt(t.match(/\(([^)]+)\)/)||[],2),r=e[1],n=r===void 0?"unknown":r,i=yt(n.split(";").map(function(a){return a.trim()}),1),o=i[0];return o.toLowerCase()}function a3(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=Math.random()*16|0,r=t==="x"?e:e&3|8;return r.toString(16)})}function s3(t){var e=null;function r(){e=null,t()}return function(){e&&clearTimeout(e),e=setTimeout(r)}}function c3(t,e,r,n){return new Promise(function(i,o){function a(){var c=[].slice.call(arguments);n&&e.removeListener(n,s),i.apply(void 0,io([],yt(c),!1))}function s(){var c=[].slice.call(arguments);e.removeListener(r,a),o.apply(void 0,io([],yt(c),!1))}e.once(r,a),n&&e.once(n,s),t()})}function l3(t,e){return e.split(".").reduce(function(r,n){return r?r[n]:null},t)}function u3(){var t={};return t.promise=new Promise(function(e,r){t.resolve=e,t.reject=r}),t}function d3(t,e,r,n){if(!(n in e)&&!n.match(/^on[a-z]+$/)){var i;try{i=typeof t[n]}catch{}i==="function"&&(e[n]=function(){for(var o,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return(o=this[r])[n].apply(o,io([],yt(a),!1))})}}function f3(t,e,r){for(var n in t)d3(t,e,r,n)}function Vl(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(t===null)return e===null;if(e===null)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(i,o){return Vl(i,e[o])});if(typeof t=="object"){var r=Object.keys(t).sort(),n=Object.keys(e).sort();return!Array.isArray(e)&&Vl(r,n)&&r.every(function(i){return Vl(t[i],e[i])})}return!1}function jE(t){return typeof t=="object"&&!Array.isArray(t)}function h3(t,e,r){Object.getOwnPropertyNames(t).forEach(function(n){p3(t,e,r,n)})}function p3(t,e,r,n){if(!(n in e)){if(n.match(/^on[a-z]+$/)){Object.defineProperty(e,n,{value:null,writable:!0}),r.addEventListener(n.slice(2),function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];e.dispatchEvent.apply(e,io([],yt(i),!1))});return}Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[n]}})}}function v3(t,e,r){return e?t.then(function(n){e(n)},function(n){r(n)}):t}function m3(t){return typeof t=="string"?{default:t,media:t,signaling:t,webrtc:t}:t}function g3(t,e){return e=e?"Local":"","".concat(e+(t.kind||"").replace(/\w{1}/,function(r){return r.toUpperCase()}),"Track")}function y3(t,e){return e=e?"Local":"","".concat(e+(t.kind||"").replace(/\w{1}/,function(r){return r.toUpperCase()}),"TrackPublication")}function AE(t){Object.getOwnPropertyNames(t).forEach(function(e){e.startsWith("_")&&LE(t,e)})}function _3(t,e){return function(r){KU(n,r);function n(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var a=r.apply(this,io([],yt(i),!1))||this;return AE(a),w3(a,e),a}return n}(t)}function LE(t,e){var r=Object.getOwnPropertyDescriptor(t,e);r.enumerable=!1,Object.defineProperty(t,e,r)}function w3(t,e){e===void 0&&(e=[]),e.forEach(function(r){t.hasOwnProperty(r)&&LE(t,r)})}function IE(t){return t.map(_d)}function b3(t){return IE(io([],yt(t),!1))}function S3(t){return io([],yt(t.entries()),!1).reduce(function(e,r){var n,i=yt(r,2),o=i[0],a=i[1];return Object.assign((n={},n[o]=_d(a),n),e)},{})}function k3(t){return Object.entries(t).reduce(function(e,r){var n,i=yt(r,2),o=i[0],a=i[1];return Object.assign((n={},n[o]=_d(a),n),e)},{})}function _d(t){return Array.isArray(t)?IE(t):t instanceof Set?b3(t):t instanceof Map?S3(t):t&&typeof t=="object"?k3(t):t}function zl(t){return t?"true":"false"}function x3(t){var e={sessionSID:JU,iceServers:(t.iceServers||[]).length,audioTracks:(t.tracks||[]).filter(function(i){return i.kind==="audio"}).length,videoTracks:(t.tracks||[]).filter(function(i){return i.kind==="video"}).length,dataTracks:(t.tracks||[]).filter(function(i){return i.kind==="data"}).length};if([["audio"],["automaticSubscription"],["enableDscp"],["eventListener"],["preflight"],["video"],["dominantSpeaker","enableDominantSpeaker"]].forEach(function(i){var o=yt(i,2),a=o[0],s=o[1];s=s||a,e[s]=zl(!!t[a])}),[["maxVideoBitrate"],["maxAudioBitrate"]].forEach(function(i){var o=yt(i,2),a=o[0],s=o[1];s=s||a,typeof t[a]=="number"?e[s]=t[a]:isNaN(Number(t[a]))||(e[s]=Number(t[a]))}),[["iceTransportPolicy"],["region"],["name","roomName"]].forEach(function(i){var o=yt(i,2),a=o[0],s=o[1];s=s||a,typeof t[a]=="string"?e[s]=t[a]:typeof t[a]=="number"&&a==="name"&&(e[s]=t[a].toString())}),["preferredAudioCodecs","preferredVideoCodecs"].forEach(function(i){i in t&&(e[i]=JSON.stringify(t[i]))}),"networkQuality"in t&&(e.networkQualityConfiguration={},jE(t.networkQuality)?["local","remote"].forEach(function(i){typeof t.networkQuality[i]=="number"&&(e.networkQualityConfiguration[i]=t.networkQuality[i])}):(e.networkQualityConfiguration.remote=0,e.networkQualityConfiguration.local=t.networkQuality?1:0)),t.bandwidthProfile&&t.bandwidthProfile.video){var r=t.bandwidthProfile.video||{};e.bandwidthProfileOptions={},["mode","maxTracks","trackSwitchOffMode","dominantSpeakerPriority","maxSubscriptionBitrate","renderDimensions","contentPreferencesMode","clientTrackSwitchOffControl"].forEach(function(i){typeof r[i]=="number"||typeof r[i]=="string"?e.bandwidthProfileOptions[i]=r[i]:typeof r[i]=="boolean"?e.bandwidthProfileOptions[i]=zl(r[i]):typeof r[i]=="object"&&(e.bandwidthProfileOptions[i]=JSON.stringify(r[i]))})}var n={RTCPeerConnection:"customRTCPeerConnectionImpl",MediaStream:"customMediaStreamImpl",getUserMedia:"customGetUserMediaImpl",enumerateDevices:"customEnumerateDevicesImpl"};return Object.entries(n).forEach(function(i){var o=yt(i,2),a=o[0],s=o[1];e[s]=zl(typeof t[a]<"u")}),{group:"room",name:"connecting",level:"info",payload:e}}function T3(){return{group:"room",name:"connected",level:"info"}}function E3(t){return wd(t,[{prop:"video",type:"object",transform:C3}])}function C3(t){return wd(t,[{prop:"dominantSpeakerPriority",type:"string",payloadProp:"active_speaker_priority"},{prop:"maxSubscriptionBitrate",type:"number",payloadProp:"max_subscription_bandwidth"},{prop:"maxTracks",type:"number",payloadProp:"max_tracks"},{prop:"mode",type:"string"},{prop:"renderDimensions",type:"object",payloadProp:"render_dimensions",transform:O3},{prop:"trackSwitchOffMode",type:"string",payloadProp:"track_switch_off"}])}function P3(t,e,r,n,i,o,a){var s={transports:[{type:"data-channel"}]};return Object.assign(t?{active_speaker:s}:{},e?{network_quality:s}:{},o?{render_hints:s}:{},i?{publisher_hints:s}:{},r?{track_priority:s}:{},n?{track_switch_off:s}:{},a?{extension_transcriptions:s}:{})}function Of(t){return wd(t,[{prop:"height",type:"number"},{prop:"width",type:"number"}])}function O3(t){var e=Pf.PRIORITY_HIGH,r=Pf.PRIORITY_LOW,n=Pf.PRIORITY_STANDARD;return wd(t,[{prop:e,type:"object",transform:Of},{prop:r,type:"object",transform:Of},{prop:n,type:"object",transform:Of}])}function wd(t,e){return e.reduce(function(r,n){var i,o=n.prop,a=n.type,s=n.payloadProp,c=s===void 0?o:s,l=n.transform,u=l===void 0?function(d){return d}:l;return typeof t[o]===a?Object.assign((i={},i[c]=u(t[o]),i),r):r},{})}function R3(t){return{rules:[{type:t?"include":"exclude",all:!0}],revision:1}}function j3(t){var e,r=(e={},e[YU.recordingMediaLost]="recordings",e);return t.map(function(n){return r[n]}).filter(function(n){return!!n})}function A3(t,e){var r=Math.random();return t-e+Math.floor(2*e*r+.5)}function L3(t,e,r){return e<=t&&t<=r}function I3(t){return QU.guessBrowser()==="chrome"&&t.kind==="video"&&"displaySurface"in t.getSettings()}function N3(t){return t===void 0&&(t=10),new Promise(function(e){return setTimeout(e,t)})}function M3(t,e){return new Promise(function(r){t.addEventListener(e,function n(i){t.removeEventListener(e,n),r(i)})})}J.constants=qm;J.createBandwidthProfilePayload=E3;J.createMediaSignalingPayload=P3;J.createMediaWarningsPayload=j3;J.createRoomConnectingEventPayload=x3;J.createRoomConnectedEventPayload=T3;J.boolToString=zl;J.createSubscribePayload=R3;J.asLocalTrack=XU;J.asLocalTrackPublication=ZU;J.capitalize=e3;J.deprecateEvents=t3;J.difference=r3;J.filterObject=n3;J.flatMap=i3;J.getPlatform=o3;J.getUserAgent=RE;J.hidePrivateProperties=AE;J.hidePrivateAndCertainPublicPropertiesInClass=_3;J.isDeepEqual=Vl;J.isNonArrayObject=jE;J.inRange=L3;J.makeUUID=a3;J.oncePerTick=s3;J.promiseFromEvents=c3;J.getOrNull=l3;J.defer=u3;J.delegateMethods=f3;J.proxyProperties=h3;J.legacyPromise=v3;J.buildLogLevels=m3;J.trackClass=g3;J.trackPublicationClass=y3;J.valueToJSON=_d;J.withJitter=A3;J.isChromeScreenShareTrack=I3;J.waitForSometime=N3;J.waitForEvent=M3;var Lt={},NE=be,D3=NE.flatMap,$3=NE.guessBrowser,wi=null;function F3(){if(typeof wi=="boolean")return wi;if(typeof RTCPeerConnection>"u")return wi=!1,wi;try{new RTCPeerConnection({sdpSemantics:"foo"}),wi=!1}catch{wi=!0}return wi}var jo=null;function U3(){jo=null}function B3(){if(!jo)if(typeof RTCPeerConnection<"u"&&"addTransceiver"in RTCPeerConnection.prototype){var t=new RTCPeerConnection;try{t.addTransceiver("audio"),jo="unified"}catch{jo="planb"}t.close()}else jo="planb";return jo}function V3(t){return!t||!F3()?B3():{"plan-b":"planb","unified-plan":"unified"}[t]}function z3(){return typeof RTCRtpTransceiver<"u"&&"currentDirection"in RTCRtpTransceiver.prototype?"unified":"planb"}function W3(t){return{chrome:V3(t),firefox:"unified",safari:z3()}[$3()]||null}function Km(t,e){var r=e.match(new RegExp(t,"gm"))||[];return r.reduce(function(n,i){var o=i.match(new RegExp(t));return o?n.add(o[1]):n},new Set)}function ME(t,e){return Km(t,e)}function DE(t){return ME("^a=ssrc:[0-9]+ +msid:.+ +(.+) *$",t)}function $E(t){return ME("^a=msid:.+ +(.+) *$",t)}function FE(t,e){var r="^a=ssrc:([0-9]+) +msid:[^ ]+ +".concat(e," *$");return Km(r,t)}function UE(t,e,r){return e===void 0&&(e=".*"),r===void 0&&(r=".*"),t.split(`\r
m=`).slice(1).map(function(n){return"m=".concat(n)}).filter(function(n){var i=new RegExp("m=".concat(e),"gm"),o=new RegExp("a=".concat(r),"gm");return i.test(n)&&o.test(n)})}function H3(t){return Array.from(Km("^a=ssrc:([0-9]+) +.*$",t))}function BE(t,e){var r=UE(t),n=new RegExp("^a=msid:[^ ]+ +".concat(e," *$"),"gm"),i=r.filter(function(o){return o.match(n)});return new Set(D3(i,H3))}function VE(t,e,r){return new Map(Array.from(t(r)).map(function(n){return[n,e(r,n)]}))}function q3(t){return VE(DE,FE,t)}function K3(t){return VE($E,BE,t)}function zE(t,e,r){var n=t(r),i=new Map;n.forEach(function(s,c){if(!e.has(c)){e.set(c,s);return}var l=Array.from(e.get(c)),u=Array.from(s);l.forEach(function(d,h){var f=u[h];i.set(f,d);var _="^a=ssrc:".concat(f," (.*)$"),v="a=ssrc:".concat(d," $1");r=r.replace(new RegExp(_,"gm"),v)})});var o="^(a=ssrc-group:[^ ]+ +)(.*)$",a=r.match(new RegExp(o,"gm"))||[];return a.forEach(function(s){var c=s.match(new RegExp(o));if(c){var l=c[1],u=c[2],d=u.split(" ").map(function(h){var f=i.get(h);return f||h}).join(" ");r=r.replace(c[0],l+d)}}),r}function G3(t,e){return zE(q3,t,e)}function Q3(t,e){return zE(K3,t,e)}Lt.clearChromeCachedSdpFormat=U3;Lt.getSdpFormat=W3;Lt.getMediaSections=UE;Lt.getPlanBTrackIds=DE;Lt.getUnifiedPlanTrackIds=$E;Lt.getPlanBSSRCs=FE;Lt.getUnifiedPlanSSRCs=BE;Lt.updatePlanBTrackIdsToSSRCs=G3;Lt.updateUnifiedPlanTrackIdsToSSRCs=Q3;var Tt=T&&T.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jn=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Gm=be,WE=Gm.flatMap,J3=Gm.guessBrowser,Y3=Gm.guessBrowserVersion,X3=Lt.getSdpFormat,Qm=J3(),Z3=Y3(),Jm=Qm==="chrome",HE=Qm==="firefox",qE=Qm==="safari",cw=Jm?Z3.major:null,e4=32767;function Ta(t,e){return typeof t.get=="function"?t.get(e):t.find(function(r){return r.id===e})}function t4(t,e,r){var n,i,o,a,s,c,l,u,d,h,f,_,v,g,y,m,w,S,k,E,x,C;r===void 0&&(r=!1);var R;if(Array.isArray(t))R=new Map(t.map(function(Se){return[Se.id||String(Math.random()),Se]}));else if(t instanceof Map)R=t;else if(typeof t=="object"&&t!==null){var A=new Map;Object.keys(t).forEach(function(Se){A.set(Se,t[Se])}),R=A}else return new Map;if(!R||!e)return new Map;var D=new Map,O=e.id,I=e.kind,P=null,L=null,N=null;try{for(var $=Tt(R),j=$.next();!j.done;j=$.next()){var M=jn(j.value,2),B=M[0],U=M[1];if(r&&U.type==="inbound-rtp"&&U.trackIdentifier===O){P=U,L=B,N=U.ssrc;break}else if(!r&&U.type==="media-source"&&U.trackIdentifier===O){P=U,L=B;break}else U.type==="track"&&U.trackIdentifier===O&&(P||(P=U,L=B))}}catch(Se){n={error:Se}}finally{try{j&&!j.done&&(i=$.return)&&i.call($)}finally{if(n)throw n.error}}if(!P)if(r){var Q=[];try{for(var K=Tt(R),V=K.next();!V.done;V=K.next()){var W=jn(V.value,2),B=W[0],U=W[1];U.type==="inbound-rtp"&&(U.kind===I||U.mediaType===I)&&Q.push({id:B,stat:U})}}catch(Se){o={error:Se}}finally{try{V&&!V.done&&(a=K.return)&&a.call(K)}finally{if(o)throw o.error}}(Q.length===1||Q.length>1)&&(P=Q[0].stat,L=Q[0].id,N=P.ssrc)}else try{for(var ee=Tt(R),z=ee.next();!z.done;z=ee.next()){var q=jn(z.value,2),B=q[0],U=q[1];if(U.type==="media-source"&&U.kind===I){P=U,L=B;break}}}catch(Se){s={error:Se}}finally{try{z&&!z.done&&(c=ee.return)&&c.call(ee)}finally{if(s)throw s.error}}if(!P)return D;D.set(L,P);var te=new Set;if(r){if(P.codecId&&te.add(P.codecId),P.transportId&&te.add(P.transportId),P.remoteId&&te.add(P.remoteId),N)try{for(var ce=Tt(R),ae=ce.next();!ae.done;ae=ce.next()){var ue=jn(ae.value,2),B=ue[0],U=ue[1];U.type==="remote-outbound-rtp"&&U.ssrc===N&&te.add(B)}}catch(Se){l={error:Se}}finally{try{ae&&!ae.done&&(u=ce.return)&&u.call(ce)}finally{if(l)throw l.error}}try{for(var ge=Tt(te),Oe=ge.next();!Oe.done;Oe=ge.next()){var Xe=Oe.value;R.has(Xe)&&D.set(Xe,R.get(Xe))}}catch(Se){d={error:Se}}finally{try{Oe&&!Oe.done&&(h=ge.return)&&h.call(ge)}finally{if(d)throw d.error}}try{for(var ft=Tt(R),Ue=ft.next();!Ue.done;Ue=ft.next()){var Cr=jn(Ue.value,2),B=Cr[0],U=Cr[1];U.type==="track"&&U.trackIdentifier===O&&D.set(B,U)}}catch(Se){f={error:Se}}finally{try{Ue&&!Ue.done&&(_=ft.return)&&_.call(ft)}finally{if(f)throw f.error}}}else{try{for(var tr=Tt(R),gn=tr.next();!gn.done;gn=tr.next()){var yn=jn(gn.value,2),B=yn[0],U=yn[1];if(U.type==="outbound-rtp"&&U.mediaSourceId===L){D.set(B,U),U.codecId&&te.add(U.codecId),U.transportId&&te.add(U.transportId);var Tc=B;try{for(var qt=(y=void 0,Tt(R)),pi=qt.next();!pi.done;pi=qt.next()){var Ec=jn(pi.value,2),xt=Ec[0],Pr=Ec[1];Pr.type==="remote-inbound-rtp"&&Pr.localId===Tc&&D.set(xt,Pr)}}catch(Md){y={error:Md}}finally{try{pi&&!pi.done&&(m=qt.return)&&m.call(qt)}finally{if(y)throw y.error}}}}}catch(Se){v={error:Se}}finally{try{gn&&!gn.done&&(g=tr.return)&&g.call(tr)}finally{if(v)throw v.error}}try{for(var vo=Tt(te),vi=vo.next();!vi.done;vi=vo.next()){var Xe=vi.value;R.has(Xe)&&D.set(Xe,R.get(Xe))}}catch(Se){w={error:Se}}finally{try{vi&&!vi.done&&(S=vo.return)&&S.call(vo)}finally{if(w)throw w.error}}}var Or=null,Cc=new Set;try{for(var mi=Tt(D.values()),Kr=mi.next();!Kr.done;Kr=mi.next()){var U=Kr.value;U.transportId&&Cc.add(U.transportId)}}catch(Se){k={error:Se}}finally{try{Kr&&!Kr.done&&(E=mi.return)&&E.call(mi)}finally{if(k)throw k.error}}try{for(var rr=Tt(Cc),_n=rr.next();!_n.done;_n=rr.next()){var Rr=_n.value;if(R.has(Rr)){var It=R.get(Rr);D.set(Rr,It),It.selectedCandidatePairId&&(Or=It.selectedCandidatePairId),It.localCertificateId&&R.has(It.localCertificateId)&&D.set(It.localCertificateId,R.get(It.localCertificateId)),It.remoteCertificateId&&R.has(It.remoteCertificateId)&&D.set(It.remoteCertificateId,R.get(It.remoteCertificateId))}}}catch(Se){x={error:Se}}finally{try{_n&&!_n.done&&(C=rr.return)&&C.call(rr)}finally{if(x)throw x.error}}if(Or&&R.has(Or)){var nr=R.get(Or);D.set(Or,nr),nr.localCandidateId&&R.has(nr.localCandidateId)&&D.set(nr.localCandidateId,R.get(nr.localCandidateId)),nr.remoteCandidateId&&R.has(nr.remoteCandidateId)&&D.set(nr.remoteCandidateId,R.get(nr.remoteCandidateId))}return D}function r4(t,e){return t&&typeof t.getStats=="function"?n4(t,e):Promise.reject(new Error("Given PeerConnection does not support getStats"))}function n4(t,e){var r=cl(t,"audio","local"),n=cl(t,"video","local"),i=cl(t,"audio"),o=cl(t,"video"),a={activeIceCandidatePair:null,localAudioTrackStats:[],localVideoTrackStats:[],remoteAudioTrackStats:[],remoteVideoTrackStats:[]},s=WE([[r,"localAudioTrackStats",!1],[n,"localVideoTrackStats",!1],[i,"remoteAudioTrackStats",!0],[o,"remoteVideoTrackStats",!0]],function(c){var l=jn(c,3),u=l[0],d=l[1],h=l[2];return u.map(function(f){return c4(t,f,Object.assign({isRemote:h},e)).then(function(_){_.forEach(function(v){v.trackId=f.id,a[d].push(v)})})})});return Promise.all(s).then(function(){return i4(t,e)}).then(function(c){return a.activeIceCandidatePair=c,a})}function i4(t,e){return e===void 0&&(e={}),typeof e.testForChrome<"u"||Jm||typeof e.testForSafari<"u"||qE?t.getStats().then(o4):typeof e.testForFirefox<"u"||HE?t.getStats().then(a4):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function o4(t){var e=Array.from(t.values()).find(function(c){var l=c.nominated,u=c.type;return u==="candidate-pair"&&l});if(!e)return null;var r=Ta(t,e.localCandidateId),n=Ta(t,e.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",type:"string"},{key:"port",type:"number"},{key:"priority",type:"number"},{key:"protocol",type:"string"},{key:"url",type:"string"}],o=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"},{key:"networkType",type:"string"}]),a=r?o.reduce(function(c,l){var u=l.key,d=l.type;return c[u]=typeof r[u]===d?r[u]:u==="deleted"?!1:null,c},{}):null,s=n?i.reduce(function(c,l){var u=l.key,d=l.type;return c[u]=typeof n[u]===d?n[u]:null,c},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string",fixup:function(c){return c==="inprogress"?"in-progress":c}},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(c,l){var u=l.key,d=l.type,h=l.fixup;return c[u]=typeof e[u]===d?h?h(e[u]):e[u]:null,c},{localCandidate:a,remoteCandidate:s})}function a4(t){var e=Array.from(t.values()).find(function(l){var u=l.nominated,d=l.type;return d==="candidate-pair"&&u});if(!e)return null;var r=Ta(t,e.localCandidateId),n=Ta(t,e.remoteCandidateId),i=[{key:"candidateType",type:"string"},{key:"ip",ffKeys:["address","ipAddress"],type:"string"},{key:"port",ffKeys:["portNumber"],type:"number"},{key:"priority",type:"number"},{key:"protocol",ffKeys:["transport"],type:"string"},{key:"url",type:"string"}],o=i.concat([{key:"deleted",type:"boolean"},{key:"relayProtocol",type:"string"}]),a={host:"host",peerreflexive:"prflx",relayed:"relay",serverreflexive:"srflx"},s=r?o.reduce(function(l,u){var d=u.ffKeys,h=u.key,f=u.type,_=d&&d.find(function(v){return v in r})||h;return l[h]=typeof r[_]===f?_==="candidateType"&&a[r[_]]||r[_]:_==="deleted"?!1:null,l},{}):null,c=n?i.reduce(function(l,u){var d=u.ffKeys,h=u.key,f=u.type,_=d&&d.find(function(v){return v in n})||h;return l[h]=typeof n[_]===f?_==="candidateType"&&a[n[_]]||n[_]:null,l},{}):null;return[{key:"availableIncomingBitrate",type:"number"},{key:"availableOutgoingBitrate",type:"number"},{key:"bytesReceived",type:"number"},{key:"bytesSent",type:"number"},{key:"consentRequestsSent",type:"number"},{key:"currentRoundTripTime",type:"number"},{key:"lastPacketReceivedTimestamp",type:"number"},{key:"lastPacketSentTimestamp",type:"number"},{key:"nominated",type:"boolean"},{key:"priority",type:"number"},{key:"readable",type:"boolean"},{key:"requestsReceived",type:"number"},{key:"requestsSent",type:"number"},{key:"responsesReceived",type:"number"},{key:"responsesSent",type:"number"},{key:"retransmissionsReceived",type:"number"},{key:"retransmissionsSent",type:"number"},{key:"state",type:"string"},{key:"totalRoundTripTime",type:"number"},{key:"transportId",type:"string"},{key:"writable",type:"boolean"}].reduce(function(l,u){var d=u.key,h=u.type;return l[d]=typeof e[d]===h?e[d]:null,l},{localCandidate:s,remoteCandidate:c})}function cl(t,e,r){var n=r==="local"?"getSenders":"getReceivers";if(t[n])return t[n]().map(function(a){var s=a.track;return s}).filter(function(a){return a&&a.kind===e});var i=r==="local"?"getLocalStreams":"getRemoteStreams",o=e==="audio"?"getAudioTracks":"getVideoTracks";return WE(t[i](),function(a){return a[o]()})}function s4(t,e){var r,n,i,o,a,s;if(!t||!e)return!1;if(t.getReceivers){var c=t.getReceivers();try{for(var l=Tt(c),u=l.next();!u.done;u=l.next()){var d=u.value;if(d.track&&d.track.id===e.id)return!0}}catch(S){r={error:S}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}if(t.getRemoteStreams){var h=t.getRemoteStreams();try{for(var f=Tt(h),_=f.next();!_.done;_=f.next()){var v=_.value,g=v.getTracks();try{for(var y=(a=void 0,Tt(g)),m=y.next();!m.done;m=y.next()){var w=m.value;if(w.id===e.id)return!0}}catch(S){a={error:S}}finally{try{m&&!m.done&&(s=y.return)&&s.call(y)}finally{if(a)throw a.error}}}}catch(S){i={error:S}}finally{try{_&&!_.done&&(o=f.return)&&o.call(f)}finally{if(i)throw i.error}}}return!1}function c4(t,e,r){return r===void 0&&(r={}),typeof r.testForChrome<"u"||Jm?lw(t,e,r):typeof r.testForFirefox<"u"||HE?l4(t,e,r):typeof r.testForSafari<"u"||qE?typeof r.testForSafari<"u"||X3()==="unified"?lw(t,e,r):Promise.reject(new Error(["getStats() is not supported on this version of Safari","due to this bug: https://bugs.webkit.org/show_bug.cgi?id=192601"].join(" "))):Promise.reject(new Error("RTCPeerConnection#getStats() not supported"))}function lw(t,e,r){var n=r.log;return cw&&cw<67?new Promise(function(i,o){t.getStats(function(a){i([u4(a,e)])},null,o)}):t.getStats(e).then(function(i){return n.info("getStats by track successful"),uw(i,r)}).catch(function(){return n.warn("getStats by track failed. Getting default stats"),t.getStats().then(function(i){n.info("getStats by default successful");var o=s4(t,e);n.info("Starting filtering stats for ".concat(o?"remote":"local"," track"));var a=t4(i,e,o);return n.info("Completed filtering stats for ".concat(o?"remote":"local"," track")),uw(a,r)})})}function l4(t,e,r){return t.getStats(e).then(function(n){return[d4(n,r)]})}function u4(t,e){var r=t.result().find(function(i){return i.type==="ssrc"&&i.stat("googTrackId")===e.id}),n={};return r&&(n.timestamp=Math.round(Number(r.timestamp)),n=r.names().reduce(function(i,o){switch(o){case"googCodecName":i.codecName=r.stat(o);break;case"googRtt":i.roundTripTime=Number(r.stat(o));break;case"googJitterReceived":i.jitter=Number(r.stat(o));break;case"googFrameWidthInput":i.frameWidthInput=Number(r.stat(o));break;case"googFrameHeightInput":i.frameHeightInput=Number(r.stat(o));break;case"googFrameWidthSent":i.frameWidthSent=Number(r.stat(o));break;case"googFrameHeightSent":i.frameHeightSent=Number(r.stat(o));break;case"googFrameWidthReceived":i.frameWidthReceived=Number(r.stat(o));break;case"googFrameHeightReceived":i.frameHeightReceived=Number(r.stat(o));break;case"googFrameRateInput":i.frameRateInput=Number(r.stat(o));break;case"googFrameRateSent":i.frameRateSent=Number(r.stat(o));break;case"googFrameRateReceived":i.frameRateReceived=Number(r.stat(o));break;case"ssrc":i[o]=r.stat(o);break;case"bytesReceived":case"bytesSent":case"packetsLost":case"packetsReceived":case"packetsSent":case"audioInputLevel":case"audioOutputLevel":i[o]=Number(r.stat(o));break}return i},n)),n}function uw(t,e){var r=e.simulateExceptionWhileStandardizingStats,n=r===void 0?!1:r;if(n)throw new Error("Error while gathering stats");var i=null,o=[],a=null,s=null,c=null,l=null,u=null;t.forEach(function(v){var g=v.type;switch(g){case"inbound-rtp":i=v;break;case"outbound-rtp":o.push(v);break;case"media-source":u=v;break;case"track":c=v;break;case"codec":l=v;break;case"remote-inbound-rtp":a=v;break;case"remote-outbound-rtp":s=v;break}});var d=c?c.remoteSource:!u,h=d?[i]:o,f=[],_=d?s:a;return h.forEach(function(v){var g={},y=[v,u,c,l,_&&_.ssrc===v.ssrc?_:null];function m(z){var q=y.find(function(te){return te&&typeof te[z]<"u"})||null;return q?q[z]:null}var w=m("ssrc");typeof w=="number"&&(g.ssrc=String(w));var S=m("timestamp");g.timestamp=Math.round(S);var k=m("mimeType");typeof k=="string"&&(k=k.split("/"),g.codecName=k[k.length-1]);var E=m("roundTripTime");typeof E=="number"&&(g.roundTripTime=Math.round(E*1e3));var x=m("jitter");typeof x=="number"&&(g.jitter=Math.round(x*1e3));var C=m("frameWidth");typeof C=="number"&&(d?g.frameWidthReceived=C:(g.frameWidthSent=C,g.frameWidthInput=c?c.frameWidth:u.width));var R=m("frameHeight");typeof R=="number"&&(d?g.frameHeightReceived=R:(g.frameHeightSent=R,g.frameHeightInput=c?c.frameHeight:u.height));var A=m("framesPerSecond");(typeof A=="number"||A===null)&&(g[d?"frameRateReceived":"frameRateSent"]=A);var D=m("qualityLimitationReason");typeof D=="string"&&(g.qualityLimitationReason=D);var O=m("bytesReceived");typeof O=="number"&&(g.bytesReceived=O);var I=m("bytesSent");typeof I=="number"&&(g.bytesSent=I);var P=m("packetsLost");typeof P=="number"&&(g.packetsLost=P);var L=m("packetsReceived");typeof L=="number"&&(g.packetsReceived=L);var N=m("packetsSent");typeof N=="number"&&(g.packetsSent=N);var $=m("audioLevel");typeof $=="number"&&($=Math.round($*e4),d?g.audioOutputLevel=$:g.audioInputLevel=$);var j=m("totalPacketSendDelay");typeof j=="number"&&(g.totalPacketSendDelay=j);var M=m("totalEncodeTime");typeof M=="number"&&(g.totalEncodeTime=M);var B=m("framesEncoded");typeof B=="number"&&(g.framesEncoded=B);var U=m("estimatedPlayoutTimestamp");typeof U=="number"&&(g.estimatedPlayoutTimestamp=U);var Q=m("totalDecodeTime");typeof Q=="number"&&(g.totalDecodeTime=Q);var K=m("framesDecoded");typeof K=="number"&&(g.framesDecoded=K);var V=m("jitterBufferDelay");typeof V=="number"&&(g.jitterBufferDelay=V);var W=m("jitterBufferEmittedCount");typeof W=="number"&&(g.jitterBufferEmittedCount=W);var ee=m("freezeCount");typeof ee=="number"&&(g.freezeCount=ee),f.push(g)}),f}function d4(t,e){t===void 0&&(t=new Map);var r=e.isRemote,n=e.simulateExceptionWhileStandardizingStats,i=n===void 0?!1:n;if(i)throw new Error("Error while gathering stats");var o=null,a=null;t.forEach(function(L){var N=L.isRemote,$=L.remoteId,j=L.type;if(!N)switch(j){case"inbound-rtp":o=L,a=Ta(t,$);break;case"outbound-rtp":a=L,o=Ta(t,$);break}});var s=r?o:a,c=r?a:o;function l(L){return s&&typeof s[L]<"u"?s[L]:c&&typeof c[L]<"u"?c[L]:null}var u={},d=l("timestamp");u.timestamp=Math.round(d);var h=l("ssrc");typeof h=="number"&&(u.ssrc=String(h));var f=l("bytesSent");typeof f=="number"&&(u.bytesSent=f);var _=l("packetsLost");typeof _=="number"&&(u.packetsLost=_);var v=l("packetsSent");typeof v=="number"&&(u.packetsSent=v);var g=l("roundTripTime");typeof g=="number"&&(u.roundTripTime=Math.round(g*1e3));var y=l("jitter");typeof y=="number"&&(u.jitter=Math.round(y*1e3));var m=l("framesPerSecond");(typeof m=="number"||m===null)&&(u.frameRateSent=m);var w=l("bytesReceived");typeof w=="number"&&(u.bytesReceived=w);var S=l("packetsReceived");typeof S=="number"&&(u.packetsReceived=S);var k=l("framesPerSecond");(typeof k=="number"||k===null)&&(u.frameRateReceived=k);var E=l("totalPacketSendDelay");typeof E=="number"&&(u.totalPacketSendDelay=E);var x=l("totalEncodeTime");typeof x=="number"&&(u.totalEncodeTime=x);var C=l("framesEncoded");typeof C=="number"&&(u.framesEncoded=C);var R=l("estimatedPlayoutTimestamp");typeof R=="number"&&(u.estimatedPlayoutTimestamp=R);var A=l("totalDecodeTime");typeof A=="number"&&(u.totalDecodeTime=A);var D=l("framesDecoded");typeof D=="number"&&(u.framesDecoded=D);var O=l("jitterBufferDelay");typeof O=="number"&&(u.jitterBufferDelay=O);var I=l("jitterBufferEmittedCount");typeof I=="number"&&(u.jitterBufferEmittedCount=I);var P=l("freezeCount");return typeof P=="number"&&(u.freezeCount=P),u}var f4=r4;function h4(t){return t===void 0&&(t={audio:!0,video:!0}),typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.getUserMedia=="function"?navigator.mediaDevices.getUserMedia(t):Promise.reject(new Error("getUserMedia is not supported"))}var p4=h4,Vp={exports:{}};typeof MediaStream=="function"?Vp.exports=MediaStream:Vp.exports=function(){throw new Error("MediaStream is not supported")};var KE=Vp.exports,zp={exports:{}};typeof MediaStreamTrack=="function"?zp.exports=MediaStreamTrack:zp.exports=function(){throw new Error("MediaStreamTrack is not supported")};var v4=zp.exports,Wp={exports:{}};typeof RTCIceCandidate=="function"?Wp.exports=RTCIceCandidate:Wp.exports=function(){throw new Error("RTCIceCandidate is not supported")};var m4=Wp.exports,Ao={exports:{}},Rf,dw;function GE(){if(dw)return Rf;dw=1;var t=function(){function e(r){this.descriptionInitDict=r;var n=r&&r.type==="rollback"?null:new RTCSessionDescription(r);Object.defineProperties(this,{_description:{get:function(){return n}}})}return Object.defineProperty(e.prototype,"sdp",{get:function(){return this._description?this._description.sdp:this.descriptionInitDict.sdp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._description?this._description.type:this.descriptionInitDict.type},enumerable:!1,configurable:!0}),e}();return Rf=t,Rf}var Ym={exports:{}},na=typeof Reflect=="object"?Reflect:null,fw=na&&typeof na.apply=="function"?na.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},Wl;na&&typeof na.ownKeys=="function"?Wl=na.ownKeys:Object.getOwnPropertySymbols?Wl=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Wl=function(e){return Object.getOwnPropertyNames(e)};function g4(t){console&&console.warn&&console.warn(t)}var QE=Number.isNaN||function(e){return e!==e};function xe(){xe.init.call(this)}Ym.exports=xe;Ym.exports.once=b4;xe.EventEmitter=xe;xe.prototype._events=void 0;xe.prototype._eventsCount=0;xe.prototype._maxListeners=void 0;var hw=10;function bd(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(xe,"defaultMaxListeners",{enumerable:!0,get:function(){return hw},set:function(t){if(typeof t!="number"||t<0||QE(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");hw=t}});xe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};xe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||QE(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function JE(t){return t._maxListeners===void 0?xe.defaultMaxListeners:t._maxListeners}xe.prototype.getMaxListeners=function(){return JE(this)};xe.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var a;if(r.length>0&&(a=r[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")fw(c,this,r);else for(var l=c.length,u=tC(c,l),n=0;n<l;++n)fw(u[n],this,r);return!0};function YE(t,e,r,n){var i,o,a;if(bd(r),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),o=t._events),a=o[e]),a===void 0)a=o[e]=r,++t._eventsCount;else if(typeof a=="function"?a=o[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),i=JE(t),i>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,g4(s)}return t}xe.prototype.addListener=function(e,r){return YE(this,e,r,!1)};xe.prototype.on=xe.prototype.addListener;xe.prototype.prependListener=function(e,r){return YE(this,e,r,!0)};function y4(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function XE(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=y4.bind(n);return i.listener=r,n.wrapFn=i,i}xe.prototype.once=function(e,r){return bd(r),this.on(e,XE(this,e,r)),this};xe.prototype.prependOnceListener=function(e,r){return bd(r),this.prependListener(e,XE(this,e,r)),this};xe.prototype.removeListener=function(e,r){var n,i,o,a,s;if(bd(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(o=-1,a=n.length-1;a>=0;a--)if(n[a]===r||n[a].listener===r){s=n[a].listener,o=a;break}if(o<0)return this;o===0?n.shift():_4(n,o),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,s||r)}return this};xe.prototype.off=xe.prototype.removeListener;xe.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var o=Object.keys(n),a;for(i=0;i<o.length;++i)a=o[i],a!=="removeListener"&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function ZE(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?w4(i):tC(i,i.length)}xe.prototype.listeners=function(e){return ZE(this,e,!0)};xe.prototype.rawListeners=function(e){return ZE(this,e,!1)};xe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):eC.call(t,e)};xe.prototype.listenerCount=eC;function eC(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}xe.prototype.eventNames=function(){return this._eventsCount>0?Wl(this._events):[]};function tC(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function _4(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function w4(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function b4(t,e){return new Promise(function(r,n){function i(a){t.removeListener(e,o),n(a)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}rC(t,e,o,{once:!0}),e!=="error"&&S4(t,i,{once:!0})})}function S4(t,e,r){typeof t.on=="function"&&rC(t,"error",e,r)}function rC(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){n.once&&t.removeEventListener(e,i),r(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var St=Ym.exports,jf,pw;function Xm(){if(pw)return jf;pw=1;var t=T&&T.__read||function(i,o){var a=typeof Symbol=="function"&&i[Symbol.iterator];if(!a)return i;var s=a.call(i),c,l=[],u;try{for(;(o===void 0||o-- >0)&&!(c=s.next()).done;)l.push(c.value)}catch(d){u={error:d}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(u)throw u.error}}return l},e=T&&T.__spreadArray||function(i,o,a){if(a||arguments.length===2)for(var s=0,c=o.length,l;s<c;s++)(l||!(s in o))&&(l||(l=Array.prototype.slice.call(o,0,s)),l[s]=o[s]);return i.concat(l||Array.prototype.slice.call(o))},r=St.EventEmitter,n=function(){function i(){Object.defineProperties(this,{_eventEmitter:{value:new r}})}return i.prototype.dispatchEvent=function(o){return this._eventEmitter.emit(o.type,o)},i.prototype.addEventListener=function(){var o;return(o=this._eventEmitter).addListener.apply(o,e([],t(arguments),!1))},i.prototype.removeEventListener=function(){var o;return(o=this._eventEmitter).removeListener.apply(o,e([],t(arguments),!1))},i}();return jf=n,jf}var Af,vw;function nC(){if(vw)return Af;vw=1;var t=be.defer,e={high:new Set(["low"]),low:new Set(["high"])},r=function(){function i(o){o===void 0&&(o="low");var a=o;Object.defineProperties(this,{_state:{set:function(s){var c=this;if(a!==s){a=s;var l=this._whenDeferreds.get(a);l.forEach(function(u){return u.resolve(c)}),l.clear()}},get:function(){return a}},_whenDeferreds:{value:new Map([["high",new Set],["low",new Set]])}})}return Object.defineProperty(i.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),i.prototype.lower=function(){return this.transition("low")},i.prototype.raise=function(){return this.transition("high")},i.prototype.transition=function(o){if(!e[this.state].has(o))throw n(this.state,o);return this._state=o,this},i.prototype.when=function(o){if(this.state===o)return Promise.resolve(this);if(!e[this.state].has(o))return Promise.reject(n(this.state,o));var a=t();return this._whenDeferreds.get(o).add(a),a.promise},i}();function n(i,o){return new Error('Cannot transition from "'.concat(i,'" to "').concat(o,'"'))}return Af=r,Af}var Lf,mw;function k4(){if(mw)return Lf;mw=1;var t=function(){function e(r){Object.defineProperties(this,{track:{enumerable:!0,value:r,writable:!0}})}return e}();return Lf=t,Lf}var If,gw;function x4(){if(gw)return If;gw=1;var t=T&&T.__extends||function(){var O=function(I,P){return O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(L,N){L.__proto__=N}||function(L,N){for(var $ in N)Object.prototype.hasOwnProperty.call(N,$)&&(L[$]=N[$])},O(I,P)};return function(I,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");O(I,P);function L(){this.constructor=I}I.prototype=P===null?Object.create(P):(L.prototype=P.prototype,new L)}}(),e=T&&T.__read||function(O,I){var P=typeof Symbol=="function"&&O[Symbol.iterator];if(!P)return O;var L=P.call(O),N,$=[],j;try{for(;(I===void 0||I-- >0)&&!(N=L.next()).done;)$.push(N.value)}catch(M){j={error:M}}finally{try{N&&!N.done&&(P=L.return)&&P.call(L)}finally{if(j)throw j.error}}return $},r=T&&T.__spreadArray||function(O,I,P){if(P||arguments.length===2)for(var L=0,N=I.length,$;L<N;L++)($||!(L in I))&&($||($=Array.prototype.slice.call(I,0,L)),$[L]=I[L]);return O.concat($||Array.prototype.slice.call(I))},n=GE(),i=Xm(),o=nC(),a=KE,s=k4(),c=Lt,l=c.getSdpFormat,u=c.updatePlanBTrackIdsToSSRCs,d=c.updateUnifiedPlanTrackIdsToSSRCs,h=be,f=h.delegateMethods,_=h.interceptEvent,v=h.isIOSChrome,g=h.legacyPromise,y=h.proxyProperties,m=l()==="unified",w=function(O){t(I,O);function I(P,L){P===void 0&&(P={});var N=O.call(this)||this,$=Object.assign(P.iceTransportPolicy?{iceTransports:P.iceTransportPolicy}:{},P);_(N,"datachannel"),_(N,"signalingstatechange");var j=l($.sdpSemantics),M=new RTCPeerConnection($,L);return Object.defineProperties(N,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_localStream:{value:new a},_peerConnection:{value:M},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_sdpFormat:{value:j},_senders:{value:new Map},_signalingStateLatch:{value:new o},_tracksToSSRCs:{value:new Map,writable:!0}}),M.addEventListener("datachannel",function(B){A(B.channel),N.dispatchEvent(B)}),M.addEventListener("signalingstatechange",function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];M.signalingState==="stable"&&(N._appliedTracksToSSRCs=new Map(N._tracksToSSRCs)),!N._pendingLocalOffer&&!N._pendingRemoteOffer&&N.dispatchEvent.apply(N,r([],e(B),!1))}),M.ontrack=function(){},typeof M.addTrack!="function"&&M.addStream(N._localStream),y(RTCPeerConnection.prototype,N,M),N}return Object.defineProperty(I.prototype,"localDescription",{get:function(){return this._pendingLocalOffer?this._pendingLocalOffer:this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer?this._pendingRemoteOffer:this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(I.prototype,"signalingState",{get:function(){return this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),I.prototype.addTrack=function(P){for(var L,N=[],$=1;$<arguments.length;$++)N[$-1]=arguments[$];if(typeof this._peerConnection.addTrack=="function")return(L=this._peerConnection).addTrack.apply(L,r([P],e(N),!1));if(this._peerConnection.signalingState==="closed")throw new Error("Cannot add MediaStreamTrack [".concat(P.id,`, 
        `).concat(P.kind,"]: RTCPeerConnection is closed"));var j=this._senders.get(P);if(j&&j.track)throw new Error("Cannot add MediaStreamTrack ['".concat(P.id,`, 
        `).concat(P.kind,"]: RTCPeerConnection already has it"));return this._peerConnection.removeStream(this._localStream),this._localStream.addTrack(P),this._peerConnection.addStream(this._localStream),j=new s(P),this._senders.set(P,j),j},I.prototype.removeTrack=function(P){if(this._peerConnection.signalingState==="closed")throw new Error("Cannot remove MediaStreamTrack: RTCPeerConnection is closed");if(typeof this._peerConnection.addTrack=="function")try{return this._peerConnection.removeTrack(P)}catch{}else{var L=P.track;if(!L)return;P=this._senders.get(L),P&&P.track&&(P.track=null,this._peerConnection.removeStream(this._localStream),this._localStream.removeTrack(L),this._peerConnection.addStream(this._localStream))}},I.prototype.getSenders=function(){return typeof this._peerConnection.addTrack=="function"?this._peerConnection.getSenders():Array.from(this._senders.values())},I.prototype.addIceCandidate=function(P){for(var L=this,N=[],$=1;$<arguments.length;$++)N[$-1]=arguments[$];var j;return this.signalingState==="have-remote-offer"?j=this._signalingStateLatch.when("low").then(function(){return L._peerConnection.addIceCandidate(P)}):j=this._peerConnection.addIceCandidate(P),N.length>0?g.apply(void 0,r([j],e(N),!1)):j},I.prototype.close=function(){this.signalingState!=="closed"&&(this._pendingLocalOffer=null,this._pendingRemoteOffer=null,this._peerConnection.close())},I.prototype.createAnswer=function(){for(var P=this,L=[],N=0;N<arguments.length;N++)L[N]=arguments[N];var $;return this._pendingRemoteOffer?$=this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return P._signalingStateLatch.lower(),P._peerConnection.createAnswer()}).then(function(j){return P._pendingRemoteOffer=null,P._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:D(P._sdpFormat,P._tracksToSSRCs,j.sdp)})},function(j){throw P._pendingRemoteOffer=null,j}):$=this._peerConnection.createAnswer().then(function(j){return P._rolledBackTracksToSSRCs.clear(),new n({type:"answer",sdp:D(P._sdpFormat,P._tracksToSSRCs,j.sdp)})}),L.length>1?g.apply(void 0,r([$],e(L),!1)):$},I.prototype.createOffer=function(){for(var P=this,L=[],N=0;N<arguments.length;N++)L[N]=arguments[N];var $=e(L,3),j=$[0],M=$[1],B=$[2],U=B||j||{};if(v()){if(U.offerToReceiveVideo&&!this._audioTransceiver&&!(m&&E(this,"audio"))){delete U.offerToReceiveAudio;try{this._audioTransceiver=m?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(K){return Promise.reject(K)}}if(U.offerToReceiveVideo&&!this._videoTransceiver&&!(m&&E(this,"video"))){delete U.offerToReceiveVideo;try{this._videoTransceiver=m?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(K){return Promise.reject(K)}}}var Q=this._peerConnection.createOffer(U).then(function(K){return P._rolledBackTracksToSSRCs.clear(),new n({type:K.type,sdp:D(P._sdpFormat,P._tracksToSSRCs,K.sdp)})});return L.length>1?g(Q,j,M):Q},I.prototype.createDataChannel=function(P,L){L=R(L);var N=this._peerConnection.createDataChannel(P,L);return A(N),N},I.prototype.setLocalDescription=function(){for(var P=[],L=0;L<arguments.length;L++)P[L]=arguments[L];var N=e(P,3),$=N[0],j=N[1],M=N[2];this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear());var B=S(this,!0,$);return P.length>1?g(B,j,M):B},I.prototype.setRemoteDescription=function(){for(var P=[],L=0;L<arguments.length;L++)P[L]=arguments[L];var N=e(P,3),$=N[0],j=N[1],M=N[2];this._rolledBackTracksToSSRCs.clear();var B=S(this,!1,$);return P.length>1?g(B,j,M):B},I}(i);f(RTCPeerConnection.prototype,w.prototype,"_peerConnection");function S(O,I,P){function L(K){I?O._pendingLocalOffer=K:O._pendingRemoteOffer=K}function N(){I?O._pendingLocalOffer=null:O._pendingRemoteOffer=null}var $=I?O._pendingLocalOffer:O._pendingRemoteOffer,j=I?O._pendingRemoteOffer:O._pendingLocalOffer,M=I?"have-local-offer":"have-remote-offer",B=I?"setLocalDescription":"setRemoteDescription",U;if(!I&&j&&P.type==="answer")U=k(O,P);else if(P.type==="offer"){if(O.signalingState!==M&&O.signalingState!=="stable")return Promise.reject(new Error("Cannot set ".concat(I?"local":"remote"," offer in state ").concat(O.signalingState)));!$&&O._signalingStateLatch.state==="low"&&O._signalingStateLatch.raise();var Q=O.signalingState;L(x(P)),U=Promise.resolve(),O.signalingState!==Q&&U.then(function(){return O.dispatchEvent(new Event("signalingstatechange"))})}else P.type==="rollback"&&(O.signalingState!==M?U=Promise.reject(new Error("Cannot rollback ".concat(I?"local":"remote"," description in ").concat(O.signalingState))):(N(),O._rolledBackTracksToSSRCs=new Map(O._tracksToSSRCs),O._tracksToSSRCs=new Map(O._appliedTracksToSSRCs),U=Promise.resolve(),U.then(function(){return O.dispatchEvent(new Event("signalingstatechange"))})));return U||O._peerConnection[B](x(P))}function k(O,I){var P=O._pendingLocalOffer;return O._peerConnection.setLocalDescription(P).then(function(){return O._pendingLocalOffer=null,O.setRemoteDescription(I)}).then(function(){O._signalingStateLatch.lower()})}function E(O,I){return!!O.getTransceivers().find(function(P){var L=P.receiver,N=L===void 0?{}:L,$=N.track,j=$===void 0?{}:$;return j.kind===I})}function x(O){return O instanceof n&&O._description?O._description:new RTCSessionDescription(O)}function C(){return"maxRetransmitTime"in RTCDataChannel.prototype&&!("maxPacketLifeTime"in RTCDataChannel.prototype)}function R(O){return O=Object.assign({},O),C()&&"maxPacketLifeTime"in O&&(O.maxRetransmitTime=O.maxPacketLifeTime),O}function A(O){return Object.defineProperty(O,"maxRetransmits",{value:O.maxRetransmits===65535?null:O.maxRetransmits}),C()&&Object.defineProperty(O,"maxPacketLifeTime",{value:O.maxRetransmitTime===65535?null:O.maxRetransmitTime}),O}function D(O,I,P){return O==="unified"?d(I,P):u(I,P)}return If=w,If}var Nf,yw;function iC(){return yw||(yw=1,Nf=RTCSessionDescription),Nf}var Mf,_w;function T4(){if(_w)return Mf;_w=1;var t=T&&T.__extends||function(){var v=function(g,y){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,w){m.__proto__=w}||function(m,w){for(var S in w)Object.prototype.hasOwnProperty.call(w,S)&&(m[S]=w[S])},v(g,y)};return function(g,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");v(g,y);function m(){this.constructor=g}g.prototype=y===null?Object.create(y):(m.prototype=y.prototype,new m)}}(),e=T&&T.__read||function(v,g){var y=typeof Symbol=="function"&&v[Symbol.iterator];if(!y)return v;var m=y.call(v),w,S=[],k;try{for(;(g===void 0||g-- >0)&&!(w=m.next()).done;)S.push(w.value)}catch(E){k={error:E}}finally{try{w&&!w.done&&(y=m.return)&&y.call(m)}finally{if(k)throw k.error}}return S},r=T&&T.__spreadArray||function(v,g,y){if(y||arguments.length===2)for(var m=0,w=g.length,S;m<w;m++)(S||!(m in g))&&(S||(S=Array.prototype.slice.call(g,0,m)),S[m]=g[m]);return v.concat(S||Array.prototype.slice.call(g))},n=Xm(),i=iC(),o=Lt.updateUnifiedPlanTrackIdsToSSRCs,a=be,s=a.delegateMethods,c=a.interceptEvent,l=a.legacyPromise,u=a.proxyProperties,d=function(v){t(g,v);function g(y){var m=v.call(this)||this;c(m,"signalingstatechange");var w=new RTCPeerConnection(y);Object.defineProperties(m,{_initiallyNegotiatedDtlsRole:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:w},_rollingBack:{value:!1,writable:!0},_tracksToSSRCs:{value:new Map},peerIdentity:{enumerable:!0,value:Promise.resolve({idp:"",name:""})}});var S;return w.addEventListener("signalingstatechange",function(){for(var k=[],E=0;E<arguments.length;E++)k[E]=arguments[E];!m._rollingBack&&m.signalingState!==S&&(S=m.signalingState,m._isClosed?setTimeout(function(){return m.dispatchEvent.apply(m,r([],e(k),!1))}):m.dispatchEvent.apply(m,r([],e(k),!1)))}),u(RTCPeerConnection.prototype,m,w),m}return Object.defineProperty(g.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"localDescription",{get:function(){return _(this._peerConnection.localDescription,this._initiallyNegotiatedDtlsRole)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),g.prototype.createAnswer=function(){for(var y=this,m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];var S;return S=this._peerConnection.createAnswer().then(function(k){return f(y,k),_(k,y._initiallyNegotiatedDtlsRole)}),typeof m[0]=="function"?l.apply(void 0,r([S],e(m),!1)):S},g.prototype.createOffer=function(){for(var y=this,m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];var S=e(m,3),k=S[0],E=S[1],x=S[2],C=x||k||{},R;if(this.signalingState==="have-local-offer"||this.signalingState==="have-remote-offer"){var A=this.signalingState==="have-local-offer";R=h(this,A,function(){return y.createOffer(C)})}else R=this._peerConnection.createOffer(C);return R=R.then(function(D){return new i({type:D.type,sdp:o(y._tracksToSSRCs,D.sdp)})}),m.length>1?l(R,k,E):R},g.prototype.setLocalDescription=function(){for(var y,m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];var S=e(m),k=S[0],E=S.slice(1),x;return k&&k.type==="answer"&&this.signalingState==="have-local-offer"&&(x=Promise.reject(new Error("Cannot set local answer in state have-local-offer"))),x?m.length>1?l.apply(void 0,r([x],e(E),!1)):x:(y=this._peerConnection).setLocalDescription.apply(y,r([],e(m),!1))},g.prototype.setRemoteDescription=function(){for(var y=this,m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];var S=e(m),k=S[0],E=S.slice(1),x;return k&&this.signalingState==="have-remote-offer"&&(k.type==="answer"?x=Promise.reject(new Error("Cannot set remote answer in state have-remote-offer")):k.type==="offer"&&(x=h(this,!1,function(){return y._peerConnection.setRemoteDescription(k)}))),x||(x=this._peerConnection.setRemoteDescription(k)),x=x.then(function(){return f(y,k,!0)}),m.length>1?l.apply(void 0,r([x],e(E),!1)):x},g.prototype.close=function(){this.signalingState!=="closed"&&(this._isClosed=!0,this._peerConnection.close())},g}(n);s(RTCPeerConnection.prototype,d.prototype,"_peerConnection");function h(v,g,y){var m=g?"setLocalDescription":"setRemoteDescription";return v._rollingBack=!0,v._peerConnection[m](new i({type:"rollback"})).then(y).then(function(w){return v._rollingBack=!1,w},function(w){throw v._rollingBack=!1,w})}function f(v,g,y){if(!(v._initiallyNegotiatedDtlsRole||g.type==="offer")){var m=g.sdp.match(/a=setup:([a-z]+)/);if(m){var w=m[1];v._initiallyNegotiatedDtlsRole=y?{active:"passive",passive:"active"}[w]:w}}}function _(v,g){return v&&v.type==="answer"&&g?new i({type:v.type,sdp:v.sdp.replace(/a=setup:[a-z]+/g,"a=setup:"+g)}):v}return Mf=d,Mf}var Df,ww;function E4(){if(ww)return Df;ww=1;var t=T&&T.__extends||function(){var S=function(k,E){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,C){x.__proto__=C}||function(x,C){for(var R in C)Object.prototype.hasOwnProperty.call(C,R)&&(x[R]=C[R])},S(k,E)};return function(k,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");S(k,E);function x(){this.constructor=k}k.prototype=E===null?Object.create(E):(x.prototype=E.prototype,new x)}}(),e=T&&T.__read||function(S,k){var E=typeof Symbol=="function"&&S[Symbol.iterator];if(!E)return S;var x=E.call(S),C,R=[],A;try{for(;(k===void 0||k-- >0)&&!(C=x.next()).done;)R.push(C.value)}catch(D){A={error:D}}finally{try{C&&!C.done&&(E=x.return)&&E.call(x)}finally{if(A)throw A.error}}return R},r=T&&T.__spreadArray||function(S,k,E){if(E||arguments.length===2)for(var x=0,C=k.length,R;x<C;x++)(R||!(x in k))&&(R||(R=Array.prototype.slice.call(k,0,x)),R[x]=k[x]);return S.concat(R||Array.prototype.slice.call(k))},n=Xm(),i=nC(),o=Lt,a=o.getSdpFormat,s=o.updatePlanBTrackIdsToSSRCs,c=o.updateUnifiedPlanTrackIdsToSSRCs,l=be,u=l.delegateMethods,d=l.interceptEvent,h=l.proxyProperties,f=a()==="unified",_=f?c:s,v=function(S){t(k,S);function k(E){var x=S.call(this)||this;d(x,"datachannel"),d(x,"iceconnectionstatechange"),d(x,"signalingstatechange"),d(x,"track");var C=new RTCPeerConnection(E);return Object.defineProperties(x,{_appliedTracksToSSRCs:{value:new Map,writable:!0},_audioTransceiver:{value:null,writable:!0},_isClosed:{value:!1,writable:!0},_peerConnection:{value:C},_pendingLocalOffer:{value:null,writable:!0},_pendingRemoteOffer:{value:null,writable:!0},_rolledBackTracksToSSRCs:{value:new Map,writable:!0},_signalingStateLatch:{value:new i},_tracksToSSRCs:{value:new Map,writable:!0},_videoTransceiver:{value:null,writable:!0}}),C.addEventListener("datachannel",function(R){w(R.channel),x.dispatchEvent(R)}),C.addEventListener("iceconnectionstatechange",function(){for(var R=[],A=0;A<arguments.length;A++)R[A]=arguments[A];x._isClosed||x.dispatchEvent.apply(x,r([],e(R),!1))}),C.addEventListener("signalingstatechange",function(){for(var R=[],A=0;A<arguments.length;A++)R[A]=arguments[A];x._isClosed||(C.signalingState==="stable"&&(x._appliedTracksToSSRCs=new Map(x._tracksToSSRCs)),!x._pendingLocalOffer&&!x._pendingRemoteOffer&&x.dispatchEvent.apply(x,r([],e(R),!1)))}),C.addEventListener("track",function(R){x._pendingRemoteOffer=null,x.dispatchEvent(R)}),h(RTCPeerConnection.prototype,x,C),x}return Object.defineProperty(k.prototype,"localDescription",{get:function(){return this._pendingLocalOffer||this._peerConnection.localDescription},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"iceConnectionState",{get:function(){return this._isClosed?"closed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"iceGatheringState",{get:function(){return this._isClosed?"complete":this._peerConnection.iceGatheringState},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"remoteDescription",{get:function(){return this._pendingRemoteOffer||this._peerConnection.remoteDescription},enumerable:!1,configurable:!0}),Object.defineProperty(k.prototype,"signalingState",{get:function(){return this._isClosed?"closed":this._pendingLocalOffer?"have-local-offer":this._pendingRemoteOffer?"have-remote-offer":this._peerConnection.signalingState},enumerable:!1,configurable:!0}),k.prototype.addIceCandidate=function(E){var x=this;return this.signalingState==="have-remote-offer"?this._signalingStateLatch.when("low").then(function(){return x._peerConnection.addIceCandidate(E)}):this._peerConnection.addIceCandidate(E)},k.prototype.createOffer=function(E){var x=this;if(E=Object.assign({},E),E.offerToReceiveVideo&&!this._audioTransceiver&&!(f&&m(this,"audio"))){delete E.offerToReceiveAudio;try{this._audioTransceiver=f?this.addTransceiver("audio",{direction:"recvonly"}):this.addTransceiver("audio")}catch(C){return Promise.reject(C)}}if(E.offerToReceiveVideo&&!this._videoTransceiver&&!(f&&m(this,"video"))){delete E.offerToReceiveVideo;try{this._videoTransceiver=f?this.addTransceiver("video",{direction:"recvonly"}):this.addTransceiver("video")}catch(C){return Promise.reject(C)}}return this._peerConnection.createOffer(E).then(function(C){return x._rolledBackTracksToSSRCs.clear(),new RTCSessionDescription({type:C.type,sdp:_(x._tracksToSSRCs,C.sdp)})})},k.prototype.createAnswer=function(E){var x=this;return this._pendingRemoteOffer?this._peerConnection.setRemoteDescription(this._pendingRemoteOffer).then(function(){return x._signalingStateLatch.lower(),x._peerConnection.createAnswer()}).then(function(C){return x._pendingRemoteOffer=null,x._rolledBackTracksToSSRCs.clear(),f?new RTCSessionDescription({type:C.type,sdp:_(x._tracksToSSRCs,C.sdp)}):C},function(C){throw x._pendingRemoteOffer=null,C}):this._peerConnection.createAnswer(E).then(function(C){return x._rolledBackTracksToSSRCs.clear(),f?new RTCSessionDescription({type:C.type,sdp:_(x._tracksToSSRCs,C.sdp)}):C})},k.prototype.createDataChannel=function(E,x){var C=this._peerConnection.createDataChannel(E,x);return w(C),C},k.prototype.removeTrack=function(E){E.replaceTrack(null),this._peerConnection.removeTrack(E)},k.prototype.setLocalDescription=function(E){return this._rolledBackTracksToSSRCs.size>0&&(this._tracksToSSRCs=new Map(this._rolledBackTracksToSSRCs),this._rolledBackTracksToSSRCs.clear()),g(this,!0,E)},k.prototype.setRemoteDescription=function(E){return this._rolledBackTracksToSSRCs.clear(),g(this,!1,E)},k.prototype.close=function(){var E=this;this._isClosed||(this._isClosed=!0,this._peerConnection.close(),setTimeout(function(){E.dispatchEvent(new Event("iceconnectionstatechange")),E.dispatchEvent(new Event("signalingstatechange"))}))},k}(n);u(RTCPeerConnection.prototype,v.prototype,"_peerConnection");function g(S,k,E){function x(P){k?S._pendingLocalOffer=P:S._pendingRemoteOffer=P}function C(){k?S._pendingLocalOffer=null:S._pendingRemoteOffer=null}var R=k?S._pendingLocalOffer:S._pendingRemoteOffer,A=k?S._pendingRemoteOffer:S._pendingLocalOffer,D=k?"have-local-offer":"have-remote-offer",O=k?"setLocalDescription":"setRemoteDescription";if(!k&&A&&E.type==="answer")return y(S,E);if(E.type==="offer"){if(S.signalingState!==D&&S.signalingState!=="stable")return Promise.reject(new Error("Cannot set ".concat(k?"local":"remote",`
        offer in state `).concat(S.signalingState)));!R&&S._signalingStateLatch.state==="low"&&S._signalingStateLatch.raise();var I=S.signalingState;return x(E),S.signalingState!==I?Promise.resolve().then(function(){return S.dispatchEvent(new Event("signalingstatechange"))}):Promise.resolve()}else if(E.type==="rollback")return S.signalingState!==D?Promise.reject(new Error(`Cannot rollback 
        `.concat(k?"local":"remote"," description in ").concat(S.signalingState))):(C(),S._rolledBackTracksToSSRCs=new Map(S._tracksToSSRCs),S._tracksToSSRCs=new Map(S._appliedTracksToSSRCs),Promise.resolve().then(function(){return S.dispatchEvent(new Event("signalingstatechange"))}));return S._peerConnection[O](E)}function y(S,k){var E=S._pendingLocalOffer;return S._peerConnection.setLocalDescription(E).then(function(){return S._pendingLocalOffer=null,S.setRemoteDescription(k)}).then(function(){return S._signalingStateLatch.lower()})}function m(S,k){return!!S.getTransceivers().find(function(E){var x=E.receiver,C=x===void 0?{}:x,R=C.track,A=R===void 0?{}:R;return A.kind===k})}function w(S){return Object.defineProperties(S,{maxPacketLifeTime:{value:S.maxPacketLifeTime===65535?null:S.maxPacketLifeTime},maxRetransmits:{value:S.maxRetransmits===65535?null:S.maxRetransmits}})}return Df=v,Df}if(typeof RTCPeerConnection=="function"){var C4=be.guessBrowser;switch(C4()){case"chrome":Ao.exports=x4();break;case"firefox":Ao.exports=T4();break;case"safari":Ao.exports=E4();break;default:Ao.exports=RTCPeerConnection;break}}else Ao.exports=function(){throw new Error("RTCPeerConnection is not supported")};var P4=Ao.exports,as={exports:{}};if(typeof RTCSessionDescription=="function"){var O4=be.guessBrowser;switch(O4()){case"chrome":as.exports=GE();break;case"firefox":as.exports=iC();break;default:as.exports=RTCSessionDescription;break}}else as.exports=function(){throw new Error("RTCSessionDescription is not supported")};var R4=as.exports,oC={};Object.defineProperties(oC,{getStats:{enumerable:!0,value:f4},getUserMedia:{enumerable:!0,value:p4},MediaStream:{enumerable:!0,value:KE},MediaStreamTrack:{enumerable:!0,value:v4},RTCIceCandidate:{enumerable:!0,value:m4},RTCPeerConnection:{enumerable:!0,value:P4},RTCSessionDescription:{enumerable:!0,value:R4}});var uo=oC,Zm=function(e,r){if(e&&r)if(e.super_=r,typeof Object.create=="function")e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});else{var n=function(){function i(){}return i}();n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}},j4=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o};function A4(){return/Android/.test(navigator.userAgent)}function aC(){return!!(navigator&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2)}function sC(){return aC()&&window.screen.width>=744&&(/Macintosh/i.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/iPad/.test(navigator.platform))}function cC(){return aC()&&window.screen.width<=476&&(/Macintosh/i.test(navigator.userAgent)||/iPhone/.test(navigator.userAgent)||/iPhone/.test(navigator.platform))}function L4(){return sC()||cC()}function I4(){return/Mobi/.test(navigator.userAgent)}function N4(t){return t==="chrome"&&/Edge/.test(navigator.userAgent)&&(typeof chrome>"u"||typeof chrome.runtime>"u")}function M4(t){if(t!=="chrome")return null;if("brave"in navigator)return"brave";var e=$4(navigator.userAgent),r=e.reduce(function(a,s){return a.replace(s,"")},navigator.userAgent),n=r.match(/[^\s]+/g)||[],i=j4(n.map(function(a){return a.split("/")[0].toLowerCase()})),o=i.slice(2);return o.find(function(a){return!["chrome","mobile","safari"].includes(a)})||null}function D4(t){return t!=="safari"?null:"brave"in navigator?"brave":["edge","edg"].find(function(e){return navigator.userAgent.toLowerCase().includes(e)})||null}function $4(t){for(var e=[],r=[],n=0;n<t.length;n++)if(t[n]==="(")e.push(n);else if(t[n]===")"&&e.length>0){var i=e.pop();e.length===0&&r.push(t.substring(i,n+1))}return r}var fo={isAndroid:A4,isIOS:L4,isIpad:sC,isIphone:cC,isMobile:I4,isNonChromiumEdge:N4,mobileWebKitBrowser:D4,rebrandedChromeBrowser:M4};function F4(t){return t=typeof t=="number"?t:0,new Promise(function(e){return setTimeout(e,t)})}function U4(t,e,r){r=typeof r=="number"?r:250;var n=t.createMediaStreamSource(e),i=t.createAnalyser();i.fftSize=2048,n.connect(i);var o=new Uint8Array(i.fftSize),a=!1;setTimeout(function(){a=!0},r);function s(){return a?Promise.resolve(!0):(i.getByteTimeDomainData(o),o.some(function(c){return c!==128&&c!==0})?Promise.resolve(!1):F4().then(s))}return s().then(function(c){return n.disconnect(),c},function(c){throw n.disconnect(),c})}var lC=U4,$f,bw;function Sd(){if(bw)return $f;bw=1;var t=typeof AudioContext<"u"?AudioContext:typeof webkitAudioContext<"u"?webkitAudioContext:null,e=function(){function r(n){n=Object.assign({AudioContext:t},n),Object.defineProperties(this,{_AudioContext:{value:n.AudioContext},_audioContext:{value:null,writable:!0},_holders:{value:new Set},AudioContextFactory:{enumerable:!0,value:r}})}return r.prototype.getOrCreate=function(n){if(!this._holders.has(n)&&(this._holders.add(n),this._AudioContext&&!this._audioContext))try{this._audioContext=new this._AudioContext}catch{}return this._audioContext},r.prototype.release=function(n){this._holders.has(n)&&(this._holders.delete(n),!this._holders.size&&this._audioContext&&(this._audioContext.close(),this._audioContext=null))},r}();return $f=new e,$f}var B4=lC,V4=3,z4=250;function W4(t){var e=Sd(),r={},n=e.getOrCreate(r),i=V4;function o(){return i--,B4(n,t.srcObject,z4).then(function(a){return a?i>0?o():!0:!1}).catch(function(){return!0})}return o().finally(function(){e.release(r)})}var uC=W4,ll=J.defer,H4=function(){function t(){Object.defineProperties(this,{_audio:{value:ll(),writable:!0},_video:{value:ll(),writable:!0}}),this._audio.resolve(),this._video.resolve()}return t.prototype.resolveDeferred=function(e){e==="audio"?this._audio.resolve():this._video.resolve()},t.prototype.startDeferred=function(e){e==="audio"?this._audio=ll():this._video=ll()},t.prototype.whenResolved=function(e){return e==="audio"?this._audio.promise:this._video.promise},t}(),dC=new H4,q4=St.EventEmitter,K4=J.hidePrivateAndCertainPublicPropertiesInClass,gc=K4(q4,["domain"]),G4=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q4=gc,fC=J,J4=fC.buildLogLevels,Y4=fC.valueToJSON,X4=Ee.DEFAULT_LOG_LEVEL,Z4=pn,eB=0,tB=function(t){G4(e,t);function e(r,n,i){var o=this;i=Object.assign({name:r,log:null,logLevel:X4},i),o=t.call(this)||this;var a=String(i.name),s=J4(i.logLevel),c=i.log?i.log.createLog("media",o):new Z4("media",o,s,i.loggerName);return Object.defineProperties(o,{_instanceId:{value:++eB},_log:{value:c},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:a}}),o}return e.prototype.toJSON=function(){return Y4(this)},e}(Q4),eg=tB,rB=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nB=fo.isIOS,iB=uo.MediaStream,hC=J,oB=hC.waitForEvent,aB=hC.waitForSometime,sB=dC,cB=eg,lB=function(t){rB(e,t);function e(r,n){var i=this;n=Object.assign({playPausedElementsIfNotBackgrounded:nB()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},n),i=t.call(this,r.id,r.kind,n)||this;var o=!1;if(n=Object.assign({MediaStream:iB},n),typeof n.MediaStream!="function")throw new Error("MediaTrack received an invalid MediaStream constructor: "+n.MediaStream);return Object.defineProperties(i,{_attachments:{value:new Set},_dummyEl:{value:null,writable:!0},_elShims:{value:new WeakMap},_isStarted:{get:function(){return o},set:function(a){o=a}},_playPausedElementsIfNotBackgrounded:{value:n.playPausedElementsIfNotBackgrounded},_shouldShimAttachedElements:{value:n.workaroundWebKitBug212780||n.playPausedElementsIfNotBackgrounded},_unprocessedTrack:{value:null,writable:!0},_MediaStream:{value:n.MediaStream},_mapMediaElement:{value:n.mapMediaElement},_disposeMediaElement:{value:n.disposeMediaElement},isStarted:{enumerable:!0,get:function(){return o}},mediaStreamTrack:{enumerable:!0,get:function(){return this._unprocessedTrack||r.track}},processedTrack:{enumerable:!0,value:null,writable:!0}}),i._initialize(),i}return e.prototype._start=function(){this._log.debug("Started"),this._isStarted=!0,this._dummyEl&&(this._dummyEl.oncanplay=null),this.emit("started",this)},e.prototype._initialize=function(){var r=this;this._log.debug("Initializing"),this._dummyEl=this._createElement(),this.mediaStreamTrack&&this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("ended",function n(){r._end(),r.mediaStreamTrack.removeEventListener("ended",n)}):this.mediaStreamTrack&&(this.mediaStreamTrack.onended=function(){r._end(),r.mediaStreamTrack.onended=null}),this._dummyEl&&(this._dummyEl.muted=!0,this._dummyEl.oncanplay=this._start.bind(this,this._dummyEl),this._attach(this._dummyEl,this.mediaStreamTrack),this._attachments.delete(this._dummyEl))},e.prototype._end=function(){this._log.debug("Ended"),this._dummyEl&&(this._dummyEl.remove(),this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl.oncanplay=null,this._dummyEl=null)},e.prototype.attach=function(r){var n=this;if(typeof r=="string"?r=this._selectElement(r):r||(r=this._createElement()),this._log.debug("Attempting to attach to element:",r),r=this._attach(r),this._shouldShimAttachedElements&&!this._elShims.has(r)){var i=this._playPausedElementsIfNotBackgrounded?function(){return uB(r,n._log)}:null;this._elShims.set(r,dB(r,i))}return r},e.prototype._attach=function(r,n){n===void 0&&(n=this.processedTrack||this.mediaStreamTrack);var i=r.srcObject;i instanceof this._MediaStream||(i=new this._MediaStream);var o=n.kind==="audio"?"getAudioTracks":"getVideoTracks";return i[o]().forEach(function(a){i.removeTrack(a)}),i.addTrack(n),this._mapMediaElement&&(this._log.debug("Mapping element using mapMediaElement before attaching media to element"),this._mapMediaElement(r)),r.srcObject=i,r.autoplay=!0,r.playsInline=!0,this._attachments.has(r)||this._attachments.add(r),r},e.prototype._selectElement=function(r){var n=document.querySelector(r);if(!n)throw new Error("Selector matched no element: ".concat(r));return n},e.prototype._updateElementsMediaStreamTrack=function(){var r=this;this._log.debug("Reattaching all elements to update mediaStreamTrack"),this._getAllAttachedElements().forEach(function(n){return r._attach(n)})},e.prototype._createElement=function(){return typeof document<"u"?document.createElement(this.kind):null},e.prototype.detach=function(r){var n;return typeof r=="string"?n=[this._selectElement(r)]:r?n=[r]:n=this._getAllAttachedElements(),this._log.debug("Attempting to detach from elements:",n),this._detachElements(n),r?n[0]:n},e.prototype._detachElements=function(r){return r.map(this._detachElement.bind(this))},e.prototype._detachElement=function(r){if(!this._attachments.has(r))return r;var n=r.srcObject;if(n instanceof this._MediaStream&&n.removeTrack(this.processedTrack||this.mediaStreamTrack),this._disposeMediaElement&&(this._log.debug("Disposing element using disposeMediaElement after removing media from element"),this._disposeMediaElement(r)),this._attachments.delete(r),this._shouldShimAttachedElements&&this._elShims.has(r)){var i=this._elShims.get(r);i.unShim(),this._elShims.delete(r)}return r},e.prototype._getAllAttachedElements=function(){var r=[];return this._attachments.forEach(function(n){r.push(n)}),r},e}(cB);function uB(t,e){var r=t.tagName.toLowerCase();e.warn("Unintentionally paused:",t),Promise.race([oB(document,"visibilitychange"),aB(1e3)]).then(function(){document.visibilityState==="visible"&&sB.whenResolved("audio").then(function(){return e.info("Playing unintentionally paused <".concat(r,"> element")),e.debug("Element:",t),t.play()}).then(function(){e.info("Successfully played unintentionally paused <".concat(r,"> element")),e.debug("Element:",t)}).catch(function(n){e.warn("Error while playing unintentionally paused <".concat(r,"> element:"),{error:n,el:t})})})}function dB(t,e){e===void 0&&(e=null);var r=t.pause,n=t.play,i=!1;t.pause=function(){return i=!0,r.call(t)},t.play=function(){return i=!1,n.call(t)};var o=e?function(){i||e()}:null;return o&&t.addEventListener("pause",o),{pausedIntentionally:function(){return i},unShim:function(){t.pause=r,t.play=n,o&&t.removeEventListener("pause",o)}}}var pC=lB,fB=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hB=pC,pB=function(t){fB(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.attach=function(){return t.prototype.attach.apply(this,arguments)},e.prototype.detach=function(){return t.prototype.detach.apply(this,arguments)},e}(hB),vC=pB,Hp=null,vB=3,Sw=50,kw=250,xw=50;function mB(t){try{var e=Hp.getContext("2d");e.drawImage(t,0,0,xw,Sw);var r=e.getImageData(0,0,xw,Sw),n=r.data.filter(function(o,a){return(a+1)%4}),i=Math.max.apply(Math,n);return i===0}catch(o){return console.log("Error checking silence: ",o),!1}}function gB(t){return Hp=Hp||document.createElement("canvas"),new Promise(function(e){var r=vB;setTimeout(function n(){return r--,mB(t)?r>0?setTimeout(n,kw):e(!0):e(!1)},kw)})}var mC=gB,yB=function(){function t(e){e===void 0&&(e=1);var r=this;Object.defineProperties(this,{_listeners:{value:[]},_onVisibilityChange:{value:function(){r._emitVisible(document.visibilityState==="visible")}}});for(var n=0;n<e;n++)this._listeners.push([])}return t.prototype.clear=function(){for(var e=this._listeners.length,r=0;r<e;r++)this._listeners[r]=[]},t.prototype._listenerCount=function(){return this._listeners.reduce(function(e,r){return e+r.length},0)},t.prototype._emitVisible=function(e){for(var r=this,n=Promise.resolve(),i=function(a){n=n.then(function(){return r._emitVisiblePhase(a,e)})},o=1;o<=this._listeners.length;o++)i(o);return n},t.prototype._emitVisiblePhase=function(e,r){var n=this._listeners[e-1];return Promise.all(n.map(function(i){var o=i(r);return o instanceof Promise?o:Promise.resolve(o)}))},t.prototype._start=function(){document.addEventListener("visibilitychange",this._onVisibilityChange)},t.prototype._stop=function(){document.removeEventListener("visibilitychange",this._onVisibilityChange)},t.prototype.onVisibilityChange=function(e,r){if(typeof e!="number"||e<=0||e>this._listeners.length)throw new Error("invalid phase: ",e);var n=this._listeners[e-1];return n.push(r),this._listenerCount()===1&&this._start(),this},t.prototype.offVisibilityChange=function(e,r){if(typeof e!="number"||e<=0||e>this._listeners.length)throw new Error("invalid phase: ",e);var n=this._listeners[e-1],i=n.indexOf(r);return i!==-1&&(n.splice(i,1),this._listenerCount()===0&&this._stop()),this},t}(),kd=new yB(2),_B=lC;function wB(t,e,r,n,i){n=typeof n=="number"?n:3;var o=0,a=Sd(),s={},c=a.getOrCreate(s);function l(){return e(r).then(function(u){var d=r.audio?_B(c,u,i).catch(function(h){return t.warn("Encountered an error while detecting silence",h),!0}):Promise.resolve(!1);return d.then(function(h){if(h){if(n<=0)return t.warn("Got a silent audio MediaStreamTrack. Normally we would try to get a new one, but we've run out of retries; returning it anyway."),u}else return t.info("Got a non-silent audio MediaStreamTrack; returning it."),u;return t.warn("Got a silent audio MediaStreamTrack. Stopping all MediaStreamTracks and calling getUserMedia again. This is retry #".concat(++o,".")),u.getTracks().forEach(function(f){return f.stop()}),n--,l()})})}return l().then(function(u){return a.release(s),u},function(u){throw a.release(s),u})}var gC=wB,bB=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tw=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Ew=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},SB=St.EventEmitter,kB=function(t){bB(e,t);function e(){var r=t.call(this)||this;return Object.defineProperties(r,{_queuedEvents:{value:new Map}}),r}return e.prototype.dequeue=function(r){var n=this,i=!0;if(!r)return this._queuedEvents.forEach(function(a,s){i=this.dequeue(s)&&i},this),i;var o=this._queuedEvents.get(r)||[];return this._queuedEvents.delete(r),o.reduce(function(a,s){return n.emit.apply(n,Ew([],Tw([r].concat(s)),!1))&&a},i)},e.prototype.queue=function(){var r=[].slice.call(arguments);if(this.emit.apply(this,Ew([],Tw(r),!1)))return!0;var n=r[0];return this._queuedEvents.has(n)||this._queuedEvents.set(n,[]),this._queuedEvents.get(n).push(r.slice(1)),!1},e}(SB),yC=kB,xB=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TB=yC,EB=function(t){xB(e,t);function e(r,n){var i=t.call(this)||this;return Object.defineProperties(i,{id:{enumerable:!0,value:r},kind:{enumerable:!0,value:n}}),i}return e.prototype.stop=function(){this.emit("stopped")},e}(TB),_C=EB,CB=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),PB=_C,OB=function(t){CB(e,t);function e(r,n){var i=t.call(this,r,n.kind)||this;return Object.defineProperties(i,{_track:{value:n,writable:!0},enabled:{enumerable:!0,get:function(){return this._track.enabled}},readyState:{enumerable:!0,get:function(){return this._track.readyState}},track:{enumerable:!0,get:function(){return this._track}}}),i}return e.prototype.stop=function(){this.track.stop(),t.prototype.stop.call(this)},e}(PB),wC=OB,RB=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jB=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},AB=wC,LB=function(t){RB(e,t);function e(r){var n=t.call(this,r.id,r)||this;return Object.defineProperties(n,{_clones:{value:new Set},_eventsToReemitters:{value:new Map([["mute",function(){return n.queue("muted")}],["unmute",function(){return n.queue("unmuted")}]])},_senders:{value:new Set},_senderToPublisherHintCallbacks:{value:new Map},isPublishing:{enumerable:!0,get:function(){return!!this._clones.size}},muted:{enumerable:!0,get:function(){return this._track.muted}}}),n._reemitMediaStreamTrackEvents(),n}return e.prototype._reemitMediaStreamTrackEvents=function(r){r===void 0&&(r=this._track);var n=this,i=n._eventsToReemitters,o=n._track;if(r.addEventListener?i.forEach(function(s,c){return r.addEventListener(c,s)}):i.forEach(function(s,c){r["on".concat(c)]=s}),o!==r&&(i.forEach(function(s,c){return o.removeEventListener(c,s)}),o.muted!==r.muted)){var a=i.get(r.muted?"mute":"unmute");a()}},e.prototype.clone=function(){var r=new e(this.track.clone());return this._clones.add(r),r},e.prototype.removeClone=function(r){this._clones.delete(r)},e.prototype.setMediaStreamTrack=function(r){var n=this,i=Array.from(this._clones),o=Array.from(this._senders);return Promise.all(i.map(function(a){return a.setMediaStreamTrack(r.clone())}).concat(o.map(function(a){return n._replaceTrack(a,r)}))).finally(function(){n._reemitMediaStreamTrackEvents(r),n._track=r})},e.prototype.addSender=function(r,n){return this._senders.add(r),n&&this._senderToPublisherHintCallbacks.set(r,n),this},e.prototype.removeSender=function(r){return this._senders.delete(r),this._senderToPublisherHintCallbacks.delete(r),this},e.prototype.setPublisherHint=function(r){var n=jB(Array.from(this._senderToPublisherHintCallbacks.values()),1),i=n[0];return i?i(r):Promise.resolve("COULD_NOT_APPLY_HINT")},e.prototype._replaceTrack=function(r,n){var i=this;return r.replaceTrack(n).then(function(o){return i.setPublisherHint(null).catch(function(){}),i.emit("replaced"),o})},e}(AB),bC=LB,IB=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NB=uo.getUserMedia,MB=fo.isIOS,xd=J,Cw=xd.capitalize,DB=xd.defer,$B=xd.waitForSometime,FB=xd.waitForEvent,UB=Ee.typeErrors.ILLEGAL_INVOKE,BB=uC,VB=mC,Pw=kd,Ow=dC,zB=gC,WB=bC;function HB(t){return function(e){IB(r,e);function r(n,i){var o=this,a=MB()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string";i=Object.assign({getUserMedia:NB,isCreatedByCreateLocalTracks:!1,workaroundWebKitBug1208516:a,gUMSilentTrackWorkaround:zB},i);var s=new WB(n),c=s.kind;return o=e.call(this,s,i)||this,Object.defineProperties(o,{_constraints:{value:typeof i[c]=="object"?i[c]:{},writable:!0},_getUserMedia:{value:i.getUserMedia},_gUMSilentTrackWorkaround:{value:i.gUMSilentTrackWorkaround},_eventsToReemitters:{value:new Map([["muted",function(){return o.emit("muted",o)}],["unmuted",function(){return o.emit("unmuted",o)}]])},_workaroundWebKitBug1208516:{value:i.workaroundWebKitBug1208516},_workaroundWebKitBug1208516Cleanup:{value:null,writable:!0},_didCallEnd:{value:!1,writable:!0},_isCreatedByCreateLocalTracks:{value:i.isCreatedByCreateLocalTracks},_noiseCancellation:{value:i.noiseCancellation||null},_trackSender:{value:s},id:{enumerable:!0,value:s.id},isEnabled:{enumerable:!0,get:function(){return s.enabled}},isMuted:{enumerable:!0,get:function(){return s.muted}},isStopped:{enumerable:!0,get:function(){return s.readyState==="ended"}}}),o._workaroundWebKitBug1208516&&(o._workaroundWebKitBug1208516Cleanup=Rw(o)),o._reemitTrackSenderEvents(),o}return r.prototype._end=function(){var n=this;this._didCallEnd||(e.prototype._end.call(this),this._didCallEnd=!0,this._eventsToReemitters.forEach(function(i,o){return n._trackSender.removeListener(o,i)}),this.emit("stopped",this))},r.prototype._initialize=function(){this._didCallEnd&&(this._didCallEnd=!1),this._eventsToReemitters&&this._reemitTrackSenderEvents(),e.prototype._initialize.call(this)},r.prototype._reacquireTrack=function(n){var i,o=this,a=o._getUserMedia,s=o._gUMSilentTrackWorkaround,c=o._log,l=o.mediaStreamTrack.kind;c.info("Re-acquiring the MediaStreamTrack"),c.debug("Constraints:",n);var u=Object.assign({audio:!1,video:!1},(i={},i[l]=n,i)),d=this._workaroundWebKitBug1208516Cleanup?s(c,a,u):a(u);return d.then(function(h){return h.getTracks()[0]})},r.prototype._reemitTrackSenderEvents=function(){var n=this;this._eventsToReemitters.forEach(function(i,o){return n._trackSender.on(o,i)}),this._trackSender.dequeue("muted"),this._trackSender.dequeue("unmuted")},r.prototype._restart=function(n){var i=this,o=this._log;return n=n||this._constraints,this._stop(),this._reacquireTrack(n).catch(function(a){throw o.error("Failed to re-acquire the MediaStreamTrack:",{error:a,constraints:n}),a}).then(function(a){return o.info("Re-acquired the MediaStreamTrack"),o.debug("MediaStreamTrack:",a),i._constraints=Object.assign({},n),i._setMediaStreamTrack(a)})},r.prototype._setMediaStreamTrack=function(n){var i=this;return n.enabled=this.mediaStreamTrack.enabled,this._stop(),(this._unprocessedTrack?Promise.resolve().then(function(){i._unprocessedTrack=n}):this._trackSender.setMediaStreamTrack(n).catch(function(o){i._log.warn("setMediaStreamTrack failed:",{error:o,mediaStreamTrack:n})})).then(function(){i._initialize(),i._getAllAttachedElements().forEach(function(o){return i._attach(o)})})},r.prototype._stop=function(){return this.mediaStreamTrack.stop(),this._end(),this},r.prototype.enable=function(n){return n=typeof n=="boolean"?n:!0,n!==this.mediaStreamTrack.enabled&&(this._log.info("".concat(n?"En":"Dis","abling")),this.mediaStreamTrack.enabled=n,this.emit(n?"enabled":"disabled",this)),this},r.prototype.disable=function(){return this.enable(!1)},r.prototype.restart=function(n){var i=this,o=this.kind;if(!this._isCreatedByCreateLocalTracks)return Promise.reject(UB("restart","can only be called on a"+" Local".concat(Cw(o),"Track that is created using createLocalTracks")+" or createLocal".concat(Cw(o),"Track.")));this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null);var a=this._restart(n);return this._workaroundWebKitBug1208516&&(a=a.finally(function(){i._workaroundWebKitBug1208516Cleanup=Rw(i)})),a},r.prototype.stop=function(){return this._log.info("Stopping"),this._workaroundWebKitBug1208516Cleanup&&(this._workaroundWebKitBug1208516Cleanup(),this._workaroundWebKitBug1208516Cleanup=null),this._stop()},r}(t)}function Rw(t){var e=t._log,r=t.kind,n=t._noiseCancellation,i={audio:BB,video:VB}[r],o=function(){return n?n.sourceTrack:t.mediaStreamTrack},a=t._dummyEl,s=o(),c=null;function l(){return a.play().then(function(){return i(a)}).then(function(g){return g?e.warn("Silence detected"):e.info("Non-silence detected"),g}).catch(function(g){e.warn("Failed to detect silence:",g)}).finally(function(){t.processedTrack||a.pause()})}function u(){var g=t._workaroundWebKitBug1208516Cleanup,y=t.isStopped,m=y&&!!g,w=o().muted;return Promise.resolve().then(function(){return document.visibilityState==="visible"&&!c&&(w||m||l())})}function d(){return Promise.race([FB(s,"unmute"),$B(50)]).then(function(){return u()}).then(function(g){g&&!c&&(c=DB(),t._restart().finally(function(){a=t._dummyEl,_(),s=o(),f(),c.resolve(),c=null}).catch(function(m){e.error("failed to restart track: ",m)}));var y=c&&c.promise||Promise.resolve();return y.finally(function(){return Ow.resolveDeferred(r)})}).catch(function(g){e.error("error in maybeRestart: ".concat(g.message))})}function h(){var g=t._log,y=t.kind;g.info("Muted"),g.debug("LocalMediaTrack:",t),Ow.startDeferred(y)}function f(){s.addEventListener?(s.addEventListener("ended",d),s.addEventListener("mute",h),s.addEventListener("unmute",d)):(s.onended=d,s.onmute=h,s.onunmute=d)}function _(){s.removeEventListener?(s.removeEventListener("ended",d),s.removeEventListener("mute",h),s.removeEventListener("unmute",d)):(s.onended=null,s.onmute=null,s.onunmute=null)}var v=function(g){return g?d():!1};return Pw.onVisibilityChange(1,v),f(),function(){Pw.offVisibilityChange(1,v),_()}}var SC=HB,qB=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KB=fo.isIOS,GB=uC,QB=be.isIOSChrome,JB=vC,YB=SC,XB=YB(JB),ZB=function(t){qB(e,t);function e(r,n){var i=this,o=(n==null?void 0:n.noiseCancellation)||null;i=t.call(this,r,n)||this;var a=i._log,s=r.label,c=s===void 0?"":s,l=r.getSettings(),u=l.deviceId,d=u===void 0?"":u,h=l.groupId,f=h===void 0?"":h;return Object.defineProperties(i,{_currentDefaultDeviceInfo:{value:{deviceId:d,groupId:f,label:c},writable:!0},_enumerateDevices:{value:typeof(n==null?void 0:n.enumerateDevices)=="function"?n.enumerateDevices:navigator.mediaDevices.enumerateDevices},_defaultDeviceCaptureMode:{value:(!KB()||o)&&i._isCreatedByCreateLocalTracks&&typeof navigator=="object"&&typeof navigator.mediaDevices=="object"&&typeof navigator.mediaDevices.addEventListener=="function"&&(typeof(n==null?void 0:n.enumerateDevices)=="function"||typeof navigator.mediaDevices.enumerateDevices=="function")?(n==null?void 0:n.defaultDeviceCaptureMode)||"auto":"manual"},_onDeviceChange:{value:function(){i._enumerateDevices().then(function(_){var v=_.find(function(g){var y=g.deviceId,m=g.kind;return m==="audioinput"&&y!=="default"});v&&["deviceId","groupId"].some(function(g){return v[g]!==i._currentDefaultDeviceInfo[g]})&&(a.info("Default device changed, restarting the LocalAudioTrack"),a.debug('Old default device: "'.concat(i._currentDefaultDeviceInfo.deviceId,'" => "').concat(i._currentDefaultDeviceInfo.label,'"')),a.debug('New default device: "'.concat(v.deviceId,'" => "').concat(v.label,'"')),i._currentDefaultDeviceInfo=v,i._restartDefaultDevice().catch(function(g){return a.warn("Failed to restart: ".concat(g.message))}))},function(_){a.warn("Failed to run enumerateDevices(): ".concat(_.message))})}},_restartOnDefaultDeviceChangeCleanup:{value:null,writable:!0},noiseCancellation:{enumerable:!0,value:o,writable:!1}}),a.debug("defaultDeviceCaptureMode:",i._defaultDeviceCaptureMode),i._maybeRestartOnDefaultDeviceChange(),i}return e.prototype.toString=function(){return"[LocalAudioTrack #".concat(this._instanceId,": ").concat(this.id,"]")},e.prototype.attach=function(r){return r=t.prototype.attach.call(this,r),r.muted=!0,r},e.prototype._end=function(){return t.prototype._end.apply(this,arguments)},e.prototype._maybeRestartOnDefaultDeviceChange=function(){var r=this,n=this,i=n._constraints,o=n._defaultDeviceCaptureMode,a=n._log,s=this.noiseCancellation?this.noiseCancellation.sourceTrack:this.mediaStreamTrack,c=s.getSettings().deviceId,l=function(d){return d!==c||d==="default"},u=function d(h){return h===void 0&&(h={}),typeof h=="string"?l(h):Array.isArray(h)?h.every(l):h.exact?d(h.exact):h.ideal?d(h.ideal):!0}(i.deviceId);o==="auto"&&u?this._restartOnDefaultDeviceChangeCleanup||(a.info("LocalAudioTrack will be restarted if the default device changes"),navigator.mediaDevices.addEventListener("devicechange",this._onDeviceChange),this._restartOnDefaultDeviceChangeCleanup=function(){a.info("Cleaning up the listener to restart the LocalAudioTrack if the default device changes"),navigator.mediaDevices.removeEventListener("devicechange",r._onDeviceChange),r._restartOnDefaultDeviceChangeCleanup=null}):(a.info("LocalAudioTrack will NOT be restarted if the default device changes"),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup())},e.prototype._reacquireTrack=function(r){var n=this;return this._log.debug("_reacquireTrack: ",r),this.noiseCancellation?this.noiseCancellation.reacquireTrack(function(){return t.prototype._reacquireTrack.call(n,r)}):t.prototype._reacquireTrack.call(this,r)},e.prototype._restartDefaultDevice=function(){var r=this,n=Object.assign({},this._constraints),i=Object.assign({},n,{deviceId:this._currentDefaultDeviceInfo.deviceId});return this.restart(i).then(function(){r._constraints=n,r._maybeRestartOnDefaultDeviceChange()})},e.prototype._setMediaStreamTrack=function(r){var n=this,i=this,o=i._log,a=i.noiseCancellation,s=t.prototype._setMediaStreamTrack.call(this,r);return QB()&&a&&(o.debug("iOS Chrome detected, checking if the restarted Krisp audio is silent"),s=s.then(function(){return GB(n._dummyEl)}).then(function(c){return o.debug("Krisp audio is ".concat(c?"silent, using source audio":"not silent")),c&&a.disablePermanently().then(function(){return t.prototype._setMediaStreamTrack.call(n,a.sourceTrack)})})),s},e.prototype.disable=function(){return t.prototype.disable.apply(this,arguments)},e.prototype.enable=function(){return t.prototype.enable.apply(this,arguments)},e.prototype.restart=function(){return t.prototype.restart.apply(this,arguments)},e.prototype.stop=function(){return this.noiseCancellation&&this.noiseCancellation.stop(),this._restartOnDefaultDeviceChangeCleanup&&this._restartOnDefaultDeviceChangeCleanup(),t.prototype.stop.apply(this,arguments)},e}(XB),e5=ZB,t5=Zm,kC=e5;function tg(t,e){var r=new kC(t,e);return Object.setPrototypeOf(r,tg.prototype),r}t5(tg,kC);var r5=tg,xC=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},n5=Ee.DEFAULT_FRAME_RATE;function i5(t,e){var r=xC(t.srcObject.getVideoTracks(),1),n=r[0],i=n.getSettings().frameRate,o=i===void 0?n5:i,a,s=new ReadableStream({start:function(l){a=setInterval(function(){return l.enqueue()},1e3/o)}}),c=new TransformStream({transform:function(){return e()}});return s.pipeThrough(c).pipeTo(new WritableStream).then(function(){}),function(){clearInterval(a)}}function o5(t,e,r){var n=xC(t.srcObject.getVideoTracks(),1),i=n[0],o=new MediaStreamTrackProcessor({track:i}).readable,a=new MediaStreamTrackGenerator({kind:"video"}),s=!1,c=new TransformStream({transform:function(l,u){var d=r==="videoframe"?e(l):Promise.resolve(l.close()).then(e);return d.finally(function(){s&&u.terminate()})}});return o.pipeThrough(c).pipeTo(a.writable).then(function(){}),function(){s=!0}}var a5=typeof MediaStreamTrackGenerator=="function"&&typeof MediaStreamTrackProcessor=="function"?o5:i5,s5=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),c5=St.EventEmitter,l5=Ee.DEFAULT_VIDEO_PROCESSOR_STATS_INTERVAL_MS,u5=function(t){s5(e,t);function e(r){var n=t.call(this)||this;return Object.defineProperties(n,{_lastStatsSaveTime:{value:null,writable:!0},_lastStatsPublishTime:{value:null,writable:!0},_log:{value:r},_processorInfo:{value:null,writable:!0},_stats:{value:null,writable:!0}}),n.on("add",function(i){n._lastStatsSaveTime=Date.now(),n._lastStatsPublishTime=Date.now(),n._processorInfo=i,n._stats=[],n._reemitEvent("add",n._getEventData())}),n.on("remove",function(){var i=n._getEventData();n._lastStatsSaveTime=null,n._lastStatsPublishTime=null,n._processorInfo=null,n._stats=null,n._reemitEvent("remove",i)}),n.on("start",function(){n._reemitEvent("start",n._getEventData())}),n.on("stop",function(i){n._reemitEvent("stop",Object.assign({message:i},n._getEventData()))}),n.on("stats",function(){return n._maybeEmitStats()}),n}return e.prototype._getEventData=function(){if(!this._processorInfo)return{};var r=this._processorInfo,n=r.processor,i=r.captureHeight,o=r.captureWidth,a=r.inputFrameRate,s=r.isRemoteVideoTrack,c=r.inputFrameBufferType,l=r.outputFrameBufferContextType,u={captureHeight:i,captureWidth:o,inputFrameRate:a,isRemoteVideoTrack:s,inputFrameBufferType:c,outputFrameBufferContextType:l};return u.name=n._name||"VideoProcessor",["assetsPath","blurFilterRadius","debounce","fitType","isSimdEnabled","maskBlurRadius","pipeline","version"].forEach(function(d){var h=n["_".concat(d)];typeof h<"u"&&(u[d]=h)}),Object.keys(u).forEach(function(d){var h=u[d];typeof h=="boolean"&&(u[d]=h?"true":"false")}),u},e.prototype._maybeEmitStats=function(){if(!(!this._stats||!this._processorInfo)){var r=this._processorInfo.processor._benchmark;if(r){var n=Date.now();if(!(n-this._lastStatsSaveTime<1e3)){var i={outputFrameRate:r.getRate("totalProcessingDelay")};if(["captureFrameDelay","imageCompositionDelay","inputImageResizeDelay","processFrameDelay","segmentationDelay"].forEach(function(s){i[s]=r.getAverageDelay(s)}),this._lastStatsSaveTime=n,this._stats.push(i),!(n-this._lastStatsPublishTime<l5)){this._lastStatsPublishTime=n;var o=this._stats.splice(0),a=o.reduce(function(s,c,l){return Object.keys(i).forEach(function(u){s[u]||(s[u]=0),s[u]=(s[u]*l+c[u])/(l+1)}),s},{});Object.keys(a).forEach(function(s){a[s]=parseFloat(a[s].toFixed(2))}),this._reemitEvent("stats",Object.assign({},a,this._getEventData()))}}}}},e.prototype._reemitEvent=function(r,n){this._log.debug("VideoProcessor:".concat(r),n),this.emit("event",{name:r,data:n})},e}(c5),d5=u5,f5=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),h5=pC,p5=a5,v5=d5,m5=Ee.DEFAULT_FRAME_RATE,rg=function(t){f5(e,t);function e(r,n){var i=t.call(this,r,n)||this;return Object.defineProperties(i,{_isCapturing:{value:!1,writable:!0},_inputFrame:{value:null,writable:!0},_outputFrame:{value:null,writable:!0},_processorEventObserver:{value:null,writable:!0},_processorOptions:{value:{},writable:!0},_stopCapture:{value:function(){},writable:!0},_unmuteHandler:{value:null,writable:!0},dimensions:{enumerable:!0,value:{width:null,height:null}},processor:{enumerable:!0,value:null,writable:!0},_documentPipWindow:{value:null,writable:!0},_documentPipEnterListener:{value:null,writable:!0},_documentPipExitListener:{value:null,writable:!0}}),i._processorEventObserver=new(n.VideoProcessorEventObserver||v5)(i._log),i}return e.prototype._checkIfCanCaptureFrames=function(r){r===void 0&&(r=!1);var n=!0,i="",o=this.mediaStreamTrack,a=o.enabled,s=o.readyState;return a||(n=!1,i="MediaStreamTrack is disabled"),s==="ended"&&(n=!1,i="MediaStreamTrack is ended"),this.processor||(n=!1,i="VideoProcessor not detected."),!this._attachments.size&&!r&&(n=!1,i="VideoTrack is not publishing and there is no attached element."),i&&this._log.debug(i),{canCaptureFrames:n,message:i}},e.prototype._captureFrames=function(){var r=this;if(this._isCapturing){this._log.debug("Ignoring captureFrames call. Capture is already in progress");return}if(!this._checkIfCanCaptureFrames().canCaptureFrames){this._isCapturing=!1,this._log.debug("Cannot capture frames. Ignoring captureFrames call.");return}this._isCapturing=!0,this._processorEventObserver.emit("start"),this._log.debug("Start capturing frames");var n=this._processorOptions.inputFrameBufferType;this._dummyEl.play().then(function(){var i=function(o){var a=r._checkIfCanCaptureFrames();if(!a.canCaptureFrames)return o&&o.close(),r._isCapturing=!1,r._stopCapture(),r._processorEventObserver.emit("stop",a.message),r._log.debug("Cannot capture frames. Stopping capturing frames."),Promise.resolve();var s=r.mediaStreamTrack.getSettings(),c=s.width,l=c===void 0?0:c,u=s.height,d=u===void 0?0:u;r._outputFrame&&r._outputFrame.width!==l&&(r._outputFrame.width=l,r._outputFrame.height=d),r._inputFrame&&(r._inputFrame.width!==l&&(r._inputFrame.width=l,r._inputFrame.height=d),r._inputFrame.getContext("2d").drawImage(r._dummyEl,0,0,l,d));var h=o||(["video","videoframe"].includes(n)?r._dummyEl:r._inputFrame),f=null;try{f=r.processor.processFrame(h,r._outputFrame)}catch(_){r._log.debug("Exception detected after calling processFrame.",_)}return(f instanceof Promise?f:Promise.resolve(f)).then(function(){r._outputFrame&&(typeof r.processedTrack.requestFrame=="function"&&r.processedTrack.requestFrame(),r._processorEventObserver.emit("stats"))})};r._stopCapture=p5(r._dummyEl,i,n)}).catch(function(i){return r._log.error("Video element cannot be played",{error:i,track:r})})},e.prototype._initialize=function(){var r=this;t.prototype._initialize.call(this),this._dummyEl&&(this._dummyEl.onloadedmetadata=function(){jw(r,r._dummyEl)&&(r.dimensions.width=r._dummyEl.videoWidth,r.dimensions.height=r._dummyEl.videoHeight)},this._dummyEl.onresize=function(){jw(r,r._dummyEl)&&(r.dimensions.width=r._dummyEl.videoWidth,r.dimensions.height=r._dummyEl.videoHeight,r.isStarted&&(r._log.debug("Dimensions changed:",r.dimensions),r.emit(e.DIMENSIONS_CHANGED,r)))})},e.prototype._restartProcessor=function(){var r=this.processor;if(r){var n=Object.assign({},this._processorOptions);this.removeProcessor(r),this.addProcessor(r,n)}},e.prototype._start=function(r){return this.dimensions.width=r.videoWidth,this.dimensions.height=r.videoHeight,this._log.debug("Dimensions:",this.dimensions),this.emit(e.DIMENSIONS_CHANGED,this),t.prototype._start.call(this,r)},e.prototype.addProcessor=function(r,n){var i=this;if(!r||typeof r.processFrame!="function")throw new Error("Received an invalid VideoProcessor from addProcessor.");if(this.processor)throw new Error("A VideoProcessor has already been added.");if(!this._dummyEl)throw new Error("VideoTrack has not been initialized.");this._log.debug("Adding VideoProcessor to the VideoTrack",r),this._unmuteHandler||(this._unmuteHandler=function(){i._log.debug("mediaStreamTrack unmuted"),i.processedTrack.muted&&(i._log.debug("mediaStreamTrack is unmuted but processedTrack is muted. Restarting processor."),i._restartProcessor())},this.mediaStreamTrack.addEventListener?this.mediaStreamTrack.addEventListener("unmute",this._unmuteHandler):this.mediaStreamTrack.onunmute=this._unmuteHandler.bind(this)),this._processorOptions=n||{};var o=this._processorOptions,a=o.inputFrameBufferType,s=o.outputFrameBufferContextType;if(typeof OffscreenCanvas>"u"&&a==="offscreencanvas")throw new Error("OffscreenCanvas is not supported by this browser.");if(a&&a!=="videoframe"&&a!=="video"&&a!=="canvas"&&a!=="offscreencanvas")throw new Error("Invalid inputFrameBufferType of ".concat(a));a||(a=typeof OffscreenCanvas>"u"?"canvas":"offscreencanvas");var c=this.mediaStreamTrack.getSettings(),l=c.width,u=l===void 0?0:l,d=c.height,h=d===void 0?0:d,f=c.frameRate,_=f===void 0?m5:f;a==="offscreencanvas"&&(this._inputFrame=new OffscreenCanvas(u,h)),a==="canvas"&&(this._inputFrame=document.createElement("canvas")),this._inputFrame&&(this._inputFrame.width=u,this._inputFrame.height=h),this._outputFrame=document.createElement("canvas"),this._outputFrame.width=u,this._outputFrame.height=h,s=s||"2d";var v=this._outputFrame.getContext(s);if(!v)throw new Error("Cannot get outputFrameBufferContextType: ".concat(s,"."));var g=typeof CanvasCaptureMediaStreamTrack<"u"&&CanvasCaptureMediaStreamTrack.prototype&&typeof CanvasCaptureMediaStreamTrack.prototype.requestFrame=="function"?0:void 0;return this.processedTrack=this._outputFrame.captureStream(g).getTracks()[0],this.processedTrack.enabled=this.mediaStreamTrack.enabled,this.processor=r,this._processorEventObserver.emit("add",{processor:r,captureHeight:h,captureWidth:u,inputFrameRate:_,isRemoteVideoTrack:this.toString().includes("RemoteVideoTrack"),inputFrameBufferType:a,outputFrameBufferContextType:s}),this._updateElementsMediaStreamTrack(),this._captureFrames(),this},e.prototype.attach=function(){var r=t.prototype.attach.apply(this,arguments);return this._attachments.size===1&&g5(this),this.processor&&this._captureFrames(),r},e.prototype.detach=function(){var r=t.prototype.detach.apply(this,arguments);return this._attachments.size===0&&y5(this),r},e.prototype.removeProcessor=function(r){if(!r)throw new Error("Received an invalid VideoProcessor from removeProcessor.");if(!this.processor)throw new Error("No existing VideoProcessor detected.");if(r!==this.processor)throw new Error("The provided VideoProcessor is different than the existing one.");return this._processorEventObserver.emit("remove"),this._log.debug("Removing VideoProcessor from the VideoTrack",r),this._stopCapture(),this._stopCapture=function(){},this.mediaStreamTrack.removeEventListener("unmute",this._unmuteHandler),this._processorOptions={},this._unmuteHandler=null,this._isCapturing=!1,this.processor=null,this.processedTrack=null,this._inputFrame=null,this._outputFrame=null,this._updateElementsMediaStreamTrack(),this},e}(h5);rg.DIMENSIONS_CHANGED="dimensionsChanged";function jw(t,e){return t.dimensions.width!==e.videoWidth||t.dimensions.height!==e.videoHeight}function g5(t){!t._documentPipEnterListener&&"documentPictureInPicture"in globalThis&&globalThis.documentPictureInPicture&&typeof globalThis.documentPictureInPicture.addEventListener=="function"&&(t._documentPipEnterListener=function(e){t._log.debug("document pip entered"),t._documentPipWindow=e.window,t._documentPipExitListener=function(){t._log.debug("document pip exited"),t._documentPipWindow=null,typeof t._onDocumentPipExit=="function"&&t._onDocumentPipExit()},e.window&&typeof e.window.addEventListener=="function"&&e.window.addEventListener("pagehide",t._documentPipExitListener),TC(t),typeof t._onDocumentPipEnter=="function"&&t._onDocumentPipEnter(e)},globalThis.documentPictureInPicture.addEventListener("enter",t._documentPipEnterListener))}function y5(t){t._documentPipEnterListener&&(globalThis.documentPictureInPicture&&typeof globalThis.documentPictureInPicture.removeEventListener=="function"&&globalThis.documentPictureInPicture.removeEventListener("enter",t._documentPipEnterListener),t._documentPipWindow&&t._documentPipExitListener&&typeof t._documentPipWindow.removeEventListener=="function"&&t._documentPipWindow.removeEventListener("pagehide",t._documentPipExitListener),t._documentPipEnterListener=null,t._documentPipExitListener=null,t._documentPipWindow=null)}function TC(t){if(t._documentPipWindow)try{var e=new WeakSet(t._documentPipWindow.document.querySelectorAll("video"));t._attachments.forEach(function(r){e.has(r)&&r.paused&&r.play().then(function(){t._log.debug("Successfully played inadvertently paused video element in document PiP window")}).catch(function(n){t._log.debug("Failed to play inadvertently paused video element in document PiP window",n)})})}catch(r){t._log.debug("Error checking document PiP video playback:",r)}}rg._ensureDocumentPipVideosPlaying=TC;var EC=rg,_5=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),w5=fo.isIOS,b5=mC,S5=SC,CC=EC,k5=S5(CC),x5=function(t){_5(e,t);function e(r,n){var i=this;return n=Object.assign({workaroundSilentLocalVideo:w5()&&typeof document<"u"&&typeof document.createElement=="function"},n),i=t.call(this,r,n)||this,Object.defineProperties(i,{_workaroundSilentLocalVideo:{value:n.workaroundSilentLocalVideo?T5:null},_workaroundSilentLocalVideoCleanup:{value:null,writable:!0},_pipIntersectionObserver:{value:null,writable:!0}}),i._workaroundSilentLocalVideo&&(i._workaroundSilentLocalVideoCleanup=i._workaroundSilentLocalVideo(i,document)),i}return e.prototype.toString=function(){return"[LocalVideoTrack #".concat(this._instanceId,": ").concat(this.id,"]")},e.prototype._onDocumentPipEnter=function(){this._log.debug("LocalVideoTrack: Setting up PiP intersection observer"),this._setupPipIntersectionObserver()},e.prototype._onDocumentPipExit=function(){this._log.debug("LocalVideoTrack: Cleaning up PiP intersection observer"),this._cleanupPipIntersectionObserver()},e.prototype._setupPipIntersectionObserver=function(){var r=this;!this._pipIntersectionObserver&&this._documentPipWindow&&(this._log.debug("LocalVideoTrack: Creating PiP intersection observer"),this._pipIntersectionObserver=new IntersectionObserver(function(n){var i=n.some(function(o){return o.isIntersecting});i&&(r._log.debug("LocalVideoTrack: Element visible in PiP, ensuring videos are playing"),CC._ensureDocumentPipVideosPlaying(r))},{threshold:.25}),this._attachments.forEach(function(n){r._log.debug("LocalVideoTrack: Observing element for PiP visibility"),r._pipIntersectionObserver.observe(n)}))},e.prototype._cleanupPipIntersectionObserver=function(){this._pipIntersectionObserver&&(this._log.debug("LocalVideoTrack: Disconnecting PiP intersection observer"),this._pipIntersectionObserver.disconnect(),this._pipIntersectionObserver=null)},e.prototype.attach=function(){var r=t.prototype.attach.apply(this,arguments);return this._pipIntersectionObserver&&(this._log.debug("LocalVideoTrack: Observing newly attached element for PiP visibility"),this._pipIntersectionObserver.observe(r)),r},e.prototype.detach=function(){var r=this,n=t.prototype.detach.apply(this,arguments),i=Array.isArray(n)?n:[n];return this._pipIntersectionObserver&&i.forEach(function(o){r._log.debug("LocalVideoTrack: Unobserving detached element from PiP visibility"),r._pipIntersectionObserver.unobserve(o)}),n},e.prototype._checkIfCanCaptureFrames=function(){return t.prototype._checkIfCanCaptureFrames.call(this,this._trackSender.isPublishing)},e.prototype._end=function(){return t.prototype._end.apply(this,arguments)},e.prototype._setSenderMediaStreamTrack=function(r){var n=this,i=this.mediaStreamTrack,o=r?this.processedTrack:i;return this._trackSender.setMediaStreamTrack(o).catch(function(a){return n._log.warn("setMediaStreamTrack failed on LocalVideoTrack RTCRtpSender",{error:a,mediaStreamTrack:o})}).then(function(){n._unprocessedTrack=r?i:null})},e.prototype.addProcessor=function(){this._log.debug("Adding VideoProcessor to the LocalVideoTrack");var r=t.prototype.addProcessor.apply(this,arguments);return this.processedTrack?(this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0),r):this._log.warn("Unable to add a VideoProcessor to the LocalVideoTrack")},e.prototype.removeProcessor=function(){var r=this;this._log.debug("Removing VideoProcessor from the LocalVideoTrack");var n=t.prototype.removeProcessor.apply(this,arguments);return this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the original MediaStreamTrack"),this._setSenderMediaStreamTrack().then(function(){return r._updateElementsMediaStreamTrack()}),n},e.prototype.disable=function(){var r=t.prototype.disable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=!1),r},e.prototype.enable=function(r){r===void 0&&(r=!0);var n=t.prototype.enable.apply(this,arguments);return this.processedTrack&&(this.processedTrack.enabled=r,r&&(this._captureFrames(),this._log.debug("Updating LocalVideoTrack's MediaStreamTrack with the processed MediaStreamTrack",this.processedTrack),this._setSenderMediaStreamTrack(!0))),n},e.prototype.restart=function(){var r=this;this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null);var n=t.prototype.restart.apply(this,arguments);return this.processor&&(n=n.then(function(){return r._restartProcessor()})),this._workaroundSilentLocalVideo&&n.finally(function(){r._workaroundSilentLocalVideoCleanup=r._workaroundSilentLocalVideo(r,document)}),n},e.prototype._restartProcessor=function(){var r=this.processor,n=Object.assign({},this._processorOptions);return t.prototype.removeProcessor.apply(this,[r]),t.prototype.addProcessor.apply(this,[r,n]),this._setSenderMediaStreamTrack(!0)},e.prototype.stop=function(){return this._workaroundSilentLocalVideoCleanup&&(this._workaroundSilentLocalVideoCleanup(),this._workaroundSilentLocalVideoCleanup=null),this._cleanupPipIntersectionObserver(),t.prototype.stop.apply(this,arguments)},e}(k5);function T5(t,e){var r=t._log,n=t._dummyEl,i=t.mediaStreamTrack;function o(){t.isEnabled&&(r.info("Unmuted, checking silence"),n.play().then(function(){return b5(n)}).then(function(a){if(!a){r.info("Non-silent frames detected, so no need to restart");return}return r.warn("Silence detected, restarting"),t._stop(),t._restart()}).catch(function(a){r.warn("Failed to detect silence and restart:",a)}).finally(function(){n=t._dummyEl,n&&!n.paused&&!t.processedTrack&&n.pause(),i.removeEventListener("unmute",o),i=t.mediaStreamTrack,i.addEventListener?i.addEventListener("unmute",o):i.onunmute=o}))}return i.addEventListener?i.addEventListener("unmute",o):i.onunmute=o,function(){i.removeEventListener?i.removeEventListener("unmute",o):i.onunmute=null}}var E5=x5,C5=Zm,PC=E5;function ng(t,e){var r=new PC(t,e);return Object.setPrototypeOf(r,ng.prototype),r}C5(ng,PC);var P5=ng,O5=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),R5=_C,j5=function(t){O5(e,t);function e(r,n,i,o){var a=t.call(this,r,"data")||this;return Object.defineProperties(a,{maxPacketLifeTime:{enumerable:!0,value:n},maxRetransmits:{enumerable:!0,value:i},ordered:{enumerable:!0,value:o}}),a}return e}(R5),OC=j5,A5=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L5=OC,I5=J.makeUUID,N5=function(t){A5(e,t);function e(r,n,i){var o=t.call(this,I5(),r,n,i)||this;return Object.defineProperties(o,{_clones:{value:new Set},_dataChannels:{value:new Set}}),o}return e.prototype._addClone=function(r){this._clones.add(r)},e.prototype.removeClone=function(r){this._clones.delete(r)},e.prototype.addDataChannel=function(r){return this._dataChannels.add(r),this},e.prototype.clone=function(){var r=this,n=new e(this.maxPacketLifeTime,this.maxRetransmits,this.ordered);return this._addClone(n),n.once("stopped",function(){return r.removeClone(n)}),n},e.prototype.removeDataChannel=function(r){return this._dataChannels.delete(r),this},e.prototype.send=function(r){return this._dataChannels.forEach(function(n){try{n.send(r)}catch{}}),this._clones.forEach(function(n){try{n.send(r)}catch{}}),this},e.prototype.stop=function(){this._dataChannels.forEach(function(r){return r.close()}),this._clones.forEach(function(r){return r.stop()}),t.prototype.stop.call(this)},e}(L5),M5=N5,D5=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$5=eg,F5=M5,U5=function(t){D5(e,t);function e(r){var n=this;r=Object.assign({DataTrackSender:F5,maxPacketLifeTime:null,maxRetransmits:null,ordered:!0},r);var i=r.DataTrackSender,o=new i(r.maxPacketLifeTime,r.maxRetransmits,r.ordered);return n=t.call(this,o.id,"data",r)||this,Object.defineProperties(n,{_trackSender:{value:o},id:{enumerable:!0,value:o.id},maxPacketLifeTime:{enumerable:!0,value:r.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:r.maxRetransmits},ordered:{enumerable:!0,value:r.ordered},reliable:{enumerable:!0,value:r.maxPacketLifeTime===null&&r.maxRetransmits===null}}),n}return e.prototype.send=function(r){this._trackSender.send(r)},e}($5),B5=U5,V5=Zm,RC=B5;function ig(t){var e=new RC(t);return Object.setPrototypeOf(e,ig.prototype),e}V5(ig,RC);var z5=ig,ia={LocalAudioTrack:r5,LocalVideoTrack:P5,LocalDataTrack:z5},W5=function(){function t(e){this._telemetry=e}return t.prototype.typeChanged=function(e){this._telemetry.info({group:"network",name:"network-type-changed",payload:{networkType:e}})},t.prototype.informationChanged=function(e){var r=e.downlink,n=e.downlinkMax,i=e.effectiveType,o=e.rtt,a=e.saveData,s=e.type;this._telemetry.info({group:"network",name:"network-information-changed",payload:{downlink:r,downlinkMax:n,effectiveType:i,rtt:o,saveData:a,type:s}})},t}(),H5=W5,q5=function(){function t(e){this._telemetry=e}return t.prototype.succeeded=function(){this._telemetry.info({group:"get-user-media",name:"succeeded"})},t.prototype.denied=function(){this._telemetry.info({group:"get-user-media",name:"denied"})},t.prototype.failed=function(e){this._telemetry.info({group:"get-user-media",name:"failed",payload:{name:e.name,message:e.message}})},t}(),K5=q5,G5=function(){function t(e){this._telemetry=e}return t.prototype.limitationChanged=function(e,r){this._telemetry.info({group:"quality",name:"quality-limitation-state-changed",payload:{trackSid:e,qualityLimitationReason:r}})},t.prototype.statsReport=function(e){this._telemetry.info({group:"quality",name:"stats-report",payload:e})},t.prototype.iceCandidatePair=function(e){this._telemetry.info({group:"quality",name:"active-ice-candidate-pair",payload:e})},t}(),Q5=G5,J5=function(){function t(e){this._telemetry=e}return t.prototype.stalled=function(e,r,n,i){i===void 0&&(i="video"),this._telemetry.warning({group:"track-warning-raised",name:"track-stalled",payload:{trackSid:e,frameRate:r,threshold:n,trackType:i}})},t.prototype.resumed=function(e,r,n,i){i===void 0&&(i="video"),this._telemetry.info({group:"track-warning-cleared",name:"track-stalled",payload:{trackSid:e,frameRate:r,threshold:n,trackType:i}})},t}(),Y5=J5,X5=function(){function t(e){this._telemetry=e}return t.prototype.resumed=function(){this._telemetry.info({group:"application",name:"resumed"})},t.prototype.backgrounded=function(){this._telemetry.info({group:"application",name:"backgrounded"})},t.prototype.terminated=function(){this._telemetry.info({group:"application",name:"terminated"})},t}(),Z5=X5,eV=function(){function t(e){this._telemetry=e}return t.prototype.cpuPressureChanged=function(e){this._telemetry.info({group:"system",name:"cpu-pressure-changed",payload:{resourceType:"cpu",pressure:e}})},t}(),tV=eV,rV=H5,nV=K5,iV=Q5,oV=Y5,aV=Z5,sV=tV,cV=function(){function t(){this._publisher=null,this._connectTimestamp=null,this._log=null,this.network=new rV(this),this.getUserMedia=new nV(this),this.quality=new iV(this),this.track=new oV(this),this.application=new aV(this),this.system=new sV(this)}return t.prototype.configure=function(e){var r=e.publisher,n=e.log,i=e.connectTimestamp;if(!r||!n||typeof i!="number")throw new Error("Telemetry.configure requires publisher, log, and connectTimestamp");return this._publisher&&this.reset(),this._publisher=r,this._log=n,this._connectTimestamp=i,this},t.prototype.reset=function(){return this._publisher=null,this._connectTimestamp=null,this._log=null,this},Object.defineProperty(t.prototype,"isEnabled",{get:function(){return this._publisher!==null},enumerable:!1,configurable:!0}),t.prototype._emit=function(e,r,n,i){if(!(!this._publisher||!this._log||this._connectTimestamp===null)){var o=Date.now(),a=o-this._connectTimestamp,s=Object.assign({elapsedTime:a,level:n},i||{});this._publisher.publish(e,r,s);var c=Object.assign({elapsedTime:a,group:e,level:n,name:r,timestamp:o},i?{payload:i}:{}),l={debug:"debug",error:"error",info:"info",warning:"warn"}[n];this._log[l]("telemetry",c)}},t.prototype.info=function(e){var r=e.group,n=e.name,i=e.payload;return this._emit(r,n,"info",i)},t.prototype.warning=function(e){var r=e.group,n=e.name,i=e.payload;return this._emit(r,n,"warning",i)},t.prototype.error=function(e){var r=e.group,n=e.name,i=e.payload;return this._emit(r,n,"error",i)},t}(),Ma=new cV,Lr=T&&T.__assign||function(){return Lr=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Lr.apply(this,arguments)},Aw=T&&T.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},Lw=T&&T.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Iw=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Nw=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Um,"__esModule",{value:!0});Um.createLocalTracks=SV;var lV=mc,uV=J.buildLogLevels,jC=uo,dV=jC.getUserMedia,fV=jC.MediaStreamTrack,og=ia,hV=og.LocalAudioTrack,pV=og.LocalDataTrack,vV=og.LocalVideoTrack,mV=pn,ag=Ee,gV=ag.DEFAULT_LOG_LEVEL,yV=ag.DEFAULT_LOGGER_NAME,_V=ag.typeErrors.INVALID_VALUE,wV=gC,Ff=Ma,bV=0;function SV(t){return Aw(this,void 0,void 0,function(){var e,r,n,i,o,a,s,c,l,u,d,h,f,_=this;return Lw(this,function(v){switch(v.label){case 0:if(e=!(t&&("audio"in t||"video"in t)),r=Lr({audio:e,getUserMedia:dV,loggerName:yV,logLevel:gV,LocalAudioTrack:hV,LocalDataTrack:pV,LocalVideoTrack:vV,MediaStreamTrack:fV,Log:mV,video:e},t),n="[createLocalTracks #".concat(++bV,"]"),i=uV(r.logLevel),o=new r.Log("default",n,i,r.loggerName),a=Object.assign({log:o},r),delete a.name,r.audio===!1&&r.video===!1)return o.info("Neither audio nor video requested, so returning empty LocalTracks"),[2,[]];if(r.tracks)return o.info("Adding user-provided LocalTracks"),o.debug("LocalTracks:",r.tracks),[2,r.tracks];if(s={audio:typeof r.audio=="object"&&r.audio.name?{name:r.audio.name}:{defaultDeviceCaptureMode:"auto"},video:typeof r.video=="object"&&r.video.name?{name:r.video.name}:{}},s.audio.isCreatedByCreateLocalTracks=!0,s.video.isCreatedByCreateLocalTracks=!0,typeof r.audio=="object")if(typeof r.audio.workaroundWebKitBug1208516=="boolean"&&(s.audio.workaroundWebKitBug1208516=r.audio.workaroundWebKitBug1208516),"noiseCancellationOptions"in r.audio&&(c=r.audio.noiseCancellationOptions,delete r.audio.noiseCancellationOptions),!("defaultDeviceCaptureMode"in r.audio))s.audio.defaultDeviceCaptureMode="auto";else{if(["auto","manual"].every(function(g){return g!==r.audio.defaultDeviceCaptureMode}))throw _V("CreateLocalAudioTrackOptions.defaultDeviceCaptureMode",["auto","manual"]);s.audio.defaultDeviceCaptureMode=r.audio.defaultDeviceCaptureMode}typeof r.video=="object"&&typeof r.video.workaroundWebKitBug1208516=="boolean"&&(s.video.workaroundWebKitBug1208516=r.video.workaroundWebKitBug1208516),typeof r.audio=="object"&&delete r.audio.name,typeof r.video=="object"&&delete r.video.name,l={audio:r.audio,video:r.video},u=typeof r.audio=="object"&&r.audio.workaroundWebKitBug180748,v.label=1;case 1:return v.trys.push([1,4,,5]),[4,u?wV(o,r.getUserMedia,l):r.getUserMedia(l)];case 2:return d=v.sent(),Ff.getUserMedia.succeeded(),h=Nw(Nw([],Iw(d.getAudioTracks()),!1),Iw(d.getVideoTracks()),!1),o.info("Call to getUserMedia successful; got tracks:",h),[4,Promise.all(h.map(function(g){return Aw(_,void 0,void 0,function(){var y,m,w;return Lw(this,function(S){switch(S.label){case 0:return g.kind==="audio"&&c?[4,(0,lV.applyNoiseCancellation)(g,c,o)]:[3,2];case 1:return y=S.sent(),m=y.cleanTrack,w=y.noiseCancellation,[2,new a.LocalAudioTrack(m,Lr(Lr(Lr({},s.audio),a),{noiseCancellation:w}))];case 2:if(g.kind==="audio")return[2,new a.LocalAudioTrack(g,Lr(Lr({},s.audio),a))];S.label=3;case 3:return[2,new a.LocalVideoTrack(g,Lr(Lr({},s.video),a))]}})})}))];case 3:return[2,v.sent()];case 4:throw f=v.sent(),f.name==="NotAllowedError"||f.name==="PermissionDeniedError"?Ff.getUserMedia.denied():Ff.getUserMedia.failed(f),o.warn("Call to getUserMedia failed:",f),f;case 5:return[2]}})})}var yc={},Td={};Object.defineProperty(Td,"__esModule",{value:!0});Td.Timer=void 0;var kV=function(){function t(){this._end=void 0,this.start()}return t.prototype.start=function(){return this._start=Date.now(),this},t.prototype.stop=function(){return this._end=Date.now(),this},t.prototype.getTimeMeasurement=function(){return{start:this._start,end:this._end,duration:this._end===void 0?void 0:this._end-this._start}},t}();Td.Timer=kV;var Ed={};Object.defineProperty(Ed,"__esModule",{value:!0});Ed.calculateMOS=xV;Ed.mosToScore=TV;var Mw=94.768;function xV(t,e,r){var n=t+e*2+10,i=0;switch(!0){case n<160:i=Mw-n/40;break;case n<1e3:i=Mw-(n-120)/10;break}switch(!0){case r<=i/2.5:i=Math.max(i-r*2.5,6.52);break;default:i=0;break}var o=1+.035*i+7e-6*i*(i-60)*(100-i);return o}function TV(t){var e=0;return t?t>4.2?e=5:t>4?e=4:t>3.6?e=3:t>3?e=2:e=1:e=0,e}var sg={},EV=T&&T.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},CV=T&&T.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},PV=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o};Object.defineProperty(sg,"__esModule",{value:!0});sg.getCombinedConnectionStats=OV;function Cn(t,e,r,n){var i=[];return t.forEach(function(o){(n.length===0||n.includes(o.type))&&(r.length===0||r.includes(o.kind))&&typeof o[e]=="number"&&i.push(o[e])}),i}function OV(t){return EV(this,arguments,void 0,function(e){var r,n,i,o,a,s,c,l,u,d,h,f,_,v,g,y=e.publisher,m=e.subscriber;return CV(this,function(w){switch(w.label){case 0:return[4,Promise.all([y,m].map(function(S){return S.getStats()}))];case 1:return r=PV.apply(void 0,[w.sent(),2]),n=r[0],i=r[1],o=Cn(i,"timestamp",["audio"],["inbound-rtp"]),a=o.length>0?o[0]:0,s=Cn(i,"jitter",["audio"],["inbound-rtp"]).reduce(function(S,k){return Math.max(S,k)},0),c=Cn(i,"packetsReceived",["audio","video"],["inbound-rtp"]).reduce(function(S,k){return S+k},0),l=Cn(i,"packetsLost",["audio","video"],["inbound-rtp"]).reduce(function(S,k){return S+k},0),u=Cn(n,"roundTripTime",["audio","video"],["remote-inbound-rtp"]).reduce(function(S,k){return Math.max(S,k)},0),d=Cn(i,"currentRoundTripTime",[],["candidate-pair"]).reduce(function(S,k){return Math.max(S,k)},0),h=(d||u)*1e3,f=Cn(n,"bytesSent",[],["candidate-pair"]).reduce(function(S,k){return S+k},0),_=Cn(i,"bytesReceived",[],["candidate-pair"]).reduce(function(S,k){return S+k},0),v=RV(i),g=[],i.forEach(function(S){(S.type==="local-candidate"||S.type==="remote-candidate")&&g.push(qp(S))}),[2,{timestamp:a,jitter:s,packets:c,packetsLost:l,roundTripTime:h,bytesSent:f,bytesReceived:_,selectedIceCandidatePairStats:v,iceCandidateStats:g}]}})})}function qp(t){var e=[{key:"transportId",type:"string"},{key:"candidateType",type:"string"},{key:"port",altKeys:["portNumber"],type:"number"},{key:"address",altKeys:["ip","ipAddress"],type:"string"},{key:"priority",type:"number"},{key:"protocol",altKeys:["transport"],type:"string"},{key:"url",type:"string"},{key:"relayProtocol",type:"string"}];return e.reduce(function(r,n){var i=[n.key];n.altKeys&&(i=i.concat(n.altKeys));var o=i.find(function(a){return a in t});return o&&typeof t[o]===n.type&&(r[n.key]=t[o]),r},{})}function RV(t){var e=null,r=[];t.forEach(function(s){s.type==="transport"&&s.selectedCandidatePairId?e=s.selectedCandidatePairId:s.type==="candidate-pair"&&r.push(s)});var n=r.find(function(s){return s.selected||e&&s.id===e});if(!n)return null;var i=n,o=t.get(i.localCandidateId),a=t.get(i.remoteCandidateId);return!o||!a?null:{localCandidate:qp(o),remoteCandidate:qp(a)}}var cg={},jV=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AV=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},LV=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},IV=St.EventEmitter,AC=J,NV=function(t){jV(e,t);function e(r,n){var i=t.call(this)||this,o=null,a=r;return n=$V(n),Object.defineProperties(i,{_lock:{get:function(){return o},set:function(s){o=s}},_reachableStates:{value:DV(n)},_state:{get:function(){return a},set:function(s){a=s}},_states:{value:n},_whenDeferreds:{value:new Set},isLocked:{enumerable:!0,get:function(){return o!==null}},state:{enumerable:!0,get:function(){return a}}}),i.on("stateChanged",function(s){i._whenDeferreds.forEach(function(c){c.when(s,c.resolve,c.reject)})}),i}return e.prototype._whenPromise=function(r){var n=this;if(typeof r!="function")return Promise.reject(new Error("when() executor must be a function"));var i=AC.defer();return i.when=r,this._whenDeferreds.add(i),i.promise.then(function(o){return n._whenDeferreds.delete(i),o},function(o){throw n._whenDeferreds.delete(i),o})},e.prototype.bracket=function(r,n){var i,o=this;function a(s){if(o.hasLock(i)&&o.releaseLockCompletely(i),s)throw s}return this.takeLock(r).then(function(c){return i=c,n(i)}).then(function(c){return a(),c},a)},e.prototype.hasLock=function(r){return this._lock===r},e.prototype.preempt=function(r,n,i){if(!ul(this._states,this.state,r))throw new Error('Cannot transition from "'.concat(this.state,'" to "').concat(r,'"'));var o;this.isLocked&&(o=this._lock,this._lock=null);var a=null;n&&(a=this.takeLockSync(n));var s=a?null:this.takeLockSync("preemption");return this.transition(r,a||s,i),o&&o.resolve(),s&&this.releaseLock(s),a},e.prototype.releaseLock=function(r){if(this.isLocked){if(!this.hasLock(r))throw new Error("Could not release the lock for ".concat(r.name," because ").concat(this._lock.name," has the lock"))}else throw new Error("Could not release the lock for ".concat(r.name," because the StateMachine is not locked"));r.depth===0?(this._lock=null,r.resolve()):r.depth--},e.prototype.releaseLockCompletely=function(r){if(this.isLocked){if(!this.hasLock(r))throw new Error("Could not release the lock for ".concat(r.name," because ").concat(this._lock.name," has the lock"))}else throw new Error("Could not release the lock for ".concat(r.name," because the StateMachine is not locked"));r.depth=0,this._lock=null,r.resolve()},e.prototype.takeLock=function(r){var n=this;if(typeof r=="object"){var i=r;return new Promise(function(s){s(n.takeLockSync(i))})}var o=r;if(this.isLocked){var a=this.takeLock.bind(this,o);return this._lock.promise.then(a)}return Promise.resolve(this.takeLockSync(o))},e.prototype.takeLockSync=function(r){var n=typeof r=="string"?null:r,i=n?n.name:r;if(n&&!this.hasLock(n)||!n&&this.isLocked)throw new Error("Could not take the lock for ".concat(i," because the lock for ").concat(this._lock.name," was not released"));if(n)return n.depth++,n;var o=MV(i);return this._lock=o,o},e.prototype.transition=function(r,n,i){if(i=i||[],this.isLocked)if(n){if(!this.hasLock(n))throw new Error("Could not transition using the key for ".concat(n.name," because ").concat(this._lock.name," has the lock"))}else throw new Error("You must provide the key in order to transition");else if(n)throw new Error("Key provided for ".concat(n.name,", but the StateMachine was not locked (possibly due to preemption)"));if(!ul(this._states,this.state,r))throw new Error('Cannot transition from "'.concat(this.state,'" to "').concat(r,'"'));this._state=r,this.emit.apply(this,LV([],AV(["stateChanged",r].concat(i)),!1))},e.prototype.tryTransition=function(r,n,i){try{this.transition(r,n,i)}catch{return!1}return!0},e.prototype.when=function(r){var n=this;return this.state===r?Promise.resolve(this):ul(this._reachableStates,this.state,r)?this._whenPromise(function(i,o,a){i===r?o(n):ul(n._reachableStates,i,r)||a(Dw(i,r))}):Promise.reject(Dw(this.state,r))},e}(IV);function ul(t,e,r){return t.get(e).has(r)}function MV(t){var e=AC.defer();return e.name=t,e.depth=0,e}function DV(t){return Array.from(t.keys()).reduce(function(e,r){return e.set(r,LC(t,r))},new Map)}function LC(t,e,r){return r=r||new Set,t.get(e).forEach(function(n){r.has(n)||(r.add(n),LC(t,n,r).forEach(r.add,r))}),r}function $V(t){var e=new Map;for(var r in t)e.set(r,new Set(t[r]));return e}function Dw(t,e){return new Error('"'.concat(e,'" cannot be reached from "').concat(t,'"'))}var Da=NV,FV=function(){function t(e,r){var n=this;r=Object.assign({navigator,window},r);var i=r.navigator,o=i.connection||{type:null},a=o.type,s=o.type?{_events:{value:["change","typechange"]},_listener:{value:function(){var d=a!==n.type&&n.isOnline;a=n.type,d&&e()}},_target:{value:o}}:{_events:{value:["online"]},_listener:{value:e},_target:{value:r.window}},c=s._events,l=s._listener,u=s._target;Object.defineProperties(this,{isOnline:{enumerable:!0,get:function(){return typeof i.onLine=="boolean"?i.onLine:!0}},type:{enumerable:!0,get:function(){return o.type||null}},_listener:l,_events:c,_target:u})}return t.prototype.start=function(){var e=this;this._events.forEach(function(r){e._target.addEventListener(r,e._listener)})},t.prototype.stop=function(){var e=this;this._events.forEach(function(r){e._target.removeEventListener(r,e._listener)})},t}(),UV=FV,BV=function(){function t(e,r,n){n===void 0&&(n=!0),Object.defineProperties(this,{_delay:{value:r,writable:!0},_fn:{value:e},_timeout:{value:null,writable:!0}}),n&&this.start()}return Object.defineProperty(t.prototype,"delay",{get:function(){return this._delay},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isSet",{get:function(){return!!this._timeout},enumerable:!1,configurable:!0}),t.prototype.setDelay=function(e){this._delay=e},t.prototype.start=function(){var e=this;this.isSet||(this._timeout=setTimeout(function(){var r=e._fn;e.clear(),r()},this._delay))},t.prototype.clear=function(){clearTimeout(this._timeout),this._timeout=null},t.prototype.reset=function(){this.clear(),this.start()},t}(),ho=BV,Uf,$w;function IC(){return $w||($w=1,Uf=WebSocket),Uf}var VV=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fw=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},zV=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},WV=Da,NC=J,HV=NC.buildLogLevels,qV=NC.makeUUID,KV=pn,GV=UV,ko=ho,QV=0,JV={closed:[],connecting:["closed","open","waiting"],early:["closed","connecting"],open:["closed"],waiting:["closed","connecting","early","open"]},Uw={closed:"close",open:"open",waiting:"waiting"},YV=2,XV=3,ZV=3,ez=5e3,tz=15e3,rz=5e3,nz=200,Bw=1e3,Kp=3e3,Gp=3001,Qp=3002,Jp=3003,MC=3004,dl=3005,Yp=3006,DC=3007,Vw=globalThis,iz=Vw.WebSocket?Vw.WebSocket:IC(),yr={BUSY:"busy",FAILED:"failed",LOCAL:"local",REMOTE:"remote",TIMEOUT:"timeout"},oz=new Map([[Kp,yr.TIMEOUT],[Gp,yr.TIMEOUT],[Qp,yr.FAILED],[Jp,yr.FAILED],[MC,yr.TIMEOUT],[Yp,yr.BUSY],[DC,yr.TIMEOUT]]),$C=function(t){VV(e,t);function e(r,n){var i=t.call(this,"early",JV)||this;n=Object.assign({helloBody:null,maxConsecutiveFailedHellos:ZV,maxConsecutiveMissedHeartbeats:XV,requestedHeartbeatTimeout:ez,openTimeout:tz,welcomeTimeout:rz,Log:KV,WebSocket:iz},n);var o=HV(n.logLevel),a=new n.Log("default",i,o,n.loggerName),s=n.networkMonitor?new GV(function(){var l=s.type,u="Network changed".concat(l?" to ".concat(l):"");a.debug(u),i._close({code:MC,reason:u})}):null;Object.defineProperties(i,{_busyWaitTimeout:{value:null,writable:!0},_consecutiveHeartbeatsMissed:{value:0,writable:!0},_cookie:{value:null,writable:!0},_eventObserver:{value:n.eventObserver},_heartbeatTimeout:{value:null,writable:!0},_hellosLeft:{value:n.maxConsecutiveFailedHellos,writable:!0},_instanceId:{value:++QV},_log:{value:a},_messageQueue:{value:[]},_networkMonitor:{value:s},_options:{value:n},_openTimeout:{value:null,writable:!0},_sendHeartbeatTimeout:{value:null,writable:!0},_serverUrl:{value:r},_welcomeTimeout:{value:null,writable:!0},_ws:{value:null,writable:!0}});var c={connecting:"info",early:"info",open:"info",waiting:"warning",closed:"info"};return i.on("stateChanged",function(l){for(var u=[],d=1;d<arguments.length;d++)u[d-1]=arguments[d];l in Uw&&i.emit.apply(i,zV([Uw[l]],Fw(u),!1));var h={name:l,group:"signaling",level:c[i.state]};if(l==="closed"){var f=Fw(u,1),_=f[0];h.payload={reason:_},h.level=_===yr.LOCAL?"info":"error"}i._eventObserver.emit("event",h)}),i._eventObserver.emit("event",{name:i.state,group:"signaling",level:c[i.state]}),i._connect(),i}return e.prototype.toString=function(){return"[TwilioConnection #".concat(this._instanceId,": ").concat(this._ws.url,"]")},e.prototype._close=function(r){var n=r.code,i=r.reason;if(this.state!=="closed"){this._openTimeout&&this._openTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear(),this._heartbeatTimeout&&this._heartbeatTimeout.clear(),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.clear(),this._networkMonitor&&this._networkMonitor.stop(),this._busyWaitTimeout&&n!==dl&&this._busyWaitTimeout.clear(),this._messageQueue.splice(0);var o=this._log;n===Bw?(o.debug("Closed"),this.transition("closed",null,[yr.LOCAL])):(o.warn("Closed: ".concat(n," - ").concat(i)),n!==dl&&this.transition("closed",null,[oz.get(n)||yr.REMOTE]));var a=this._ws.readyState,s=this._options.WebSocket;a!==s.CLOSING&&a!==s.CLOSED&&this._ws.close(n,i)}},e.prototype._connect=function(){var r=this,n=this._log;if(this.state==="waiting")this.transition("early");else if(this.state!=="early"){n.warn('Unexpected state "'.concat(this.state,'" for connecting to the')+" TCMP server.");return}this._ws=new this._options.WebSocket(this._serverUrl);var i=this._ws;n.debug("Created a new WebSocket:",i),i.addEventListener("close",function(a){return r._close(a)});var o=this._options.openTimeout;this._openTimeout=new ko(function(){var a="Failed to open in ".concat(o," ms");r._close({code:DC,reason:a})},o),i.addEventListener("open",function(){n.debug("WebSocket opened:",i),r._openTimeout.clear(),r._startHandshake(),r._networkMonitor&&r._networkMonitor.start()}),i.addEventListener("message",function(a){n.debug("Incoming: ".concat(a.data));try{a=JSON.parse(a.data)}catch(s){r.emit("error",s);return}switch(a.type){case"bad":r._handleBad(a);break;case"busy":r._handleBusy(a);break;case"bye":break;case"msg":r._handleMessage(a);case"heartbeat":r._handleHeartbeat();break;case"welcome":r._handleWelcome(a);break;default:r._log.debug("Unknown message type: ".concat(a.type)),r.emit("error",new Error("Unknown message type: ".concat(a.type)));break}})},e.prototype._handleBad=function(r){var n=r.reason,i=this._log;if(!["connecting","open"].includes(this.state)){i.warn('Unexpected state "'.concat(this.state,'" for handling a "bad" message')+" from the TCMP server.");return}if(this.state==="connecting"){i.warn("Closing: ".concat(Qp," - ").concat(n)),this._close({code:Qp,reason:n});return}i.debug("Error: ".concat(n)),this.emit("error",new Error(n))},e.prototype._handleBusy=function(r){var n=this,i=r.cookie,o=r.keepAlive,a=r.retryAfter,s=this._log;if(!["connecting","waiting"].includes(this.state)){s.warn('Unexpected state "'.concat(this.state,'" for handling a "busy" message')+" from the TCMP server.");return}this._busyWaitTimeout&&this._busyWaitTimeout.clear(),this._welcomeTimeout&&this._welcomeTimeout.clear();var c=a<0?'Received terminal "busy" message':'Received "busy" message, retrying after '.concat(a," ms");if(a<0){s.warn("Closing: ".concat(Yp," - ").concat(c)),this._close({code:Yp,reason:c});return}var l=this._options.maxConsecutiveFailedHellos;this._hellosLeft=l,this._cookie=i||null,o?(s.warn(c),this._busyWaitTimeout=new ko(function(){return n._startHandshake()},a)):(s.warn("Closing: ".concat(dl," - ").concat(c)),this._close({code:dl,reason:c}),this._busyWaitTimeout=new ko(function(){return n._connect()},a)),this.transition("waiting",null,[o,a])},e.prototype._handleHeartbeat=function(){if(this.state!=="open"){this._log.warn('Unexpected state "'.concat(this.state,'" for handling a "heartbeat"')+" message from the TCMP server.");return}this._heartbeatTimeout.reset()},e.prototype._handleHeartbeatTimeout=function(){if(this.state==="open"){var r=this._log,n=this._options.maxConsecutiveMissedHeartbeats;r.debug("Consecutive heartbeats missed: ".concat(n));var i="Missed ".concat(n,' "heartbeat" messages');r.warn("Closing: ".concat(Gp," - ").concat(i)),this._close({code:Gp,reason:i})}},e.prototype._handleMessage=function(r){var n=r.body;if(this.state!=="open"){this._log.warn('Unexpected state "'.concat(this.state,'" for handling a "msg" message')+" from the TCMP server.");return}this.emit("message",n)},e.prototype._handleWelcome=function(r){var n=this,i=r.negotiatedTimeout,o=this._log;if(!["connecting","waiting"].includes(this.state)){o.warn('Unexpected state "'.concat(this.state,'" for handling a "welcome"')+" message from the TCMP server.");return}this.state==="waiting"&&(o.debug('Received "welcome" message, no need to retry connection.'),this._busyWaitTimeout.clear());var a=this._options.maxConsecutiveMissedHeartbeats,s=i*a,c=i-nz;this._welcomeTimeout.clear(),this._heartbeatTimeout=new ko(function(){return n._handleHeartbeatTimeout()},s),this._messageQueue.splice(0).forEach(function(l){return n._send(l)}),this._sendHeartbeatTimeout=new ko(function(){return n._sendHeartbeat()},c),this.transition("open")},e.prototype._handleWelcomeTimeout=function(){if(this.state==="connecting"){var r=this._log;if(this._hellosLeft<=0){var n="All handshake attempts failed";r.warn("Closing: ".concat(Kp," - ").concat(n)),this._close({code:Kp,reason:n});return}var i=this._options.maxConsecutiveFailedHellos;r.warn("Handshake attempt ".concat(i-this._hellosLeft," failed")),this._startHandshake()}},e.prototype._send=function(r){var n=this._ws.readyState,i=this._options.WebSocket;if(n===i.OPEN){var o=JSON.stringify(r);this._log.debug("Outgoing: ".concat(o));try{this._ws.send(o),this._sendHeartbeatTimeout&&this._sendHeartbeatTimeout.reset()}catch{var a="Failed to send message";this._log.warn("Closing: ".concat(Jp," - ").concat(a)),this._close({code:Jp,reason:a})}}},e.prototype._sendHeartbeat=function(){this.state!=="closed"&&this._send({type:"heartbeat"})},e.prototype._sendHello=function(){var r=this._options,n=r.helloBody,i=r.requestedHeartbeatTimeout,o={id:qV(),timeout:i,type:"hello",version:YV};this._cookie&&(o.cookie=this._cookie),n&&(o.body=n),this._send(o)},e.prototype._sendOrEnqueue=function(r){var n=this;if(this.state!=="closed"){var i=this.state==="open"?function(o){return n._send(o)}:function(o){return n._messageQueue.push(o)};i(r)}},e.prototype._startHandshake=function(){var r=this;if(["early","waiting"].includes(this.state)&&this.transition("connecting"),this.state==="connecting"){this._hellosLeft--,this._sendHello();var n=this._options.welcomeTimeout;this._welcomeTimeout=new ko(function(){return r._handleWelcomeTimeout()},n)}},e.prototype.close=function(){this.state!=="closed"&&(this._sendOrEnqueue({type:"bye"}),this._close({code:Bw,reason:"Normal"}))},e.prototype.sendMessage=function(r){this._sendOrEnqueue({body:r,type:"msg"})},e}(WV);$C.CloseReason=yr;var FC=$C,Z={},az=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sz=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},cz=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},lz=function(t){az(e,t);function e(r){var n=this,i=[].slice.call(arguments,1);n=t.apply(this,cz([],sz(i),!1))||this,Object.setPrototypeOf(n,e.prototype);var o=Error.apply(n,i);return o.name="TwilioError",Object.defineProperty(n,"code",{value:r,enumerable:!0}),Object.getOwnPropertyNames(o).forEach(function(a){Object.defineProperty(this,a,{value:o[a],enumerable:!0})},n),n}return e.prototype.toString=function(){var r=this.message?": ".concat(this.message):"";return"".concat(this.name," ").concat(this.code).concat(r)},e}(Error),uz=lz,oe=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ie=uz,ne={};Z.createTwilioError=function(e,r){return e=typeof e=="number"?e:0,r=typeof r=="string"&&r?r:"Unknown error",ne[e]?new ne[e]:new ie(e,r)};var UC=function(t){oe(e,t);function e(){var r=t.call(this,20101,"Invalid Access Token")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenInvalidError=UC;Object.defineProperty(ne,20101,{value:UC});var BC=function(t){oe(e,t);function e(){var r=t.call(this,20102,"Invalid Access Token header")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenHeaderInvalidError=BC;Object.defineProperty(ne,20102,{value:BC});var VC=function(t){oe(e,t);function e(){var r=t.call(this,20103,"Invalid Access Token issuer/subject")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenIssuerInvalidError=VC;Object.defineProperty(ne,20103,{value:VC});var zC=function(t){oe(e,t);function e(){var r=t.call(this,20104,"Access Token expired or expiration date invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenExpiredError=zC;Object.defineProperty(ne,20104,{value:zC});var WC=function(t){oe(e,t);function e(){var r=t.call(this,20105,"Access Token not yet valid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenNotYetValidError=WC;Object.defineProperty(ne,20105,{value:WC});var HC=function(t){oe(e,t);function e(){var r=t.call(this,20106,"Invalid Access Token grants")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenGrantsInvalidError=HC;Object.defineProperty(ne,20106,{value:HC});var qC=function(t){oe(e,t);function e(){var r=t.call(this,20107,"Invalid Access Token signature")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.AccessTokenSignatureInvalidError=qC;Object.defineProperty(ne,20107,{value:qC});var KC=function(t){oe(e,t);function e(){var r=t.call(this,53e3,"Signaling connection error")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.SignalingConnectionError=KC;Object.defineProperty(ne,53e3,{value:KC});var GC=function(t){oe(e,t);function e(){var r=t.call(this,53001,"Signaling connection disconnected")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.SignalingConnectionDisconnectedError=GC;Object.defineProperty(ne,53001,{value:GC});var QC=function(t){oe(e,t);function e(){var r=t.call(this,53002,"Signaling connection timed out")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.SignalingConnectionTimeoutError=QC;Object.defineProperty(ne,53002,{value:QC});var JC=function(t){oe(e,t);function e(){var r=t.call(this,53003,"Client received an invalid signaling message")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.SignalingIncomingMessageInvalidError=JC;Object.defineProperty(ne,53003,{value:JC});var YC=function(t){oe(e,t);function e(){var r=t.call(this,53004,"Client sent an invalid signaling message")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.SignalingOutgoingMessageInvalidError=YC;Object.defineProperty(ne,53004,{value:YC});var XC=function(t){oe(e,t);function e(){var r=t.call(this,53006,"Video server is busy")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.SignalingServerBusyError=XC;Object.defineProperty(ne,53006,{value:XC});var ZC=function(t){oe(e,t);function e(){var r=t.call(this,53100,"Room name is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomNameInvalidError=ZC;Object.defineProperty(ne,53100,{value:ZC});var eP=function(t){oe(e,t);function e(){var r=t.call(this,53101,"Room name is too long")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomNameTooLongError=eP;Object.defineProperty(ne,53101,{value:eP});var tP=function(t){oe(e,t);function e(){var r=t.call(this,53102,"Room name contains invalid characters")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomNameCharsInvalidError=tP;Object.defineProperty(ne,53102,{value:tP});var rP=function(t){oe(e,t);function e(){var r=t.call(this,53103,"Unable to create Room")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomCreateFailedError=rP;Object.defineProperty(ne,53103,{value:rP});var nP=function(t){oe(e,t);function e(){var r=t.call(this,53104,"Unable to connect to Room")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomConnectFailedError=nP;Object.defineProperty(ne,53104,{value:nP});var iP=function(t){oe(e,t);function e(){var r=t.call(this,53105,"Room contains too many Participants")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomMaxParticipantsExceededError=iP;Object.defineProperty(ne,53105,{value:iP});var oP=function(t){oe(e,t);function e(){var r=t.call(this,53106,"Room not found")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomNotFoundError=oP;Object.defineProperty(ne,53106,{value:oP});var aP=function(t){oe(e,t);function e(){var r=t.call(this,53107,"MaxParticipants is out of range")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomMaxParticipantsOutOfRangeError=aP;Object.defineProperty(ne,53107,{value:aP});var sP=function(t){oe(e,t);function e(){var r=t.call(this,53108,"RoomType is not valid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomTypeInvalidError=sP;Object.defineProperty(ne,53108,{value:sP});var cP=function(t){oe(e,t);function e(){var r=t.call(this,53109,"Timeout is out of range")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomTimeoutOutOfRangeError=cP;Object.defineProperty(ne,53109,{value:cP});var lP=function(t){oe(e,t);function e(){var r=t.call(this,53110,"StatusCallbackMethod is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomStatusCallbackMethodInvalidError=lP;Object.defineProperty(ne,53110,{value:lP});var uP=function(t){oe(e,t);function e(){var r=t.call(this,53111,"StatusCallback is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomStatusCallbackInvalidError=uP;Object.defineProperty(ne,53111,{value:uP});var dP=function(t){oe(e,t);function e(){var r=t.call(this,53112,"Status is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomStatusInvalidError=dP;Object.defineProperty(ne,53112,{value:dP});var fP=function(t){oe(e,t);function e(){var r=t.call(this,53113,"Room exists")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomRoomExistsError=fP;Object.defineProperty(ne,53113,{value:fP});var hP=function(t){oe(e,t);function e(){var r=t.call(this,53114,"Room creation parameter(s) incompatible with the Room type")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomInvalidParametersError=hP;Object.defineProperty(ne,53114,{value:hP});var pP=function(t){oe(e,t);function e(){var r=t.call(this,53115,"MediaRegion is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomMediaRegionInvalidError=pP;Object.defineProperty(ne,53115,{value:pP});var vP=function(t){oe(e,t);function e(){var r=t.call(this,53116,"There are no media servers available in the MediaRegion")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomMediaRegionUnavailableError=vP;Object.defineProperty(ne,53116,{value:vP});var mP=function(t){oe(e,t);function e(){var r=t.call(this,53117,"The subscription operation requested is not supported for the Room type")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomSubscriptionOperationNotSupportedError=mP;Object.defineProperty(ne,53117,{value:mP});var gP=function(t){oe(e,t);function e(){var r=t.call(this,53118,"Room completed")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomCompletedError=gP;Object.defineProperty(ne,53118,{value:gP});var yP=function(t){oe(e,t);function e(){var r=t.call(this,53124,"The AudioOnly flag is not supported for the Room type")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomAudioOnlyFlagNotSupportedError=yP;Object.defineProperty(ne,53124,{value:yP});var _P=function(t){oe(e,t);function e(){var r=t.call(this,53125,"The track kind is not supported by the Room")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.RoomTrackKindNotSupportedError=_P;Object.defineProperty(ne,53125,{value:_P});var wP=function(t){oe(e,t);function e(){var r=t.call(this,53200,"Participant identity is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ParticipantIdentityInvalidError=wP;Object.defineProperty(ne,53200,{value:wP});var bP=function(t){oe(e,t);function e(){var r=t.call(this,53201,"Participant identity is too long")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ParticipantIdentityTooLongError=bP;Object.defineProperty(ne,53201,{value:bP});var SP=function(t){oe(e,t);function e(){var r=t.call(this,53202,"Participant identity contains invalid characters")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ParticipantIdentityCharsInvalidError=SP;Object.defineProperty(ne,53202,{value:SP});var kP=function(t){oe(e,t);function e(){var r=t.call(this,53203,"The maximum number of published tracks allowed in the Room at the same time has been reached")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ParticipantMaxTracksExceededError=kP;Object.defineProperty(ne,53203,{value:kP});var xP=function(t){oe(e,t);function e(){var r=t.call(this,53204,"Participant not found")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ParticipantNotFoundError=xP;Object.defineProperty(ne,53204,{value:xP});var TP=function(t){oe(e,t);function e(){var r=t.call(this,53205,"Participant disconnected because of duplicate identity")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ParticipantDuplicateIdentityError=TP;Object.defineProperty(ne,53205,{value:TP});var EP=function(t){oe(e,t);function e(){var r=t.call(this,53300,"Track is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.TrackInvalidError=EP;Object.defineProperty(ne,53300,{value:EP});var CP=function(t){oe(e,t);function e(){var r=t.call(this,53301,"Track name is invalid")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.TrackNameInvalidError=CP;Object.defineProperty(ne,53301,{value:CP});var PP=function(t){oe(e,t);function e(){var r=t.call(this,53302,"Track name is too long")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.TrackNameTooLongError=PP;Object.defineProperty(ne,53302,{value:PP});var OP=function(t){oe(e,t);function e(){var r=t.call(this,53303,"Track name contains invalid characters")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.TrackNameCharsInvalidError=OP;Object.defineProperty(ne,53303,{value:OP});var RP=function(t){oe(e,t);function e(){var r=t.call(this,53304,"Track name is duplicated")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.TrackNameIsDuplicatedError=RP;Object.defineProperty(ne,53304,{value:RP});var jP=function(t){oe(e,t);function e(){var r=t.call(this,53305,"The server has reached capacity and cannot fulfill this request")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.TrackServerTrackCapacityReachedError=jP;Object.defineProperty(ne,53305,{value:jP});var AP=function(t){oe(e,t);function e(){var r=t.call(this,53400,"Client is unable to create or apply a local media description")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaClientLocalDescFailedError=AP;Object.defineProperty(ne,53400,{value:AP});var LP=function(t){oe(e,t);function e(){var r=t.call(this,53401,"Server is unable to create or apply a local media description")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaServerLocalDescFailedError=LP;Object.defineProperty(ne,53401,{value:LP});var IP=function(t){oe(e,t);function e(){var r=t.call(this,53402,"Client is unable to apply a remote media description")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaClientRemoteDescFailedError=IP;Object.defineProperty(ne,53402,{value:IP});var NP=function(t){oe(e,t);function e(){var r=t.call(this,53403,"Server is unable to apply a remote media description")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaServerRemoteDescFailedError=NP;Object.defineProperty(ne,53403,{value:NP});var MP=function(t){oe(e,t);function e(){var r=t.call(this,53404,"No supported codec")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaNoSupportedCodecError=MP;Object.defineProperty(ne,53404,{value:MP});var DP=function(t){oe(e,t);function e(){var r=t.call(this,53405,"Media connection failed or Media activity ceased")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaConnectionError=DP;Object.defineProperty(ne,53405,{value:DP});var $P=function(t){oe(e,t);function e(){var r=t.call(this,53407,"Media connection failed due to DTLS handshake failure")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.MediaDTLSTransportFailedError=$P;Object.defineProperty(ne,53407,{value:$P});var FP=function(t){oe(e,t);function e(){var r=t.call(this,53500,"Unable to acquire configuration")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ConfigurationAcquireFailedError=FP;Object.defineProperty(ne,53500,{value:FP});var UP=function(t){oe(e,t);function e(){var r=t.call(this,53501,"Unable to acquire TURN credentials")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(ie);Z.ConfigurationAcquireTurnFailedError=UP;Object.defineProperty(ne,53501,{value:UP});Object.defineProperty(cg,"__esModule",{value:!0});cg.getTurnCredentials=mz;var dz=FC,fz=Ee.ICE_VERSION,BP=Z,hz=BP.createTwilioError,pz=BP.SignalingConnectionError,vz=St;function mz(t,e){return new Promise(function(r,n){var i=new vz.EventEmitter,o={networkMonitor:null,eventObserver:i,helloBody:{edge:"roaming",preflight:!0,token:t,type:"ice",version:fz}},a=new dz(e,o),s=!1;a.once("close",function(){s||(s=!0,n(new pz))}),a.on("message",function(c){var l=c.code,u=c.message,d=c.ice_servers,h=c.type;(h==="iced"||h==="error")&&!s&&(s=!0,h==="iced"?r(d):n(hz(l,u)),a.close())})})}var lg={},zw=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Ww=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(lg,"__esModule",{value:!0});lg.makeStat=gz;function gz(t){if(t&&t.length){var e=Math.min.apply(Math,Ww([],zw(t),!1)),r=Math.max.apply(Math,Ww([],zw(t),!1)),n=t.reduce(function(i,o){return i+o},0)/t.length;return{min:e,max:r,average:n}}return null}var ug={};Object.defineProperty(ug,"__esModule",{value:!0});ug.syntheticAudio=yz;function yz(){var t=Sd(),e={},r=t.getOrCreate(e),n=r.createOscillator(),i=n.connect(r.createMediaStreamDestination());n.start();var o=i.stream.getAudioTracks()[0],a=o.stop;return o.stop=function(){a.call(o),t.release(e)},o}var dg={};Object.defineProperty(dg,"__esModule",{value:!0});dg.syntheticVideo=_z;function _z(t){var e=t===void 0?{}:t,r=e.width,n=r===void 0?640:r,i=e.height,o=i===void 0?480:i,a=Object.assign(document.createElement("canvas"),{width:n,height:o}),s=a.getContext("2d");s.fillStyle="green",s.fillRect(0,0,a.width,a.height);var c=!1;requestAnimationFrame(function h(){if(!c){var f=Math.round(Math.random()*255),_=Math.round(Math.random()*255),v=Math.round(Math.random()*255),g=Math.round(Math.random()*255);s.fillStyle="rgba(".concat(f,", ").concat(_,", ").concat(v,", ").concat(g,")"),s.fillRect(Math.random()*n,Math.random()*o,50,50),requestAnimationFrame(h)}});var l=a.captureStream(30),u=l.getTracks()[0],d=u.stop;return u.stop=function(){c=!0,d.call(u)},u}var wz=function(){function t(){Object.defineProperties(this,{_samples:{value:[{denominator:0,numerator:0},{denominator:0,numerator:0}]}})}return t.prototype.get=function(){var e=this._samples,r=e[1].denominator-e[0].denominator||1/0,n=e[1].numerator-e[0].numerator;return n/r},t.prototype.putSample=function(e,r){var n=this._samples;n.shift(),n.push({denominator:r,numerator:e})},t}(),VP=wz,bz=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sz=St.EventEmitter,kz=["signaling","room","media","quality","video-processor","preflight"],xz=["debug","error","info","warning"],Tz=function(t){bz(e,t);function e(r,n,i,o){o===void 0&&(o=null);var a=t.call(this)||this;return a.on("event",function(s){var c=s.name,l=s.group,u=s.level,d=s.payload;if(typeof c!="string")throw i.error("Unexpected name: ",c),new Error("Unexpected name: ",c);if(!kz.includes(l))throw i.error("Unexpected group: ",l),new Error("Unexpected group: ",l);if(!xz.includes(u))throw i.error("Unexpected level: ",u),new Error("Unexpected level: ",u);var h=Date.now(),f=h-n,_=Object.assign({elapsedTime:f,level:u},d||{});r.publish(l,c,_);var v=Object.assign({elapsedTime:f,group:l,level:u,name:c,timestamp:h},d?{payload:d}:{}),g={debug:"debug",error:"error",info:"info",warning:"warn"}[u];i[g]("event",v),o&&l==="signaling"&&o.emit("event",v)}),a}return e}(Sz),zP=Tz,Ez=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qo=T&&T.__assign||function(){return qo=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},qo.apply(this,arguments)},Cz=St.EventEmitter,Pz=J.getUserAgent,Oz=5,Rz=50,jz=1e3,Hw=globalThis,Az=Hw.WebSocket?Hw.WebSocket:IC(),WP=Ee,Lz=WP.hardwareDevicePublisheriPad,Iz=WP.hardwareDevicePublisheriPhone,Nz=J,qw=fo,Mz=function(t){Ez(e,t);function e(r,n,i,o,a,s){var c=t.call(this)||this;return s=Object.assign({gateway:"".concat(Dz(o,a),"/v1/VideoEvents"),maxReconnectAttempts:Oz,reconnectIntervalMs:Rz,userAgent:Pz(),WebSocket:Az},s),Object.defineProperties(c,{_connectTimestamp:{value:0,writable:!0},_eventQueue:{value:[]},_readyToConnect:{value:Nz.defer()},_reconnectAttemptsLeft:{value:s.maxReconnectAttempts,writable:!0},_ws:{value:null,writable:!0},_WebSocket:{value:s.WebSocket}}),c._readyToConnect.promise.then(function(l){var u=l.roomSid,d=l.participantSid,h=c;c.on("disconnected",function f(_){if(h._session=null,_&&h._reconnectAttemptsLeft>0){h.emit("reconnecting"),Fz(h,r,n,i,u,d,s);return}h.removeListener("disconnected",f)}),Xp(c,r,n,i,u,d,s)}).catch(function(){}),c}return e.prototype.connect=function(r,n){this._readyToConnect.resolve({roomSid:r,participantSid:n})},e.prototype._publish=function(r){r.session=this._session,this._ws.send(JSON.stringify(r))},e.prototype.disconnect=function(){if(this._ws===null||this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED)return!1;try{this._ws.close()}catch{}return this.emit("disconnected"),!0},e.prototype.publish=function(r,n,i){if(this._ws!==null&&(this._ws.readyState===this._WebSocket.CLOSING||this._ws.readyState===this._WebSocket.CLOSED))return!1;var o=typeof this._session=="string"?this._publish.bind(this):this._eventQueue.push.bind(this._eventQueue);return o({group:r,name:n,payload:i,timestamp:Date.now(),type:"event",version:1}),!0},e}(Cz);function Xp(t,e,r,n,i,o,a){t._connectTimestamp=Date.now(),t._reconnectAttemptsLeft--,t._ws=new a.WebSocket(a.gateway);var s=t._ws;s.addEventListener("close",function(c){if(c.code===jz){t.emit("disconnected");return}t.emit("disconnected",new Error("WebSocket Error ".concat(c.code,": ").concat(c.reason)))}),s.addEventListener("message",function(c){$z(t,JSON.parse(c.data),a)}),s.addEventListener("open",function(){var c={type:"connect",token:e,version:1};c.publisher={name:r,sdkVersion:n,userAgent:a.userAgent,participantSid:o,roomSid:i},qw.isIpad()?c.publisher=qo(qo({},c.publisher),Lz):qw.isIphone()&&(c.publisher=qo(qo({},c.publisher),Iz)),s.send(JSON.stringify(c))})}function Dz(t,e){return t==="prod"?"wss://sdkgw.".concat(e,".twilio.com"):"wss://sdkgw.".concat(t,"-").concat(e,".twilio.com")}function $z(t,e,r){switch(e.type){case"connected":t._session=e.session,t._reconnectAttemptsLeft=r.maxReconnectAttempts,t._eventQueue.splice(0).forEach(t._publish,t),t.emit("connected");break;case"error":t._ws.close(),t.emit("disconnected",new Error(e.message));break}}function Fz(t,e,r,n,i,o,a){var s=Date.now()-t._connectTimestamp,c=a.reconnectIntervalMs-s;if(c>0){setTimeout(function(){Xp(t,e,r,n,i,o,a)},c);return}Xp(t,e,r,n,i,o,a)}var HP=Mz,Uz=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pu=T&&T.__assign||function(){return Pu=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Pu.apply(this,arguments)},Za=T&&T.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},es=T&&T.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};Object.defineProperty(yc,"__esModule",{value:!0});yc.PreflightTest=void 0;yc.runPreflight=oW;var xo=Ee,To=Td,Bz=Ed,Vz=sg,zz=cg,fl=lg,Wz=ug,Hz=dg,qz=J,Kz=Ee.WS_SERVER,Gz=pn,Qz=gc,Bf=VP,Jz=zP,Yz=HP,qP=yd,Xz=qP.createSID,Zz=qP.sessionSID,KP=Z,eW=KP.SignalingConnectionTimeoutError,Kw=KP.MediaConnectionError,GP=1e3,tW=10*GP,bi={mediaAcquired:"mediaAcquired",connected:"connected",mediaSubscribed:"mediaSubscribed",mediaStarted:"mediaStarted",dtlsConnected:"dtlsConnected",peerConnectionConnected:"peerConnectionConnected",iceConnected:"iceConnected"};function rW(t){return t!==null&&typeof t<"u"}var nW=0,QP=function(t){Uz(e,t);function e(r,n){var i=t.call(this)||this;i._testTiming=new To.Timer,i._dtlsTiming=new To.Timer,i._iceTiming=new To.Timer,i._peerConnectionTiming=new To.Timer,i._mediaTiming=new To.Timer,i._connectTiming=new To.Timer,i._sentBytesMovingAverage=new Bf,i._packetLossMovingAverage=new Bf,i._progressEvents=[],i._receivedBytesMovingAverage=new Bf;var o=n,a=o.environment,s=a===void 0?"prod":a,c=o.region,l=c===void 0?"gll":c,u=o.duration,d=u===void 0?tW:u,h=o.wsServer||Kz(s,l);return i._log=new Gz("default",i,xo.DEFAULT_LOG_LEVEL,xo.DEFAULT_LOGGER_NAME),i._testDuration=d,i._instanceId=nW++,i._testTiming.start(),i._runPreflightTest(r,s,h),i}return e.prototype.toString=function(){return"[Preflight #".concat(this._instanceId,"]")},e.prototype.stop=function(){this._stopped=!0},e.prototype._generatePreflightReport=function(r){return this._testTiming.stop(),{testTiming:this._testTiming.getTimeMeasurement(),networkTiming:{dtls:this._dtlsTiming.getTimeMeasurement(),ice:this._iceTiming.getTimeMeasurement(),peerConnection:this._peerConnectionTiming.getTimeMeasurement(),connect:this._connectTiming.getTimeMeasurement(),media:this._mediaTiming.getTimeMeasurement()},stats:{jitter:(0,fl.makeStat)(r==null?void 0:r.jitter),rtt:(0,fl.makeStat)(r==null?void 0:r.rtt),packetLoss:(0,fl.makeStat)(r==null?void 0:r.packetLoss)},selectedIceCandidatePairStats:r?r.selectedIceCandidatePairStats:null,iceCandidateStats:r?r.iceCandidateStats:[],progressEvents:this._progressEvents,mos:(0,fl.makeStat)(r==null?void 0:r.mos)}},e.prototype._executePreflightStep=function(r,n,i){return Za(this,void 0,void 0,function(){var o,a,s,c,l;return es(this,function(u){switch(u.label){case 0:if(this._log.debug("Executing step: ",r),o=this._testDuration+10*GP,this._stopped)throw new Error("stopped");a=Promise.resolve().then(n),s=null,c=new Promise(function(d,h){s=setTimeout(function(){h(i||new Error("".concat(r," timeout.")))},o)}),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,Promise.race([c,a])];case 2:return l=u.sent(),[2,l];case 3:return s!==null&&clearTimeout(s),[7];case 4:return[2]}})})},e.prototype._collectNetworkTimings=function(r){var n=this;return new Promise(function(i){var o;r.addEventListener("iceconnectionstatechange",function(){r.iceConnectionState==="checking"&&n._iceTiming.start(),r.iceConnectionState==="connected"&&(n._iceTiming.stop(),n._updateProgress(bi.iceConnected),(!o||o&&o.state==="connected")&&i())}),r.addEventListener("connectionstatechange",function(){r.connectionState==="connecting"&&n._peerConnectionTiming.start(),r.connectionState==="connected"&&(n._peerConnectionTiming.stop(),n._updateProgress(bi.peerConnectionConnected))});var a=r.getSenders(),s=a.map(function(c){return c.transport}).find(rW);typeof s<"u"&&(o=s,o.addEventListener("statechange",function(){o.state==="connecting"&&n._dtlsTiming.start(),o.state==="connected"&&(n._dtlsTiming.stop(),n._updateProgress(bi.dtlsConnected),r.iceConnectionState==="connected"&&i())}))})},e.prototype._setupInsights=function(r){var n=r.token,i=r.environment,o=i===void 0?xo.DEFAULT_ENVIRONMENT:i,a=r.realm,s=a===void 0?xo.DEFAULT_REALM:a,c={},l=new Yz(n,xo.SDK_NAME,xo.SDK_VERSION,o,s,c);l.connect("PREFLIGHT_ROOM_SID","PREFLIGHT_PARTICIPANT");var u=new Jz(l,Date.now(),this._log),d=void 0;return{reportToInsights:function(h){var f,_,v=h.report,g=v.stats.jitter||d,y=v.stats.rtt||d,m=v.stats.packetLoss||d,w=v.mos||d,S=new Map;v.iceCandidateStats.forEach(function(x){if(x.candidateType&&x.protocol){var C=S.get(x.candidateType)||[];C.indexOf(x.protocol)<0&&C.push(x.protocol),S.set(x.candidateType,C)}});var k=JSON.stringify(Object.fromEntries(S)),E={name:"report",group:"preflight",level:v.error?"error":"info",payload:{sessionSID:Zz,preflightSID:Xz("PF"),progressEvents:JSON.stringify(v.progressEvents),testTiming:v.testTiming,dtlsTiming:v.networkTiming.dtls,iceTiming:v.networkTiming.ice,peerConnectionTiming:v.networkTiming.peerConnection,connectTiming:v.networkTiming.connect,mediaTiming:v.networkTiming.media,selectedLocalCandidate:(f=v.selectedIceCandidatePairStats)===null||f===void 0?void 0:f.localCandidate,selectedRemoteCandidate:(_=v.selectedIceCandidatePairStats)===null||_===void 0?void 0:_.remoteCandidate,iceCandidateStats:k,jitterStats:g,rttStats:y,packetLossStats:m,mosStats:w,error:v.error}};u.emit("event",E),setTimeout(function(){return l.disconnect()},2e3)}}},e.prototype._runPreflightTest=function(r,n,i){return Za(this,void 0,void 0,function(){var o,a,s,c,l,u,d,h,f,_,v,g,y=this;return es(this,function(m){switch(m.label){case 0:o=[],a=[],s=this._setupInsights({token:r,environment:n}).reportToInsights,m.label=1;case 1:return m.trys.push([1,8,9,10]),c=[],[4,this._executePreflightStep("Acquire media",function(){return[(0,Wz.syntheticAudio)(),(0,Hz.syntheticVideo)({width:640,height:480})]})];case 2:return o=m.sent(),this._updateProgress(bi.mediaAcquired),this.emit("debug",{localTracks:o}),this._connectTiming.start(),[4,this._executePreflightStep("Get turn credentials",function(){return(0,zz.getTurnCredentials)(r,i)},new eW)];case 3:return l=m.sent(),this._connectTiming.stop(),this._updateProgress(bi.connected),u=new RTCPeerConnection({iceServers:l,iceTransportPolicy:"relay",bundlePolicy:"max-bundle"}),d=new RTCPeerConnection({iceServers:l,bundlePolicy:"max-bundle"}),a.push(u),a.push(d),this._mediaTiming.start(),[4,this._executePreflightStep("Setup Peer Connections",function(){return Za(y,void 0,void 0,function(){var w,S,k,E;return es(this,function(x){switch(x.label){case 0:return u.addEventListener("icecandidate",function(C){return C.candidate&&d.addIceCandidate(C.candidate)}),d.addEventListener("icecandidate",function(C){return C.candidate&&u.addIceCandidate(C.candidate)}),o.forEach(function(C){return u.addTrack(C)}),w=new Promise(function(C){var R=[];d.addEventListener("track",function(A){R.push(A.track),R.length===o.length&&C(R)})}),[4,u.createOffer()];case 1:return S=x.sent(),k=S,[4,u.setLocalDescription(k)];case 2:return x.sent(),[4,d.setRemoteDescription(k)];case 3:return x.sent(),[4,d.createAnswer()];case 4:return E=x.sent(),[4,d.setLocalDescription(E)];case 5:return x.sent(),[4,u.setRemoteDescription(E)];case 6:return x.sent(),[4,this._collectNetworkTimings(u)];case 7:return x.sent(),[2,w]}})})},new Kw)];case 4:return h=m.sent(),this.emit("debug",{remoteTracks:h}),h.forEach(function(w){w.addEventListener("ended",function(){return y._log.warn(w.kind+":ended")}),w.addEventListener("mute",function(){return y._log.warn(w.kind+":muted")}),w.addEventListener("unmute",function(){return y._log.warn(w.kind+":unmuted")})}),this._updateProgress(bi.mediaSubscribed),[4,this._executePreflightStep("Wait for tracks to start",function(){return new Promise(function(w){var S=document.createElement("video");S.autoplay=!0,S.playsInline=!0,S.muted=!0,S.srcObject=new MediaStream(h),c.push(S),y.emit("debugElement",S),S.oncanplay=w})},new Kw)];case 5:return m.sent(),this._mediaTiming.stop(),this._updateProgress(bi.mediaStarted),[4,this._executePreflightStep("Collect stats for duration",function(){return y._collectRTCStatsForDuration(y._testDuration,iW(),u,d)})];case 6:return f=m.sent(),[4,this._executePreflightStep("Generate report",function(){return y._generatePreflightReport(f)})];case 7:return _=m.sent(),s({report:_}),this.emit("completed",_),[3,10];case 8:return v=m.sent(),g=this._generatePreflightReport(),s({report:Pu(Pu({},g),{error:v==null?void 0:v.toString()})}),this.emit("failed",v,g),[3,10];case 9:return a.forEach(function(w){return w.close()}),o.forEach(function(w){return w.stop()}),[7];case 10:return[2]}})})},e.prototype._collectRTCStats=function(r,n,i){return Za(this,void 0,void 0,function(){var o,a,s,c,l,u,d,h,f,_,v,g,y,m;return es(this,function(w){switch(w.label){case 0:return[4,(0,Vz.getCombinedConnectionStats)({publisher:n,subscriber:i})];case 1:return o=w.sent(),a=o.timestamp,s=o.bytesSent,c=o.bytesReceived,l=o.packets,u=o.packetsLost,d=o.roundTripTime,h=o.jitter,f=o.selectedIceCandidatePairStats,_=o.iceCandidateStats,v=r.jitter.length>0,r.jitter.push(h),r.rtt.push(d),this._sentBytesMovingAverage.putSample(s,a),this._receivedBytesMovingAverage.putSample(c,a),this._packetLossMovingAverage.putSample(u,l),v&&(r.outgoingBitrate.push(this._sentBytesMovingAverage.get()*1e3*8),r.incomingBitrate.push(this._receivedBytesMovingAverage.get()*1e3*8),g=this._packetLossMovingAverage.get(),y=Math.min(100,g*100),r.packetLoss.push(y),m=(0,Bz.calculateMOS)(d,h,g),r.mos.push(m)),r.selectedIceCandidatePairStats||(r.selectedIceCandidatePairStats=f),r.iceCandidateStats.length===0&&(r.iceCandidateStats=_),[2]}})})},e.prototype._collectRTCStatsForDuration=function(r,n,i,o){return Za(this,void 0,void 0,function(){var a,s,c;return es(this,function(l){switch(l.label){case 0:return a=Date.now(),s=Math.min(1e3,r),[4,(0,qz.waitForSometime)(s)];case 1:return l.sent(),[4,this._collectRTCStats(n,i,o)];case 2:return l.sent(),c=r-(Date.now()-a),c>0?[4,this._collectRTCStatsForDuration(c,n,i,o)]:[3,4];case 3:n=l.sent(),l.label=4;case 4:return[2,n]}})})},e.prototype._updateProgress=function(r){var n=Date.now()-this._testTiming.getTimeMeasurement().start;this._progressEvents.push({duration:n,name:r}),this.emit("progress",r)},e}(Qz);yc.PreflightTest=QP;function iW(){return{mos:[],jitter:[],rtt:[],outgoingBitrate:[],incomingBitrate:[],packetLoss:[],selectedIceCandidatePairStats:null,iceCandidateStats:[]}}function oW(t,e){e===void 0&&(e={});var r=new QP(t,e);return r}var Vf=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},zf=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},aW=function(){function t(e,r){var n=this;Object.defineProperties(this,{_isCancelable:{writable:!0,value:!0},_isCanceled:{writable:!0,value:!1},_onCancel:{value:r}}),Object.defineProperty(this,"_promise",{value:new Promise(function(i,o){e(function(a){n._isCancelable=!1,i(a)},function(a){n._isCancelable=!1,o(a)},function(){return n._isCanceled})})})}return t.reject=function(e){return new t(function(n,i){i(e)},function(){})},t.resolve=function(e){return new t(function(n){n(e)},function(){})},t.prototype.cancel=function(){return this._isCancelable&&(this._isCanceled=!0,this._onCancel()),this},t.prototype.catch=function(){var e=[].slice.call(arguments),r=this._promise;return new t(function(i,o){r.catch.apply(r,zf([],Vf(e),!1)).then(i,o)},this._onCancel)},t.prototype.then=function(){var e=[].slice.call(arguments),r=this._promise;return new t(function(i,o){r.then.apply(r,zf([],Vf(e),!1)).then(i,o)},this._onCancel)},t.prototype.finally=function(){var e=[].slice.call(arguments),r=this._promise;return new t(function(i,o){r.finally.apply(r,zf([],Vf(e),!1)).then(i,o)},this._onCancel)},t}(),fg=aW,Gw=fg;function sW(t,e,r,n){var i,o=new Error("Canceled");return new Gw(function(s,c,l){var u;t(function(h){return l()?Gw.reject(o):(u=e(h),r(u).then(function(_){if(l())throw o;return i=_(),i}))}).then(function(h){if(l())throw h.disconnect(),o;s(n(u,h))}).catch(function(h){c(h)})},function(){i&&i.cancel()})}var cW=sW,lW=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uW=St.EventEmitter,dW=function(t){lW(e,t);function e(r,n){var i=t.call(this)||this;return r=Object.assign({maxAudioBitrate:null,maxVideoBitrate:null},r),Object.defineProperties(i,{maxAudioBitrate:{value:r.maxAudioBitrate,writable:!0},maxVideoBitrate:{value:r.maxVideoBitrate,writable:!0},adaptiveSimulcast:{value:n}}),i}return e.prototype.toJSON=function(){return{maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate}},e.prototype.update=function(r){var n=this;r=Object.assign({maxAudioBitrate:this.maxAudioBitrate,maxVideoBitrate:this.maxVideoBitrate},r);var i=["maxAudioBitrate","maxVideoBitrate"].reduce(function(o,a){return n[a]!==r[a]&&(n[a]=r[a],o=!0),o},!1);i&&this.emit("changed")},e}(uW),fW=dW,_c={},hW=J.isNonArrayObject,$a=Ee,ss=$a.typeErrors,pW=$a.clientTrackSwitchOffControl,vW=$a.videoContentPreferencesMode,mW=$a.subscriptionMode,JP=$a.trackPriority,gW=$a.trackSwitchOffMode;function yW(t){var e=Js(t,"options.bandwidthProfile");return!t||e||(e=Js(t.video,"options.bandwidthProfile.video",[{prop:"contentPreferencesMode",values:Object.values(vW)},{prop:"dominantSpeakerPriority",values:Object.values(JP)},{prop:"maxSubscriptionBitrate",type:"number"},{prop:"maxTracks",type:"number"},{prop:"mode",values:Object.values(mW)},{prop:"clientTrackSwitchOffControl",values:Object.values(pW)},{prop:"trackSwitchOffMode",values:Object.values(gW)}]),e)?e:t.video?"maxTracks"in t.video&&"clientTrackSwitchOffControl"in t.video?new TypeError("options.bandwidthProfile.video.maxTracks is deprecated. Use options.bandwidthProfile.video.clientTrackSwitchOffControl instead."):"renderDimensions"in t.video&&"contentPreferencesMode"in t.video?new TypeError("options.bandwidthProfile.video.renderDimensions is deprecated. Use options.bandwidthProfile.video.contentPreferencesMode instead."):wW(t.video.renderDimensions):null}function _W(t,e){if(!(t instanceof e.LocalAudioTrack||t instanceof e.LocalDataTrack||t instanceof e.LocalVideoTrack||t instanceof e.MediaStreamTrack))throw ss.INVALID_TYPE("track","LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack")}function Js(t,e,r){return r===void 0&&(r=[]),typeof t>"u"?null:t===null||!hW(t)?ss.INVALID_TYPE(e,"object"):r.reduce(function(n,i){var o=i.prop,a=i.type,s=i.values;if(n||!(o in t))return n;var c=t[o];return a&&typeof c!==a||a==="number"&&isNaN(c)?ss.INVALID_TYPE("".concat(e,".").concat(o),a):Array.isArray(s)&&!s.includes(c)?ss.INVALID_VALUE("".concat(e,".").concat(o),s):n},null)}function wW(t){var e="options.bandwidthProfile.video.renderDimensions",r=Js(t,e);return t?r||Object.values(JP).reduce(function(n,i){return n||Js(t[i],"".concat(e,".").concat(i),[{prop:"height",type:"number"},{prop:"width",type:"number"}])},null):r}_c.validateBandwidthProfile=yW;_c.validateLocalTrack=_W;_c.validateObject=Js;var bW=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SW=gc,YP=J,kW=YP.buildLogLevels,xW=YP.valueToJSON,TW=Ee.DEFAULT_LOG_LEVEL,EW=pn,CW=0,PW=function(t){bW(e,t);function e(r,n,i){var o=t.call(this)||this;i=Object.assign({logLevel:TW},i);var a=kW(i.logLevel);return Object.defineProperties(o,{_instanceId:{value:CW++},_log:{value:i.log?i.log.createLog("default",o):new EW("default",o,a,i.loggerName)},trackName:{enumerable:!0,value:r},trackSid:{enumerable:!0,value:n}}),o}return e.prototype.toJSON=function(){return xW(this)},e.prototype.toString=function(){return"[TrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}(SW),XP=PW,OW=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RW=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},jW=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},AW=XP,ZP=Ee,LW=ZP.typeErrors,IW=ZP.trackPriority,NW=function(t){OW(e,t);function e(r,n,i,o){var a=t.call(this,n.name,r.sid,o)||this;return Object.defineProperties(a,{_reemitSignalingEvent:{value:function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];return a.emit.apply(a,jW([s&&s.length?"warning":"warningsCleared"],RW(s),!1))}},_reemitTrackEvent:{value:function(){return a.emit(a.isTrackEnabled?"trackEnabled":"trackDisabled")}},_signaling:{value:r},_unpublish:{value:i},isTrackEnabled:{enumerable:!0,get:function(){return this.track.kind==="data"?!0:this.track.isEnabled}},kind:{enumerable:!0,value:n.kind},priority:{enumerable:!0,get:function(){return r.updatedPriority}},track:{enumerable:!0,value:n}}),["disabled","enabled"].forEach(function(s){return n.on(s,a._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(s){return r.on(s,a._reemitSignalingEvent)}),a}return e.prototype.toString=function(){return"[LocalTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e.prototype.setPriority=function(r){var n=Object.values(IW);if(!n.includes(r))throw LW.INVALID_VALUE("priority",n);return this._signaling.setPriority(r),this},e.prototype.unpublish=function(){var r=this;return["disabled","enabled"].forEach(function(n){return r.track.removeListener(n,r._reemitTrackEvent)}),["warning","warningsCleared"].forEach(function(n){return r._signaling.removeListener(n,r._reemitSignalingEvent)}),this._unpublish(this),this},e}(AW),hg=NW,MW=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DW=hg,$W=function(t){MW(e,t);function e(r,n,i,o){return t.call(this,r,n,i,o)||this}return e.prototype.toString=function(){return"[LocalAudioTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}(DW),FW=$W,UW=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BW=hg,VW=function(t){UW(e,t);function e(r,n,i,o){return t.call(this,r,n,i,o)||this}return e.prototype.toString=function(){return"[LocalDataTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}(BW),zW=VW,WW=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HW=hg,qW=function(t){WW(e,t);function e(r,n,i,o){return t.call(this,r,n,i,o)||this}return e.prototype.toString=function(){return"[LocalVideoTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}(HW),KW=qW,GW=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QW=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},JW=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},eO=Ee,YW=eO.typeErrors,XW=eO.trackPriority,ZW=fo.isIOS,Qw=kd;function e8(t){return function(e){GW(r,e);function r(n,i,o,a,s,c,l){var u=this;return l=Object.assign({workaroundWebKitBug212780:ZW()&&typeof document=="object"&&typeof document.addEventListener=="function"&&typeof document.visibilityState=="string"},l),u=e.call(this,i,l)||this,Object.defineProperties(u,{_isEnabled:{value:o,writable:!0},_isSwitchedOff:{value:a,writable:!0},_priority:{value:null,writable:!0},_setPriority:{value:s},_setRenderHint:{value:function(d){u._log.debug("updating render hint:",d),c(d)}},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},priority:{enumerable:!0,get:function(){return this._priority}},sid:{enumerable:!0,value:n},_workaroundWebKitBug212780:{value:l.workaroundWebKitBug212780},_workaroundWebKitBug212780Cleanup:{value:null,writable:!0}}),u}return r.prototype.setPriority=function(n){var i=JW([null],QW(Object.values(XW)),!1);if(!i.includes(n))throw YW.INVALID_VALUE("priority",i);return this._priority!==n&&(this._priority=n,this._setPriority(n)),this},r.prototype._setEnabled=function(n){this._isEnabled!==n&&(this._isEnabled=n,this.emit(this._isEnabled?"enabled":"disabled",this))},r.prototype._setSwitchedOff=function(n){this._isSwitchedOff!==n&&(this._isSwitchedOff=n,this.emit(n?"switchedOff":"switchedOn",this))},r.prototype.attach=function(n){var i=e.prototype.attach.call(this,n);return this.mediaStreamTrack.enabled!==!0&&(this.mediaStreamTrack.enabled=!0,this.processedTrack&&(this.processedTrack.enabled=!0),this.processor&&this._captureFrames()),this._workaroundWebKitBug212780&&(this._workaroundWebKitBug212780Cleanup=this._workaroundWebKitBug212780Cleanup||t8(this)),i},r.prototype.detach=function(n){var i=e.prototype.detach.call(this,n);return this._attachments.size===0&&(this.mediaStreamTrack.enabled=!1,this.processedTrack&&(this.processedTrack.enabled=!1),this._workaroundWebKitBug212780Cleanup&&(this._workaroundWebKitBug212780Cleanup(),this._workaroundWebKitBug212780Cleanup=null)),i},r}(t)}function t8(t){var e=t._log,r=t.kind;function n(i){i&&t._attachments.forEach(function(o){var a=t._elShims.get(o),s=o.paused&&a&&!a.pausedIntentionally();s&&(e.info("Playing inadvertently paused <".concat(r,"> element")),e.debug("Element:",o),e.debug("RemoteMediaTrack:",t),o.play().then(function(){e.info("Successfully played inadvertently paused <".concat(r,"> element")),e.debug("Element:",o),e.debug("RemoteMediaTrack:",t)}).catch(function(c){e.warn("Error while playing inadvertently paused <".concat(r,"> element:"),{err:c,el:o,remoteMediaTrack:t})}))})}return Qw.onVisibilityChange(2,n),function(){Qw.offVisibilityChange(2,n)}}var tO=e8,r8=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),n8=vC,i8=tO,o8=i8(n8),a8=function(t){r8(e,t);function e(r,n,i,o,a,s,c){return t.call(this,r,n,i,o,a,s,c)||this}return e.prototype.toString=function(){return"[RemoteAudioTrack #".concat(this._instanceId,": ").concat(this.sid,"]")},e.prototype._start=function(){t.prototype._start.call(this),this._dummyEl&&(this._disposeMediaElement?this._disposeMediaElement(this._dummyEl):this._dummyEl.srcObject=null,this._dummyEl=null)},e.prototype.setPriority=function(r){return t.prototype.setPriority.call(this,r)},e}(o8),s8=a8,c8=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),l8=XP,u8=function(t){c8(e,t);function e(r,n){var i=t.call(this,r.name,r.sid,n)||this;Object.defineProperties(i,{_signaling:{value:r},_track:{value:null,writable:!0},isSubscribed:{enumerable:!0,get:function(){return!!this._track}},isTrackEnabled:{enumerable:!0,get:function(){return r.isEnabled}},kind:{enumerable:!0,value:r.kind},publishPriority:{enumerable:!0,get:function(){return r.priority}},track:{enumerable:!0,get:function(){return this._track}}});var o=r.error,a=r.isEnabled,s=r.isSwitchedOff,c=r.priority;return r.on("updated",function(){if(o!==r.error){o=r.error,i.emit("subscriptionFailed",r.error);return}a!==r.isEnabled&&(a=r.isEnabled,i.track&&i.track._setEnabled(r.isEnabled),i.emit(r.isEnabled?"trackEnabled":"trackDisabled")),s!==r.isSwitchedOff&&(i._log.debug("".concat(i.trackSid,": ").concat(s?"OFF":"ON"," => ").concat(r.isSwitchedOff?"OFF":"ON")),s=r.isSwitchedOff,i.track?(i.track._setSwitchedOff(r.isSwitchedOff),i.emit(s?"trackSwitchedOff":"trackSwitchedOn",i.track)):s&&i._log.warn("Track was not subscribed when switched Off.")),c!==r.priority&&(c=r.priority,i.emit("publishPriorityChanged",c))}),i}return e.prototype.toString=function(){return"[RemoteTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e.prototype._subscribed=function(r){!this._track&&r&&(this._track=r,this.emit("subscribed",r))},e.prototype._unsubscribe=function(){if(this._track){var r=this._track;this._track=null,this.emit("unsubscribed",r)}},e}(l8),pg=u8,d8=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),f8=pg,h8=function(t){d8(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.toString=function(){return"[RemoteAudioTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}(f8),p8=h8,v8=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m8=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},g8=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},y8=eg,rO=Ee,_8=rO.typeErrors,w8=rO.trackPriority,b8=function(t){v8(e,t);function e(r,n,i){var o=t.call(this,n.id,"data",i)||this;return Object.defineProperties(o,{_isSwitchedOff:{value:!1,writable:!0},_priority:{value:null,writable:!0},isEnabled:{enumerable:!0,value:!0},isSwitchedOff:{enumerable:!0,get:function(){return this._isSwitchedOff}},maxPacketLifeTime:{enumerable:!0,value:n.maxPacketLifeTime},maxRetransmits:{enumerable:!0,value:n.maxRetransmits},ordered:{enumerable:!0,value:n.ordered},priority:{enumerable:!0,get:function(){return this._priority}},reliable:{enumerable:!0,value:n.maxPacketLifeTime===null&&n.maxRetransmits===null},sid:{enumerable:!0,value:r}}),n.on("message",function(a){o.emit("message",a,o)}),o}return e.prototype.setPriority=function(r){var n=g8([null],m8(Object.values(w8)),!1);if(!n.includes(r))throw _8.INVALID_VALUE("priority",n);return this._priority=r,this},e.prototype._setEnabled=function(){},e.prototype._setSwitchedOff=function(r){this._isSwitchedOff!==r&&(this._isSwitchedOff=r,this.emit(r?"switchedOff":"switchedOn",this))},e}(y8),S8=b8,k8=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x8=pg,T8=function(t){k8(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.toString=function(){return"[RemoteDataTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}(x8),E8=T8,nO=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vg=function(){function t(e){Object.defineProperties(this,{_callback:{value:e}})}return t.prototype.observe=function(){},t.prototype.unobserve=function(){},t.prototype.makeVisible=function(e){var r=this._makeFakeEntry(e,!0);this._callback([r])},t.prototype.makeInvisible=function(e){var r=this._makeFakeEntry(e,!1);this._callback([r])},t.prototype._makeFakeEntry=function(e,r){return{target:e,isIntersecting:r}},t}();(function(t){nO(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e})(vg);(function(t){nO(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.resize=function(r){var n=this._makeFakeEntry(r,!0);this._callback([n])},e})(vg);var C8={NullObserver:vg},P8=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O8=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},R8=tO,iO=EC,Jw=kd,Yw=C8.NullObserver,j8=ho,A8=R8(iO),L8=50,I8=function(t){P8(e,t);function e(r,n,i,o,a,s,c){var l=this;return c=Object.assign({clientTrackSwitchOffControl:"auto",contentPreferencesMode:"auto",enableDocumentVisibilityTurnOff:!0},c),c=Object.assign({IntersectionObserver:typeof IntersectionObserver>"u"||c.clientTrackSwitchOffControl!=="auto"?Yw:IntersectionObserver,ResizeObserver:typeof ResizeObserver>"u"||c.contentPreferencesMode!=="auto"?Yw:ResizeObserver},c),l=t.call(this,r,n,i,o,a,s,c)||this,Object.defineProperties(l,{_enableDocumentVisibilityTurnOff:{value:c.enableDocumentVisibilityTurnOff===!0&&c.clientTrackSwitchOffControl==="auto"},_documentVisibilityTurnOffCleanup:{value:null,writable:!0},_clientTrackSwitchOffControl:{value:c.clientTrackSwitchOffControl},_contentPreferencesMode:{value:c.contentPreferencesMode},_invisibleElements:{value:new WeakSet},_elToPipCallbacks:{value:new WeakMap},_elToPipWindows:{value:new WeakMap},_turnOffTimer:{value:new j8(function(){l._setRenderHint({enabled:!1})},L8,!1)},_resizeObserver:{value:new c.ResizeObserver(function(u){var d=u.find(function(h){return!l._invisibleElements.has(h.target)});d&&hl(l)})},_intersectionObserver:{value:new c.IntersectionObserver(function(u){var d=!1;u.forEach(function(h){var f=!l._invisibleElements.has(h.target);f!==h.isIntersecting&&(h.isIntersecting?(l._log.debug("intersectionObserver detected: Off => On"),l._invisibleElements.delete(h.target)):(l._log.debug("intersectionObserver detected: On => Off"),l._invisibleElements.add(h.target)),d=!0)}),d&&(Lo(l),hl(l))},{threshold:.25})}}),l}return e.prototype._start=function(r){var n=t.prototype._start.call(this,r);return Lo(this),n},e.prototype.switchOn=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!0}),this},e.prototype.switchOff=function(){if(this._clientTrackSwitchOffControl!=="manual")throw new Error('Invalid state. You can call switchOff only when bandwidthProfile.video.clientTrackSwitchOffControl is set to "manual"');return this._setRenderHint({enabled:!1}),this},e.prototype.setContentPreferences=function(r){if(this._contentPreferencesMode!=="manual")throw new Error('Invalid state. You can call switchOn only when bandwidthProfile.video.contentPreferencesMode is set to "manual"');return r.renderDimensions&&this._setRenderHint({renderDimensions:r.renderDimensions}),this},e.prototype._unObservePip=function(r){var n=this._elToPipCallbacks.get(r);n&&(r.removeEventListener("enterpictureinpicture",n.onEnterPip),r.removeEventListener("leavepictureinpicture",n.onLeavePip),this._elToPipCallbacks.delete(r))},e.prototype._observePip=function(r){var n=this,i=this._elToPipCallbacks.get(r);if(!i){var o=function(c){return n._onEnterPip(c,r)},a=function(c){return n._onLeavePip(c,r)},s=function(c){return n._onResizePip(c,r)};r.addEventListener("enterpictureinpicture",o),r.addEventListener("leavepictureinpicture",a),this._elToPipCallbacks.set(r,{onEnterPip:o,onLeavePip:a,onResizePip:s})}},e.prototype._onEnterPip=function(r,n){this._log.debug("onEnterPip");var i=r.pictureInPictureWindow;this._elToPipWindows.set(n,i);var o=this._elToPipCallbacks.get(n).onResizePip;i.addEventListener("resize",o),Lo(this)},e.prototype._onLeavePip=function(r,n){this._log.debug("onLeavePip"),this._elToPipWindows.delete(n);var i=this._elToPipCallbacks.get(n).onResizePip,o=r.pictureInPictureWindow;o.removeEventListener("resize",i),Lo(this)},e.prototype._onResizePip=function(){hl(this)},e.prototype.attach=function(r){var n=t.prototype.attach.call(this,r);return this._clientTrackSwitchOffControl==="auto"&&this._invisibleElements.add(n),this._intersectionObserver.observe(n),this._resizeObserver.observe(n),this._enableDocumentVisibilityTurnOff&&(this._documentVisibilityTurnOffCleanup=this._documentVisibilityTurnOffCleanup||M8(this)),this._observePip(n),n},e.prototype.detach=function(r){var n=this,i=t.prototype.detach.call(this,r),o=Array.isArray(i)?i:[i];return o.forEach(function(a){n._intersectionObserver.unobserve(a),n._resizeObserver.unobserve(a),n._invisibleElements.delete(a),n._unObservePip(a)}),this._attachments.size===0&&this._documentVisibilityTurnOffCleanup&&(this._documentVisibilityTurnOffCleanup(),this._documentVisibilityTurnOffCleanup=null),Lo(this),hl(this),i},e.prototype.addProcessor=function(){return t.prototype.addProcessor.apply(this,arguments)},e.prototype.removeProcessor=function(){return t.prototype.removeProcessor.apply(this,arguments)},e.prototype.toString=function(){return"[RemoteVideoTrack #".concat(this._instanceId,": ").concat(this.sid,"]")},e.prototype.setPriority=function(r){return t.prototype.setPriority.call(this,r)},e}(A8);function N8(t){if(!("documentPictureInPicture"in globalThis))return!1;var e=globalThis.documentPictureInPicture.window;if(!e)return!1;var r=new WeakSet(e.document.querySelectorAll("video"));return t._getAllAttachedElements().some(function(n){return r.has(n)})}function Lo(t){if(t._clientTrackSwitchOffControl==="auto"){var e=t._getAllAttachedElements().filter(function(i){return!t._invisibleElements.has(i)}),r=t._getAllAttachedElements().filter(function(i){return t._elToPipWindows.has(i)}),n=r.length>0||N8(t)||document.visibilityState==="visible"&&e.length>0;n===!0?(t._turnOffTimer.clear(),t._setRenderHint({enabled:!0}),iO._ensureDocumentPipVideosPlaying(t)):t._turnOffTimer.isSet||t._turnOffTimer.start()}}function hl(t){if(t._contentPreferencesMode==="auto"){var e=t._getAllAttachedElements().filter(function(l){return!t._invisibleElements.has(l)}),r=t._getAllAttachedElements().map(function(l){var u=t._elToPipWindows.get(l);return u?{clientHeight:u.height,clientWidth:u.width}:{clientHeight:0,clientWidth:0}}),n=e.concat(r);if(n.length>0){var i=O8(n.sort(function(l,u){return u.clientHeight+u.clientWidth-l.clientHeight-l.clientWidth-1}),1),o=i[0],a=o.clientHeight,s=o.clientWidth,c={height:a,width:s};t._setRenderHint({renderDimensions:c})}}}function M8(t){function e(){Lo(t)}return Jw.onVisibilityChange(1,e),function(){Jw.offVisibilityChange(1,e)}}var D8=I8,$8=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F8=pg,U8=function(t){$8(e,t);function e(r,n){return t.call(this,r,n)||this}return e.prototype.toString=function(){return"[RemoteVideoTrackPublication #".concat(this._instanceId,": ").concat(this.trackSid,"]")},e}(F8),B8=U8,V8=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ys=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Zp=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},z8=gc,W8=s8,H8=p8,q8=S8,K8=E8,G8=D8,Q8=B8,Qr=J,J8=0,Y8=function(t){V8(e,t);function e(r,n){var i=t.call(this)||this;n=Object.assign({RemoteAudioTrack:W8,RemoteAudioTrackPublication:H8,RemoteDataTrack:q8,RemoteDataTrackPublication:K8,RemoteVideoTrack:G8,RemoteVideoTrackPublication:Q8,tracks:[]},n);var o=X8(n.tracks),a=n.log.createLog("default",i),s=new Map(o.audioTracks),c=new Map(o.dataTracks),l=new Map(o.tracks),u=new Map(o.videoTracks);return Object.defineProperties(i,{_RemoteAudioTrack:{value:n.RemoteAudioTrack},_RemoteAudioTrackPublication:{value:n.RemoteAudioTrackPublication},_RemoteDataTrack:{value:n.RemoteDataTrack},_RemoteDataTrackPublication:{value:n.RemoteDataTrackPublication},_RemoteVideoTrack:{value:n.RemoteVideoTrack},_RemoteVideoTrackPublication:{value:n.RemoteVideoTrackPublication},_audioTracks:{value:s},_dataTracks:{value:c},_instanceId:{value:++J8},_clientTrackSwitchOffControl:{value:n.clientTrackSwitchOffControl},_contentPreferencesMode:{value:n.contentPreferencesMode},_log:{value:a},_signaling:{value:r},_tracks:{value:l},_trackEventReemitters:{value:new Map},_trackPublicationEventReemitters:{value:new Map},_trackSignalingUpdatedEventCallbacks:{value:new Map},_videoTracks:{value:u},audioTracks:{enumerable:!0,value:new Map},dataTracks:{enumerable:!0,value:new Map},identity:{enumerable:!0,get:function(){return r.identity}},networkQualityLevel:{enumerable:!0,get:function(){return r.networkQualityLevel}},networkQualityStats:{enumerable:!0,get:function(){return r.networkQualityStats}},sid:{enumerable:!0,get:function(){return r.sid}},state:{enumerable:!0,get:function(){return r.state}},tracks:{enumerable:!0,value:new Map},videoTracks:{enumerable:!0,value:new Map},_MediaStream:{value:n.MediaStream},_mapMediaElement:{value:n.mapMediaElement},_disposeMediaElement:{value:n.disposeMediaElement}}),i._tracks.forEach(Xw.bind(null,i)),r.on("networkQualityLevelChanged",function(){return i.emit("networkQualityLevelChanged",i.networkQualityLevel,i.networkQualityStats&&(i.networkQualityStats.audio||i.networkQualityStats.video)?i.networkQualityStats:null)}),Z8(i,r),a.info("Created a new Participant".concat(i.identity?": ".concat(i.identity):"")),i}return e.prototype._getTrackEvents=function(){return[["dimensionsChanged","trackDimensionsChanged"],["message","trackMessage"],["started","trackStarted"]]},e.prototype._getTrackPublicationEvents=function(){return[]},e.prototype.toString=function(){return"[Participant #".concat(this._instanceId,": ").concat(this.sid,"]")},e.prototype._addTrack=function(r,n){var i=this._log;if(this._tracks.has(n))return null;this._tracks.set(n,r);var o={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[r.kind];return o.set(n,r),Xw(this,r,n),i.info("Added a new ".concat(Qr.trackClass(r),":"),n),i.debug("".concat(Qr.trackClass(r),":"),r),r},e.prototype._addTrackPublication=function(r){var n=this._log;if(this.tracks.has(r.trackSid))return null;this.tracks.set(r.trackSid,r);var i={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[r.kind];return i.set(r.trackSid,r),e6(this,r),n.info("Added a new ".concat(Qr.trackPublicationClass(r),":"),r.trackSid),n.debug("".concat(Qr.trackPublicationClass(r),":"),r),r},e.prototype._handleTrackSignalingEvents=function(){var r=this,n=r._log,i=r._clientTrackSwitchOffControl,o=r._contentPreferencesMode,a=r._MediaStream,s=r._mapMediaElement,c=r._disposeMediaElement,l=this;if(this.state==="disconnected")return;var u=this._RemoteAudioTrack,d=this._RemoteAudioTrackPublication,h=this._RemoteVideoTrack,f=this._RemoteVideoTrackPublication,_=this._RemoteDataTrack,v=this._RemoteDataTrackPublication,g=this._signaling;function y(k){var E={audio:d,data:v,video:f}[k.kind],x=new E(k,{log:n});l._addTrackPublication(x);var C=k.isSubscribed;C&&w(k),l._trackSignalingUpdatedEventCallbacks.set(k.sid,function(){if(C!==k.isSubscribed){if(C=k.isSubscribed,C){w(k);return}S(k)}}),k.on("updated",l._trackSignalingUpdatedEventCallbacks.get(k.sid))}function m(k){k.isSubscribed&&k.setTrackTransceiver(null);var E=l._trackSignalingUpdatedEventCallbacks.get(k.sid);E&&(k.removeListener("updated",E),l._trackSignalingUpdatedEventCallbacks.delete(k.sid));var x=l.tracks.get(k.sid);x&&l._removeTrackPublication(x)}function w(k){var E=k.isEnabled,x=k.name,C=k.kind,R=k.sid,A=k.trackTransceiver,D=k.isSwitchedOff,O={audio:u,video:h,data:_}[C],I=l.tracks.get(R);if(!(!O||C!==A.kind)){var P={log:n,name:x,clientTrackSwitchOffControl:i,contentPreferencesMode:o,mapMediaElement:s,disposeMediaElement:c};a&&(P.MediaStream=a);var L=function(j){return g.updateSubscriberTrackPriority(R,j)},N=function(j){k.isSubscribed&&g.updateTrackRenderHint(R,j)},$=C==="data"?new O(R,A,P):new O(R,A,E,D,L,N,P);l._addTrack($,I,A.id)}}function S(k){var E=Ys(Array.from(l._tracks.entries()).find(function(A){var D=Ys(A,2),O=D[1];return O.sid===k.sid}),2),x=E[0],C=E[1],R=l.tracks.get(k.sid);C&&l._removeTrack(C,R,x)}g.on("trackAdded",y),g.on("trackRemoved",m),g.tracks.forEach(y),g.on("stateChanged",function k(E){E==="disconnected"?(n.debug("Removing event listeners"),g.removeListener("stateChanged",k),g.removeListener("trackAdded",y),g.removeListener("trackRemoved",m)):E==="connected"&&(n.info("reconnected"),setTimeout(function(){return l.emit("reconnected")},0))})},e.prototype._removeTrack=function(r,n){if(!this._tracks.has(n))return null;this._tracks.delete(n);var i={audio:this._audioTracks,video:this._videoTracks,data:this._dataTracks}[r.kind];i.delete(n);var o=this._trackEventReemitters.get(n)||new Map;o.forEach(function(s,c){r.removeListener(c,s)});var a=this._log;return a.info("Removed a ".concat(Qr.trackClass(r),":"),n),a.debug("".concat(Qr.trackClass(r),":"),r),r},e.prototype._removeTrackPublication=function(r){if(r=this.tracks.get(r.trackSid),!r)return null;this.tracks.delete(r.trackSid);var n={audio:this.audioTracks,data:this.dataTracks,video:this.videoTracks}[r.kind];n.delete(r.trackSid);var i=this._trackPublicationEventReemitters.get(r.trackSid)||new Map;i.forEach(function(a,s){r.removeListener(s,a)});var o=this._log;return o.info("Removed a ".concat(Qr.trackPublicationClass(r),":"),r.trackSid),o.debug("".concat(Qr.trackPublicationClass(r),":"),r),r},e.prototype.toJSON=function(){return Qr.valueToJSON(this)},e}(z8);function X8(t){var e=t.map(function(o){return[o.id,o]}),r=e.filter(function(o){return o[1].kind==="audio"}),n=e.filter(function(o){return o[1].kind==="video"}),i=e.filter(function(o){return o[1].kind==="data"});return{audioTracks:r,dataTracks:i,tracks:e,videoTracks:n}}function Z8(t,e){var r=t._log;t.state!=="disconnected"&&e.on("stateChanged",function n(i){r.debug("Transitioned to state:",i),t.emit(i,t),i==="disconnected"&&(r.debug("Removing Track event reemitters"),e.removeListener("stateChanged",n),t._tracks.forEach(function(o){var a=t._trackEventReemitters.get(o.id);o&&a&&a.forEach(function(s,c){o.removeListener(c,s)})}),e.tracks.forEach(function(o){var a=t._tracks.get(o.id),s=t._trackEventReemitters.get(o.id);a&&s&&s.forEach(function(c,l){a.removeListener(l,c)})}),t._trackEventReemitters.clear(),t.tracks.forEach(function(o){t._trackPublicationEventReemitters.get(o.trackSid).forEach(function(a,s){o.removeListener(s,a)})}),t._trackPublicationEventReemitters.clear())})}function Xw(t,e,r){var n=new Map;t.state!=="disconnected"&&(t._getTrackEvents().forEach(function(i){var o=i[0],a=i[1];n.set(o,function(){var s=[a].concat([].slice.call(arguments));return t.emit.apply(t,Zp([],Ys(s),!1))}),e.on(o,n.get(o))}),t._trackEventReemitters.set(r,n))}function e6(t,e){var r=new Map;t.state!=="disconnected"&&(t._getTrackPublicationEvents().forEach(function(n){var i=Ys(n,2),o=i[0],a=i[1];r.set(o,function(){for(var s=[],c=0;c<arguments.length;c++)s[c]=arguments[c];t.emit.apply(t,Zp(Zp([a],Ys(s),!1),[e],!1))}),e.on(o,r.get(o))}),t._trackPublicationEventReemitters.set(e.trackSid,r))}var oO=Y8,t6=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r6=uo.MediaStreamTrack,mg=J,n6=mg.asLocalTrack,i6=mg.asLocalTrackPublication,Si=mg.trackClass,aO=Ee,Pn=aO.typeErrors,Wf=aO.trackPriority,o6=_c.validateLocalTrack,gg=ia,a6=gg.LocalAudioTrack,s6=gg.LocalDataTrack,c6=gg.LocalVideoTrack,l6=FW,u6=zW,d6=KW,f6=oO,h6=function(t){t6(e,t);function e(r,n,i){var o=this;i=Object.assign({LocalAudioTrack:a6,LocalVideoTrack:c6,LocalDataTrack:s6,MediaStreamTrack:r6,LocalAudioTrackPublication:l6,LocalVideoTrackPublication:d6,LocalDataTrackPublication:u6,shouldStopLocalTracks:!1,tracks:n},i);var a=i.shouldStopLocalTracks?new Set(n.filter(function(s){return s.kind!=="data"})):new Set;return o=t.call(this,r,i)||this,Object.defineProperties(o,{_eventObserver:{value:i.eventObserver},_LocalAudioTrack:{value:i.LocalAudioTrack},_LocalDataTrack:{value:i.LocalDataTrack},_LocalVideoTrack:{value:i.LocalVideoTrack},_MediaStreamTrack:{value:i.MediaStreamTrack},_LocalAudioTrackPublication:{value:i.LocalAudioTrackPublication},_LocalDataTrackPublication:{value:i.LocalDataTrackPublication},_LocalVideoTrackPublication:{value:i.LocalVideoTrackPublication},_tracksToStop:{value:a},signalingRegion:{enumerable:!0,get:function(){return r.signalingRegion}}}),o._handleTrackSignalingEvents(),o}return e.prototype._addTrack=function(r,n,i){var o=t.prototype._addTrack.call(this,r,n);return o&&this.state!=="disconnected"&&this._addLocalTrack(r,i),o},e.prototype._addLocalTrack=function(r,n){var i,o=(i=r.noiseCancellation)===null||i===void 0?void 0:i.vendor;this._signaling.addTrack(r._trackSender,r.name,n,o),this._log.info("Added a new ".concat(Si(r,!0),":"),r.id),this._log.debug("".concat(Si(r,!0),":"),r)},e.prototype._removeTrack=function(r,n){var i=t.prototype._removeTrack.call(this,r,n);return i&&this.state!=="disconnected"&&(this._signaling.removeTrack(r._trackSender),this._log.info("Removed a ".concat(Si(r,!0),":"),r.id),this._log.debug("".concat(Si(r,!0),":"),r)),i},e.prototype._getTrackEvents=function(){return t.prototype._getTrackEvents.call(this).concat([["disabled","trackDisabled"],["enabled","trackEnabled"],["stopped","trackStopped"]])},e.prototype.toString=function(){return"[LocalParticipant #".concat(this._instanceId).concat(this.sid?": ".concat(this.sid):"","]")},e.prototype._handleTrackSignalingEvents=function(){var r=this,n=this._log;if(this.state!=="disconnected"){var i=function(c){var l=r._signaling.getPublication(c._trackSender);l&&(l.disable(),n.debug("Disabled the ".concat(Si(c,!0),":"),c.id))},o=function(c){var l=r._signaling.getPublication(c._trackSender);l&&(l.enable(),n.debug("Enabled the ".concat(Si(c,!0),":"),c.id))},a=function(c){var l=r._signaling.getPublication(c._trackSender);return l&&l.stop(),l},s=function(c){n.debug("Transitioned to state:",c),c==="disconnected"?(n.debug("Removing LocalTrack event listeners"),r._signaling.removeListener("stateChanged",s),r.removeListener("trackDisabled",i),r.removeListener("trackEnabled",o),r.removeListener("trackStopped",a),r._tracks.forEach(function(l){var u=a(l);u&&l._trackSender.removeClone(u._trackTransceiver)}),n.info("LocalParticipant disconnected. Stopping ".concat(r._tracksToStop.size," automatically-acquired LocalTracks")),r._tracksToStop.forEach(function(l){l.stop()})):c==="connected"&&(n.info("reconnected"),setTimeout(function(){return r.emit("reconnected")},0))};this.on("trackDisabled",i),this.on("trackEnabled",o),this.on("trackStopped",a),this._signaling.on("stateChanged",s),this._tracks.forEach(function(c){r._addLocalTrack(c,Wf.PRIORITY_STANDARD),r._getOrCreateLocalTrackPublication(c).catch(function(l){n.warn("Failed to get or create LocalTrackPublication for ".concat(c,":"),l)})})}},e.prototype._getOrCreateLocalTrackPublication=function(r){var n=pl(this.tracks,r);if(n)return Promise.resolve(n);var i=this._log,o=this,a=this._signaling.getPublication(r._trackSender);return a?new Promise(function(s,c){function l(){var u=a.error;if(u){a.removeListener("updated",l),i.warn("Failed to publish the ".concat(Si(r,!0),": ").concat(u.message)),o._removeTrack(r,r.id),setTimeout(function(){o.emit("trackPublicationFailed",u,r)}),c(u);return}if(!o._tracks.has(r.id)){a.removeListener("updated",l),c(new Error("The ".concat(r," was unpublished")));return}var d=a.sid;if(d){a.removeListener("updated",l);var h={log:i,LocalAudioTrackPublication:o._LocalAudioTrackPublication,LocalDataTrackPublication:o._LocalDataTrackPublication,LocalVideoTrackPublication:o._LocalVideoTrackPublication};n=pl(o.tracks,r);var f=function(y){return o.emit("trackWarning",y,n)},_=function(){return o.emit("trackWarningsCleared",n)},v=function(y){n.removeListener("trackWarning",f),n.removeListener("trackWarningsCleared",_),o.unpublishTrack(y.track)};n||(n=i6(r,a,v,h),o._addTrackPublication(n)),n.on("warning",f),n.on("warningsCleared",_);var g=o._signaling.state;(g==="connected"||g==="connecting")&&(r._processorEventObserver&&r._processorEventObserver.on("event",function(y){o._eventObserver.emit("event",{name:y.name,payload:y.data,group:"video-processor",level:"info"})}),r.processedTrack&&(r._captureFrames(),r._setSenderMediaStreamTrack(!0))),g==="connected"&&setTimeout(function(){o.emit("trackPublished",n)}),s(n)}}a.on("updated",l)}):Promise.reject(new Error("Unexpected error: The ".concat(r," cannot be published")))},e.prototype.publishTrack=function(r,n){var i=pl(this.tracks,r);if(i)return Promise.resolve(i);n=Object.assign({log:this._log,priority:Wf.PRIORITY_STANDARD,LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack},n);var o;try{o=n6(r,n)}catch(u){return Promise.reject(u)}var a=o.noiseCancellation,s=this._signaling.audioProcessors;a&&!s.includes(a.vendor)&&(this._log.warn("".concat(a.vendor," is not supported in this room. disabling it permanently")),a.disablePermanently());var c=Object.values(Wf);if(!c.includes(n.priority))return Promise.reject(Pn.INVALID_VALUE("LocalTrackPublishOptions.priority",c));var l=this._addTrack(o,o.id,n.priority)||this._tracks.get(o.id);return this._getOrCreateLocalTrackPublication(l)},e.prototype.publishTracks=function(r){if(!Array.isArray(r))throw Pn.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return Promise.all(r.map(this.publishTrack,this))},e.prototype.setBandwidthProfile=function(){this._log.warn("setBandwidthProfile is not implemented yet and may be available in future versions of twilio-video.js")},e.prototype.setNetworkQualityConfiguration=function(r){if(typeof r!="object"||r===null)throw Pn.INVALID_TYPE("networkQualityConfiguration","NetworkQualityConfiguration");return["local","remote"].forEach(function(n){if(n in r&&(typeof r[n]!="number"||isNaN(r[n])))throw Pn.INVALID_TYPE("networkQualityConfiguration.".concat(n),"number")}),this._signaling.setNetworkQualityConfiguration(r),this},e.prototype.setParameters=function(r){if(typeof r<"u"&&typeof r!="object")throw Pn.INVALID_TYPE("encodingParameters","EncodingParameters, null or undefined");if(r){if(this._signaling.getParameters().adaptiveSimulcast&&r.maxVideoBitrate)throw Pn.INVALID_TYPE("encodingParameters",'encodingParameters.maxVideoBitrate is not compatible with "preferredVideoCodecs=auto"');["maxAudioBitrate","maxVideoBitrate"].forEach(function(n){if(typeof r[n]<"u"&&typeof r[n]!="number"&&r[n]!==null)throw Pn.INVALID_TYPE("encodingParameters.".concat(n),"number, null or undefined")})}else r===null&&(r={maxAudioBitrate:null,maxVideoBitrate:null});return this._signaling.setParameters(r),this},e.prototype.unpublishTrack=function(r){o6(r,{LocalAudioTrack:this._LocalAudioTrack,LocalDataTrack:this._LocalDataTrack,LocalVideoTrack:this._LocalVideoTrack,MediaStreamTrack:this._MediaStreamTrack});var n=this._tracks.get(r.id);if(!n)return null;var i=this._signaling.getPublication(n._trackSender);if(i.publishFailed(new Error("The ".concat(n," was unpublished"))),n=this._removeTrack(n,n.id),!n)return null;var o=pl(this.tracks,n);return o&&this._removeTrackPublication(o),o},e.prototype.unpublishTracks=function(r){var n=this;if(!Array.isArray(r))throw Pn.INVALID_TYPE("tracks","Array of LocalAudioTrack, LocalVideoTrack, LocalDataTrack, or MediaStreamTrack");return r.reduce(function(i,o){var a=n.unpublishTrack(o);return a?i.concat(a):i},[])},e}(f6);function pl(t,e){return Array.from(t.values()).find(function(r){return r.track===e||r.track.mediaStreamTrack===e})||null}var p6=h6,v6=function(){function t(){Object.defineProperties(this,{_connected:{writable:!0,value:!0}})}return t.prototype.connect=function(){},t.prototype.disconnect=function(){return this._connected?(this._connected=!1,!0):!1},t.prototype.publish=function(){return this._connected},t}(),m6=v6,g6=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),y6=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},_6=St.EventEmitter,yg=Ee,vl=yg.DEFAULT_NQ_LEVEL_LOCAL,ml=yg.DEFAULT_NQ_LEVEL_REMOTE,Zw=yg.MAX_NQ_LEVEL,Hf=J.inRange,w6=function(t){g6(e,t);function e(r){var n=t.call(this)||this;return r=Object.assign({local:vl,remote:ml},r),Object.defineProperties(n,{local:{value:Hf(r.local,vl,Zw)?r.local:vl,writable:!0},remote:{value:Hf(r.remote,ml,Zw)?r.remote:ml,writable:!0}}),n}return e.prototype.update=function(r){var n=this;r=Object.assign({local:this.local,remote:this.remote},r),[["local",vl,3],["remote",ml,3]].forEach(function(i){var o=y6(i,3),a=o[0],s=o[1],c=o[2];n[a]=typeof r[a]=="number"&&Hf(r[a],s,c)?r[a]:s})},e}(_6),b6=w6,S6=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),k6=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},eb=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},x6=oO,T6=function(t){S6(e,t);function e(r,n){var i=t.call(this,r,n)||this;return i._handleTrackSignalingEvents(),i.once("disconnected",i._unsubscribeTracks.bind(i)),i}return e.prototype.toString=function(){return"[RemoteParticipant #".concat(this._instanceId).concat(this.sid?": ".concat(this.sid):"","]")},e.prototype._addTrack=function(r,n,i){return t.prototype._addTrack.call(this,r,i)?(n._subscribed(r),this.emit("trackSubscribed",r,n),r):null},e.prototype._addTrackPublication=function(r){var n=t.prototype._addTrackPublication.call(this,r);return n?(this.emit("trackPublished",n),n):null},e.prototype._getTrackPublicationEvents=function(){return eb(eb([],k6(t.prototype._getTrackPublicationEvents.call(this)),!1),[["subscriptionFailed","trackSubscriptionFailed"],["trackDisabled","trackDisabled"],["trackEnabled","trackEnabled"],["publishPriorityChanged","trackPublishPriorityChanged"],["trackSwitchedOff","trackSwitchedOff"],["trackSwitchedOn","trackSwitchedOn"]],!1)},e.prototype._unsubscribeTracks=function(){var r=this;this.tracks.forEach(function(n){if(n.isSubscribed){var i=n.track;n._unsubscribe(),r.emit("trackUnsubscribed",i,n)}})},e.prototype._removeTrack=function(r,n,i){var o=this._tracks.get(i);return o?(t.prototype._removeTrack.call(this,o,i),n._unsubscribe(),this.emit("trackUnsubscribed",o,n),o):null},e.prototype._removeTrackPublication=function(r){this._signaling.clearTrackHint(r.trackSid);var n=t.prototype._removeTrackPublication.call(this,r);return n?(this.emit("trackUnpublished",n),n):null},e}(x6),E6=T6,C6=function(){function t(e,r){if(typeof e!="string")throw new Error("Track id must be a string");Object.defineProperties(this,{trackId:{value:e,enumerable:!0},trackSid:{value:r.trackSid,enumerable:!0},timestamp:{value:r.timestamp,enumerable:!0},ssrc:{value:r.ssrc,enumerable:!0},packetsLost:{value:typeof r.packetsLost=="number"?r.packetsLost:null,enumerable:!0},codec:{value:typeof r.codecName=="string"?r.codecName:null,enumerable:!0}})}return t}(),sO=C6,P6=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O6=sO,R6=function(t){P6(e,t);function e(r,n,i){var o=t.call(this,r,n)||this;return Object.defineProperties(o,{bytesSent:{value:typeof n.bytesSent=="number"?n.bytesSent:i?0:null,enumerable:!0},packetsSent:{value:typeof n.packetsSent=="number"?n.packetsSent:i?0:null,enumerable:!0},roundTripTime:{value:typeof n.roundTripTime=="number"?n.roundTripTime:i?0:null,enumerable:!0}}),o}return e}(O6),cO=R6,j6=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A6=cO,L6=function(t){j6(e,t);function e(r,n,i){var o=t.call(this,r,n,i)||this;return Object.defineProperties(o,{audioLevel:{value:typeof n.audioInputLevel=="number"?n.audioInputLevel:null,enumerable:!0},jitter:{value:typeof n.jitter=="number"?n.jitter:null,enumerable:!0}}),o}return e}(A6),I6=L6,N6=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),M6=cO,D6=function(t){N6(e,t);function e(r,n,i){var o=t.call(this,r,n,i)||this,a=null;typeof n.frameWidthInput=="number"&&typeof n.frameHeightInput=="number"&&(a={},Object.defineProperties(a,{width:{value:n.frameWidthInput,enumerable:!0},height:{value:n.frameHeightInput,enumerable:!0}}));var s=null;return typeof n.frameWidthSent=="number"&&typeof n.frameHeightSent=="number"&&(s={},Object.defineProperties(s,{width:{value:n.frameWidthSent,enumerable:!0},height:{value:n.frameHeightSent,enumerable:!0}})),Object.defineProperties(o,{captureDimensions:{value:a,enumerable:!0},dimensions:{value:s,enumerable:!0},captureFrameRate:{value:typeof n.frameRateInput=="number"?n.frameRateInput:null,enumerable:!0},frameRate:{value:typeof n.frameRateSent=="number"?n.frameRateSent:null,enumerable:!0},qualityLimitationReason:{value:["none","bandwidth","cpu","other"].find(function(c){return c===n.qualityLimitationReason})||null,enumerable:!0}}),o}return e}(M6),$6=D6,F6=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U6=sO,B6=function(t){F6(e,t);function e(r,n){var i=t.call(this,r,n)||this;return Object.defineProperties(i,{bytesReceived:{value:typeof n.bytesReceived=="number"?n.bytesReceived:null,enumerable:!0},packetsReceived:{value:typeof n.packetsReceived=="number"?n.packetsReceived:null,enumerable:!0},jitter:{value:typeof n.jitter=="number"?n.jitter:null,enumerable:!0}}),i}return e}(U6),lO=B6,V6=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z6=lO,W6=function(t){V6(e,t);function e(r,n){var i=t.call(this,r,n)||this;return Object.defineProperties(i,{audioLevel:{value:typeof n.audioOutputLevel=="number"?n.audioOutputLevel:null,enumerable:!0}}),i}return e}(z6),H6=W6,q6=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K6=lO,G6=function(t){q6(e,t);function e(r,n){var i=t.call(this,r,n)||this,o=null;return typeof n.frameWidthReceived=="number"&&typeof n.frameHeightReceived=="number"&&(o={},Object.defineProperties(o,{width:{value:n.frameWidthReceived,enumerable:!0},height:{value:n.frameHeightReceived,enumerable:!0}})),Object.defineProperties(i,{dimensions:{value:o,enumerable:!0},frameRate:{value:typeof n.frameRateReceived=="number"?n.frameRateReceived:null,enumerable:!0},freezeCount:{value:typeof n.freezeCount=="number"?n.freezeCount:null,enumerable:!0}}),i}return e}(K6),Q6=G6,J6=I6,Y6=$6,X6=H6,Z6=Q6,eH=function(){function t(e,r,n){if(typeof e!="string")throw new Error("RTCPeerConnection id must be a string");Object.defineProperties(this,{peerConnectionId:{value:e,enumerable:!0},localAudioTrackStats:{value:r.localAudioTrackStats.map(function(i){return new J6(i.trackId,i,n)}),enumerable:!0},localVideoTrackStats:{value:r.localVideoTrackStats.map(function(i){return new Y6(i.trackId,i,n)}),enumerable:!0},remoteAudioTrackStats:{value:r.remoteAudioTrackStats.map(function(i){return new X6(i.trackId,i)}),enumerable:!0},remoteVideoTrackStats:{value:r.remoteVideoTrackStats.map(function(i){return new Z6(i.trackId,i)}),enumerable:!0}})}return t}(),uO=eH,tb=kd,qf=Ma,tH=function(){function t(e){if(!e)throw new Error("ApplicationMonitor requires a log instance");this._log=e,this._visibilityChangeHandler=null,this._boundHandleBeforeUnload=this._handleBeforeUnload.bind(this),this._setupVisibilityMonitoring(),this._setupBeforeUnloadMonitoring()}return t.prototype._setupVisibilityMonitoring=function(){var e=this;if(typeof window>"u"||typeof document>"u"){this._log.debug("Not in browser environment, skipping setup of ApplicationMonitor");return}this._visibilityChangeHandler=function(r){return e._handleVisibilityChange(r)};try{tb.onVisibilityChange(1,this._visibilityChangeHandler),this._log.debug("ApplicationMonitor visibility monitoring initialized")}catch(r){this._log.error("Error initializing ApplicationMonitor visibility monitoring:",r)}},t.prototype._setupBeforeUnloadMonitoring=function(){try{window.addEventListener("beforeunload",this._boundHandleBeforeUnload),this._log.debug("ApplicationMonitor beforeunload monitoring initialized")}catch(e){this._log.error("Error initializing ApplicationMonitor beforeunload monitoring:",e)}},t.prototype.cleanup=function(){this._log.debug("Cleaning up application event monitors"),this._visibilityChangeHandler&&(tb.offVisibilityChange(1,this._visibilityChangeHandler),this._visibilityChangeHandler=null),typeof window<"u"&&this._boundHandleBeforeUnload&&window.removeEventListener("beforeunload",this._boundHandleBeforeUnload)},t.prototype._handleVisibilityChange=function(e){e?qf.application.resumed():qf.application.backgrounded()},t.prototype._handleBeforeUnload=function(){qf.application.terminated()},t}(),rH=tH,nH=J.boolToString,iH=Ma,oH=function(){function t(e){if(!e)throw new Error("NetworkMonitor requires a log instance");this._log=e,this._networkInformationHandler=null,this._setupNetworkInformationAPI()}return t.prototype._setupNetworkInformationAPI=function(){if(typeof globalThis.navigator>"u"||!globalThis.navigator.connection){this._log.debug("Network Information API not supported");return}var e=function(){var n=navigator.connection;iH.network.informationChanged({downlink:n.downlink,downlinkMax:n.downlinkMax,effectiveType:n.effectiveType,rtt:n.rtt,saveData:typeof n.saveData=="boolean"?nH(n.saveData):void 0,type:n.type})};try{var r=navigator.connection;["change","typechange"].forEach(function(n){r.addEventListener(n,e)}),this._networkInformationHandler={stop:function(){["change","typechange"].forEach(function(n){r.removeEventListener(n,e)})}},this._log.debug("Network Information API monitoring initialized")}catch(n){this._log.error("Error initializing Network Information API monitoring:",n)}},t.prototype.cleanup=function(){this._log.debug("Cleaning up network monitoring"),this._networkInformationHandler&&(this._networkInformationHandler.stop(),this._networkInformationHandler=null)},t}(),aH=oH,sH=T&&T.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},cH=T&&T.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}};function rb(){return typeof globalThis<"u"&&typeof globalThis.PressureObserver=="function"?globalThis.PressureObserver:null}var lH=function(){function t(){this._lastCpuPressure=null,this._cpuPressureObserver=null,this._sampleInterval=2e3,this._cpuPressureChangeListeners=[]}return t.prototype.watchCpuPressure=function(e){return sH(this,void 0,void 0,function(){var r,n=this;return cH(this,function(i){switch(i.label){case 0:if(typeof e!="function")throw new Error("The CPU pressure change callback must be a function");if(r=rb(),!r)throw new Error("PressureObserver is not supported in this environment");return this._cpuPressureChangeListeners.push(e),this._cpuPressureObserver?[3,2]:(this._cpuPressureObserver=new r(function(o){return n._handleCpuPressureRecords(o)}),[4,this._cpuPressureObserver.observe("cpu",{sampleInterval:this._sampleInterval})]);case 1:i.sent(),i.label=2;case 2:return[2]}})})},t.prototype.isSupported=function(){return!!rb()},t.prototype.unwatchCpuPressure=function(e){this._cpuPressureChangeListeners=this._cpuPressureChangeListeners.filter(function(r){return r!==e}),this._cpuPressureChangeListeners.length===0&&this.cleanup()},t.prototype._handleCpuPressureRecords=function(e){if(!(!Array.isArray(e)||e.length===0)){var r=e[e.length-1];if(r){var n=r.state!==this._lastCpuPressure;n&&(this._lastCpuPressure=r.state,this._cpuPressureChangeListeners.forEach(function(i){return i(r)}))}}},t.prototype.cleanup=function(){this._cpuPressureObserver&&(this._cpuPressureObserver.disconnect(),this._cpuPressureObserver=null),this._cpuPressureChangeListeners=[],this._lastCpuPressure=null},t}(),uH=new lH,Kf=uH,dH=Ma,fH=function(){function t(e){if(!e)throw new Error("ResourceMonitor requires a log instance");this._log=e,this._cpuPressureHandler=null,this._setupCPUMonitoring()}return t.prototype._setupCPUMonitoring=function(){var e=this;if(!Kf.isSupported()){this._log.debug("CPU pressure monitoring not supported");return}this._cpuPressureHandler=function(r){e._log.debug("CPU pressure changed:",r),dH.system.cpuPressureChanged(r.state)},Kf.watchCpuPressure(this._cpuPressureHandler).then(function(){e._log.debug("CPU pressure monitoring initialized")}).catch(function(r){e._log.error("Error initializing CPU pressure monitoring:",r)})},t.prototype.cleanup=function(){this._log.debug("Cleaning up resource monitors"),this._cpuPressureHandler&&(Kf.unwatchCpuPressure(this._cpuPressureHandler),this._cpuPressureHandler=null)},t}(),hH=fH,pH=rH,vH=aH,mH=hH,gH=function(){function t(e){if(!e)throw new Error("MonitorRegistry requires a log instance");this._log=e,this._monitors=[new pH(e),new vH(e),new mH(e)]}return t.prototype.cleanup=function(){var e=this;this._monitors.forEach(function(r){try{r.cleanup()}catch(n){e._log.warn("Failed to cleanup monitor:",n)}})},t}(),yH=gH,_H=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xs=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},Hl=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},wH=gc,bH=E6,SH=uO,kH=yH,dO=J,xH=dO.flatMap,TH=dO.valueToJSON,EH=0,CH=function(t){_H(e,t);function e(r,n,i){var o=t.call(this)||this,a=i.log.createLog("default",o),s=new Map;return Object.defineProperties(o,{_log:{value:a},_clientTrackSwitchOffControl:{value:i.clientTrackSwitchOffControl||"disabled"},_contentPreferencesMode:{value:i.contentPreferencesMode||"disabled"},_instanceId:{value:++EH},_options:{value:i},_participants:{value:s},_signaling:{value:n},_insightsMonitors:{value:i.eventObserver&&i.insights?new kH(a):null},dominantSpeaker:{enumerable:!0,get:function(){return this.participants.get(n.dominantSpeakerSid)||null}},isRecording:{enumerable:!0,get:function(){return n.recording.isEnabled||!1}},localParticipant:{enumerable:!0,value:r},name:{enumerable:!0,value:n.name},participants:{enumerable:!0,value:s},sid:{enumerable:!0,value:n.sid},state:{enumerable:!0,get:function(){return n.state}},mediaRegion:{enumerable:!0,value:n.mediaRegion}}),OH(o,r),RH(o,n.recording),jH(o,n),PH(o),a.info("Created a new Room:",o.name),a.debug("Initial RemoteParticipants:",Array.from(o._participants.values())),o}return e.prototype.toString=function(){return this._instanceId?"[Room #".concat(this._instanceId,": ").concat(this.sid,"]"):"[Room (uninitialized)]"},e.prototype.disconnect=function(){return this._log.info("Disconnecting"),this._signaling.disconnect(),this},e.prototype.getStats=function(){var r=this;return this._signaling.getStats().then(function(n){return Array.from(n).map(function(i){var o=Xs(i,2),a=o[0],s=o[1];return new SH(a,Object.assign({},s,{localAudioTrackStats:nb(r,s.localAudioTrackStats),localVideoTrackStats:nb(r,s.localVideoTrackStats)}))})})},e.prototype.refreshInactiveMedia=function(){var r=this.localParticipant.tracks,n=Array.from(r.values()).filter(function(c){var l=c.track.kind;return l!=="data"}).map(function(c){var l=c.track;return l}),i=xH(this.participants,function(c){return Array.from(c.tracks.values())}).filter(function(c){var l=c.track;return l&&l.kind!=="data"}).map(function(c){var l=c.track;return l}),o=n.concat(i),a=new Event("unmute");n.forEach(function(c){var l=c.isMuted,u=c.mediaStreamTrack;l&&u.dispatchEvent(a)});var s=new Event("pause");return o.forEach(function(c){var l=c._attachments,u=c._elShims;return l.forEach(function(d){var h=u.get(d),f=d.paused&&h&&!h.pausedIntentionally();f&&d.dispatchEvent(s)})}),this},e.prototype.toJSON=function(){return TH(this)},e}(wH);function PH(t){var e=t.localParticipant._signaling.audioProcessors;t.localParticipant.audioTracks.forEach(function(r){var n=r.track,i=n.noiseCancellation;i&&!e.includes(i.vendor)&&(t._log.warn("".concat(i.vendor," is not supported in this room. disabling it permanently")),i.disablePermanently())})}function nb(t,e){var r=t.localParticipant._signaling;return e.reduce(function(n,i){var o=r.tracks.get(i.trackId),a=r.getSender(o);return a?[Object.assign({},i,{trackId:a.id})].concat(n):n},[])}function ib(t,e){var r=t._log,n=t._clientTrackSwitchOffControl,i=t._contentPreferencesMode,o=t._options,a=o.MediaStream,s=o.mapMediaElement,c=o.disposeMediaElement,l=new bH(e,{log:r,clientTrackSwitchOffControl:n,contentPreferencesMode:i,MediaStream:a,mapMediaElement:s,disposeMediaElement:c});r.info("A new RemoteParticipant connected:",l),t._participants.set(l.sid,l),t.emit("participantConnected",l);var u=[["reconnected","participantReconnected"],["reconnecting","participantReconnecting"],"trackDimensionsChanged","trackDisabled","trackEnabled","trackMessage","trackPublished","trackPublishPriorityChanged","trackStarted","trackSubscribed","trackSubscriptionFailed","trackSwitchedOff","trackSwitchedOn","trackUnpublished","trackUnsubscribed"].map(function(d){var h=Xs(Array.isArray(d)?d:[d,d],2),f=h[0],_=h[1];function v(){var g=[].slice.call(arguments);g.unshift(_),g.push(l),t.emit.apply(t,Hl([],Xs(g),!1))}return l.on(f,v),[f,v]});l.once("disconnected",function(){var h=t.dominantSpeaker;r.info("RemoteParticipant disconnected:",l),t._participants.delete(l.sid),u.forEach(function(f){l.removeListener(f[0],f[1])}),t.emit("participantDisconnected",l),l===h&&t.emit("dominantSpeakerChanged",t.dominantSpeaker)})}function OH(t,e){var r=["trackWarning","trackWarningsCleared"].map(function(n){return{eventName:n,handler:function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];return t.emit.apply(t,Hl([n],Xs(Hl(Hl([],Xs(i),!1),[e],!1)),!1))}}});r.forEach(function(n){var i=n.eventName,o=n.handler;return e.on(i,o)}),t.once("disconnected",function(){return r.forEach(function(n){var i=n.eventName,o=n.handler;return e.removeListener(i,o)})})}function RH(t,e){e.on("updated",function(){var n=e.isEnabled;t._log.info("Recording ".concat(n?"started":"stopped")),t.emit("recording".concat(n?"Started":"Stopped"))})}function jH(t,e){var r=t._log;r.debug("Creating a new RemoteParticipant for each ParticipantSignaling in the RoomSignaling"),e.participants.forEach(ib.bind(null,t)),r.debug("Setting up RemoteParticipant creation for all subsequent ParticipantSignalings that connect to the RoomSignaling"),e.on("participantConnected",ib.bind(null,t)),e.on("dominantSpeakerChanged",function(){return t.emit("dominantSpeakerChanged",t.dominantSpeaker)}),e.on("transcription",function(n){return t.emit("transcription",n)}),e.on("stateChanged",function n(i,o){switch(r.info("Transitioned to state:",i),i){case"disconnected":t.participants.forEach(function(a){a._unsubscribeTracks()}),t.emit(i,t,o),t.localParticipant.tracks.forEach(function(a){a.unpublish()}),t._insightsMonitors&&t._insightsMonitors.cleanup(),e.removeListener("stateChanged",n);break;case"reconnecting":setTimeout(function(){return t.emit("reconnecting",o)},0);break;default:setTimeout(function(){return t.emit("reconnected")},0)}})}var AH=CH,LH=function(){function t(e){Object.defineProperties(this,{_min:{value:e.min||100},_max:{value:e.max||1e4},_jitter:{value:e.jitter>0&&e.jitter<=1?e.jitter:0},_factor:{value:e.factor||2},_attempts:{value:0,writable:!0},_duration:{enumerable:!1,get:function(){var r=this._min*Math.pow(this._factor,this._attempts);if(this._jitter){var n=Math.random(),i=Math.floor(n*this._jitter*r);r=Math.floor(n*10)&1?r+i:r-i}return Math.min(r,this._max)|0}},_timeoutID:{value:null,writable:!0}})}return t.prototype.backoff=function(e){var r=this,n=this._duration;this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null),this._timeoutID=setTimeout(function(){r._attempts++,e()},n)},t.prototype.reset=function(){this._attempts=0,this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)},t}(),fO=LH,kt={},IH=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},hO=J,Gf=hO.difference,nn=hO.flatMap;function Qf(){var t=4294967295;return String(Math.floor(Math.random()*t))}var NH=function(){function t(e,r,n){Object.defineProperties(this,{cName:{enumerable:!0,value:n},isSimulcastEnabled:{enumerable:!0,value:!1,writable:!0},primarySSRCs:{enumerable:!0,value:new Set},rtxPairs:{enumerable:!0,value:new Map},streamId:{enumerable:!0,value:r},trackId:{enumerable:!0,value:e}})}return t.prototype.addSimulcastSSRCs=function(){if(!this.isSimulcastEnabled){var e=[Qf(),Qf()];e.forEach(function(r){this.primarySSRCs.add(r)},this),this.rtxPairs.size&&e.forEach(function(r){this.rtxPairs.set(Qf(),r)},this)}},t.prototype.addSSRC=function(e,r,n){r?this.rtxPairs.set(e,r):this.primarySSRCs.add(e),this.isSimulcastEnabled=this.isSimulcastEnabled||n},t.prototype.toSdpLines=function(e){var r=this,n=e?[]:Array.from(this.rtxPairs.entries()).map(function(l){return l.reverse()}),i=Array.from(this.primarySSRCs.values()),o=n.length?nn(n):i,a=nn(o,function(l){return["a=ssrc:".concat(l," cname:").concat(r.cName),"a=ssrc:".concat(l," msid:").concat(r.streamId," ").concat(r.trackId)]}),s=n.map(function(l){return"a=ssrc-group:FID ".concat(l.join(" "))}),c=["a=ssrc-group:SIM ".concat(i.join(" "))];return s.concat(a).concat(c)},t}();function Ou(t,e){var r=t.match(new RegExp(e,"gm"))||[];return r.map(function(n){var i=n.match(new RegExp(e))||[];return i.slice(1)})}function MH(t){var e="^a=ssrc-group:SIM ([0-9]+) ([0-9]+) ([0-9]+)$";return new Set(nn(Ou(t,e)))}function DH(t,e,r){var n="a=ssrc:".concat(e," ").concat(r,":(.+)");return t.match(new RegExp(n))[1]}function $H(t){var e="^a=ssrc-group:FID ([0-9]+) ([0-9]+)$";return new Map(Ou(t,e).map(function(r){return r.reverse()}))}function FH(t){var e=IH(nn(Ou(t,"^a=msid:(.+) (.+)$")),2),r=e[0],n=e[1],i=nn(Ou(t,"^a=ssrc:(.+) cname:.+$"));return i.map(function(o){return[o,r,n]})}function UH(t){var e=MH(t),r=$H(t),n=FH(t);return n.reduce(function(i,o){var a=o[0],s=o[1],c=o[2],l=i.get(c)||new NH(c,s,DH(t,a,"cname")),u=r.get(a)||null;return l.addSSRC(a,u,e.has(a)),i.set(c,l)},new Map)}function BH(t,e){var r=UH(t),n=Array.from(r.keys()),i=Array.from(e.keys()),o=Gf(n,i),a=Gf(i,n),s=nn(o,function(_){return r.get(_)});s.forEach(function(_){_.addSimulcastSSRCs(),e.set(_.trackId,_)}),i=Array.from(e.keys());var c=Gf(i,a),l=nn(c,function(_){return e.get(_)}),u=!t.match(/a=rtpmap:[0-9]+ rtx/),d=nn(l,function(_){return _.toSdpLines(u)}),h=nn(new Set(t.split(`\r
`).concat(d))),f="a=x-google-flag:conference";return t.match(f)||h.push(f),h.join(`\r
`)}var VH=BH,qi=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},ob=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},pO=J,zH=pO.difference,ev=pO.flatMap,WH=VH,ab={0:"PCMU",8:"PCMA"};function Fa(t){return Array.from(Cd(t)).reduce(function(e,r){var n=r[0],i=r[1],o=e.get(i)||[];return e.set(i,o.concat(n))},new Map)}function tv(t){return qr(t).reduce(function(e,r){var n=Ea(r);return n?e.set(n,r):e},new Map)}function Cd(t){return wc(t).reduce(function(e,r){if(e.has(r))return e;var n=new RegExp("a=rtpmap:".concat(r," ([^/]+)")),i=t.match(n),o=i?i[1].toLowerCase():ab[r]?ab[r].toLowerCase():"";return e.set(r,o)},new Map)}function Ru(t,e){var r=new RegExp("^a=fmtp:".concat(t," (.+)$"),"m"),n=e.match(r);return n&&n[1].split(";").reduce(function(i,o){var a=qi(o.split("="),2),s=a[0],c=a[1];return i[s]=isNaN(c)?c:parseInt(c,10),i},{})}function Ea(t){var e=t.match(/^a=mid:(.+)$/m);return e&&e[1]}function qr(t,e,r){return t.replace(/\r\n\r\n$/,`\r
`).split(`\r
m=`).slice(1).map(function(n){return"m=".concat(n)}).filter(function(n){var i=new RegExp("m=".concat(e||".*"),"gm"),o=new RegExp("a=".concat(r||".*"),"gm");return i.test(n)&&o.test(n)})}function wc(t){var e=t.split(`\r
`)[0],r=e.match(/([0-9]+)/g);return r?r.slice(1).map(function(n){return parseInt(n,10)}):[]}function HH(t,e){e=e.map(function(o){var a=o.codec;return a.toLowerCase()});var r=ev(e,function(o){return t.get(o)||[]}),n=zH(Array.from(t.keys()),e),i=ev(n,function(o){return t.get(o)});return r.concat(i)}function _g(t,e){var r=e.split(`\r
`),n=r[0],i=r.slice(1);return n=n.replace(/([0-9]+\s?)+$/,t.join(" ")),[n].concat(i).join(`\r
`)}function qH(t,e,r){var n=qr(t),i=t.split(`\r
m=`)[0];return[i].concat(n.map(function(o){if(!/^m=(audio|video)/.test(o))return o;var a=o.match(/^m=(audio|video)/)[1],s=Fa(o),c=a==="audio"?e:r,l=HH(s,c),u=_g(l,o),d=s.get("pcma")||[],h=s.get("pcmu")||[],f=a==="audio"?new Set(d.concat(h)):new Set;return f.has(l[0])?u.replace(/\r\nb=(AS|TIAS):([0-9]+)/g,""):u})).join(`\r
`)}function KH(t,e){var r=qr(t),n=t.split(`\r
m=`)[0];return[n].concat(r.map(function(i){if(i=i.replace(/\r\n$/,""),!/^m=video/.test(i))return i;var o=Fa(i),a=wc(i),s=new Set(o.get("vp8")||[]),c=a.some(function(l){return s.has(l)});return c?WH(i,e):i})).concat("").join(`\r
`)}function GH(t,e,r,n,i){var o=r.get(t)||[];if(o.length<=1)return o;var a=Ru(e,i);if(!a)return o;var s=o.find(function(c){var l=Ru(c,n);return l&&Object.keys(a).every(function(u){return a[u]===l[u]})});return typeof s=="number"?[s]:o}function QH(t,e,r){if(!/^m=(audio|video)/.test(t))return t;var n=Ea(t),i=n&&e.get(n);if(!i)return t;var o=Cd(i),a=Fa(t),s=ev(Array.from(o),function(f){var _=qi(f,2),v=_[0],g=_[1];return g!=="rtx"&&!r.includes(g)?GH(g,v,a,t,i):[]}),c=a.get("rtx")||[],l=c.filter(function(f){var _=Ru(f,t);return _&&s.includes(_.apt)});s=Array.from(new Set(ob(ob([],qi(s),!1),qi(l),!1)));var u=t.split(`\r
`).filter(function(f){var _=f.match(/^a=(rtpmap|fmtp|rtcp-fb):(.+) .+$/),v=_&&_[2];return!_||v&&s.includes(parseInt(v,10))}),d=wc(t).filter(function(f){return s.includes(f)}),h=Array.from(new Set(d));return _g(h,u.join(`\r
`))}function JH(t,e){var r=qr(t),n=t.split(`\r
m=`)[0],i=tv(e);return[n].concat(r.map(function(o){return QH(o,i,[])})).join(`\r
`)}function YH(t,e,r,n){n===void 0&&(n=!1);var i=tv(r),o=tv(e),a=qr(t),s=t.split(`\r
m=`)[0];return[s].concat(a.map(function(c){if(c=c.replace(/\r\n$/,""),!/^m=video/.test(c))return c;var l=c.match(/^a=mid:(.+)$/m),u=l&&l[1];if(!u)return c;var d=i.get(u),h=Cd(d),f=wc(d),_=f.length&&h.get(f[0])==="vp8",v=n||!_;return v?o.get(u).replace(/\r\n$/,""):c})).concat("").join(`\r
`)}function XH(t,e,r){var n=Array.from(r).reduce(function(i,o){var a=qi(o,2),s=a[0],c=a[1],l=qr(t,s,"send(only|recv)"),u=l.map(Ea).filter(function(d){return!e.has(d)});return u.forEach(function(d,h){return i.set(d,c[h])}),i},new Map);return vO(t,n)}function vO(t,e){var r=qr(t),n=t.split(`\r
m=`)[0];return[n].concat(r.map(function(i){if(!/^m=(audio|video)/.test(i))return i;var o=Ea(i);if(!o)return i;var a=e.get(o);if(!a)return i;var s=(i.match(/^a=msid:(.+)$/m)||[])[1];if(!s)return i;var c=qi(s.split(" "),2),l=c[0],u=c[1],d=new RegExp("msid:".concat(l).concat(u?" ".concat(u):"","$"),"gm");return i.replace(d,"msid:".concat(l," ").concat(a))})).join(`\r
`)}function ZH(t,e){return t.split(`\r
`).filter(function(r){return!e.find(function(n){return new RegExp("a=ssrc:.*"+n+":","g").test(r)})}).join(`\r
`)}function eq(t){var e=qr(t),r=t.split(`\r
m=`)[0];return[r].concat(e.map(function(n){if(!/^m=video/.test(n))return n;var i=Fa(n),o=i.get("rtx");if(!o)return n;var a=new Set(wc(n));o.forEach(function(u){return a.delete(u)});var s=n.match(/a=ssrc-group:FID [0-9]+ ([0-9]+)/),c=s&&s[1],l=[/^a=fmtp:.+ apt=.+$/,/^a=rtpmap:.+ rtx\/.+$/,/^a=ssrc-group:.+$/].concat(c?[new RegExp("^a=ssrc:".concat(c," .+$"))]:[]);return n=n.split(`\r
`).filter(function(u){return l.every(function(d){return!d.test(u)})}).join(`\r
`),_g(Array.from(a),n)})).join(`\r
`)}function sb(t,e){var r=Object.entries(e).map(function(n){var i=qi(n,2),o=i[0],a=i[1];return"".concat(o,"=").concat(a)}).join(";");return"a=fmtp:".concat(t," ").concat(r)}function tq(t,e){var r=qr(t),n=t.split(`\r
m=`)[0];return e=e||r.filter(function(i){return/^m=audio/.test(i)}).map(Ea),[n].concat(r.map(function(i){if(!/^m=audio/.test(i))return i;var o=Fa(i),a=o.get("opus");if(!a)return i;var s=Ru(a,i);if(!s)return i;var c=sb(a,s),l=new RegExp(c),u=Ea(i);e.includes(u)?s.usedtx=1:delete s.usedtx;var d=sb(a,s);return i.replace(l,d)})).join(`\r
`)}kt.addOrRewriteNewTrackIds=XH;kt.addOrRewriteTrackIds=vO;kt.createCodecMapForMediaSection=Fa;kt.createPtToCodecName=Cd;kt.disableRtx=eq;kt.enableDtxForOpus=tq;kt.filterLocalCodecs=JH;kt.getMediaSections=qr;kt.removeSSRCAttributes=ZH;kt.revertSimulcast=YH;kt.setCodecPreferences=qH;kt.setSimulcast=KH;var rq=function(){function t(e){e=Object.assign({getKey:function(n){return n},getValue:function(n){return n},isLessThanOrEqualTo:function(n,i){return n<=i}},e),Object.defineProperties(this,{_getKey:{value:e.getKey},_getValue:{value:e.getValue},_isLessThanOrEqualTo:{value:e.isLessThanOrEqualTo},_map:{value:new Map}})}return t.prototype.toMap=function(){return new Map(this._map)},t.prototype.updateAndFilter=function(e){return e.filter(this.update,this)},t.prototype.update=function(e){var r=this._getKey(e),n=this._getValue(e);return this._map.has(r)&&this._isLessThanOrEqualTo(n,this._map.get(r))?!1:(this._map.set(r,n),!0)},t}(),nq=rq,iq=nq,oq=function(){function t(){Object.defineProperties(this,{_filter:{value:new iq({getKey:function(r){return r.ufrag},isLessThanOrEqualTo:function(r,n){return r.revision<=n.revision}})},_ufrag:{writable:!0,value:null},ufrag:{enumerable:!0,get:function(){return this._ufrag}}})}return t.prototype.setUfrag=function(e){this._ufrag=e;var r=this._filter.toMap().get(e);return r?r.candidates:[]},t.prototype.update=function(e){e.candidates=e.candidates||[];var r=this._filter.toMap().get(e.ufrag),n=r?r.candidates:[];return this._filter.update(e)&&this._ufrag===e.ufrag?e.candidates.slice(n.length):[]},t}(),aq=oq,mO=Ee,sq=mO.ICE_ACTIVITY_CHECK_PERIOD_MS,cq=mO.ICE_INACTIVITY_THRESHOLD_MS,lq=function(){function t(e,r){r=Object.assign({activityCheckPeriodMs:sq,inactivityThresholdMs:cq},r),Object.defineProperties(this,{_activityCheckPeriodMs:{value:r.activityCheckPeriodMs},_inactivityThresholdMs:{value:r.inactivityThresholdMs},_lastActivity:{value:null,writable:!0},_peerConnection:{value:e},_timer:{value:null,writable:!0},_onIceConnectionStateChanged:{value:null,writable:!0}})}return t.prototype._getActivePairStat=function(e){var r=Array.from(e.values()),n=r.find(function(i){return i.type==="candidate-pair"&&i.nominated});return n||{bytesReceived:0,timestamp:Math.round(new Date().getTime())}},t.prototype._getIceConnectionStats=function(){var e=this;return this._peerConnection.getStats().then(function(r){return e._getActivePairStat(r)}).catch(function(){return null})},t.prototype._scheduleInactivityCallback=function(e){var r=this;e&&this._onIceConnectionStateChanged===null?(this._onIceConnectionStateChanged=function(){r._peerConnection.iceConnectionState==="disconnected"&&e()},this._peerConnection.addEventListener?this._peerConnection.addEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=this._onIceConnectionStateChanged):!e&&this._onIceConnectionStateChanged&&(this._peerConnection.removeEventListener?this._peerConnection.removeEventListener("iceconnectionstatechange",this._onIceConnectionStateChanged):this._peerConnection.oniceconnectionstatechange=null,this._onIceConnectionStateChanged=null)},t.prototype.start=function(e){var r=this;this.stop(),this._timer=setInterval(function(){r._getIceConnectionStats().then(function(n){n&&((!r._lastActivity||r._lastActivity.bytesReceived!==n.bytesReceived)&&(r._lastActivity=n,r._scheduleInactivityCallback(null)),n.timestamp-r._lastActivity.timestamp>=r._inactivityThresholdMs&&(r._peerConnection.iceConnectionState==="disconnected"?e():r._onIceConnectionStateChanged===null&&r._scheduleInactivityCallback(e)))})},this._activityCheckPeriodMs)},t.prototype.stop=function(){this._scheduleInactivityCallback(null),this._timer!==null&&(clearInterval(this._timer),this._timer=null,this._lastActivity=null)},t}(),uq=lq,dq=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fq=St.EventEmitter,hq=function(t){dq(e,t);function e(r){var n=t.call(this)||this;return Object.defineProperties(n,{_dataChannel:{value:r},_messageQueue:{value:[]}}),r.addEventListener("open",function(){n._messageQueue.splice(0).forEach(function(i){return n._publish(i)})}),r.addEventListener("message",function(i){var o=i.data;try{var a=JSON.parse(o);n.emit("message",a)}catch{}}),n.publish({type:"ready"}),n}return e.prototype._publish=function(r){var n=JSON.stringify(r);try{this._dataChannel.send(n)}catch{}},e.prototype.publish=function(r){var n=this._dataChannel;return n.readyState==="closing"||n.readyState==="closed"?!1:n.readyState==="connecting"?(this._messageQueue.push(r),!0):(this._publish(r),!0)},e}(fq),pq=hq,vq=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mq=OC,gq=pq,yq=function(t){vq(e,t);function e(r){var n=t.call(this,r.label,r.maxPacketLifeTime,r.maxRetransmits,r.ordered)||this;return Object.defineProperties(n,{_dataChannel:{value:r}}),r.binaryType="arraybuffer",r.addEventListener("message",function(i){n.emit("message",i.data)}),r.addEventListener("close",function(){n.emit("close")}),n}return e.prototype.stop=function(){this._dataChannel.close(),t.prototype.stop.call(this)},e.prototype.toDataTransport=function(){return new gq(this._dataChannel)},e}(mq),_q=yq,wq=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bq=wC,Sq=function(t){wq(e,t);function e(r,n){return t.call(this,r,n)||this}return e}(bq),kq=Sq,xq=kt.getMediaSections,Tq=function(){function t(){Object.defineProperties(this,{_midsToTrackIds:{value:new Map,writable:!0}})}return t.prototype.match=function(e){return this._midsToTrackIds.get(e.transceiver.mid)||null},t.prototype.update=function(e){var r=xq(e,"(audio|video)");this._midsToTrackIds=r.reduce(function(n,i){var o=i.match(/^a=mid:(.+)$/m)||[],a=i.match(/^a=msid:.+ (.+)$/m)||[],s=o[1],c=a[1];return s&&c?n.set(s,c):n},this._midsToTrackIds)},t}(),Eq=Tq,Cq=uo.RTCSessionDescription,gO=kt,Pq=gO.createPtToCodecName,Oq=gO.getMediaSections;function Rq(t){var e={type:t.type};return t.type!=="rollback"&&(e.sdp=jq(t.sdp)),new Cq(e)}function jq(t){var e=Oq(t),r=t.split(`\r
m=`)[0];return[r].concat(e.map(Aq)).join(`\r
`)}function Aq(t){var e=Pq(t);t=Iq(t,e),t=Lq(t);var r=Nq(e),n=r.get("rtx")||new Set,i=new Set,o=Mq(t,e,n,i),a=Dq(o,i),s=Array.from(i),c=["h264","vp8","vp9"],l=c.reduce(function(u,d){var h=r.get(d)||new Set;return Array.from(h).reduce(function(f,_){return a.has(_)?f:f.add(_)},u)},new Set);return l.forEach(function(u){if(s.length){var d=s.shift();t=cb(t,d),t=Fq(t,d,u)}}),s.forEach(function(u){t=cb(t,u),t=$q(t,u)}),t}function Lq(t){for(var e=t.split(`\r
`),r=new Map,n=96,i=0;i<e.length;i++){var o=e[i].match(/^a=rtpmap:(\d+) ([^/]+)/);if(o){var a=parseInt(o[1],10),s=o[2].toLowerCase();if(r.has(a)&&r.get(a)!==s){for(;r.has(n)||n===a;)n++;var c=n;r.set(c,s),e[i]=e[i].replace("a=rtpmap:".concat(a),"a=rtpmap:".concat(c));for(var l=i+1;l<e.length;l++)e[l].match(new RegExp("^a=(fmtp|rtcp-fb):".concat(a,"\\b")))&&(e[l]=e[l].replace(new RegExp("^a=(fmtp|rtcp-fb):".concat(a,"\\b")),"a=$1:".concat(c)))}else r.set(a,s)}}return e.join(`\r
`)}function Iq(t,e){return Array.from(e.keys()).reduce(function(r,n){var i=new RegExp("^a=rtpmap:".concat(n," rtx.+$"),"gm");return(r.match(i)||[]).slice(e.get(n)==="rtx"?1:0).reduce(function(o,a){var s=new RegExp(`\r
`.concat(a)),c=new RegExp(`\r
a=fmtp:`.concat(n," apt=[0-9]+"));return o.replace(s,"").replace(c,"")},r)},t)}function Nq(t){var e=new Map;return t.forEach(function(r,n){var i=e.get(r)||new Set;return e.set(r,i.add(n))}),e}function Mq(t,e,r,n){return Array.from(r).reduce(function(i,o){var a=new RegExp("a=fmtp:".concat(o," apt=(\\d+)")),s=t.match(a);if(!s)return n.add(o),i;var c=Number.parseInt(s[1]);if(!e.has(c))return n.add(o),i;var l=e.get(c);return l==="rtx"?(n.add(o),i):i.set(o,c)},new Map)}function Dq(t,e){var r=Array.from(t).reduce(function(n,i){var o=i[0],a=i[1],s=n.get(a)||new Set;return n.set(a,s.add(o))},new Map);return Array.from(r).reduce(function(n,i){var o=i[0],a=Array.from(i[1]);return a.length>1?(a.forEach(function(s){e.add(s)}),n):n.set(o,a[0])},new Map)}function cb(t,e){var r=new RegExp("a=fmtp:".concat(e,`.*\r
`),"gm");return t.replace(r,"")}function $q(t,e){var r=new RegExp("a=rtpmap:".concat(e,`.*\r
`),"gm");return t.replace(r,"")}function Fq(t,e,r){return t.endsWith(`\r
`)?"".concat(t,"a=fmtp:").concat(e," apt=").concat(r,`\r
`):"".concat(t,`\r
a=fmtp:`).concat(e," apt=").concat(r)}var Uq=Rq,Bq=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vq=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},zq=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Wq=fO,Pd=uo,Hq=Pd.RTCIceCandidate,qq=Pd.RTCPeerConnection,Kq=Pd.RTCSessionDescription,Gq=Pd.getStats,yO=be,Od=Ee,Qq=Od.DEFAULT_ICE_GATHERING_TIMEOUT_MS,Jq=Od.DEFAULT_LOG_LEVEL,Yq=Od.DEFAULT_SESSION_TIMEOUT_SEC,Xq=Od.iceRestartBackoffConfig,Er=kt,Zq=Er.addOrRewriteNewTrackIds,e7=Er.addOrRewriteTrackIds,_O=Er.createCodecMapForMediaSection,lb=Er.disableRtx,gl=Er.enableDtxForOpus,t7=Er.filterLocalCodecs,Ss=Er.getMediaSections,ub=Er.removeSSRCAttributes,r7=Er.revertSimulcast,n7=Er.setCodecPreferences,i7=Er.setSimulcast,o7=ho,wO=Z,Jf=wO.MediaClientLocalDescFailedError,Yf=wO.MediaClientRemoteDescFailedError,bc=J,a7=bc.buildLogLevels,s7=bc.getPlatform,c7=bc.isChromeScreenShareTrack,l7=bc.oncePerTick,u7=bc.defer,d7=aq,f7=uq,h7=_q,p7=kq,v7=Da,m7=pn,g7=Eq,db=Uq,wg=yO.guessBrowser(),y7=s7(),_7=/android/.test(y7),w7=wg==="chrome",ji=wg==="firefox",b7=wg==="safari",S7=0,k7={open:["closed","updating"],updating:["closed","open"],closed:[]},x7=function(t){Bq(e,t);function e(r,n,i,o){var a=t.call(this,"open",k7)||this;o=Object.assign({enableDscp:!1,dummyAudioMediaStreamTrack:null,isChromeScreenShareTrack:c7,iceServers:[],logLevel:Jq,offerOptions:{},revertSimulcast:r7,sessionTimeout:Yq*1e3,setCodecPreferences:n7,setSimulcast:i7,Backoff:Wq,IceConnectionMonitor:f7,RTCIceCandidate:Hq,RTCPeerConnection:qq,RTCSessionDescription:Kq,Timeout:o7},o);var s=vb(Object.assign({},o,o.rtcConfiguration)),c=a7(o.logLevel),l=o.RTCPeerConnection;o.enableDscp===!0&&(o.chromeSpecificConstraints=o.chromeSpecificConstraints||{},o.chromeSpecificConstraints.optional=o.chromeSpecificConstraints.optional||[],o.chromeSpecificConstraints.optional.push({googDscp:!0}));var u=o.log?o.log.createLog("webrtc",a):new m7("webrtc",a,c,o.loggerName),d=new l(s,o.chromeSpecificConstraints);o.dummyAudioMediaStreamTrack&&d.addTrack(o.dummyAudioMediaStreamTrack),Object.defineProperties(a,{_appliedTrackIdsToAttributes:{value:new Map,writable:!0},_dataChannels:{value:new Map},_dataTrackReceivers:{value:new Set},_descriptionRevision:{writable:!0,value:0},_didGenerateLocalCandidates:{writable:!0,value:!1},_enableDscp:{value:o.enableDscp},_encodingParameters:{value:n},_isChromeScreenShareTrack:{value:o.isChromeScreenShareTrack},_iceGatheringFailed:{value:!1,writable:!0},_iceGatheringTimeout:{value:new o.Timeout(function(){return a._handleIceGatheringTimeout()},Qq,!1)},_iceRestartBackoff:{value:new o.Backoff(Xq)},_instanceId:{value:++S7},_isIceConnectionInactive:{writable:!0,value:!1},_isIceLite:{writable:!0,value:!1},_isIceRestartBackoffInProgress:{writable:!0,value:!1},_isRestartingIce:{writable:!0,value:!1},_lastIceConnectionState:{writable:!0,value:null},_lastStableDescriptionRevision:{writable:!0,value:0},_localCandidates:{writable:!0,value:[]},_localCodecs:{value:new Set},_localCandidatesRevision:{writable:!0,value:1},_localDescriptionWithoutSimulcast:{writable:!0,value:null},_localDescription:{writable:!0,value:null},_localUfrag:{writable:!0,value:null},_log:{value:u},_eventObserver:{value:o.eventObserver},_remoteCodecMaps:{value:new Map},_rtpSenders:{value:new Map},_rtpNewSenders:{value:new Set},_iceConnectionMonitor:{value:new o.IceConnectionMonitor(d)},_mediaTrackReceivers:{value:new Set},_needsAnswer:{writable:!0,value:!1},_negotiationRole:{writable:!0,value:null},_offerOptions:{writable:!0,value:o.offerOptions},_onEncodingParametersChanged:{value:l7(function(){a._needsAnswer||bO(a)})},_peerConnection:{value:d},_preferredAudioCodecs:{value:i.audio},_preferredVideoCodecs:{value:i.video},_shouldApplyDtx:{value:i.audio.every(function(f){var _=f.codec;return _!=="opus"})||i.audio.some(function(f){var _=f.codec,v=f.dtx;return _==="opus"&&v})},_queuedDescription:{writable:!0,value:null},_iceReconnectTimeout:{value:new o.Timeout(function(){u.debug("ICE reconnect timed out"),a.close()},o.sessionTimeout,!1)},_recycledTransceivers:{value:{audio:[],video:[]}},_replaceTrackPromises:{value:new Map},_remoteCandidates:{writable:!0,value:new d7},_setCodecPreferences:{value:ji&&_7&&i.video[0]&&i.video[0].codec.toLowerCase()!=="h264"?function(f){return f}:o.setCodecPreferences},_setSimulcast:{value:o.setSimulcast},_revertSimulcast:{value:o.revertSimulcast},_RTCIceCandidate:{value:o.RTCIceCandidate},_RTCPeerConnection:{value:o.RTCPeerConnection},_RTCSessionDescription:{value:o.RTCSessionDescription},_shouldOffer:{writable:!0,value:!1},_shouldRestartIce:{writable:!0,value:!1},_trackIdsToAttributes:{value:new Map,writable:!0},_trackMatcher:{writable:!0,value:null},_mediaTrackSenderToPublisherHints:{value:new Map},id:{enumerable:!0,value:r}}),n.on("changed",a._onEncodingParametersChanged),d.addEventListener("connectionstatechange",a._handleConnectionStateChange.bind(a)),d.addEventListener("datachannel",a._handleDataChannelEvent.bind(a)),d.addEventListener("icecandidate",a._handleIceCandidateEvent.bind(a)),d.addEventListener("iceconnectionstatechange",a._handleIceConnectionStateChange.bind(a)),d.addEventListener("icegatheringstatechange",a._handleIceGatheringStateChange.bind(a)),d.addEventListener("signalingstatechange",a._handleSignalingStateChange.bind(a)),d.addEventListener("track",a._handleTrackEvent.bind(a));var h=a;return a.on("stateChanged",function f(_){_==="closed"&&(h.removeListener("stateChanged",f),h._dataChannels.forEach(function(v,g){h.removeDataTrackSender(g)}))}),a}return e.prototype.toString=function(){return"[PeerConnectionV2 #".concat(this._instanceId,": ").concat(this.id,"]")},e.prototype.setEffectiveAdaptiveSimulcast=function(r){this._log.debug("Setting setEffectiveAdaptiveSimulcast: ",r),this._preferredVideoCodecs.forEach(function(n){"adaptiveSimulcast"in n&&(n.adaptiveSimulcast=r)})},Object.defineProperty(e.prototype,"_shouldApplySimulcast",{get:function(){if(!w7&&!b7)return!1;var r=this._preferredVideoCodecs.some(function(n){return n.codec.toLowerCase()==="vp8"&&n.simulcast&&n.adaptiveSimulcast!==!1});return r},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connectionState",{get:function(){return this.iceConnectionState==="failed"?"failed":this._peerConnection.connectionState||this.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iceConnectionState",{get:function(){return this._isIceConnectionInactive&&this._peerConnection.iceConnectionState==="disconnected"||this._iceGatheringFailed?"failed":this._peerConnection.iceConnectionState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isApplicationSectionNegotiated",{get:function(){return this._peerConnection.signalingState!=="closed"?this._peerConnection.localDescription?Ss(this._peerConnection.localDescription.sdp,"application").length>0:!1:!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_isAdaptiveSimulcastEnabled",{get:function(){var r=this._preferredVideoCodecs.find(function(n){return"adaptiveSimulcast"in n});return r&&r.adaptiveSimulcast===!0},enumerable:!1,configurable:!0}),e.prototype._maybeUpdateEncodings=function(r,n,i){if(i===void 0&&(i=!1),r.kind!=="video"||r.readyState==="ended")return!1;var o=r.getSettings(),a=o.height,s=o.width;if(typeof a!="number"||typeof s!="number")return!1;var c=yO.guessBrowser();return c==="safari"||c==="chrome"&&this._isAdaptiveSimulcastEnabled?(this._updateEncodings(r,n,i),!0):!1},e.prototype._updateEncodings=function(r,n,i){if(this._isChromeScreenShareTrack(r)){var o=[{scaleResolutionDownBy:1},{scaleResolutionDownBy:1}];n.forEach(function(f,_){var v=o[_];v?(f.scaleResolutionDownBy=v.scaleResolutionDownBy,i&&delete f.active):(f.active=!1,delete f.scaleResolutionDownBy)})}else{var a=r.getSettings(),s=a.width,c=a.height,l=[{pixels:960*540,maxActiveLayers:3},{pixels:480*270,maxActiveLayers:2},{pixels:0,maxActiveLayers:1}],u=s*c,d=l.find(function(f){return u>=f.pixels}),h=Math.min(n.length,d.maxActiveLayers);n.forEach(function(f,_){var v=_<h;v?(f.scaleResolutionDownBy=1<<h-_-1,i&&(f.active=!0)):(f.active=!1,delete f.scaleResolutionDownBy)})}this._log.debug("_updateEncodings:",n.map(function(f,_){var v=f.active,g=f.scaleResolutionDownBy;return"[".concat(_,": ").concat(v,", ").concat(g||0,"]")}).join(", "))},e.prototype._addIceCandidate=function(r){var n=this;return Promise.resolve().then(function(){return r=new n._RTCIceCandidate(r),n._peerConnection.addIceCandidate(r)}).catch(function(i){n._log.warn("Failed to add RTCIceCandidate ".concat(r?'"'.concat(r.candidate,'"'):"null",": ")+i.message)})},e.prototype._addIceCandidates=function(r){return Promise.all(r.map(this._addIceCandidate,this)).then(function(){})},e.prototype._addOrUpdateTransceiver=function(r){var n=this,i=O7(this,r.kind);if(i&&i.sender){var o=i.sender.track?i.sender.track.id:null;return o&&this._log.warn("Reusing transceiver: ".concat(i.mid,"] ").concat(o," => ").concat(r.id)),this._replaceTrackPromises.set(i,i.sender.replaceTrack(r).then(function(){i.direction="sendrecv"},function(){}).finally(function(){n._replaceTrackPromises.delete(i)})),i}return this._peerConnection.addTransceiver(r,{})},e.prototype._checkIceBox=function(r){var n=pb(r);if(!n)return Promise.resolve();var i=this._remoteCandidates.setUfrag(n);return this._addIceCandidates(i)},e.prototype._answer=function(r){var n=this;return Promise.resolve().then(function(){return n._negotiationRole||(n._negotiationRole="answerer"),n._setRemoteDescription(r)}).catch(function(){throw new Yf}).then(function(){return n._peerConnection.createAnswer()}).then(function(i){ji?i=new n._RTCSessionDescription({sdp:lb(i.sdp),type:i.type}):i=db(i);var o=ub(i.sdp,["mslabel","label"]);if(n._shouldApplySimulcast){var a=o;o=n._setSimulcast(a,n._trackIdsToAttributes),o=n._revertSimulcast(o,a,r.sdp)}return o=o.replace(/42e015/g,"42e01f"),n._setLocalDescription({type:i.type,sdp:o})}).then(function(){return n._checkIceBox(r)}).then(function(){return n._queuedDescription&&n._updateDescription(n._queuedDescription)}).then(function(){return n._queuedDescription=null,n._maybeReoffer(n._peerConnection.localDescription)}).catch(function(i){var o=i instanceof Yf?i:new Jf;throw n._publishMediaWarning({message:"Failed to _answer",code:o.code,error:i}),o})},e.prototype._close=function(){return this._iceConnectionMonitor.stop(),this._peerConnection.signalingState!=="closed"?(this._peerConnection.close(),this.preempt("closed"),this._encodingParameters.removeListener("changed",this._onEncodingParametersChanged),!0):!1},e.prototype._handleConnectionStateChange=function(){this.emit("connectionStateChanged")},e.prototype._handleDataChannelEvent=function(r){var n=this,i=r.channel,o=new h7(i);this._dataTrackReceivers.add(o),i.addEventListener("close",function(){n._dataTrackReceivers.delete(o)}),this.emit("trackAdded",o)},e.prototype._handleGlare=function(r){var n=this;return this._log.debug("Glare detected; rolling back"),this._isRestartingIce&&(this._log.debug("An ICE restart was in progress; we'll need to restart ICE again after rolling back"),this._isRestartingIce=!1,this._shouldRestartIce=!0),Promise.resolve().then(function(){return n._trackIdsToAttributes=new Map(n._appliedTrackIdsToAttributes),n._setLocalDescription({type:"rollback"})}).then(function(){return n._needsAnswer=!1,n._answer(r)}).then(function(i){return i?Promise.resolve():n._offer()})},e.prototype._publishMediaWarning=function(r){var n=r.message,i=r.code,o=r.error,a=r.sdp;this._eventObserver.emit("event",{level:"warning",name:"error",group:"media",payload:{message:n,code:i,context:JSON.stringify({error:o.message,sdp:a})}})},e.prototype._handleIceCandidateEvent=function(r){r.candidate&&(this._log.debug("Clearing ICE gathering timeout"),this._didGenerateLocalCandidates=!0,this._iceGatheringTimeout.clear(),this._localCandidates.push(r.candidate));var n={ice:{candidates:this._isIceLite?[]:this._localCandidates.slice(),ufrag:this._localUfrag},id:this.id};r.candidate||(n.ice.complete=!0),this._isIceLite&&r.candidate||(n.ice.revision=this._localCandidatesRevision++,this.emit("candidates",n))},e.prototype._handleIceConnectionStateChange=function(){var r=this,n=this._peerConnection.iceConnectionState,i=["connected","completed"].includes(n),o=this._log;o.debug('ICE connection state is "'.concat(n,'"')),i&&(this._iceReconnectTimeout.clear(),this._iceRestartBackoff.reset()),this._lastIceConnectionState!=="failed"&&n==="failed"&&!this._shouldRestartIce&&!this._isRestartingIce?(o.warn("ICE failed"),this._initiateIceRestartBackoff()):["disconnected","failed"].includes(this._lastIceConnectionState)&&i&&o.debug("ICE reconnected"),n==="connected"?(this._isIceConnectionInactive=!1,this._iceConnectionMonitor.start(function(){r._iceConnectionMonitor.stop(),!r._shouldRestartIce&&!r._isRestartingIce&&(o.warn("ICE Connection Monitor detected inactivity"),r._isIceConnectionInactive=!0,r._initiateIceRestartBackoff(),r.emit("iceConnectionStateChanged"),r.emit("connectionStateChanged"))})):["disconnected","completed"].includes(n)||(this._iceConnectionMonitor.stop(),this._isIceConnectionInactive=!1),this._lastIceConnectionState=n,this.emit("iceConnectionStateChanged")},e.prototype._handleIceGatheringTimeout=function(){this._log.warn("ICE failed to gather any local candidates"),this._iceGatheringFailed=!0,this._initiateIceRestartBackoff(),this.emit("iceConnectionStateChanged"),this.emit("connectionStateChanged")},e.prototype._handleIceGatheringStateChange=function(){var r=this._peerConnection.iceGatheringState,n=this._log;n.debug('ICE gathering state is "'.concat(r,'"'));var i=this._iceGatheringTimeout,o=i.delay,a=i.isSet;r==="gathering"&&!this._didGenerateLocalCandidates&&!a&&(n.debug("Starting ICE gathering timeout: ".concat(o)),this._iceGatheringFailed=!1,this._iceGatheringTimeout.start())},e.prototype._handleSignalingStateChange=function(){this._peerConnection.signalingState==="stable"&&(this._appliedTrackIdsToAttributes=new Map(this._trackIdsToAttributes))},e.prototype._handleTrackEvent=function(r){var n=this,i=this._peerConnection.remoteDescription?this._peerConnection.remoteDescription.sdp:null;this._trackMatcher=this._trackMatcher||new g7,this._trackMatcher.update(i);var o=r.track,a=this._trackMatcher.match(r)||o.id,s=new p7(a,o);this._mediaTrackReceivers.forEach(function(c){c.track.id===s.track.id&&n._mediaTrackReceivers.delete(c)}),this._mediaTrackReceivers.add(s),o.addEventListener?o.addEventListener("ended",function(){return n._mediaTrackReceivers.delete(s)}):o.onended=function(){return n._mediaTrackReceivers.delete(s)},this.emit("trackAdded",s)},e.prototype._initiateIceRestart=function(){if(this._peerConnection.signalingState!=="closed"){var r=this._log;r.warn("Attempting to restart ICE"),this._didGenerateLocalCandidates=!1,this._isIceRestartBackoffInProgress=!1,this._shouldRestartIce=!0;var n=this._iceReconnectTimeout,i=n.delay,o=n.isSet;o||(r.debug("Starting ICE reconnect timeout: ".concat(i)),this._iceReconnectTimeout.start()),this.offer().catch(function(a){r.error("offer failed in _initiateIceRestart with: ".concat(a.message))})}},e.prototype._initiateIceRestartBackoff=function(){var r=this;this._peerConnection.signalingState==="closed"||this._isIceRestartBackoffInProgress||(this._log.warn("An ICE restart has been scheduled"),this._isIceRestartBackoffInProgress=!0,this._iceRestartBackoff.backoff(function(){return r._initiateIceRestart()}))},e.prototype._maybeReoffer=function(r){var n=this._shouldOffer;if(r&&r.sdp){var i=this._peerConnection.getSenders().filter(function(l){return l.track});n=["audio","video"].reduce(function(l,u){var d=Ss(r.sdp,u,"(sendrecv|sendonly)"),h=i.filter(E7.bind(null,u));return l||d.length<h.length},n);var o=this._dataChannels.size>0,a=Ss(r.sdp,"application").length>0,s=o&&!a;n=n||s}var c=n?this._offer():Promise.resolve();return c.then(function(){return n})},e.prototype._offer=function(){var r=this,n=Object.assign({},this._offerOptions);return this._needsAnswer=!0,this._shouldRestartIce&&(this._shouldRestartIce=!1,this._isRestartingIce=!0,n.iceRestart=!0),Promise.all(this._replaceTrackPromises.values()).then(function(){return r._peerConnection.createOffer(n)}).catch(function(i){var o=new Jf;throw r._publishMediaWarning({message:"Failed to create offer",code:o.code,error:i}),o}).then(function(i){ji?i=new r._RTCSessionDescription({sdp:lb(i.sdp),type:i.type}):i=db(i);var o=ub(i.sdp,["mslabel","label"]);o=r._peerConnection.remoteDescription?t7(o,r._peerConnection.remoteDescription.sdp):o;var a=r._setCodecPreferences(o,r._preferredAudioCodecs,r._preferredVideoCodecs);return r._shouldOffer=!1,r._negotiationRole||(r._negotiationRole="offerer"),r._shouldApplySimulcast&&(r._localDescriptionWithoutSimulcast={type:"offer",sdp:a},a=r._setSimulcast(a,r._trackIdsToAttributes)),r._setLocalDescription({type:"offer",sdp:a})})},e.prototype._getMediaTrackSenderId=function(r){var n=Array.from(this._rtpSenders.keys()).find(function(i){var o=i.track.id;return o===r});return n?n.id:r},e.prototype._addOrRewriteLocalTrackIds=function(r){var n=this,i=this._peerConnection.getTransceivers(),o=i.filter(function(h){var f=h.sender,_=h.stopped;return!_&&f&&f.track}),a=o.filter(function(h){var f=h.mid;return f}),s=new Map(a.map(function(h){var f=h.mid,_=h.sender;return[f,n._getMediaTrackSenderId(_.track.id)]})),c=e7(r.sdp,s),l=o.filter(function(h){var f=h.mid;return!f}),u=new Map(["audio","video"].map(function(h){return[h,l.filter(function(f){var _=f.sender;return _.track.kind===h}).map(function(f){var _=f.sender;return n._getMediaTrackSenderId(_.track.id)})]})),d=Zq(c,s,u);return new this._RTCSessionDescription({sdp:d,type:r.type})},e.prototype._rollbackAndApplyOffer=function(r){var n=this;return this._setLocalDescription({type:"rollback"}).then(function(){return n._setLocalDescription(r)})},e.prototype._setLocalDescription=function(r){var n=this;return r.type!=="rollback"&&this._shouldApplyDtx&&(r=new this._RTCSessionDescription({sdp:gl(r.sdp),type:r.type})),this._peerConnection.setLocalDescription(r).catch(function(i){n._log.warn('Calling setLocalDescription with an RTCSessionDescription of type "'.concat(r.type,'" failed with the error "').concat(i.message,'".'),i);var o=new Jf,a={message:'Calling setLocalDescription with an RTCSessionDescription of type "'.concat(r.type,'" failed'),code:o.code,error:i};throw r.sdp&&(n._log.warn("The SDP was ".concat(r.sdp)),a.sdp=r.sdp),n._publishMediaWarning(a),o}).then(function(){r.type!=="rollback"&&(n._localDescription=n._addOrRewriteLocalTrackIds(r),n._shouldApplyDtx&&(n._localDescription=new n._RTCSessionDescription({sdp:gl(n._localDescription.sdp,[]),type:n._localDescription.type})),n._localCandidates=[],r.type==="offer"?n._descriptionRevision++:r.type==="answer"&&(n._lastStableDescriptionRevision=n._descriptionRevision,mb(n)),n._localUfrag=pb(r),n.emit("description",n.getState()))})},e.prototype._setRemoteDescription=function(r){var n=this;return r.sdp&&(r.sdp=this._setCodecPreferences(r.sdp,this._preferredAudioCodecs,this._preferredVideoCodecs),this._shouldApplyDtx?r.sdp=gl(r.sdp):r.sdp=gl(r.sdp,[]),ji&&(r.sdp=C7(r.sdp)),this._peerConnection.remoteDescription||(this._isIceLite=/a=ice-lite/.test(r.sdp))),r=new this._RTCSessionDescription(r),Promise.resolve().then(function(){if(r.type==="answer"&&n._localDescriptionWithoutSimulcast){var i=n._preferredVideoCodecs.find(function(s){return"adaptiveSimulcast"in s}),o=!!i&&i.adaptiveSimulcast===!1,a=n._revertSimulcast(n._localDescription.sdp,n._localDescriptionWithoutSimulcast.sdp,r.sdp,o);if(n._localDescriptionWithoutSimulcast=null,a!==n._localDescription.sdp)return n._rollbackAndApplyOffer({type:n._localDescription.type,sdp:a})}}).then(function(){return n._peerConnection.setRemoteDescription(r)}).then(function(){r.type==="answer"&&(n._isRestartingIce&&(n._log.debug("An ICE restart was in-progress and is now completed"),n._isRestartingIce=!1),mb(n))},function(i){throw n._log.warn('Calling setRemoteDescription with an RTCSessionDescription of type "'.concat(r.type,'" failed with the error "').concat(i.message,'".'),i),r.sdp&&n._log.warn("The SDP was ".concat(r.sdp)),i})},e.prototype._updateDescription=function(r){var n=this;switch(r.type){case"answer":case"pranswer":if(r.revision!==this._descriptionRevision||this._peerConnection.signalingState!=="have-local-offer")return Promise.resolve();this._descriptionRevision=r.revision;break;case"close":return this._close();case"create-offer":return r.revision<=this._lastStableDescriptionRevision?Promise.resolve():this._needsAnswer?(this._queuedDescription=r,Promise.resolve()):(this._descriptionRevision=r.revision,this._offer());case"offer":return r.revision<=this._lastStableDescriptionRevision||this._peerConnection.signalingState==="closed"?Promise.resolve():this._peerConnection.signalingState==="have-local-offer"?this._needsAnswer&&this._lastStableDescriptionRevision===0?(this._queuedDescription=r,Promise.resolve()):(this._descriptionRevision=r.revision,this._handleGlare(r)):(this._descriptionRevision=r.revision,this._answer(r).then(function(){}))}var i=r.revision;return Promise.resolve().then(function(){return n._setRemoteDescription(r)}).catch(function(o){var a=new Yf;throw n._publishMediaWarning({message:'Calling setRemoteDescription with an RTCSessionDescription of type "'.concat(r.type,'" failed'),code:a.code,error:o,sdp:r.sdp}),a}).then(function(){return n._lastStableDescriptionRevision=i,n._needsAnswer=!1,n._checkIceBox(r)}).then(function(){return n._queuedDescription&&n._updateDescription(n._queuedDescription)}).then(function(){return n._queuedDescription=null,n._maybeReoffer(n._peerConnection.localDescription).then(function(){})})},e.prototype._updateIce=function(r){var n=this._remoteCandidates.update(r);return this._addIceCandidates(n)},e.prototype.addDataTrackSender=function(r){if(!this._dataChannels.has(r))try{var n={ordered:r.ordered};r.maxPacketLifeTime!==null&&(n.maxPacketLifeTime=r.maxPacketLifeTime),r.maxRetransmits!==null&&(n.maxRetransmits=r.maxRetransmits);var i=this._peerConnection.createDataChannel(r.id,n);r.addDataChannel(i),this._dataChannels.set(r,i)}catch(o){this._log.warn('Error creating an RTCDataChannel for DataTrack "'.concat(r.id,'": ').concat(o.message))}},e.prototype._handleQueuedPublisherHints=function(){var r=this;this._peerConnection.signalingState==="stable"&&this._mediaTrackSenderToPublisherHints.forEach(function(n,i){var o=n.deferred,a=n.encodings;r._mediaTrackSenderToPublisherHints.delete(i),r._setPublisherHint(i,a).then(function(s){return o.resolve(s)}).catch(function(s){return o.reject(s)})})},e.prototype._setPublisherHint=function(r,n){var i=this;if(ji)return Promise.resolve("COULD_NOT_APPLY_HINT");if(this._mediaTrackSenderToPublisherHints.has(r)){var o=this._mediaTrackSenderToPublisherHints.get(r);o.deferred.resolve("REQUEST_SKIPPED"),this._mediaTrackSenderToPublisherHints.delete(r)}var a=this._rtpSenders.get(r);if(!a)return this._log.warn("Could not apply publisher hint because RTCRtpSender was not found"),Promise.resolve("UNKNOWN_TRACK");if(this._peerConnection.signalingState==="closed")return this._log.warn('Could not apply publisher hint because signalingState was "closed"'),Promise.resolve("COULD_NOT_APPLY_HINT");if(this._peerConnection.signalingState!=="stable"){this._log.debug("Queuing up publisher hint because signalingState:",this._peerConnection.signalingState);var s=u7();return this._mediaTrackSenderToPublisherHints.set(r,{deferred:s,encodings:n}),s.promise}var c=a.getParameters();return n!==null&&n.forEach(function(l){var u=l.enabled,d=l.layer_index;c.encodings.length>d?(i._log.debug("layer:".concat(d,", active:").concat(c.encodings[d].active," => ").concat(u)),c.encodings[d].active=u):i._log.warn("invalid layer:".concat(d,", active:").concat(u))}),this._maybeUpdateEncodings(a.track,c.encodings,n===null),a.setParameters(c).then(function(){return"OK"}).catch(function(l){return i._log.error("Failed to apply publisher hints:",l),"COULD_NOT_APPLY_HINT"})},e.prototype.addMediaTrackSender=function(r){var n=this;if(!(this._peerConnection.signalingState==="closed"||this._rtpSenders.has(r))){var i=this._addOrUpdateTransceiver(r.track),o=i.sender;r.addSender(o,function(a){return n._setPublisherHint(r,a)}),this._rtpNewSenders.add(o),this._rtpSenders.set(r,o)}},e.prototype.close=function(){this._close()&&(this._descriptionRevision++,this._localDescription={type:"close"},this.emit("description",this.getState()))},e.prototype.getTrackReceivers=function(){return Array.from(this._dataTrackReceivers).concat(Array.from(this._mediaTrackReceivers))},e.prototype.getState=function(){if(!this._localDescription)return null;var r=this._localDescription.type==="answer"?this._lastStableDescriptionRevision:this._descriptionRevision,n={type:this._localDescription.type,revision:r};return this._localDescription.sdp&&(n.sdp=this._localDescription.sdp),{description:n,id:this.id}},e.prototype.offer=function(){var r=this;return this._needsAnswer||this._isRestartingIce?(this._shouldOffer=!0,Promise.resolve()):this.bracket("offering",function(n){r.transition("updating",n);var i=r._needsAnswer||r._isRestartingIce?Promise.resolve():r._offer();return i.then(function(){r.tryTransition("open",n)},function(o){throw r.tryTransition("open",n),o})})},e.prototype.removeDataTrackSender=function(r){var n=this._dataChannels.get(r);n&&(r.removeDataChannel(n),this._dataChannels.delete(r),n.close())},e.prototype.removeMediaTrackSender=function(r){var n=this._rtpSenders.get(r);if(n){if(this._peerConnection.signalingState!=="closed"&&this._peerConnection.removeTrack(n),r.removeSender(n),this._mediaTrackSenderToPublisherHints.has(r)){var i=this._mediaTrackSenderToPublisherHints.get(r);i.deferred.resolve("UNKNOWN_TRACK"),this._mediaTrackSenderToPublisherHints.delete(r)}this._rtpNewSenders.delete(n),this._rtpSenders.delete(r)}},e.prototype.setConfiguration=function(r){typeof this._peerConnection.setConfiguration=="function"&&this._peerConnection.setConfiguration(vb(r))},e.prototype.setIceReconnectTimeout=function(r){return this._iceReconnectTimeout.setDelay(r),this._log.debug("Updated ICE reconnection timeout period:",this._iceReconnectTimeout.delay),this},e.prototype.update=function(r){var n=this;return this.bracket("updating",function(i){if(n.state==="closed")return Promise.resolve();n.transition("updating",i);var o=[];return r.ice&&o.push(n._updateIce(r.ice)),r.description&&o.push(n._updateDescription(r.description)),Promise.all(o).then(function(){n.tryTransition("open",i)},function(a){throw n.tryTransition("open",i),a})})},e.prototype.getStats=function(){var r=this;return Gq(this._peerConnection,{log:this._log}).then(function(n){return T7(r,n)})},e}(v7);function fb(t,e){var r=t._getMediaTrackSenderId(e.trackId);return Object.assign(e,{trackId:r})}function hb(t,e){var r=zq([],Vq(t._mediaTrackReceivers),!1).find(function(i){return i.track.id===e.trackId}),n=r?r.id:null;return Object.assign(e,{trackId:n})}function T7(t,e){return Object.assign(e,{remoteAudioTrackStats:e.remoteAudioTrackStats.map(function(r){return hb(t,r)}),remoteVideoTrackStats:e.remoteVideoTrackStats.map(function(r){return hb(t,r)}),localAudioTrackStats:e.localAudioTrackStats.map(function(r){return fb(t,r)}),localVideoTrackStats:e.localVideoTrackStats.map(function(r){return fb(t,r)})})}function pb(t){if(t.sdp){var e=t.sdp.match(/^a=ice-ufrag:([a-zA-Z0-9+/]+)/m);if(e)return e[1]}return null}function vb(t){return t===void 0&&(t={}),Object.assign({bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"},t)}function E7(t,e){var r=e.track;return r&&r.kind===t&&r.readyState!=="ended"}function C7(t){return t.replace(/a=msid:[^ ]+ /g,"a=msid:- ")}function P7(t,e){return!t.stopped&&!e._replaceTrackPromises.has(t)&&["inactive","recvonly"].includes(t.direction)}function O7(t,e){var r={audio:t._preferredAudioCodecs.map(function(a){var s=a.codec;return s.toLowerCase()}),video:t._preferredVideoCodecs.map(function(a){var s=a.codec;return s.toLowerCase()})}[e],n=t._recycledTransceivers[e],i=r.find(function(a){return t._localCodecs.has(a)});if(!i)return n.shift();var o=n.find(function(a){var s=t._remoteCodecMaps.get(a.mid);return s&&s.has(i)});return o&&n.splice(n.indexOf(o),1),o}function R7(t){var e=t._peerConnection.localDescription;!e||!e.sdp||Ss(e.sdp).forEach(function(r){var n=_O(r);n.forEach(function(i,o){return t._localCodecs.add(o)})})}function j7(t){var e=t._peerConnection.remoteDescription;!e||!e.sdp||Ss(e.sdp).forEach(function(r){var n=r.match(/^a=mid:(.+)$/m);if(!(!n||!n[1])){var i=n[1],o=_O(r);t._remoteCodecMaps.set(i,o)}})}function A7(t){t._recycledTransceivers.audio=[],t._recycledTransceivers.video=[],t._peerConnection.getTransceivers().forEach(function(e){if(P7(e,t)){var r=e.receiver.track;t._recycledTransceivers[r.kind].push(e)}})}function mb(t){A7(t),R7(t),j7(t),bO(t).then(function(){t._handleQueuedPublisherHints()})}function bO(t){var e=t._encodingParameters,r=e.maxAudioBitrate,n=e.maxVideoBitrate,i=new Map([["audio",r],["video",n]]),o=[];return t._peerConnection.getSenders().filter(function(a){return a.track}).forEach(function(a){var s=i.get(a.track.kind),c=a.getParameters();s===null||s===0?L7(c):t._isChromeScreenShareTrack(a.track)?t._log.warn("Not setting maxBitrate for ".concat(a.track.kind," Track ").concat(a.track.id," because it appears to be screen share track: ").concat(a.track.label)):I7(c,s),!ji&&c.encodings.length>0&&(a.track.kind==="audio"?c.encodings[0].priority="high":t._isChromeScreenShareTrack(a.track)&&(c.encodings[0].priority="medium"),t._enableDscp&&(c.encodings[0].networkPriority="high"));var l=t._rtpNewSenders.has(a);t._maybeUpdateEncodings(a.track,c.encodings,l),t._rtpNewSenders.delete(a);var u=a.setParameters(c).catch(function(d){t._log.warn("Error while setting encodings parameters for ".concat(a.track.kind," Track ").concat(a.track.id,": ").concat(d.message||d.name))});o.push(u)}),Promise.all(o)}function L7(t){Array.isArray(t.encodings)&&t.encodings.forEach(function(e){return delete e.maxBitrate})}function I7(t,e){ji?t.encodings=[{maxBitrate:e}]:t.encodings.forEach(function(r){r.maxBitrate=e})}var N7=x7,M7=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SO=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},kO=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},D7=be.guessBrowser,$7=N7,F7=bC,U7=yC,Kn=J,B7=Z.MediaConnectionError,V7=D7()==="firefox",z7=function(t){M7(e,t);function e(r,n,i){var o=t.call(this)||this;i=Object.assign({audioContextFactory:V7?Sd():null,PeerConnectionV2:$7},i);var a=i.audioContextFactory?i.audioContextFactory.getOrCreate(o):null,s=a?{offerToReceiveVideo:!0}:{offerToReceiveAudio:!0,offerToReceiveVideo:!0};return Object.defineProperties(o,{_audioContextFactory:{value:i.audioContextFactory},_closedPeerConnectionIds:{value:new Set},_configuration:{writable:!0,value:null},_configurationDeferred:{writable:!0,value:Kn.defer()},_connectionState:{value:"new",writable:!0},_dummyAudioTrackSender:{value:a?new F7(W7(a)):null},_encodingParameters:{value:r},_iceConnectionState:{writable:!0,value:"new"},_dataTrackSenders:{writable:!0,value:new Set},_lastConnectionState:{value:"new",writable:!0},_lastIceConnectionState:{writable:!0,value:"new"},_mediaTrackSenders:{writable:!0,value:new Set},_offerOptions:{value:s},_peerConnections:{value:new Map},_preferredCodecs:{value:n},_sessionTimeout:{value:null,writable:!0},_PeerConnectionV2:{value:i.PeerConnectionV2}}),o}return e.prototype.setEffectiveAdaptiveSimulcast=function(r){this._peerConnections.forEach(function(n){return n.setEffectiveAdaptiveSimulcast(r)}),this._preferredCodecs.video.forEach(function(n){"adaptiveSimulcast"in n&&(n.adaptiveSimulcast=r)})},Object.defineProperty(e.prototype,"connectionState",{get:function(){return this._connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iceConnectionState",{get:function(){return this._iceConnectionState},enumerable:!1,configurable:!0}),e.prototype._closeAbsentPeerConnections=function(r){var n=new Set(r.map(function(i){return i.id}));return this._peerConnections.forEach(function(i){n.has(i.id)||i._close()}),this},e.prototype._getConfiguration=function(){return this._configurationDeferred.promise},e.prototype._getOrCreate=function(r,n){var i=this,o=this,a=this._peerConnections.get(r);if(!a){var s=this._PeerConnectionV2,c=Object.assign({dummyAudioMediaStreamTrack:this._dummyAudioTrackSender?this._dummyAudioTrackSender.track:null,offerOptions:this._offerOptions},this._sessionTimeout?{sessionTimeout:this._sessionTimeout}:{},n);try{a=new s(r,this._encodingParameters,this._preferredCodecs,c)}catch{throw new B7}this._peerConnections.set(a.id,a),a.on("candidates",this.queue.bind(this,"candidates")),a.on("description",this.queue.bind(this,"description")),a.on("trackAdded",this.queue.bind(this,"trackAdded")),a.on("stateChanged",function l(u){u==="closed"&&(a.removeListener("stateChanged",l),o._dataTrackSenders.forEach(function(d){return a.removeDataTrackSender(d)}),o._mediaTrackSenders.forEach(function(d){return a.removeMediaTrackSender(d)}),o._peerConnections.delete(a.id),o._closedPeerConnectionIds.add(a.id),gb(o),yl(o))}),a.on("connectionStateChanged",function(){return gb(i)}),a.on("iceConnectionStateChanged",function(){return yl(i)}),this._dataTrackSenders.forEach(a.addDataTrackSender,a),this._mediaTrackSenders.forEach(a.addMediaTrackSender,a),yl(this)}return a},e.prototype.close=function(){return this._peerConnections.forEach(function(r){r.close()}),this._dummyAudioTrackSender&&this._dummyAudioTrackSender.stop(),this._audioContextFactory&&this._audioContextFactory.release(this),yl(this),this},e.prototype.createAndOffer=function(){var r=this;return this._getConfiguration().then(function(n){var i;do i=Kn.makeUUID();while(r._peerConnections.has(i));return r._getOrCreate(i,n)}).then(function(n){return n.offer()}).then(function(){return r})},e.prototype.getTrackReceivers=function(){return Kn.flatMap(this._peerConnections,function(r){return r.getTrackReceivers()})},e.prototype.getStates=function(){var r=[];return this._peerConnections.forEach(function(n){var i=n.getState();i&&r.push(i)}),r},e.prototype.setConfiguration=function(r){return this._configuration&&(this._configurationDeferred=Kn.defer(),this._peerConnections.forEach(function(n){n.setConfiguration(r)})),this._configuration=r,this._configurationDeferred.resolve(r),this},e.prototype.setIceReconnectTimeout=function(r){return this._sessionTimeout===null&&(this._peerConnections.forEach(function(n){n.setIceReconnectTimeout(r)}),this._sessionTimeout=r),this},e.prototype.setTrackSenders=function(r){var n=new Set(r.filter(function(a){return a.kind==="data"})),i=new Set(r.filter(function(a){return a&&(a.kind==="audio"||a.kind==="video")})),o=K7(this,n,i);return this._dataTrackSenders=n,this._mediaTrackSenders=i,H7(this,o),this},e.prototype.update=function(r,n){var i=this;return n===void 0&&(n=!1),n&&this._closeAbsentPeerConnections(r),this._getConfiguration().then(function(o){return Promise.all(r.map(function(a){if(i._closedPeerConnectionIds.has(a.id))return null;var s=i._getOrCreate(a.id,o);return s.update(a)}))}).then(function(){return i})},e.prototype.getStats=function(){var r=Array.from(this._peerConnections.values());return Promise.all(r.map(function(n){return n.getStats().then(function(i){return[n.id,i]})})).then(function(n){return new Map(n)})},e}(U7);function W7(t){var e=t.createMediaStreamDestination();return e.stream.getAudioTracks()[0]}function H7(t,e){(e.data.add.size||e.data.remove.size||e.media.add.size||e.media.remove.size)&&t._peerConnections.forEach(function(r){e.data.remove.forEach(r.removeDataTrackSender,r),e.media.remove.forEach(r.removeMediaTrackSender,r),e.data.add.forEach(r.addDataTrackSender,r),e.media.add.forEach(r.addMediaTrackSender,r),(e.media.add.size||e.media.remove.size||e.data.add.size&&!r.isApplicationSectionNegotiated)&&r.offer()})}function q7(t,e){var r=Kn.difference(e,t._dataTrackSenders),n=Kn.difference(t._dataTrackSenders,e);return{add:r,remove:n}}function K7(t,e,r){return{data:q7(t,e),media:G7(t,r)}}function G7(t,e){var r=Kn.difference(e,t._mediaTrackSenders),n=Kn.difference(t._mediaTrackSenders,e);return{add:r,remove:n}}var ju={new:0,checking:1,connecting:2,connected:3,completed:4,disconnected:-1,failed:-2,closed:-3},Xf;function Q7(){return Object.keys(ju).reduce(function(t,e){var r;return Object.assign(t,(r={},r[ju[e]]=e,r))},{})}function xO(t){return t.length?(Xf=Xf||Q7(),t.reduce(function(e,r){return Xf[Math.max(ju[e],ju[r])]})):"new"}function yl(t){t._lastIceConnectionState=t.iceConnectionState,t._iceConnectionState=xO(kO([],SO(t._peerConnections.values()),!1).map(function(e){return e.iceConnectionState})),t.iceConnectionState!==t._lastIceConnectionState&&t.emit("iceConnectionStateChanged")}function gb(t){t._lastConnectionState=t.connectionState,t._connectionState=xO(kO([],SO(t._peerConnections.values()),!1).map(function(e){return e.connectionState})),t.connectionState!==t._lastConnectionState&&t.emit("connectionStateChanged")}var J7=z7,Y7=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X7=St,Z7=0,e9=function(t){Y7(e,t);function e(r,n,i){var o=t.call(this)||this;return Object.defineProperties(o,{_instanceId:{value:Z7++},channel:{value:n},_log:{value:i.log.createLog("default",o)},_getReceiver:{value:r},_receiverPromise:{value:null,writable:!0},_transport:{value:null,writable:!0}}),o}return Object.defineProperty(e.prototype,"isSetup",{get:function(){return!!this._receiverPromise},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"[MediaSignaling #".concat(this._instanceId,":").concat(this.channel,"]")},e.prototype.setup=function(r){var n=this;this._teardown(),this._log.info("setting up msp transport for id:",r);var i=this._getReceiver(r).then(function(o){if(o.kind!=="data"&&n._log.error("Expected a DataTrackReceiver"),n._receiverPromise===i){try{n._transport=o.toDataTransport(),n.emit("ready",n._transport)}catch(a){n._log.error("Failed to toDataTransport: ".concat(a.message))}o.once("close",function(){return n._teardown()})}});this._receiverPromise=i},e.prototype._teardown=function(){this._transport&&(this._log.info("Tearing down"),this._transport=null,this._receiverPromise=null,this.emit("teardown"))},e}(X7),po=e9,t9=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r9=po,n9=function(t){t9(e,t);function e(r,n){var i=t.call(this,r,"active_speaker",n)||this;return Object.defineProperties(i,{_loudestParticipantSid:{value:null,writable:!0}}),i.on("ready",function(o){o.on("message",function(a){switch(a.type){case"active_speaker":i._setLoudestParticipantSid(a.participant);break}})}),i}return Object.defineProperty(e.prototype,"loudestParticipantSid",{get:function(){return this._loudestParticipantSid},enumerable:!1,configurable:!0}),e.prototype._setLoudestParticipantSid=function(r){this.loudestParticipantSid!==r&&(this._loudestParticipantSid=r,this.emit("updated"))},e}(r9),i9=n9,o9=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a9=po,s9=function(t){o9(e,t);function e(r,n){var i=t.call(this,r,"extension_transcriptions",n)||this;return i.on("ready",function(o){o.on("message",function(a){switch(a.type){case"extension_transcriptions":i.emit("transcription",a);break}})}),i}return e}(a9),c9=s9,l9=function(){function t(e,r,n,i){Object.defineProperties(this,{availableSend:{enumerable:!0,value:n},recv:{enumerable:!0,value:r},rtt:{enumerable:!0,value:i},send:{enumerable:!0,value:e}})}return t.of=function(e,r){var n=(r.timestamp-e.timestamp)/1e3,i=r.bytesSent-e.bytesSent,o=r.bytesReceived-e.bytesReceived,a=n>0?i/n*8:0,s=n>0?o/n*8:0,c=r.availableOutgoingBitrate,l=r.currentRoundTripTime;return new t(a,s,c,l)},t}(),u9=l9,Zf=u9,d9=function(){function t(){Object.defineProperties(this,{lastReport:{enumerable:!0,value:new Zf(0,0),writable:!0},lastStats:{enumerable:!0,value:null,writable:!0}})}return t.prototype.next=function(e){var r=this.lastStats;if(this.lastStats=e,r){var n=r.id===e.id?Zf.of(r,e):new Zf(0,0);this.lastReport=n}return this.lastReport},t}(),f9=d9;function h9(t){return t=t.filter(function(e){return typeof e=="number"}),t.length<1?void 0:t.reduce(function(e,r){return r+e})/t.length}var TO=h9,p9=function(){function t(e,r,n){Object.defineProperties(this,{id:{enumerable:!0,value:e},trackId:{enumerable:!0,value:r},bitrate:{enumerable:!0,value:n}})}return t}(),EO=p9;function v9(t){return t.reduce(function(e,r){return typeof r=="number"?r+e:e},0)}var CO=v9,m9=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yb=TO,g9=EO,y9=CO,_9=function(t){m9(e,t);function e(r,n,i,o,a,s,c){var l=t.call(this,r,n,i)||this,u=a>0?o/a:0;return Object.defineProperties(l,{deltaPacketsLost:{enumerable:!0,value:o},deltaPacketsReceived:{enumerable:!0,value:a},fractionLost:{enumerable:!0,value:s},jitter:{enumerable:!0,value:c},phonyFractionLost:{enumerable:!0,value:u}}),l}return e.of=function(r,n,i){if(n.id!==i.id)throw new Error("RTCStats IDs must match");var o=(i.timestamp-n.timestamp)/1e3,a=i.bytesReceived-n.bytesReceived,s=o>0?a/o*8:0,c=Math.max(i.packetsLost-n.packetsLost,0),l=i.packetsReceived-n.packetsReceived,u=i.fractionLost,d=i.jitter;return new e(n.id,r,s,c,l,u,d)},e.summarize=function(r){var n=r.map(function(s){return s.summarize()}),i=y9(n.map(function(s){return s.bitrate})),o=yb(n.map(function(s){return s.fractionLost})),a=yb(n.map(function(s){return s.jitter}));return{bitrate:i,fractionLost:o,jitter:a}},e.prototype.summarize=function(){return{bitrate:this.bitrate,fractionLost:typeof this.fractionLost=="number"?this.fractionLost:this.phonyFractionLost,jitter:this.jitter}},e}(g9),PO=_9,w9=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),b9=TO,S9=EO,k9=CO,x9=function(t){w9(e,t);function e(r,n,i,o){var a=t.call(this,r,n,i)||this;return Object.defineProperties(a,{rtt:{enumerable:!0,value:o}}),a}return e.of=function(r,n,i,o){if(n.id!==i.id)throw new Error("RTCStats IDs must match");var a=(i.timestamp-n.timestamp)/1e3,s=i.bytesSent-n.bytesSent,c=a>0?s/a*8:0,l=o&&typeof o.roundTripTime=="number"?o.roundTripTime/1e3:void 0;return new e(n.id,r,c,l)},e.summarize=function(r){var n=k9(r.map(function(o){return o.bitrate})),i=b9(r.map(function(o){return o.rtt}));return{bitrate:n,rtt:i}},e}(S9),OO=x9,eh=PO,th=OO,T9=function(){function t(e,r,n){Object.defineProperties(this,{ice:{enumerable:!0,value:e},audio:{enumerable:!0,value:r},video:{enumerable:!0,value:n}})}return t.prototype.summarize=function(){var e=this.audio.send.concat(this.video.send),r=th.summarize(e),n=this.audio.recv.concat(this.video.recv),i=eh.summarize(n);return{ice:this.ice,send:r,recv:i,audio:{send:th.summarize(this.audio.send),recv:eh.summarize(this.audio.recv)},video:{send:th.summarize(this.video.send),recv:eh.summarize(this.video.recv)}}},t}(),E9=T9,C9=function(){function t(e,r,n){Object.defineProperties(this,{id:{enumerable:!0,value:e,writable:!0},trackId:{enumerable:!0,value:r,writable:!0},lastStats:{enumerable:!0,value:n,writable:!0}})}return t}(),RO=C9,P9=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O9=PO,R9=RO,j9=function(t){P9(e,t);function e(r,n){var i=t.call(this,n.id,r,n)||this;return Object.defineProperties(i,{lastReport:{enumerable:!0,value:null,writable:!0}}),i}return e.prototype.next=function(r,n){var i=this.lastStats;this.lastStats=n,this.trackId=r;var o=O9.of(r,i,n);return this.lastReport=o,o},e}(R9),A9=j9,L9=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I9=RO,N9=OO,M9=function(t){L9(e,t);function e(r,n){var i=t.call(this,n.id,r,n)||this;return Object.defineProperties(i,{lastReport:{enumerable:!0,value:null,writable:!0}}),i}return e.prototype.next=function(r,n,i){var o=this.lastStats;this.lastStats=n,this.trackId=r;var a=N9.of(r,o,n,i);return this.lastReport=a,a},e}(I9),D9=M9,cs=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},_l=T&&T.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,o;n<i;n++)(o||!(n in e))&&(o||(o=Array.prototype.slice.call(e,0,n)),o[n]=e[n]);return t.concat(o||Array.prototype.slice.call(e))},Zs=T&&T.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jO=be.guessBrowser,$9=f9,F9=E9,U9=A9,B9=D9,V9=function(){function t(e){Object.defineProperties(this,{pc:{enumerable:!0,value:e},ice:{enumerable:!0,value:new $9},audio:{enumerable:!0,value:{send:new Map,recv:new Map}},video:{enumerable:!0,value:{send:new Map,recv:new Map}},lastReport:{enumerable:!0,value:null,writable:!0}})}return t.prototype.next=function(){var e=this,r=jO()==="firefox"?H9(this):q9(this);return r.then(function(){var n=_l([],cs(e.audio.send.values()),!1),i=_l([],cs(e.video.send.values()),!1),o=_l([],cs(e.audio.recv.values()),!1),a=_l([],cs(e.video.recv.values()),!1),s=new F9(e.ice.lastReport,{send:n.map(function(c){return c.lastReport}).filter(function(c){return c}),recv:o.map(function(c){return c.lastReport}).filter(function(c){return c})},{send:i.map(function(c){return c.lastReport}).filter(function(c){return c}),recv:a.map(function(c){return c.lastReport}).filter(function(c){return c})});return e.lastReport=s,s})},t}();function _b(t){return Promise.all(t.map(function(e){var r=e.track.id;return e.getStats().then(function(n){var i,o;try{for(var a=Zs(n.values()),s=a.next();!s.done;s=a.next()){var c=s.value;c.type==="inbound-rtp"&&(c.id="".concat(r,"-").concat(c.id))}}catch(l){i={error:l}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return[r,n]})})).then(function(e){return new Map(e)})}function AO(t,e,r,n,i){var o=e[n.mediaType];if(!i){var a=r.get(n.trackId);a&&(i=a.trackIdentifier)}if(o&&i){if(o.has(n.id))return o.get(n.id);var s=new t(i,n);o.set(n.id,s)}return null}function bg(t){return{audio:t.audio.send,video:t.video.send}}function Sg(t){return{audio:t.audio.recv,video:t.video.recv}}function z9(t,e,r,n){return AO(B9,bg(t),e,r,n)}function W9(t,e,r,n){return AO(U9,Sg(t),e,r,n)}function LO(t){return{audio:new Set(t.audio.send.keys()),video:new Set(t.video.send.keys())}}function IO(t){return{audio:new Set(t.audio.recv.keys()),video:new Set(t.video.recv.keys())}}function NO(t,e,r,n){var i,o;try{for(var a=Zs(e.values()),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.type==="outbound-rtp"&&!c.isRemote){if(jO()!=="firefox"&&!c.trackId)continue;var l=r[c.mediaType];l&&l.delete(c.id);var u=z9(t,e,c,n);if(u){var d=e.get(c.remoteId);u.next(n||u.trackId,c,d)}}}}catch(h){i={error:h}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}function MO(t,e,r,n){var i,o;try{for(var a=Zs(e.values()),s=a.next();!s.done;s=a.next()){var c=s.value;if(c.type==="inbound-rtp"&&!c.isRemote){var l=r[c.mediaType];l&&l.delete(c.id);var u=W9(t,e,c,n);u&&u.next(n||u.trackId,c)}}}catch(d){i={error:d}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}}function Au(t,e){var r=function(i){var o=t[i],a=e[i];a.forEach(function(s){return o.delete(s)})};for(var n in e)r(n)}function DO(t,e){var r,n,i,o,a;try{for(var s=Zs(e.values()),c=s.next();!c.done;c=s.next()){var l=c.value;l.type==="transport"&&(a=e.get(l.selectedCandidatePairId))}}catch(h){r={error:h}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}if(a){t.next(a);return}try{for(var u=Zs(e.values()),d=u.next();!d.done;d=u.next()){var l=d.value;l.type==="candidate-pair"&&l.nominated&&(!("selected"in l)||l.selected)&&t.next(l)}}catch(h){i={error:h}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(i)throw i.error}}}function H9(t){var e=t.pc.getTransceivers().filter(function(n){return n.currentDirection&&n.currentDirection.match(/send/)&&n.sender.track}).map(function(n){return n.sender}),r=t.pc.getTransceivers().filter(function(n){return n.currentDirection&&n.currentDirection.match(/recv/)}).map(function(n){return n.receiver});return Promise.all([_b(e),_b(r),t.pc.getStats()]).then(function(n){var i=cs(n,3),o=i[0],a=i[1],s=i[2],c=bg(t),l=LO(t);o.forEach(function(h,f){return NO(t,h,l,f)}),Au(c,l);var u=Sg(t),d=IO(t);a.forEach(function(h,f){return MO(t,h,d,f)}),Au(u,d),DO(t.ice,s)})}function q9(t){return t.pc.getStats().then(function(e){var r=bg(t),n=LO(t);NO(t,e,n),Au(r,n);var i=Sg(t),o=IO(t);MO(t,e,o),Au(i,o),DO(t.ice,e)})}var K9=V9,G9=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q9=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},J9=St,Y9=K9,X9=function(t){G9(e,t);function e(r,n){var i=t.call(this)||this;return Object.defineProperties(i,{_factories:{value:new WeakMap},_manager:{value:r},_signaling:{value:n}}),n.on("updated",function(){return i.emit("updated")}),i}return Object.defineProperty(e.prototype,"level",{get:function(){return this._signaling.level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levels",{get:function(){return this._signaling.levels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteLevels",{get:function(){return this._signaling.remoteLevels},enumerable:!1,configurable:!0}),e.prototype.start=function(){var r=this;this.stop();var n=setTimeout(function(){r._timeout===n&&Z9(r).then(function(i){if(r._timeout===n){if(i.length){var o=Q9(i,1),a=o[0];r._signaling.put(a)}r.start()}})},200);this._timeout=n},e.prototype.stop=function(){clearTimeout(this._timeout),this._timeout=null},e}(J9);function Z9(t){var e=t._manager._peerConnections?Array.from(t._manager._peerConnections.values()):[],r=e.map(function(o){return o._peerConnection}).filter(function(o){return o.signalingState!=="closed"}),n=r.map(function(o){if(t._factories.has(o))return t._factories.get(o);var a=new Y9(o);return t._factories.set(o,a),a}),i=n.map(function(o){return o.next().catch(function(){return null})});return Promise.all(i).then(function(o){return o.filter(function(a){return a}).map(function(a){return a.summarize()})})}var eK=X9,tK=J.defer,rK=function(){function t(){Object.defineProperties(this,{_deferreds:{value:[]},_hasValue:{value:!1,writable:!0},_value:{value:null,writable:!0}})}return t.prototype.put=function(e){this._hasValue=!0,this._value=e;var r=this._deferreds.shift();return r&&r.resolve(e),this},t.prototype.take=function(){var e=this;if(this._hasValue&&!this._deferreds.length)return this._hasValue=!1,Promise.resolve(this._value);var r=tK();return this._deferreds.push(r),r.promise.then(function(n){return e._hasValue=!1,n})},t}(),nK=rK,iK=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oK=po,aK=nK,sK=ho,wb=5e3,cK=function(t){iK(e,t);function e(r,n,i){var o=t.call(this,r,"network_quality",i)||this;return Object.defineProperties(o,{_level:{value:null,writable:!0},_levels:{value:null,writable:!0},_remoteLevels:{value:new Map,writable:!0},_networkQualityInputs:{value:new aK},_resendTimer:{value:new sK(function(){o._resendTimer.setDelay(o._resendTimer.delay*1.5),o._sendNetworkQualityInputs()},wb,!1)},_networkQualityReportLevels:{get:function(){return{reportLevel:n.local,remoteReportLevel:n.remote}}}}),o.on("ready",function(a){a.on("message",function(s){switch(o._log.debug("Incoming: ",s),s.type){case"network_quality":o._handleNetworkQualityMessage(s);break}})}),o._sendNetworkQualityInputs(),o}return Object.defineProperty(e.prototype,"level",{get:function(){return this._level},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"levels",{get:function(){return this._levels},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteLevels",{get:function(){return this._remoteLevels},enumerable:!1,configurable:!0}),e.prototype._handleNetworkQualityMessage=function(r){var n=this,i=!1,o=null,a=r?r.local:null;typeof a=="number"?(o=a,this._levels=null):typeof a=="object"&&a&&(this._levels=a,o=typeof a.level=="number"?a.level:Math.min(a.audio.send,a.audio.recv,a.video.send,a.video.recv)),o!==null&&this.level!==o&&(this._level=o,i=!0),this._remoteLevels=r&&r.remotes?r.remotes.reduce(function(s,c){var l=n._remoteLevels.get(c.sid)||{};return l.level!==c.level&&(i=!0),s.set(c.sid,c)},new Map):this._remoteLevels,i&&this.emit("updated"),this._resendTimer.setDelay(wb),this._resendTimer.isSet&&setTimeout(function(){return n._sendNetworkQualityInputs()},1e3)},e.prototype._sendNetworkQualityInputs=function(){var r=this;return this._resendTimer.clear(),this._networkQualityInputs.take().then(function(n){r._transport&&r._transport.publish(lK(n,r._networkQualityReportLevels))}).finally(function(){r._resendTimer.start()})},e.prototype.put=function(r){this._networkQualityInputs.put(r)},e}(oK);function lK(t,e){return Object.assign({type:"network_quality"},t,e)}var uK=cK,dK=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fK=St.EventEmitter,hK=function(t){dK(e,t);function e(){var r=t.call(this)||this;return Object.defineProperties(r,{_isEnabled:{value:null,writable:!0},isEnabled:{enumerable:!0,get:function(){return this._isEnabled}}}),r}return e.prototype.disable=function(){return this.enable(!1)},e.prototype.enable=function(r){return r=typeof r=="boolean"?r:!0,this.isEnabled!==r&&(this._isEnabled=r,this.emit("updated")),this},e}(fK),$O=hK,pK=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vK=$O,mK=function(t){pK(e,t);function e(){var r=t.call(this)||this;return Object.defineProperties(r,{_revision:{value:1,writable:!0}}),r}return e.prototype.update=function(r){return r.revision<this._revision?this:(this._revision=r.revision,this.enable(r.is_recording))},e}(vK),gK=mK,bb=T&&T.__awaiter||function(t,e,r,n){function i(o){return o instanceof r?o:new r(function(a){a(o)})}return new(r||(r=Promise))(function(o,a){function s(u){try{l(n.next(u))}catch(d){a(d)}}function c(u){try{l(n.throw(u))}catch(d){a(d)}}function l(u){u.done?o(u.value):i(u.value).then(s,c)}l((n=n.apply(t,e||[])).next())})},Sb=T&&T.__generator||function(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(l){return function(u){return c([l,u])}}function c(l){if(n)throw new TypeError("Generator is already executing.");for(;a&&(a=0,l[0]&&(r=0)),r;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return r.label++,{value:l[1],done:!1};case 5:r.label++,i=l[1],l=[0];continue;case 7:l=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){r=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){r.label=l[1];break}if(l[0]===6&&r.label<o[1]){r.label=o[1],o=l;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(l);break}o[2]&&r.ops.pop(),r.trys.pop();continue}l=e.call(t,r)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},yK=uO,wl=VP,kg=J,rh=kg.filterObject,_K=kg.flatMap,wK=kg.difference,ki=Ma,bK=function(){function t(e,r,n){if(n===void 0&&(n={}),!e||typeof e.getStats!="function")throw new Error("StatsMonitor requires a stats source with getStats() method");if(!r)throw new Error("StatsMonitor requires a log instance");this._statsSource=e,this._log=r,this._publishIntervalMs=n.publishIntervalMs||1e4,this._collectionIntervalMs=n.collectionIntervalMs||1e3,this._collectionsPerPublish=Math.floor(this._publishIntervalMs/this._collectionIntervalMs),this._stallThreshold=.5,this._resumeThreshold=5,this._initializeState(),this._startStatsCollection()}return t.prototype._initializeState=function(){this._movingAverageDeltas=new Map,this._interval=null,this._statsCollectionCount=0,this._iceCandidatePublishToggle=!1,this._hasSeenActivePair=!1,this._lastNetworkType=null,this._lastQualityLimitationReasonByTrackSid=new Map,this._stalledTrackSids=new Set},t.prototype._startStatsCollection=function(){var e=this;if(this._interval){this._log.warn("StatsMonitor already started");return}this._interval=setInterval(function(){return bb(e,void 0,void 0,function(){return Sb(this,function(r){switch(r.label){case 0:return[4,this._collectAndAnalyzeStats()];case 1:return r.sent(),[2]}})})},this._collectionIntervalMs),this._log.debug("StatsMonitor started")},t.prototype._stopStatsCollection=function(){this._interval&&(clearInterval(this._interval),this._interval=null),this._log.debug("StatsMonitor stopped")},t.prototype._collectAndAnalyzeStats=function(){return bb(this,void 0,void 0,function(){var e,r,n;return Sb(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._statsSource.getStats()];case 1:return e=i.sent(),this._statsCollectionCount++,r=this._statsCollectionCount%this._collectionsPerPublish===0,r&&(this._iceCandidatePublishToggle=!this._iceCandidatePublishToggle),n=r&&this._iceCandidatePublishToggle,this._analyzeStats(e,r,n),[3,3];case 2:return i.sent(),[3,3];case 3:return[2]}})})},t.prototype._analyzeStats=function(e,r,n){var i=this;!e||e instanceof Map&&e.size===0||Array.isArray(e)&&e.length===0||e.forEach(function(o,a){i._checkNetworkTypeChanges(o),i._checkQualityLimitations(o.localVideoTrackStats),i._checkTrackStalls(o.remoteVideoTrackStats),r&&(i._publishStatsReport(a,o),n&&i._publishActiveIceCandidatePair(a,o))})},t.prototype._checkNetworkTypeChanges=function(e){var r=e.activeIceCandidatePair;if(!(!r||!r.localCandidate)){var n=r.localCandidate.networkType;if(n){if(!this._hasSeenActivePair){this._hasSeenActivePair=!0,this._lastNetworkType=n,ki.network.typeChanged(n);return}this._lastNetworkType!==n&&(this._log.debug("Network type changed: ".concat(this._lastNetworkType," -> ").concat(n)),this._lastNetworkType=n,ki.network.typeChanged(n))}}},t.prototype._checkQualityLimitations=function(e){var r=this;Array.isArray(e)&&e.forEach(function(n){var i=n.trackSid,o=n.qualityLimitationReason;if(!(!i||typeof o!="string")){var a=r._lastQualityLimitationReasonByTrackSid.get(i);a!==o&&(r._log.debug("Quality limitation reason changed for track ".concat(i,": ").concat(a||"none"," -> ").concat(o)),r._lastQualityLimitationReasonByTrackSid.set(i,o),ki.quality.limitationChanged(i,o))}})},t.prototype._checkTrackStalls=function(e){var r=this;Array.isArray(e)&&e.forEach(function(n){var i=n.trackSid,o=n.frameRateReceived;if(o!==void 0){var a=typeof o=="number"&&!isNaN(o)?o:0,s=r._stalledTrackSids.has(i);!s&&a<r._stallThreshold?(r._stalledTrackSids.add(i),r._log.debug("Track ".concat(i," stalled: frame rate ").concat(a," below threshold ").concat(r._stallThreshold)),ki.track.stalled(i,a,r._stallThreshold)):s&&a>=r._resumeThreshold&&(r._stalledTrackSids.delete(i),r._log.debug("Track ".concat(i," resumed: frame rate ").concat(a," above threshold ").concat(r._resumeThreshold)),ki.track.resumed(i,a,r._resumeThreshold))}})},t.prototype._addLocalTrackMetrics=function(e,r){var n=r.framesEncoded,i=r.packetsSent,o=r.totalEncodeTime,a=r.totalPacketSendDelay,s=Object.assign({},e),c="".concat(e.trackSid,"+").concat(e.ssrc),l=this._movingAverageDeltas.get(c)||new Map;if(typeof o=="number"&&typeof n=="number"){var u=l.get("avgEncodeDelay")||new wl;u.putSample(o*1e3,n),s.avgEncodeDelay=Math.round(u.get()),l.set("avgEncodeDelay",u)}if(typeof a=="number"&&typeof i=="number"){var d=l.get("avgPacketSendDelay")||new wl;d.putSample(a*1e3,i),s.avgPacketSendDelay=Math.round(d.get()),l.set("avgPacketSendDelay",d)}return this._movingAverageDeltas.set(c,l),s},t.prototype._addRemoteTrackMetrics=function(e,r){var n=r.estimatedPlayoutTimestamp,i=r.framesDecoded,o=r.jitterBufferDelay,a=r.jitterBufferEmittedCount,s=r.totalDecodeTime,c=Object.assign({},e),l="".concat(e.trackSid,"+").concat(e.ssrc),u=this._movingAverageDeltas.get(l)||new Map;if(typeof n=="number"&&(c.estimatedPlayoutTimestamp=n),typeof i=="number"&&typeof s=="number"){var d=u.get("avgDecodeDelay")||new wl;d.putSample(s*1e3,i),c.avgDecodeDelay=Math.round(d.get()),u.set("avgDecodeDelay",d)}if(typeof o=="number"&&typeof a=="number"){var h=u.get("avgJitterBufferDelay")||new wl;h.putSample(o*1e3,a),c.avgJitterBufferDelay=Math.round(h.get()),u.set("avgJitterBufferDelay",h)}return this._movingAverageDeltas.set(l,u),c},t.prototype._cleanupMovingAverageDeltas=function(e){var r=this,n=_K(["localAudioTrackStats","localVideoTrackStats","remoteAudioTrackStats","remoteVideoTrackStats"],function(o){return e[o].map(function(a){var s=a.ssrc,c=a.trackSid;return"".concat(c,"+").concat(s)})}),i=wK(Array.from(this._movingAverageDeltas.keys()),n);i.forEach(function(o){return r._movingAverageDeltas.delete(o)})},t.prototype._publishStatsReport=function(e,r){var n=this,i=new yK(e,r,!0);ki.quality.statsReport({audioTrackStats:i.remoteAudioTrackStats.map(function(o,a){return n._addRemoteTrackMetrics(o,r.remoteAudioTrackStats[a])}),localAudioTrackStats:i.localAudioTrackStats.map(function(o,a){return n._addLocalTrackMetrics(o,r.localAudioTrackStats[a])}),localVideoTrackStats:i.localVideoTrackStats.map(function(o,a){return n._addLocalTrackMetrics(o,r.localVideoTrackStats[a])}),peerConnectionId:i.peerConnectionId,videoTrackStats:i.remoteVideoTrackStats.map(function(o,a){return n._addRemoteTrackMetrics(o,r.remoteVideoTrackStats[a])})}),this._cleanupMovingAverageDeltas(i)},t.prototype._publishActiveIceCandidatePair=function(e,r){var n=this._replaceNullsWithDefaults(r.activeIceCandidatePair,e);ki.quality.iceCandidatePair(n)},t.prototype._replaceNullsWithDefaults=function(e,r){return e=Object.assign({availableIncomingBitrate:0,availableOutgoingBitrate:0,bytesReceived:0,bytesSent:0,consentRequestsSent:0,currentRoundTripTime:0,lastPacketReceivedTimestamp:0,lastPacketSentTimestamp:0,nominated:!1,peerConnectionId:r,priority:0,readable:!1,requestsReceived:0,requestsSent:0,responsesReceived:0,responsesSent:0,retransmissionsReceived:0,retransmissionsSent:0,state:"failed",totalRoundTripTime:0,transportId:"",writable:!1},rh(e||{},null)),e.localCandidate=Object.assign({candidateType:"host",deleted:!1,ip:"",port:0,priority:0,protocol:"udp",url:""},rh(e.localCandidate||{},null)),e.remoteCandidate=Object.assign({candidateType:"host",ip:"",port:0,priority:0,protocol:"udp",url:""},rh(e.remoteCandidate||{},null)),e},t.prototype.cleanup=function(){this._stopStatsCollection(),this._movingAverageDeltas.clear(),this._lastQualityLimitationReasonByTrackSid.clear(),this._stalledTrackSids.clear()},t}(),SK=bK,kK=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xK=$O,TK=Da,EK=ho,CK=J.buildLogLevels,PK=Ee.DEFAULT_LOG_LEVEL,OK=pn,xg=Z,RK=xg.MediaConnectionError,jK=xg.MediaDTLSTransportFailedError,AK=xg.SignalingConnectionDisconnectedError,LK=0,IK={connected:["reconnecting","disconnected"],reconnecting:["connected","disconnected"],disconnected:[]},NK=function(t){kK(e,t);function e(r,n,i,o){var a=this;o=Object.assign({logLevel:PK,RecordingSignaling:xK,Timeout:EK},o);var s=CK(o.logLevel);a=t.call(this,"connected",IK)||this;var c=o.RecordingSignaling,l=new o.Timeout(function(){a._disconnect(a._reconnectingError)},o.sessionTimeout,!1);return Object.defineProperties(a,{_instanceId:{value:LK++},_log:{value:o.log?o.log.createLog("default",a):new OK("default",a,s,o.loggerName)},_mediaConnectionIsReconnecting:{writable:!0,value:!1},_options:{value:o},_reconnectingError:{value:null,writable:!0},_sessionTimeout:{value:l},dominantSpeakerSid:{enumerable:!0,value:null,writable:!0},localParticipant:{enumerable:!0,value:r},name:{enumerable:!0,value:i},participants:{enumerable:!0,value:new Map},recording:{enumerable:!0,value:new c},sid:{enumerable:!0,value:n}}),a.on("connectionStateChanged",function(){a.connectionState==="failed"&&!["disconnected","failed"].includes(a.iceConnectionState)&&a._disconnect(new jK)}),a.on("iceConnectionStateChanged",function(){return nh(a)}),a.on("signalingConnectionStateChanged",function(){return nh(a)}),setTimeout(function(){return nh(a)}),a}return e.prototype._disconnect=function(r){return this.state!=="disconnected"?(this.preempt("disconnected",null,[r]),!0):!1},e.prototype.toString=function(){return"[RoomSignaling #".concat(this._instanceId,": ").concat(this.localParticipant?this.localParticipant.sid:"null","]")},e.prototype.connectParticipant=function(r){var n=this;return r.state==="disconnected"||this.participants.has(r.sid)?!1:(this.participants.set(r.sid,r),r.on("stateChanged",function i(o){o==="disconnected"&&(r.removeListener("stateChanged",i),n.participants.delete(r.sid),n.emit("participantDisconnected",r))}),this.emit("participantConnected",r),!0)},e.prototype.disconnect=function(){return this._disconnect()},e.prototype.setDominantSpeaker=function(r){this.dominantSpeakerSid=r,this.emit("dominantSpeakerChanged")},e}(TK);function nh(t){if(t.state==="disconnected"||t.signalingConnectionState==="disconnected"){t._sessionTimeout.clear();return}var e;t.signalingConnectionState==="reconnecting"?e=t.signalingConnectionState:t.iceConnectionState==="failed"?(t._mediaConnectionIsReconnecting=!0,e="reconnecting"):t.iceConnectionState==="new"||t.iceConnectionState==="checking"?e=t._mediaConnectionIsReconnecting?"reconnecting":"connected":(t._mediaConnectionIsReconnecting=!1,t._reconnectingError=null,t._sessionTimeout.clear(),e="connected"),e!==t.state&&(e==="reconnecting"?(t._reconnectingError=t.signalingConnectionState==="reconnecting"?new AK:new RK,t._sessionTimeout.start(),t.preempt(e,null,[t._reconnectingError])):t.preempt(e))}var FO=NK,MK=function(){function t(e){var r=e.actual,n=r===void 0?null:r,i=e.available,o=i===void 0?null:i,a=e.level,s=a===void 0?null:a;Object.defineProperties(this,{actual:{value:n,enumerable:!0},available:{value:o,enumerable:!0},level:{value:s,enumerable:!0}})}return t}(),DK=MK,$K=function(){function t(e){var r=e.fractionLost,n=r===void 0?null:r,i=e.level,o=i===void 0?null:i;Object.defineProperties(this,{fractionLost:{value:n,enumerable:!0},level:{value:o,enumerable:!0}})}return t}(),FK=$K,UK=function(){function t(e){var r=e.jitter,n=r===void 0?null:r,i=e.rtt,o=i===void 0?null:i,a=e.level,s=a===void 0?null:a;Object.defineProperties(this,{jitter:{value:n,enumerable:!0},rtt:{value:o,enumerable:!0},level:{value:s,enumerable:!0}})}return t}(),BK=UK,VK=DK,zK=FK,WK=BK,HK=function(){function t(e){var r=e.bandwidth,n=r===void 0?null:r,i=e.fractionLost,o=i===void 0?null:i,a=e.latency,s=a===void 0?null:a;Object.defineProperties(this,{bandwidth:{value:n?new VK(n):null,enumerable:!0},fractionLost:{value:o?new zK(o):null,enumerable:!0},latency:{value:s?new WK(s):null,enumerable:!0}})}return t}(),UO=HK,qK=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KK=UO,GK=function(t){qK(e,t);function e(r){return t.call(this,r)||this}return e}(KK),QK=GK,JK=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YK=UO,XK=function(t){JK(e,t);function e(r){return t.call(this,r)||this}return e}(YK),ZK=XK,eG=QK,tG=ZK,rG=function(){function t(e){var r=e.send,n=e.recv,i=e.sendStats,o=i===void 0?null:i,a=e.recvStats,s=a===void 0?null:a;Object.defineProperties(this,{send:{value:r,enumerable:!0},recv:{value:n,enumerable:!0},sendStats:{value:o?new eG(o):null,enumerable:!0},recvStats:{value:s?new tG(s):null,enumerable:!0}})}return t}(),BO=rG,nG=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iG=BO,oG=function(t){nG(e,t);function e(r){return t.call(this,r)||this}return e}(iG),aG=oG,sG=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cG=BO,lG=function(t){sG(e,t);function e(r){return t.call(this,r)||this}return e}(cG),uG=lG,dG=aG,fG=uG,hG=function(){function t(e){var r=e.level,n=e.audio,i=e.video;Object.defineProperties(this,{level:{value:r,enumerable:!0},audio:{value:n?new dG(n):null,enumerable:!0},video:{value:i?new fG(i):null,enumerable:!0}})}return t}(),pG=hG,vG=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mG=Da,gG=pG,yG={connecting:["connected"],connected:["disconnected","reconnecting"],reconnecting:["connected","disconnected"],disconnected:[]},_G=function(t){vG(e,t);function e(){var r=t.call(this,"connecting",yG)||this;return Object.defineProperties(r,{_identity:{writable:!0,value:null},_networkQualityLevel:{value:null,writable:!0},_networkQualityStats:{value:null,writable:!0},_sid:{writable:!0,value:null},identity:{enumerable:!0,get:function(){return this._identity}},sid:{enumerable:!0,get:function(){return this._sid}},tracks:{enumerable:!0,value:new Map}}),r}return Object.defineProperty(e.prototype,"networkQualityLevel",{get:function(){return this._networkQualityLevel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"networkQualityStats",{get:function(){return this._networkQualityStats},enumerable:!1,configurable:!0}),e.prototype.addTrack=function(r){return this.tracks.set(r.id||r.sid,r),this.emit("trackAdded",r),this},e.prototype.disconnect=function(){return this.state!=="disconnected"?(this.preempt("disconnected"),!0):!1},e.prototype.removeTrack=function(r){var n=this.tracks.get(r.id||r.sid);return this.tracks.delete(r.id||r.sid),n&&this.emit("trackRemoved",r),n||null},e.prototype.setNetworkQualityLevel=function(r,n){this._networkQualityLevel!==r&&(this._networkQualityLevel=r,this._networkQualityStats=n&&(n.audio||n.video)?new gG(n):null,this.emit("networkQualityLevelChanged"))},e.prototype.connect=function(r,n){return this.state==="connecting"||this.state==="reconnecting"?(this._sid||(this._sid=r),this._identity||(this._identity=n),this.preempt("connected"),!0):!1},e.prototype.reconnecting=function(){return this.state==="connecting"||this.state==="connected"?(this.preempt("reconnecting"),!0):!1},e}(mG),Tg=_G,wG=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bG=Tg,SG=function(t){wG(e,t);function e(r,n){var i=t.call(this)||this;return i.connect(r,n),i}return e}(bG),kG=SG,xG=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TG=St.EventEmitter,EG=function(t){xG(e,t);function e(r,n,i,o){var a=t.call(this)||this,s=null;return Object.defineProperties(a,{_error:{value:null,writable:!0},_isEnabled:{value:i,writable:!0},_priority:{value:o,writable:!0},_trackTransceiver:{value:null,writable:!0},_sid:{get:function(){return s},set:function(c){s===null&&(s=c)}},kind:{enumerable:!0,value:n},name:{enumerable:!0,value:r}}),a}return Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this._isEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"priority",{get:function(){return this._priority},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sid",{get:function(){return this._sid},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"trackTransceiver",{get:function(){return this._trackTransceiver},enumerable:!1,configurable:!0}),e.prototype.disable=function(){return this.enable(!1)},e.prototype.enable=function(r){return r=typeof r=="boolean"?r:!0,this.isEnabled!==r&&(this._isEnabled=r,this.emit("updated")),this},e.prototype.setTrackTransceiver=function(r){return r=r||null,this.trackTransceiver!==r&&(this._trackTransceiver=r,this.emit("updated")),this},e.prototype.setSid=function(r){return this.sid===null&&(this._sid=r,this.emit("updated")),this},e}(TG),VO=EG,CG=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),PG=VO,OG=function(t){CG(e,t);function e(r,n,i,o,a,s){var c=t.call(this,n,i,o,a)||this;return Object.defineProperties(c,{_isSwitchedOff:{value:s,writable:!0}}),c.setSid(r),c}return Object.defineProperty(e.prototype,"isSubscribed",{get:function(){return!!this.trackTransceiver},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSwitchedOff",{get:function(){return this._isSwitchedOff},enumerable:!1,configurable:!0}),e.prototype.subscribeFailed=function(r){return this.error||(this._error=r,this.emit("updated")),this},e.prototype.setPriority=function(r){return this._priority!==r&&(this._priority=r,this.emit("updated")),this},e.prototype.setSwitchedOff=function(r){return this._isSwitchedOff!==r&&(this._isSwitchedOff=r,this.emit("updated")),this},e}(PG),RG=OG,jG=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AG=RG,LG=function(t){jG(e,t);function e(r,n){return t.call(this,r.sid,r.name,r.kind,r.enabled,r.priority,n)||this}return e.prototype.update=function(r){return this.enable(r.enabled),this.setPriority(r.priority),this},e}(AG),IG=LG,NG=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MG=kG,DG=IG,$G=function(t){NG(e,t);function e(r,n,i,o,a,s){var c=t.call(this,r.sid,r.identity)||this;return s=Object.assign({RemoteTrackPublicationV2:DG},s),Object.defineProperties(c,{_revision:{writable:!0,value:null},_RemoteTrackPublicationV2:{value:s.RemoteTrackPublicationV2},_getInitialTrackSwitchOffState:{value:n},updateSubscriberTrackPriority:{value:function(l,u){return i(l,u)}},updateTrackRenderHint:{value:function(l,u){return o(l,u)}},clearTrackHint:{value:function(l){return a(l)}},revision:{enumerable:!0,get:function(){return this._revision}}}),c.update(r)}return e.prototype._getOrCreateTrack=function(r){var n=this._RemoteTrackPublicationV2,i=this.tracks.get(r.sid);if(!i){var o=this._getInitialTrackSwitchOffState(r.sid);i=new n(r,o),this.addTrack(i)}return i},e.prototype.update=function(r){var n=this;if(this.revision!==null&&r.revision<=this.revision)return this;this._revision=r.revision;var i=new Set;switch(r.tracks.forEach(function(o){var a=n._getOrCreateTrack(o);a.update(o),i.add(a)}),this.tracks.forEach(function(o){i.has(o)||n.removeTrack(o)}),r.state){case"disconnected":this.disconnect();break;case"reconnecting":this.reconnecting();break;case"connected":this.connect(this.sid,this.identity);break}return this},e}(MG),FG=$G,UG=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BG=po,VG=function(t){UG(e,t);function e(r,n){var i=t.call(this,r,"track_priority",n)||this;return Object.defineProperties(i,{_enqueuedPriorityUpdates:{value:new Map}}),i.on("ready",function(o){Array.from(i._enqueuedPriorityUpdates.keys()).forEach(function(a){o.publish({type:"track_priority",track:a,subscribe:i._enqueuedPriorityUpdates.get(a)})})}),i}return e.prototype.sendTrackPriorityUpdate=function(r,n,i){if(n!=="subscribe")throw new Error("only subscribe priorities are supported, found: "+n);this._enqueuedPriorityUpdates.set(r,i),this._transport&&this._transport.publish({type:"track_priority",track:r,subscribe:i})},e}(BG),zG=VG,WG=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HG=po,qG=function(t){WG(e,t);function e(r,n){var i=t.call(this,r,"track_switch_off",n)||this;return i.on("ready",function(o){o.on("message",function(a){switch(a.type){case"track_switch_off":i._setTrackSwitchOffUpdates(a.off||[],a.on||[]);break}})}),i}return e.prototype._setTrackSwitchOffUpdates=function(r,n){this.emit("updated",r,n)},e}(HG),KG=qG,GG=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QG=po,JG=ho,YG=J.isDeepEqual,kb=2e3,XG=1,ZG=function(t){GG(e,t);function e(r,n){var i=t.call(this,r,"render_hints",n)||this;return Object.defineProperties(i,{_trackSidsToRenderHints:{value:new Map},_responseTimer:{value:new JG(function(){i._sendAllHints(),i._responseTimer.setDelay(i._responseTimer.delay*2)},kb,!1)}}),i.on("ready",function(o){o.on("message",function(a){switch(i._log.debug("Incoming: ",a),a.type){case"render_hints":i._processHintResults(a&&a.subscriber&&a.subscriber.hints||[]);break;default:i._log.warn("Unknown message type: ",a.type);break}}),i._sendAllHints()}),i}return e.prototype._sendAllHints=function(){var r=this;Array.from(this._trackSidsToRenderHints.keys()).forEach(function(n){var i=r._trackSidsToRenderHints.get(n);i.renderDimensions&&(i.isDimensionDirty=!0),"enabled"in i&&(i.isEnabledDirty=!0)}),this._sendHints()},e.prototype._processHintResults=function(r){var n=this;this._responseTimer.clear(),this._responseTimer.setDelay(kb),r.forEach(function(i){i.result!=="OK"&&n._log.debug("Server error processing hint:",i)}),this._sendHints()},e.prototype._sendHints=function(){var r=this;if(!(!this._transport||this._responseTimer.isSet)){var n=[];if(Array.from(this._trackSidsToRenderHints.keys()).forEach(function(o){var a=r._trackSidsToRenderHints.get(o);if(a.isEnabledDirty||a.isDimensionDirty){var s={track:o};a.isEnabledDirty&&(s.enabled=a.enabled,a.isEnabledDirty=!1),a.isDimensionDirty&&(s.render_dimensions=a.renderDimensions,a.isDimensionDirty=!1),n.push(s)}}),n.length>0){var i={type:"render_hints",subscriber:{id:XG++,hints:n}};this._log.debug("Outgoing: ",i),this._transport.publish(i),this._responseTimer.start()}}},e.prototype.setTrackHint=function(r,n){var i=this._trackSidsToRenderHints.get(r)||{isEnabledDirty:!1,isDimensionDirty:!1};"enabled"in n&&i.enabled!==n.enabled&&(i.enabled=!!n.enabled,i.isEnabledDirty=!0),n.renderDimensions&&!YG(n.renderDimensions,i.renderDimensions)&&(i.renderDimensions=n.renderDimensions,i.isDimensionDirty=!0),this._trackSidsToRenderHints.set(r,i),this._sendHints()},e.prototype.clearTrackHint=function(r){this._trackSidsToRenderHints.delete(r)},e}(QG),eQ=ZG,tQ=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rQ=po,nQ=1,iQ=function(t){tQ(e,t);function e(r,n){var i=t.call(this,r,"publisher_hints",n)||this;return i.on("ready",function(o){i._log.debug("publisher_hints transport ready:",o),o.on("message",function(a){switch(i._log.debug("Incoming: ",a),a.type){case"publisher_hints":a.publisher&&a.publisher.hints&&a.publisher.id&&i._processPublisherHints(a.publisher.hints,a.publisher.id);break;default:i._log.warn("Unknown message type: ",a.type);break}})}),i}return e.prototype.sendTrackReplaced=function(r){var n=r.trackSid;if(this._transport){var i={type:"client_reset",track:n,id:nQ++};this._log.debug("Outgoing: ",i),this._transport.publish(i)}},e.prototype.sendHintResponse=function(r){var n=r.id,i=r.hints;if(this._transport){var o={type:"publisher_hints",id:n,hints:i};this._log.debug("Outgoing: ",o),this._transport.publish(o)}},e.prototype._processPublisherHints=function(r,n){try{this.emit("updated",r,n)}catch(i){this._log.error("error processing hints:",i)}},e}(rQ),oQ=iQ,aQ=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zO=T&&T.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,o=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){a={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(a)throw a.error}}return o},sQ=i9,cQ=c9,lQ=eK,uQ=uK,dQ=gK,fQ=SK,hQ=FO,pQ=FG,vQ=zG,mQ=KG,gQ=eQ,yQ=oQ,Sc=J,_Q=Sc.constants.DEFAULT_SESSION_TIMEOUT_SEC,wQ=Sc.createBandwidthProfilePayload,bQ=Sc.defer,WO=Sc.flatMap,xb=Sc.oncePerTick,SQ=Z.createTwilioError,kQ=1e4,xQ=1e3,TQ=function(t){aQ(e,t);function e(r,n,i,o,a){var s=this;n.options=Object.assign({session_timeout:_Q},n.options),a=Object.assign({DominantSpeakerSignaling:sQ,TranscriptionSignaling:cQ,NetworkQualityMonitor:lQ,NetworkQualitySignaling:uQ,RecordingSignaling:dQ,RemoteParticipantV2:pQ,TrackPrioritySignaling:vQ,TrackSwitchOffSignaling:mQ,bandwidthProfile:null,sessionTimeout:n.options.session_timeout*1e3,statsPublishIntervalMs:kQ,statsCollectionIntervalMs:xQ},a),r.setBandwidthProfile(a.bandwidthProfile);var c=n.options,l=c.signaling_region,u=c.audio_processors,d=u===void 0?[]:u;r.setSignalingRegion(l),d.includes("krisp")&&d.push("rnnoise"),r.setAudioProcessors(d),o.setIceReconnectTimeout(a.sessionTimeout),s=t.call(this,r,n.sid,n.name,a)||this;var h=function(_){return s._getTrackReceiver(_)},f=s._log;return Object.defineProperties(s,{_disconnectedParticipantRevisions:{value:new Map},_NetworkQualityMonitor:{value:a.NetworkQualityMonitor},_lastBandwidthProfileRevision:{value:r.bandwidthProfileRevision,writable:!0},_mediaStatesWarningsRevision:{value:0,writable:!0},_networkQualityMonitor:{value:null,writable:!0},_networkQualityConfiguration:{value:r.networkQualityConfiguration},_peerConnectionManager:{value:o},_published:{value:new Map},_publishedRevision:{value:0,writable:!0},_RemoteParticipantV2:{value:a.RemoteParticipantV2},_subscribed:{value:new Map},_subscribedRevision:{value:0,writable:!0},_subscriptionFailures:{value:new Map},_dominantSpeakerSignaling:{value:new a.DominantSpeakerSignaling(h,{log:f})},_transcriptionSignaling:{value:new a.TranscriptionSignaling(h,{log:f})},_networkQualitySignaling:{value:new a.NetworkQualitySignaling(h,r.networkQualityConfiguration,{log:f})},_renderHintsSignaling:{value:new gQ(h,{log:f})},_publisherHintsSignaling:{value:new yQ(h,{log:f})},_trackPrioritySignaling:{value:new a.TrackPrioritySignaling(h,{log:f})},_trackSwitchOffSignaling:{value:new a.TrackSwitchOffSignaling(h,{log:f})},_pendingSwitchOffStates:{value:new Map},_statsMonitor:{value:a.eventObserver&&a.insights?new fQ(s,f,{publishIntervalMs:a.statsPublishIntervalMs,collectionIntervalMs:a.statsCollectionIntervalMs}):null},_transport:{value:i},_trackReceiverDeferreds:{value:new Map},mediaRegion:{enumerable:!0,value:n.options.media_region||null}}),s._initTrackSwitchOffSignaling(),s._initDominantSpeakerSignaling(),s._initTranscriptionSignaling(),s._initNetworkQualityMonitorSignaling(),s._initPublisherHintSignaling(),EQ(s,r),CQ(s,o),PQ(s,i),s._statsMonitor&&s.on("stateChanged",function(_){_==="disconnected"&&s._statsMonitor&&s._statsMonitor.cleanup()}),s._update(n),s._peerConnectionManager.setEffectiveAdaptiveSimulcast(s._publisherHintsSignaling.isSetup),s}return Object.defineProperty(e.prototype,"connectionState",{get:function(){return this._peerConnectionManager.connectionState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"signalingConnectionState",{get:function(){return this._transport.state==="syncing"?"reconnecting":this._transport.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"iceConnectionState",{get:function(){return this._peerConnectionManager.iceConnectionState},enumerable:!1,configurable:!0}),e.prototype._deleteTrackReceiverDeferred=function(r){return this._trackReceiverDeferreds.delete(r)},e.prototype._getOrCreateTrackReceiverDeferred=function(r){var n=this._trackReceiverDeferreds.get(r)||bQ(),i=this._peerConnectionManager.getTrackReceivers(),o=i.find(function(a){return a.id===r&&a.readyState!=="ended"});return o?n.resolve(o):this._trackReceiverDeferreds.set(r,n),n},e.prototype._addTrackReceiver=function(r){var n=this._getOrCreateTrackReceiverDeferred(r.id);return n.resolve(r),this},e.prototype._disconnect=function(r){var n=t.prototype._disconnect.call(this,r);return n&&(this._teardownNetworkQualityMonitor(),this._transport.disconnect(),this._peerConnectionManager.close()),this.localParticipant.tracks.forEach(function(i){i.publishFailed(r||new Error("LocalParticipant disconnected"))}),n},e.prototype._getTrackReceiver=function(r){var n=this;return this._getOrCreateTrackReceiverDeferred(r).promise.then(function(i){return n._deleteTrackReceiverDeferred(r),i})},e.prototype._getInitialTrackSwitchOffState=function(r){var n=this._pendingSwitchOffStates.get(r)||!1;return this._pendingSwitchOffStates.delete(r),n&&this._log.warn("[".concat(r,"] was initially switched off! ")),n},e.prototype._getTrackSidsToTrackSignalings=function(){var r=WO(this.participants,function(n){return Array.from(n.tracks)});return new Map(r)},e.prototype._getOrCreateRemoteParticipant=function(r){var n=this,i=this._RemoteParticipantV2,o=this.participants.get(r.sid),a=this;return o||(o=new i(r,function(s){return n._getInitialTrackSwitchOffState(s)},function(s,c){return n._trackPrioritySignaling.sendTrackPriorityUpdate(s,"subscribe",c)},function(s,c){return n._renderHintsSignaling.setTrackHint(s,c)},function(s){return n._renderHintsSignaling.clearTrackHint(s)}),o.on("stateChanged",function s(c){c==="disconnected"&&(o.removeListener("stateChanged",s),a.participants.delete(o.sid),a._disconnectedParticipantRevisions.set(o.sid,o.revision))}),this.connectParticipant(o)),o},e.prototype._getState=function(){return{participant:this.localParticipant.getState()}},e.prototype._maybeAddBandwidthProfile=function(r){var n=this.localParticipant,i=n.bandwidthProfile,o=n.bandwidthProfileRevision;return i&&this._lastBandwidthProfileRevision<o?(this._lastBandwidthProfileRevision=o,Object.assign({bandwidth_profile:wQ(i)},r)):r},e.prototype._publishNewLocalParticipantState=function(){this._transport.publish(this._maybeAddBandwidthProfile(this._getState()))},e.prototype._publishPeerConnectionState=function(r){this._transport.publish(Object.assign({peer_connections:[r]},this._getState()))},e.prototype._update=function(r){var n=this;if(r.subscribed&&r.subscribed.revision>this._subscribedRevision){this._subscribedRevision=r.subscribed.revision,r.subscribed.tracks.forEach(function(a){a.id?(n._subscriptionFailures.delete(a.sid),n._subscribed.set(a.sid,a.id)):a.error&&!n._subscriptionFailures.has(a.sid)&&n._subscriptionFailures.set(a.sid,a.error)});var i=new Set(r.subscribed.tracks.filter(function(a){return!!a.id}).map(function(a){return a.sid}));this._subscribed.forEach(function(a,s){i.has(s)||n._subscribed.delete(s)})}var o=new Set;return(r.participants||[]).forEach(function(a){if(a.sid!==n.localParticipant.sid){var s=n._disconnectedParticipantRevisions.get(a.sid);if(!(s&&a.revision<=s)){s&&n._disconnectedParticipantRevisions.delete(a.sid);var c=n._getOrCreateRemoteParticipant(a);c.update(a),o.add(c)}}}),r.type==="synced"&&this.participants.forEach(function(a){o.has(a)||a.disconnect()}),OQ(this),r.peer_connections&&this._peerConnectionManager.update(r.peer_connections,r.type==="synced"),r.recording&&this.recording.update(r.recording),r.published&&r.published.revision>this._publishedRevision&&(this._publishedRevision=r.published.revision,r.published.tracks.forEach(function(a){a.sid&&n._published.set(a.id,a.sid)}),this.localParticipant.update(r.published)),r.participant&&this.localParticipant.connect(r.participant.sid,r.participant.identity),[this._dominantSpeakerSignaling,this._transcriptionSignaling,this._networkQualitySignaling,this._trackPrioritySignaling,this._trackSwitchOffSignaling,this._renderHintsSignaling,this._publisherHintsSignaling].forEach(function(a){var s=a.channel;!a.isSetup&&r.media_signaling&&r.media_signaling[s]&&r.media_signaling[s].transport&&r.media_signaling[s].transport.type==="data-channel"&&a.setup(r.media_signaling[s].transport.label)}),r.type==="warning"&&r.states&&r.states.revision>this._mediaStatesWarningsRevision&&(this._mediaStatesWarningsRevision=r.states.revision,this.localParticipant.updateMediaStates(r.states)),this},e.prototype._initPublisherHintSignaling=function(){var r=this;this._publisherHintsSignaling.on("updated",function(i,o){Promise.all(i.map(function(a){return r.localParticipant.setPublisherHint(a.track,a.encodings).then(function(s){return{track:a.track,result:s}})})).then(function(a){r._publisherHintsSignaling.sendHintResponse({id:o,hints:a})})});var n=function(i){i.kind==="video"&&i.trackTransceiver.on("replaced",function(){r._publisherHintsSignaling.sendTrackReplaced({trackSid:i.sid})})};Array.from(this.localParticipant.tracks.values()).forEach(function(i){return n(i)}),this.localParticipant.on("trackAdded",function(i){return n(i)})},e.prototype._initTrackSwitchOffSignaling=function(){var r=this;this._trackSwitchOffSignaling.on("updated",function(n,i){try{r._log.debug("received trackSwitch: ",{tracksOn:i,tracksOff:n});var o=new Map;i.forEach(function(a){return o.set(a,!0)}),n.forEach(function(a){o.get(a)&&r._log.warn("".concat(a," is DUPLICATED in both tracksOff and tracksOn list")),o.set(a,!1)}),r.participants.forEach(function(a){a.tracks.forEach(function(s){var c=o.get(s.sid);typeof c<"u"&&(s.setSwitchedOff(!c),o.delete(s.sid))})}),o.forEach(function(a,s){return r._pendingSwitchOffStates.set(s,!a)})}catch(a){r._log.error("error processing track switch off:",a)}})},e.prototype._initDominantSpeakerSignaling=function(){var r=this;this._dominantSpeakerSignaling.on("updated",function(){return r.setDominantSpeaker(r._dominantSpeakerSignaling.loudestParticipantSid)})},e.prototype._initTranscriptionSignaling=function(){var r=this;this._transcriptionSignaling.on("transcription",function(n){r.emit("transcription",n)})},e.prototype._initNetworkQualityMonitorSignaling=function(){var r=this;this._networkQualitySignaling.on("ready",function(){var n=new r._NetworkQualityMonitor(r._peerConnectionManager,r._networkQualitySignaling);r._networkQualityMonitor=n,n.on("updated",function(){r.iceConnectionState!=="failed"&&(r.localParticipant.setNetworkQualityLevel(n.level,n.levels),r.participants.forEach(function(i){var o=n.remoteLevels.get(i.sid);o&&i.setNetworkQualityLevel(o.level,o)}))}),n.start()}),this._networkQualitySignaling.on("teardown",function(){return r._teardownNetworkQualityMonitor()})},e.prototype._teardownNetworkQualityMonitor=function(){this._networkQualityMonitor&&(this._networkQualityMonitor.stop(),this._networkQualityMonitor=null)},e.prototype.getStats=function(){var r=this;return this._peerConnectionManager.getStats().then(function(n){return new Map(Array.from(n).map(function(i){var o=zO(i,2),a=o[0],s=o[1];return[a,Object.assign({},s,{localAudioTrackStats:Tb(r,s.localAudioTrackStats),localVideoTrackStats:Tb(r,s.localVideoTrackStats),remoteAudioTrackStats:Eb(r,s.remoteAudioTrackStats),remoteVideoTrackStats:Eb(r,s.remoteVideoTrackStats)})]}))})},e}(hQ);function HO(t,e){return e.reduce(function(r,n){var i=t.get(n.trackId);return i?[Object.assign({},n,{trackSid:i})].concat(r):r},[])}function Tb(t,e){return HO(t._published,e)}function Eb(t,e){var r=new Map(Array.from(t._subscribed.entries()).map(function(n){var i=zO(n,2),o=i[0],a=i[1];return[a,o]}));return HO(r,e)}function EQ(t,e){var r=xb(function(){t._publishNewLocalParticipantState()}),n=xb(function(){var i=WO(e.tracks,function(o){return o.trackTransceiver});t._peerConnectionManager.setTrackSenders(i)});e.on("trackAdded",n),e.on("trackRemoved",n),e.on("updated",r),t.on("stateChanged",function i(o){o==="disconnected"&&(e.removeListener("trackAdded",n),e.removeListener("trackRemoved",n),e.removeListener("updated",r),t.removeListener("stateChanged",i),e.disconnect())}),t.on("signalingConnectionStateChanged",function(){var i=t.localParticipant,o=t.signalingConnectionState,a=i.identity,s=i.sid;switch(o){case"connected":i.connect(s,a);break;case"reconnecting":i.reconnecting();break}})}function CQ(t,e){e.on("description",function(n){t._publishPeerConnectionState(n)}),e.dequeue("description"),e.on("candidates",function(n){t._publishPeerConnectionState(n)}),e.dequeue("candidates"),e.on("trackAdded",t._addTrackReceiver.bind(t)),e.dequeue("trackAdded"),e.getTrackReceivers().forEach(t._addTrackReceiver,t),e.on("connectionStateChanged",function(){t.emit("connectionStateChanged")}),e.on("iceConnectionStateChanged",function(){t.emit("iceConnectionStateChanged"),t.iceConnectionState==="failed"&&(t.localParticipant.networkQualityLevel!==null&&t.localParticipant.setNetworkQualityLevel(0),t.participants.forEach(function(r){r.networkQualityLevel!==null&&r.setNetworkQualityLevel(0)}))})}function PQ(t,e){e.on("message",t._update.bind(t)),e.on("stateChanged",function r(n,i){n==="disconnected"&&(t.state!=="disconnected"&&t._disconnect(i),e.removeListener("stateChanged",r)),t.emit("signalingConnectionStateChanged")})}function OQ(t){var e=t._getTrackSidsToTrackSignalings();t._subscriptionFailures.forEach(function(r,n){var i=e.get(n);i&&(t._subscriptionFailures.delete(n),i.subscribeFailed(SQ(r.code,r.message)))}),e.forEach(function(r){var n=t._subscribed.get(r.sid);(!n||r.isSubscribed&&r.trackTransceiver.id!==n)&&r.setTrackTransceiver(null),n&&t._getTrackReceiver(n).then(function(i){return r.setTrackTransceiver(i)})})}var RQ=TQ,jQ=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AQ=Da,qO=FC,LQ=fO,IQ=Ee.reconnectBackoffConfig,NQ=ho,Eg=Ee,MQ=Eg.SDK_NAME,DQ=Eg.SDK_VERSION,$Q=Eg.SDP_FORMAT,Ua=J,FQ=Ua.createBandwidthProfilePayload,UQ=Ua.createMediaSignalingPayload,BQ=Ua.createMediaWarningsPayload,VQ=Ua.createSubscribePayload,zQ=Ua.getUserAgent,WQ=Ua.isNonArrayObject,Rd=Z,HQ=Rd.createTwilioError,ih=Rd.RoomCompletedError,qQ=Rd.SignalingConnectionError,KQ=Rd.SignalingServerBusyError,GQ=1,oh=2,QQ={connecting:["connected","disconnected"],connected:["disconnected","syncing"],syncing:["connected","disconnected"],disconnected:[]},JQ=function(t){jQ(e,t);function e(r,n,i,o,a,s){var c=this;return s=Object.assign({Backoff:LQ,TwilioConnection:qO,iceServers:null,trackPriority:!0,trackSwitchOff:!0,renderHints:!0,userAgent:zQ()},s),c=t.call(this,"connecting",QQ)||this,Object.defineProperties(c,{_accessToken:{value:n},_adaptiveSimulcast:{value:s.adaptiveSimulcast},_automaticSubscription:{value:s.automaticSubscription},_bandwidthProfile:{value:s.bandwidthProfile},_dominantSpeaker:{value:s.dominantSpeaker},_receiveTranscriptions:{value:s.receiveTranscriptions},_eventObserver:{value:s.eventObserver,writable:!1},_renderHints:{value:s.renderHints},_iceServersStatus:{value:Array.isArray(s.iceServers)?"overrode":"acquire"},_localParticipant:{value:i},_name:{value:r},_networkQuality:{value:WQ(s.networkQuality)||s.networkQuality},_notifyWarnings:{value:s.notifyWarnings},_options:{value:s},_peerConnectionManager:{value:o},_sessionTimer:{value:null,writable:!0},_sessionTimeoutMS:{value:0,writable:!0},_reconnectBackoff:{value:new s.Backoff(IQ)},_session:{value:null,writable:!0},_trackPriority:{value:s.trackPriority},_trackSwitchOff:{value:s.trackSwitchOff},_twilioConnection:{value:null,writable:!0},_updatesReceived:{value:[]},_updatesToSend:{value:[]},_userAgent:{value:s.userAgent},_wsServer:{value:a}}),XQ(c),c}return e.prototype._createConnectOrSyncOrDisconnectMessage=function(){if(this.state==="connected")return null;if(this.state==="disconnected")return{session:this._session,type:"disconnect",version:oh};var r={connecting:"connect",syncing:"sync"}[this.state],n={name:this._name,participant:this._localParticipant.getState(),peer_connections:this._peerConnectionManager.getStates(),type:r,version:oh};return n.type==="connect"?(n.ice_servers=this._iceServersStatus,n.publisher={name:MQ,sdk_version:DQ,user_agent:this._userAgent},this._bandwidthProfile&&(n.bandwidth_profile=FQ(this._bandwidthProfile)),this._notifyWarnings&&(n.participant.media_warnings=BQ(this._notifyWarnings)),n.media_signaling=UQ(this._dominantSpeaker,this._networkQuality,this._trackPriority,this._trackSwitchOff,this._adaptiveSimulcast,this._renderHints,this._receiveTranscriptions),n.subscribe=VQ(this._automaticSubscription),n.format=$Q,n.token=this._accessToken):n.type==="sync"?(n.session=this._session,n.token=this._accessToken):n.type==="update"&&(n.session=this._session),n},e.prototype._createIceMessage=function(){return{edge:"roaming",token:this._accessToken,type:"ice",version:GQ}},e.prototype._sendConnectOrSyncOrDisconnectMessage=function(){var r=this._createConnectOrSyncOrDisconnectMessage();r&&this._twilioConnection.sendMessage(r)},e.prototype.disconnect=function(r){return this.state!=="disconnected"?(this.preempt("disconnected",null,[r]),this._sendConnectOrSyncOrDisconnectMessage(),this._twilioConnection.close(),!0):!1},e.prototype.publish=function(r){switch(this.state){case"connected":return this._twilioConnection.sendMessage(Object.assign({session:this._session,type:"update",version:oh},r)),!0;case"connecting":case"syncing":return this._updatesToSend.push(r),!0;case"disconnected":default:return!1}},e.prototype.publishEvent=function(r,n,i,o){this._eventObserver.emit("event",{group:r,name:n,level:i,payload:o})},e.prototype.sync=function(){return this.state==="connected"?(this.preempt("syncing"),this._sendConnectOrSyncOrDisconnectMessage(),!0):!1},e.prototype._setSession=function(r,n){this._session=r,this._sessionTimeoutMS=n*1e3},e.prototype._getReconnectTimer=function(){var r=this;return this._sessionTimeoutMS===0?null:(this._sessionTimer||(this._sessionTimer=new NQ(function(){r._sessionTimer&&(r._sessionTimeoutMS=0)},this._sessionTimeoutMS)),new Promise(function(n){r._reconnectBackoff.backoff(n)}))},e.prototype._clearReconnectTimer=function(){this._reconnectBackoff.reset(),this._sessionTimer&&(this._sessionTimer.clear(),this._sessionTimer=null)},e}(AQ);function Cb(t){return Array.from(t.reduce(function(e,r){var n=e.get(r.id)||r;return(!n.description&&r.description||n.description&&r.description&&r.description.revision>n.description.revision)&&(n.description=r.description),(!n.ice&&r.ice||n.ice&&r.ice&&r.ice.revision>n.ice.revision)&&(n.ice=r.ice),e.set(n.id,n),e},new Map).values())}function YQ(t){return t.reduce(function(e,r){return(!e.participant&&r.participant||e.participant&&r.participant&&r.participant.revision>e.participant.revision)&&(e.participant=r.participant),!e.peer_connections&&r.peer_connections?e.peer_connections=Cb(r.peer_connections):e.peer_connections&&r.peer_connections&&(e.peer_connections=Cb(e.peer_connections.concat(r.peer_connections))),e},{})}function XQ(t){function e(){if(t.state!=="disconnected"){t._twilioConnection&&t._twilioConnection.removeListener("message",n);var c=t._iceServersStatus,l=t._options,u=t._wsServer,d=t.state,h=l.TwilioConnection,f=new h(u,Object.assign({helloBody:d==="connecting"&&c==="acquire"?t._createIceMessage():t._createConnectOrSyncOrDisconnectMessage()},l));f.once("close",function(_){_===h.CloseReason.LOCAL?r():r(new Error(_))}),f.on("message",n),t._twilioConnection=f}}function r(c){if(t.state!=="disconnected"){if(!c){t.disconnect();return}var l=t._getReconnectTimer();if(!l){var u=c.message===qO.CloseReason.BUSY?new KQ:new qQ;t.disconnect(u);return}t.state==="connected"&&t.preempt("syncing"),l.then(e)}}function n(c){if(t.state!=="disconnected"){if(c.type==="error"){t.disconnect(HQ(c.code,c.message));return}switch(t.state){case"connected":switch(c.type){case"connected":case"synced":case"update":case"warning":t.emit("message",c);return;case"disconnected":t.disconnect(c.status==="completed"?new ih:null);return;default:return}case"connecting":switch(c.type){case"iced":t._options.onIced(c.ice_servers).then(function(){t._sendConnectOrSyncOrDisconnectMessage()});return;case"connected":t._setSession(c.session,c.options.session_timeout),t.emit("connected",c),t.preempt("connected");return;case"synced":case"update":t._updatesReceived.push(c);return;case"disconnected":t.disconnect(c.status==="completed"?new ih:null);return;default:return}case"syncing":switch(c.type){case"connected":case"update":t._updatesReceived.push(c);return;case"synced":t._clearReconnectTimer(),t.emit("message",c),t.preempt("connected");return;case"disconnected":t.disconnect(c.status==="completed"?new ih:null);return;default:return}default:return}}}t.on("stateChanged",function c(l){switch(l){case"connected":{var u=t._updatesToSend.splice(0);u.length&&t.publish(YQ(u)),t._updatesReceived.splice(0).forEach(function(d){return t.emit("message",d)});return}case"disconnected":t._twilioConnection.removeListener("message",n),t.removeListener("stateChanged",c);return;case"syncing":return;default:return}});var i=t._options,o=t._iceServersStatus,a=i.iceServers,s=i.onIced;o==="overrode"?s(a).then(e):e()}var ZQ=JQ,eJ=fg,tJ=J7,rJ=RQ,nJ=ZQ,KO=Z,iJ=KO.SignalingConnectionDisconnectedError,oJ=KO.SignalingIncomingMessageInvalidError,GO=J,aJ=GO.flatMap,sJ=GO.createRoomConnectingEventPayload;function cJ(t,e,r,n,i,o){o=Object.assign({PeerConnectionManager:tJ,RoomV2:rJ,Transport:nJ},o);var a=i.video[0]&&i.video[0].adaptiveSimulcast===!0,s=o.PeerConnectionManager,c=o.RoomV2,l=o.Transport,u=o.iceServers,d=o.log,h=new s(n,i,o),f=aJ(r.tracks,function(y){return[y.trackTransceiver]});h.setTrackSenders(f);var _=new Error("Canceled"),v,g=new eJ(function(y,m,w){var S=function(V){return w()?(m(_),Promise.reject(_)):(d.debug("Got ICE servers:",V),o.iceServers=V,h.setConfiguration(o),h.createAndOffer().then(function(){if(w())throw m(_),_;d.debug("createAndOffer() succeeded."),h.dequeue("description")}).catch(function(W){throw d.error("createAndOffer() failed:",W),m(W),W}))},k=o.automaticSubscription,E=o.bandwidthProfile,x=o.dominantSpeaker,C=o.receiveTranscriptions,R=o.environment,A=o.eventObserver,D=o.loggerName,O=o.logLevel,I=o.name,P=o.networkMonitor,L=o.networkQuality,N=o.notifyWarnings,$=o.realm,j=o.sdpSemantics,M=!!E,B=!!E,U=!!E&&(o.clientTrackSwitchOffControl!=="disabled"||o.contentPreferencesMode!=="disabled"),Q=Object.assign({adaptiveSimulcast:a,automaticSubscription:k,dominantSpeaker:x,receiveTranscriptions:C,environment:R,eventObserver:A,loggerName:D,logLevel:O,networkMonitor:P,networkQuality:L,notifyWarnings:N,iceServers:u,onIced:S,realm:$,renderHints:U,sdpSemantics:j,trackPriority:M,trackSwitchOff:B},E?{bandwidthProfile:E}:{});v=new l(I,t,r,h,e,Q);var K=sJ(o);A.emit("event",K),v.once("connected",function(V){if(d.debug("Transport connected:",V),w()){m(_);return}var W=V.participant;if(!W){m(new oJ);return}y(new c(r,V,v,h,o))}),v.once("stateChanged",function(V,W){V==="disconnected"?(v=null,m(W||new iJ)):d.debug("Transport state changed:",V)})},function(){v&&(v.disconnect(),v=null)});return g.catch(function(){v&&(v.disconnect(),v=null),h.close()}),g}var lJ=cJ,uJ=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dJ=Tg,fJ=function(t){uJ(e,t);function e(){var r=t.call(this)||this;return Object.defineProperties(r,{_publicationsToTrackSenders:{value:new Map},_trackSendersToPublications:{value:new Map}}),r}return e.prototype.addTrack=function(r,n,i,o){o===void 0&&(o=null);var a=this._createLocalTrackPublicationSignaling(r,n,i,o);return this._trackSendersToPublications.set(r,a),this._publicationsToTrackSenders.set(a,r),t.prototype.addTrack.call(this,a),this},e.prototype.getPublication=function(r){return this._trackSendersToPublications.get(r)||null},e.prototype.getSender=function(r){return this._publicationsToTrackSenders.get(r)||null},e.prototype.removeTrack=function(r){var n=this._trackSendersToPublications.get(r);if(!n)return null;this._trackSendersToPublications.delete(r),this._publicationsToTrackSenders.delete(n);var i=t.prototype.removeTrack.call(this,n);return i&&n.stop(),n},e}(dJ),hJ=fJ,pJ=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vJ=VO,mJ=function(t){pJ(e,t);function e(r,n,i){var o=this,a=r.clone();r.kind!=="data"&&(a.track.enabled=r.track.enabled),r=a;var s=r.kind==="data"?!0:r.track.enabled;return o=t.call(this,n,r.kind,s,i)||this,o.setTrackTransceiver(r),Object.defineProperties(o,{_updatedPriority:{value:i,writable:!0},id:{enumerable:!0,value:r.id}}),o}return Object.defineProperty(e.prototype,"updatedPriority",{get:function(){return this._updatedPriority},enumerable:!1,configurable:!0}),e.prototype.enable=function(r){return r=typeof r=="boolean"?r:!0,this.trackTransceiver.track.enabled=r,t.prototype.enable.call(this,r)},e.prototype.publishFailed=function(r){return gJ(this,r)&&this.emit("updated"),this},e.prototype.setPriority=function(r){return this._updatedPriority!==r&&(this._updatedPriority=r,this.emit("updated")),this},e.prototype.setSid=function(r){return this._error?this:t.prototype.setSid.call(this,r)},e.prototype.stop=function(){this.trackTransceiver.stop()},e}(vJ);function gJ(t,e){return t._sid!==null||t._error?!1:(t._error=e,!0)}var yJ=mJ,_J=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wJ=yJ,bJ=OE,SJ=Z.createTwilioError,kJ=function(t){_J(e,t);function e(r,n,i,o,a){var s=t.call(this,r,n,i)||this;return Object.defineProperties(s,{_log:{value:a.log.createLog("default",s)},_mediaStates:{value:{recordings:null},writable:!0},_noiseCancellationVendor:{value:o}}),s}return e.prototype.getState=function(){var r={enabled:this.isEnabled,id:this.id,kind:this.kind,name:this.name,priority:this.updatedPriority};return this._noiseCancellationVendor&&(r.audio_processor=this._noiseCancellationVendor),r},e.prototype.toString=function(){return"[LocalTrackPublicationV2: ".concat(this.sid,"]")},e.prototype.update=function(r){switch(r.state){case"ready":this.setSid(r.sid);break;case"failed":{var n=r.error;this.publishFailed(SJ(n.code,n.message));break}}return this},e.prototype.updateMediaStates=function(r){if(!r||!r.recordings||this._mediaStates.recordings===r.recordings)return this;switch(this._mediaStates.recordings=r.recordings,this._mediaStates.recordings){case"OK":this._log.info("Warnings have cleared."),this.emit("warningsCleared");break;case"NO_MEDIA":this._log.warn("Recording media lost."),this.emit("warning",bJ.recordingMediaLost);break;default:this._log.warn("Unknown media state detected: ".concat(this._mediaStates.recordings));break}return this},e}(wJ),xJ=kJ,TJ=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),EJ=hJ,CJ=xJ,PJ=Ee.DEFAULT_LOG_LEVEL,OJ=pn,QO=J,RJ=QO.buildLogLevels,jJ=QO.isDeepEqual,AJ=function(t){TJ(e,t);function e(r,n,i){var o=this;i=Object.assign({logLevel:PJ,LocalTrackPublicationV2:CJ},i),o=t.call(this)||this;var a=RJ(i.logLevel);return Object.defineProperties(o,{_bandwidthProfile:{value:null,writable:!0},_bandwidthProfileRevision:{value:0,writable:!0},_encodingParameters:{value:r},_removeListeners:{value:new Map},_LocalTrackPublicationV2:{value:i.LocalTrackPublicationV2},_log:{value:i.log?i.log.createLog("default",o):new OJ("default",o,a,i.loggerName)},_publishedRevision:{writable:!0,value:0},_revision:{writable:!0,value:1},_signalingRegion:{value:null,writable:!0},audioProcessors:{value:[],writable:!0},bandwidthProfile:{enumerable:!0,get:function(){return this._bandwidthProfile}},bandwidthProfileRevision:{enumerable:!0,get:function(){return this._bandwidthProfileRevision}},networkQualityConfiguration:{enumerable:!0,value:n},revision:{enumerable:!0,get:function(){return this._revision}},signalingRegion:{enumerable:!0,get:function(){return this._signalingRegion}}}),o}return e.prototype.toString=function(){return"[LocalParticipantSignaling: ".concat(this.sid,"]")},e.prototype.setSignalingRegion=function(r){this._signalingRegion||(this._signalingRegion=r)},e.prototype.setBandwidthProfile=function(r){jJ(this._bandwidthProfile,r)||(this._bandwidthProfile=JSON.parse(JSON.stringify(r)),this._bandwidthProfileRevision++,this.didUpdate())},e.prototype.setAudioProcessors=function(r){this.audioProcessors=r},e.prototype.getParameters=function(){return this._encodingParameters},e.prototype.setParameters=function(r){return this._encodingParameters.update(r),this},e.prototype.update=function(r){return this._publishedRevision>=r.revision?this:(this._publishedRevision=r.revision,r.tracks.forEach(function(n){var i=this.tracks.get(n.id);i&&i.update(n)},this),this)},e.prototype.updateMediaStates=function(r){return!r||!r.tracks?this:(Array.from(this.tracks.values()).forEach(function(n){var i=r.tracks[n.sid];i&&n.updateMediaStates(i)}),this)},e.prototype._createLocalTrackPublicationSignaling=function(r,n,i,o){return new this._LocalTrackPublicationV2(r,n,i,o,{log:this._log})},e.prototype.addTrack=function(r,n,i,o){var a=this;t.prototype.addTrack.call(this,r,n,i,o);var s=this.getPublication(r),c=s.isEnabled,l=s.updatedPriority,u=function(){(c!==s.isEnabled||l!==s.updatedPriority)&&(a.didUpdate(),c=s.isEnabled,l=s.updatedPriority)};return s.on("updated",u),this._removeListener(s),this._removeListeners.set(s,function(){return s.removeListener("updated",u)}),this.didUpdate(),this},e.prototype._removeListener=function(r){var n=this._removeListeners.get(r);n&&n()},e.prototype.getState=function(){return{revision:this.revision,tracks:Array.from(this.tracks.values()).map(function(r){return r.getState()})}},e.prototype.didUpdate=function(){this._revision++,this.emit("updated")},e.prototype.removeTrack=function(r){var n=t.prototype.removeTrack.call(this,r);return n&&(r.removeClone(n.trackTransceiver),this._removeListener(n),this.didUpdate()),n},e.prototype.setNetworkQualityConfiguration=function(r){this.networkQualityConfiguration.update(r)},e.prototype.setPublisherHint=function(r,n){var i=Array.from(this.tracks.values()).find(function(o){return o.sid===r});return i?i.trackTransceiver.setPublisherHint(n):(this._log.warn("track:".concat(r," not found")),Promise.resolve("UNKNOWN_TRACK"))},e}(EJ),LJ=AJ,IJ=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NJ=Tg,MJ=FO,DJ=Da,$J={closed:["opening"],opening:["closed","open"],open:["closed","closing"],closing:["closed","open"]},FJ=function(t){IJ(e,t);function e(){return t.call(this,"closed",$J)||this}return e.prototype._close=function(r){return this.transition("closing",r),this.transition("closed",r),Promise.resolve(this)},e.prototype._connect=function(r,n,i,o,a){r.connect("PA00000000000000000000000000000000","test");var s="RM00000000000000000000000000000000",c=Promise.resolve(new MJ(r,s,a));return c.cancel=function(){},c},e.prototype._open=function(r){return this.transition("opening",r),this.transition("open",r),Promise.resolve(this)},e.prototype.close=function(){var r=this;return this.bracket("close",function(n){switch(r.state){case"closed":return r;case"open":return r._close(n);default:throw new Error('Unexpected Signaling state "'.concat(r.state,'"'))}})},e.prototype.connect=function(r,n,i,o,a){var s=this;return this.bracket("connect",function c(l){switch(s.state){case"closed":return s._open(l).then(c.bind(null,l));case"open":return s.releaseLockCompletely(l),s._connect(r,n,i,o,a);default:throw new Error('Unexpected Signaling state "'.concat(s.state,'"'))}})},e.prototype.createLocalParticipantSignaling=function(){return new NJ},e.prototype.open=function(){var r=this;return this.bracket("open",function(n){switch(r.state){case"closed":return r._open(n);case"open":return r;default:throw new Error('Unexpected Signaling state "'.concat(r.state,'"'))}})},e}(DJ),UJ=FJ,BJ=T&&T.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(n[o]=i[o])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),VJ=lJ,zJ=LJ,WJ=UJ,HJ=function(t){BJ(e,t);function e(r,n){var i=this;return n=Object.assign({createCancelableRoomSignalingPromise:VJ},n),i=t.call(this)||this,Object.defineProperties(i,{_createCancelableRoomSignalingPromise:{value:n.createCancelableRoomSignalingPromise},_options:{value:n},_wsServer:{value:r}}),i}return e.prototype._connect=function(r,n,i,o,a){return a=Object.assign({},this._options,a),this._createCancelableRoomSignalingPromise.bind(null,n,this._wsServer,r,i,o,a)},e.prototype.createLocalParticipantSignaling=function(r,n){return new zJ(r,n)},e}(WJ),qJ=HJ,KJ=uo.MediaStreamTrack,Cg=be,GJ=Cg.guessBrowser,QJ=Cg.guessBrowserVersion,JJ=Cg.isCodecSupported,YJ=cW,XJ=fW,ZJ=p6,eY=HP,tY=m6,Pg=ia,rY=Pg.LocalAudioTrack,nY=Pg.LocalDataTrack,iY=Pg.LocalVideoTrack,oY=b6,aY=AH,sY=qJ,kc=J,cY=kc.asLocalTrack,lY=kc.buildLogLevels,uY=kc.createRoomConnectedEventPayload,dY=kc.filterObject,Pb=kc.isNonArrayObject,vn=Ee,fY=vn.DEFAULT_ENVIRONMENT,hY=vn.DEFAULT_LOG_LEVEL,pY=vn.DEFAULT_LOGGER_NAME,vY=vn.DEFAULT_REALM,mY=vn.DEFAULT_REGION,gY=vn.WS_SERVER,yY=vn.SDK_NAME,_Y=vn.SDK_VERSION,bl=vn.typeErrors,xi=fg,wY=zP,bY=pn,SY=_c.validateBandwidthProfile,ah=Ma,sh=GJ()==="safari"&&QJ(),kY=0,Ob=!1,JO=!1;if(sh){var Rb=sh.major,xY=sh.minor;JO=Rb<12||Rb===12&&xY<1}var TY=new Set([{didWarn:!1,shouldDelete:!0,name:"abortOnIceServersTimeout"},{didWarn:!1,shouldDelete:!0,name:"dscpTagging",newName:"enableDscp"},{didWarn:!1,shouldDelete:!0,name:"iceServersTimeout"},{didWarn:!1,shouldDelete:!1,name:"eventListener",newName:"Video.Logger"},{didWarn:!1,shouldDelete:!1,name:"logLevel",newName:"Video.Logger"}]),EY=new Set([{didWarn:!1,shouldDelete:!1,name:"maxTracks",newName:"bandwidthProfile.video.clientTrackSwitchOffControl"},{didWarn:!1,shouldDelete:!1,name:"renderDimensions",newName:"bandwidthProfile.video.contentPreferencesMode"}]);function CY(t,e){if(typeof e>"u"&&(e={}),!Pb(e))return xi.reject(bl.INVALID_TYPE("options","object"));var r=e.Log||bY,n=e.loggerName||pY,i=e.logLevel||hY,o=lY(i),a="[connect #".concat(++kY,"]"),s;try{s=new r("default",a,o,n)}catch(x){return xi.reject(x)}jb(e,s,TY);var c=e.preferredVideoCodecs==="auto";if(c&&(e.preferredVideoCodecs=[{codec:"VP8",simulcast:!0,adaptiveSimulcast:!0}]),e.maxVideoBitrate&&c)return s.error('ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'),xi.reject(bl.ILLEGAL_INVOKE("connect",'ConnectOptions "maxVideoBitrate" is not compatible with "preferredVideoCodecs=auto"'));e=Object.assign({automaticSubscription:!0,dominantSpeaker:!1,enableDscp:!1,receiveTranscriptions:!1,environment:fY,eventListener:null,insights:!0,LocalAudioTrack:rY,LocalDataTrack:nY,LocalParticipant:ZJ,LocalVideoTrack:iY,Log:r,MediaStreamTrack:KJ,loggerName:n,logLevel:i,maxAudioBitrate:null,maxVideoBitrate:null,name:null,networkMonitor:!0,networkQuality:!1,preferredAudioCodecs:[],preferredVideoCodecs:[],realm:vY,region:mY,signaling:sY},dY(e));var l={};typeof e.wsServerInsights=="string"&&(l.gateway=e.wsServerInsights);var u=e.insights?eY:tY,d=new u(t,yY,_Y,e.environment,e.realm,l),h=gY(e.environment,e.region),f=Date.now(),_=new wY(d,f,s,e.eventListener);if(e=Object.assign({eventObserver:_,wsServer:h},e),e.log=s,JO&&!Ob&&s.logLevel!=="error"&&s.logLevel!=="off"&&(Ob=!0,s.warn(["Support for Safari 12.0 and below is limited because it does not support VP8.","This means you may experience codec issues in Group Rooms. You may also","experience codec issues in Peer-to-Peer (P2P) Rooms containing Android- or","iOS-based Participants who do not support H.264. However, P2P Rooms","with browser-based Participants should work. For more information, please","refer to this guide: https://www.twilio.com/docs/video/javascript-v2-developing-safari-11"].join(" "))),typeof t!="string")return xi.reject(bl.INVALID_TYPE("token","string"));e.insights&&d&&ah.configure({publisher:d,log:s,connectTimestamp:f});var v=Object.assign({},e);if(delete v.name,"tracks"in e){if(!Array.isArray(e.tracks))return xi.reject(bl.INVALID_TYPE("options.tracks","Array of LocalAudioTrack, LocalVideoTrack or MediaStreamTrack"));try{e.tracks=e.tracks.map(function(x){return cY(x,v)})}catch(x){return xi.reject(x)}}var g=SY(e.bandwidthProfile);if(g)return xi.reject(g);e.clientTrackSwitchOffControl="disabled",e.contentPreferencesMode="disabled",e.bandwidthProfile&&(e.clientTrackSwitchOffControl="auto",e.contentPreferencesMode="auto",e.bandwidthProfile.video&&(jb(e.bandwidthProfile.video,s,EY),"maxTracks"in e.bandwidthProfile.video?e.clientTrackSwitchOffControl="disabled":e.bandwidthProfile.video.clientTrackSwitchOffControl==="manual"?e.clientTrackSwitchOffControl="manual":e.clientTrackSwitchOffControl="auto","renderDimensions"in e.bandwidthProfile.video?e.contentPreferencesMode="disabled":e.bandwidthProfile.video.contentPreferencesMode==="manual"?e.contentPreferencesMode="manual":e.contentPreferencesMode="auto"));var y=e.signaling,m=new y(e.wsServer,e);s.info("Connecting to a Room"),s.debug("Options:",e);var w=new XJ({maxAudioBitrate:e.maxAudioBitrate,maxVideoBitrate:e.maxVideoBitrate},c),S={audio:e.preferredAudioCodecs.map(Ab),video:e.preferredVideoCodecs.map(Ab)},k=new oY(Pb(e.networkQuality)?e.networkQuality:{});["audio","video"].forEach(function(x){return S[x].forEach(function(C){var R=C.codec;return JJ(R,x).then(function(A){return!A&&s.warn("The preferred ".concat(x,' codec "').concat(R,'" will be ignored as it is not supported by the browser.'))})})});var E=YJ(jY.bind(null,e),PY.bind(null,m,s,w,k,e),RY.bind(null,t,e,m,w,S),OY.bind(null,e));return E.then(function(x){d.connect(x.sid,x.localParticipant.sid);var C=uY(e);return e.eventObserver.emit("event",C),s.info("Connected to Room:",x.toString()),s.info("Room name:",x.name),s.debug("Room:",x),x.once("disconnected",function(){ah.reset(),d.disconnect()}),x},function(x){ah.reset(),d.disconnect(),E._isCanceled?s.info("Attempt to connect to a Room was canceled"):s.info("Error while connecting to a Room:",x)}),E}function jb(t,e,r){r.forEach(function(n){var i=n.didWarn,o=n.name,a=n.newName,s=n.shouldDelete;o in t&&typeof t[o]<"u"&&(a&&s&&(t[a]=t[o]),s&&delete t[o],!i&&!["error","off"].includes(e.level)&&(e.warn('The ConnectOptions "'.concat(o,'" is ').concat(a?'deprecated and scheduled for removal. Please use "'.concat(a,'" instead.'):"no longer applicable and will be ignored.")),n.didWarn=!0))})}function PY(t,e,r,n,i,o){var a=t.createLocalParticipantSignaling(r,n);return e.debug("Creating a new LocalParticipant:",a),new i.LocalParticipant(a,o,i)}function OY(t,e,r){var n=new aY(e,r,t),i=t.log;return i.debug("Creating a new Room:",n),r.on("stateChanged",function o(a){a==="disconnected"&&(i.info("Disconnected from Room:",n.toString()),r.removeListener("stateChanged",o))}),n}function RY(t,e,r,n,i,o){return e.log.debug("Creating a new RoomSignaling"),r.connect(o._signaling,t,n,i,e)}function jY(t,e){var r=t.log;return t.shouldStopLocalTracks=!t.tracks,t.shouldStopLocalTracks?r.info("LocalTracks were not provided, so they will be acquired automatically before connecting to the Room. LocalTracks will be released if connecting to the Room fails or if the Room is disconnected"):(r.info("Getting LocalTracks"),r.debug("Options:",t)),t.createLocalTracks(t).then(function(i){var o=e(i);return o.catch(function(){t.shouldStopLocalTracks&&(r.info("The automatically acquired LocalTracks will now be stopped"),i.forEach(function(s){s.stop()}))}),o})}function Ab(t){var e=typeof t=="string"?{codec:t}:t;switch(e.codec.toLowerCase()){case"opus":return Object.assign({dtx:!0},e);case"vp8":return Object.assign({simulcast:!1},e);default:return e}}var AY=CY,YO=Ee,LY=YO.DEFAULT_LOG_LEVEL,IY=YO.DEFAULT_LOGGER_NAME;function XO(t,e){e=Object.assign({loggerName:IY,logLevel:LY},e);var r={};r.loggerName=e.loggerName,r.logLevel=e.logLevel,delete e.loggerName,delete e.logLevel;var n=["getUserMedia","enumerateDevices","MediaStream","mapMediaElement","disposeMediaElement"];n.forEach(function(o){o in e&&(r[o]=e[o],delete e[o])});var i=e.createLocalTracks;return delete e.createLocalTracks,r[t]=Object.keys(e).length>0?e:!0,i(r).then(function(o){return o[0]})}function NY(t){return XO("audio",t)}function MY(t){return XO("video",t)}var Lb={audio:NY,video:MY},ZO=be,DY=ZO.guessBrowser,$Y=ZO.support,FY=Lt.getSdpFormat,xc=fo,UY=xc.isAndroid,BY=xc.isMobile,VY=xc.isNonChromiumEdge,zY=xc.rebrandedChromeBrowser,WY=xc.mobileWebKitBrowser,HY=["crios","edg","edge","electron","headlesschrome"],qY=["chrome","firefox"],KY=["chrome","safari"],GY=["edg"];function QY(){var t=DY();if(!t)return!1;var e=zY(t),r=WY(t),n=UY()?qY:KY;return!!t&&$Y()&&FY()==="unified"&&(!e||HY.includes(e))&&!VY(t)&&(!r||GY.includes(r))&&(!BY()||n.includes(t))}var JY=QY,YY=Fm.exports,ec=T&&T.__assign||function(){return ec=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},ec.apply(this,arguments)};Object.defineProperty(YY,"__esModule",{value:!0});var jd=Um,XY=yc,mn={connect:AY,createLocalAudioTrack:Lb.audio,createLocalVideoTrack:Lb.video,isSupported:JY(),version:_E.version,Logger:yE,LocalAudioTrack:ia.LocalAudioTrack,LocalDataTrack:ia.LocalDataTrack,LocalVideoTrack:ia.LocalVideoTrack};function ZY(t,e){var r=ec({createLocalTracks:jd.createLocalTracks},e);return mn.connect(t,r)}function eX(t){var e=ec({createLocalTracks:jd.createLocalTracks},t);return mn.createLocalAudioTrack(e)}function tX(t){var e=ec({createLocalTracks:jd.createLocalTracks},t);return mn.createLocalVideoTrack(e)}var rX=mn.isSupported,nX=mn.version,iX=mn.Logger,oX=mn.LocalAudioTrack,aX=mn.LocalVideoTrack,sX=mn.LocalDataTrack;Fm.exports={connect:ZY,createLocalAudioTrack:eX,createLocalVideoTrack:tX,createLocalTracks:jd.createLocalTracks,runPreflight:XY.runPreflight,isSupported:rX,version:nX,Logger:iX,LocalAudioTrack:oX,LocalVideoTrack:aX,LocalDataTrack:sX};var cX=Fm.exports;const Ib=fv(cX);function lX({roomId:t,identity:e,onRemoteParticipantConnected:r,onRemoteParticipantDisconnected:n}){const[i,o]=b.useState(!1),[a,s]=b.useState(!1),[c,l]=b.useState(!0),[u,d]=b.useState(null),[h,f]=b.useState(null),[_,v]=b.useState(null),g=b.useRef(null),y=b.useRef(null),m=b.useRef(0),w=3,S=b.useCallback(async()=>{let O=null;for(let I=1;I<=w;I++)try{console.log(` Fetching video token (attempt ${I}/${w})...`);const P=await fetch(`${ba}/api/video-token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identity:e,roomName:t})});if(!P.ok){const N=await P.json().catch(()=>({}));throw new Error(N.error||`HTTP ${P.status}: Failed to fetch video token`)}const L=await P.json();if(!L.token)throw new Error("No token received from server");return console.log(" Video token received"),L.token}catch(P){O=P,console.error(` Token fetch attempt ${I} failed:`,P.message),I<w&&await new Promise(L=>setTimeout(L,1e3*I))}throw O||new Error("Failed to fetch video token after retries")},[t,e]),k=b.useCallback(O=>{O.kind==="video"&&(console.log(" Remote video track subscribed:",O.sid),f(O))},[]),E=b.useCallback(O=>{O.kind==="video"&&(console.log(" Remote video track unsubscribed:",O.sid),f(null))},[]),x=b.useCallback(O=>{console.log(" Remote track published:",O.kind,O.trackSid),O.isSubscribed&&O.track&&O.kind==="video"&&k(O.track),O.on("subscribed",k),O.on("unsubscribed",E)},[k,E]),C=b.useCallback(O=>{console.log(" Remote participant connected:",O.identity,"tracks:",O.tracks.size),O.tracks.forEach(I=>{console.log("   Existing track:",I.kind,"subscribed:",I.isSubscribed),I.kind==="video"&&(I.isSubscribed&&I.track&&k(I.track),I.on("subscribed",k),I.on("unsubscribed",E))}),O.on("trackPublished",x),O.on("trackSubscribed",k),O.on("trackUnsubscribed",E),r==null||r(O)},[k,E,x,r]),R=b.useCallback(async()=>{if(g.current||a){console.log(" Already connected or connecting to video room");return}s(!0),v(null);try{console.log(" Connecting to Twilio Video room:",t);const O=await S();let I;try{I=await Ib.createLocalVideoTrack({width:{ideal:640},height:{ideal:480},frameRate:{ideal:24}}),console.log(" Local video track created")}catch(L){throw console.error(" Failed to create local video track:",L),new Error(`Camera access failed: ${L.message}`)}y.current=I,d(I);const P=await Ib.connect(O,{name:t,tracks:[I],dominantSpeaker:!0,networkQuality:{local:1,remote:1}});g.current=P,o(!0),m.current=0,console.log(" Connected to Twilio Video room:",P.name,"SID:",P.sid),console.log("   Participants in room:",P.participants.size),P.participants.forEach(C),P.on("participantConnected",L=>{console.log(" New participant joined:",L.identity),C(L)}),P.on("participantDisconnected",L=>{console.log(" Remote participant disconnected:",L.identity),f(null),n==null||n(L)}),P.on("disconnected",(L,N)=>{console.log(" Disconnected from video room",N?`Error: ${N.message}`:""),o(!1),f(null),g.current=null}),P.on("reconnecting",L=>{console.log(" Reconnecting to video room...",L==null?void 0:L.message)}),P.on("reconnected",()=>{console.log(" Reconnected to video room")})}catch(O){console.error(" Failed to connect to video room:",O),v(O.message||"Failed to connect to video"),o(!1),y.current&&(y.current.stop(),y.current=null,d(null))}finally{s(!1)}},[t,a,S,C,n]),A=b.useCallback(()=>{console.log(" Disconnecting from video room"),y.current&&(y.current.stop(),y.current=null,d(null)),g.current&&(g.current.disconnect(),g.current=null),o(!1),s(!1),f(null)},[]),D=b.useCallback(()=>{y.current&&(c?(y.current.disable(),console.log(" Video disabled")):(y.current.enable(),console.log(" Video enabled")),l(!c))},[c]);return b.useEffect(()=>()=>{A()},[A]),{isConnected:i,isConnecting:a,isVideoOn:c,localVideoTrack:u,remoteVideoTrack:h,error:_,connect:R,disconnect:A,toggleVideo:D}}function Og(){const[t,e]=b.useState(""),[r,n]=b.useState(!0);return b.useEffect(()=>{(async()=>{var a,s,c,l,u,d;try{const{data:{user:h}}=await vt.auth.getUser();if(console.log("useUsername: Fetched user:",h),console.log("useUsername: user_metadata:",h==null?void 0:h.user_metadata),h){const f=((a=h.user_metadata)==null?void 0:a.username)||((s=h.user_metadata)==null?void 0:s.full_name)||((c=h.user_metadata)!=null&&c.first_name&&((l=h.user_metadata)!=null&&l.last_name)?`${h.user_metadata.first_name} ${h.user_metadata.last_name}`:null)||((u=h.user_metadata)==null?void 0:u.first_name)||((d=h.email)==null?void 0:d.split("@")[0])||"User";console.log("useUsername: Resolved name:",f),e(f)}}catch(h){console.error("Error fetching username:",h)}finally{n(!1)}})();const{data:{subscription:o}}=vt.auth.onAuthStateChange(async(a,s)=>{var c,l,u;if(s!=null&&s.user){const d=((c=s.user.user_metadata)==null?void 0:c.username)||((l=s.user.user_metadata)==null?void 0:l.full_name)||((u=s.user.email)==null?void 0:u.split("@")[0])||"User";e(d)}});return()=>{o.unsubscribe()}},[]),{username:t,loading:r,setUsername:e}}function uX({level:t=0}){const e=[0,1,2,3,4];return p.jsx("div",{className:"flex items-end gap-1 h-6 w-16",children:e.map(r=>{const n=Math.max(3,Math.min(100,Math.round((t-r*12)*.8))),i=n>60?"bg-emerald-400":n>30?"bg-yellow-400":"bg-slate-500";return p.jsx("div",{className:`w-1 rounded-sm ${i}`,style:{height:`${n/2}%`,transition:"height 120ms linear"}},r)})})}const dX={en:"English",es:"Spanish",fr:"French",de:"German",pt:"Portuguese",it:"Italian",ru:"Russian",zh:"Chinese",ja:"Japanese",ko:"Korean",ar:"Arabic",hi:"Hindi",te:"Telugu",ta:"Tamil",bn:"Bengali",gu:"Gujarati",kn:"Kannada",ml:"Malayalam",mr:"Marathi",pa:"Punjabi",vi:"Vietnamese",th:"Thai",id:"Indonesian",ms:"Malay",fil:"Filipino",tr:"Turkish",nl:"Dutch",pl:"Polish",sv:"Swedish",da:"Danish",no:"Norwegian",fi:"Finnish",el:"Greek",cs:"Czech",ro:"Romanian",hu:"Hungarian",uk:"Ukrainian",he:"Hebrew",fa:"Persian",af:"Afrikaans"},fX={en:"",es:"",fr:"",de:"",pt:"",it:"",ru:"",zh:"",ja:"",ko:"",ar:"",hi:"",te:"",ta:"",bn:"",gu:"",kn:"",ml:"",mr:"",pa:"",vi:"",th:"",id:"",tr:"",nl:"",pl:""};function hX({name:t,isLocal:e=!1,muted:r=!1,level:n=0,language:i,videoTrack:o,isVideoOn:a=!0}){const s=b.useRef(null);b.useEffect(()=>{const _=s.current;if(!(!_||!o))return o.attach(_),console.log(" Video track attached to element"),()=>{o.detach(_),console.log(" Video track detached from element")}},[o]);const c=(i==null?void 0:i.split("-")[0])||"en",l=dX[c]||i||"Unknown",u=fX[c]||"",d=t.split(" ").map(_=>{var v;return(v=_[0])==null?void 0:v.toUpperCase()}).slice(0,2).join("")||"?",h=!r&&n>15,f=o&&a;return p.jsxs("div",{className:`
        relative rounded-2xl overflow-hidden 
        bg-gradient-to-br from-slate-800/90 to-slate-900/90
        border-2 transition-all duration-300
        ${h?"border-green-500 shadow-lg shadow-green-500/20":"border-slate-700/50"}
      `,children:[f?p.jsxs("div",{className:"aspect-video relative min-h-[200px]",children:[p.jsx("video",{ref:s,autoPlay:!0,playsInline:!0,muted:e,className:`w-full h-full object-cover ${e?"scale-x-[-1]":""}`}),p.jsxs("div",{className:"absolute top-3 left-3 flex items-center gap-2",children:[p.jsxs("span",{className:"bg-black/60 px-3 py-1 rounded-full text-white text-sm font-medium",children:[t," ",e&&"(You)"]}),p.jsx("span",{className:"bg-black/60 px-2 py-1 rounded-full text-sm",children:u})]})]}):p.jsxs("div",{className:"aspect-video flex flex-col items-center justify-center p-6 min-h-[200px]",children:[p.jsx("div",{className:`
              w-24 h-24 rounded-full flex items-center justify-center 
              text-3xl font-bold text-white mb-4
              transition-all duration-300
              ${e?"bg-gradient-to-br from-blue-500 to-indigo-600":"bg-gradient-to-br from-purple-500 to-pink-600"}
              ${h?"ring-4 ring-green-500/50 scale-105":""}
            `,children:d}),p.jsxs("h3",{className:"text-white text-xl font-semibold mb-1",children:[t,e&&p.jsx("span",{className:"text-blue-400 text-sm ml-2",children:"(You)"})]}),p.jsxs("div",{className:"flex items-center gap-2 text-slate-300",children:[p.jsx("span",{className:"text-lg",children:u}),p.jsx("span",{className:"text-sm",children:l})]}),!a&&p.jsxs("div",{className:"mt-2 flex items-center gap-1 text-slate-400 text-sm",children:[p.jsx(ex,{size:14}),p.jsx("span",{children:"Camera Off"})]})]}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsx("div",{className:`
            flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium
            ${r?"bg-red-500/20 text-red-400":h?"bg-green-500/20 text-green-400":"bg-slate-700/50 text-slate-400"}
          `,children:r?p.jsxs(p.Fragment,{children:[p.jsx(Xk,{size:16}),p.jsx("span",{children:"Muted"})]}):p.jsxs(p.Fragment,{children:[p.jsx(fm,{size:16,className:h?"animate-pulse":""}),p.jsx("span",{children:h?"Speaking":"Ready"})]})}),p.jsx(uX,{level:n})]})}),h&&p.jsx("div",{className:"absolute inset-0 rounded-2xl border-2 border-green-500 animate-pulse pointer-events-none"})]})}function pX({isAudioOn:t,isSpeakerOn:e,isChatOpen:r,isVideoOn:n=!0,onToggleMute:i,onToggleSpeaker:o,onToggleChat:a,onToggleVideo:s,onEndCall:c}){return p.jsxs(p.Fragment,{children:[p.jsxs(me,{variant:t?"default":"destructive",onClick:i,className:"rounded-full px-4 py-3",children:[t?p.jsx(fm,{className:"mr-2"}):p.jsx(Xk,{className:"mr-2"})," ",t?"Mute":"Unmute"]}),s&&p.jsxs(me,{variant:n?"default":"destructive",onClick:s,className:"rounded-full px-4 py-3",children:[n?p.jsx(nd,{className:"mr-2"}):p.jsx(ex,{className:"mr-2"})," ",n?"Video":"Video Off"]}),p.jsxs(me,{variant:"outline",onClick:o,className:"rounded-full px-4 py-3",children:[e?p.jsx(zL,{className:"mr-2"}):p.jsx(WL,{className:"mr-2"})," ",e?"Speaker":"Speaker Off"]}),p.jsxs(me,{variant:"destructive",onClick:c,className:"rounded-full px-6 py-3",children:[p.jsx(Zk,{className:"mr-2"})," End Call"]}),p.jsx("div",{className:"ml-4 flex gap-2",children:p.jsx(me,{variant:r?"secondary":"ghost",onClick:a,className:"rounded-full px-3 py-2",title:"Toggle Chat",children:p.jsx(IL,{})})})]})}function vX({transcripts:t,onClose:e,isTranslationOn:r,toggleTranslation:n}){const i=b.useRef(null);return b.useEffect(()=>{i.current&&(i.current.scrollTop=i.current.scrollHeight)},[t]),p.jsxs("div",{className:"h-full max-h-screen flex flex-col bg-slate-900 text-white overflow-hidden",children:[p.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-slate-800 shrink-0",children:[p.jsx("div",{className:"text-lg font-semibold",children:"Live Translation"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx($p,{variant:"secondary",children:r?"On":"Off"}),p.jsx(me,{variant:"ghost",size:"icon",onClick:e,children:p.jsx(hm,{size:18})})]})]}),p.jsxs("div",{ref:i,className:"flex-1 overflow-y-auto p-4 space-y-3 min-h-0",children:[t.length===0&&p.jsx("div",{className:"text-slate-400 text-center py-8",children:"Start speaking to see translations..."}),t.map((o,a)=>{const s=o.userType===localStorage.getItem("role");return p.jsxs("div",{className:`p-3 rounded-2xl max-w-[85%] ${s?"ml-auto bg-gradient-to-r from-sky-600 to-indigo-600 text-white":"mr-auto bg-slate-800/80 text-white"}`,children:[p.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[p.jsx("span",{className:"text-xs font-medium opacity-80",children:s?"You":"Partner"}),p.jsxs($p,{variant:"outline",className:"text-[10px] px-1.5 py-0 h-4 border-white/30",children:[o.sourceLang,"  ",o.targetLang]})]}),p.jsx("div",{className:"text-xs opacity-70 italic mb-1",children:o.originalText}),p.jsx("div",{className:"text-sm font-medium",children:o.translatedText})]},a)})]}),p.jsx("div",{className:"p-3 border-t border-slate-800 shrink-0",children:p.jsx(me,{size:"sm",onClick:n,variant:r?"default":"outline",className:"w-full",children:r?"Pause Translation":"Resume Translation"})})]})}const mX=2e3;function gX(){const t=hn(),{roomId:e}=oT(),{username:r}=Og(),n=localStorage.getItem("role")||"caller",i=localStorage.getItem("myLanguage")||"en",o=sessionStorage.getItem("meetingUsername")||r||"You",[a,s]=b.useState("Click Start to Join"),[c,l]=b.useState(!1),[u,d]=b.useState(!1),[h,f]=b.useState(!0),[_,v]=b.useState(!0),[g,y]=b.useState("Partner"),[m,w]=b.useState(null),[S,k]=b.useState(!1),{status:E,isConnected:x,isAudioOn:C,localLevel:R,partnerLevel:A,transcripts:D,interimText:O,connect:I,disconnect:P,toggleMute:L}=iU({roomId:e||"",userType:n,myLanguage:i,myName:o,onPartnerJoined:(q,te)=>{k(!0),y(q||"Partner"),w(te||null)},onPartnerLeft:()=>{k(!1)}}),{isVideoOn:N,localVideoTrack:$,remoteVideoTrack:j,connect:M,disconnect:B,toggleVideo:U}=lX({roomId:e||"",identity:o});b.useEffect(()=>{s(E)},[E]);const Q=b.useCallback(async()=>{try{if(!e)return;const q=await fetch(`${ba}/room-info?roomId=${e}`);if(q.status===404){V();return}const te=await q.json();k(!!te.participantLanguage),n==="caller"&&te.participantName?(y(te.participantName),w(te.participantLanguage||null)):n==="receiver"&&te.creatorName&&(y(te.creatorName),w(te.creatorLanguage||null))}catch(q){console.warn("room-info fetch failed",q)}},[e,n]);b.useEffect(()=>{if(!c)return;Q();const q=window.setInterval(Q,mX);return()=>window.clearInterval(q)},[c,Q]),b.useEffect(()=>{c&&n==="receiver"&&e&&vm(e,i).then(()=>console.log("Receiver joined room successfully")).catch(q=>console.error("joinRoom failed:",q))},[c,n,e,i]);const K=()=>{l(!0),Q(),I(),M()},V=async()=>{try{e&&await fetch(`${ba}/leave-room`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomId:e,userType:n})}).catch(console.warn),P(),B()}catch(q){console.warn("endCall error",q)}finally{k(!1),t("/rooms")}},W=()=>{f(q=>{const te=!q;return Array.from(document.querySelectorAll("audio")).forEach(ae=>{try{ae.volume=te?1:0}catch{}}),te})};b.useEffect(()=>()=>{P(),B()},[P,B]);const ee=D.map(q=>({originalText:q.originalText,translatedText:q.translatedText,userType:q.fromUser,sourceLang:q.fromLanguage,targetLang:q.toLanguage,timestamp:q.timestamp})),z=[{id:"you",name:o,isLocal:!0,muted:!C,level:R,language:i,videoTrack:$,isVideoOn:N},...S?[{id:"partner",name:g,isLocal:!1,muted:!1,level:A,language:m,videoTrack:j,isVideoOn:!0}]:[]];return c?p.jsxs("div",{className:"min-h-screen flex flex-col bg-slate-900 text-white",children:[p.jsxs("header",{className:"flex items-center justify-between px-6 py-3 border-b border-slate-800 bg-slate-900",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-sky-500 to-indigo-600 flex items-center justify-center",children:p.jsx(rd,{className:"w-5 h-5 text-white"})}),p.jsxs("div",{children:[p.jsx("div",{className:"text-lg font-semibold",children:"PrimeTalker Meeting"}),p.jsxs("div",{className:"text-sm text-slate-400",children:["Room: ",e]})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx($p,{className:x?"bg-green-600":"bg-slate-800",children:a}),p.jsx(me,{variant:"ghost",onClick:()=>d(q=>!q),className:"text-slate-200",children:p.jsx(VL,{})})]})]}),p.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[p.jsxs("main",{className:"flex-1 p-6 overflow-y-auto",children:[p.jsx("div",{className:"max-w-[1200px] mx-auto grid grid-cols-1 md:grid-cols-2 gap-6",children:z.length===0?p.jsx("div",{className:"text-slate-400",children:"Waiting for participants..."}):z.map(q=>p.jsx(hX,{name:q.name,isLocal:q.isLocal,muted:q.muted,level:q.level,language:q.language||void 0,videoTrack:q.videoTrack,isVideoOn:q.isVideoOn},q.id))}),O&&p.jsxs("div",{className:"mt-4 text-center text-slate-400 italic",children:[O,"..."]}),!S&&p.jsx("div",{className:"mt-8 text-center text-slate-400",children:"Waiting for partner to join"})]}),u&&p.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>d(!1)}),p.jsx("aside",{className:`
            fixed md:relative inset-y-0 right-0 z-50
            w-full sm:w-80 md:w-96 
            max-h-screen md:max-h-full
            border-l border-slate-800 bg-slate-900 
            transition-transform duration-300 ease-in-out
            ${u?"translate-x-0":"translate-x-full"}
          `,children:p.jsx(vX,{transcripts:ee,onClose:()=>d(!1),isTranslationOn:_,toggleTranslation:()=>v(q=>!q)})})]}),p.jsx("div",{className:"fixed left-0 right-0 bottom-6 flex justify-center pointer-events-none",children:p.jsx("div",{className:"pointer-events-auto bg-slate-800/80 backdrop-blur rounded-3xl px-6 py-3 flex items-center gap-6 shadow-2xl border border-slate-700",children:p.jsx(pX,{isAudioOn:C,isSpeakerOn:h,isChatOpen:u,isVideoOn:N,onToggleMute:L,onToggleSpeaker:W,onToggleChat:()=>d(q=>!q),onToggleVideo:U,onEndCall:V})})})]}):p.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white p-6",children:p.jsxs("div",{className:"max-w-xl w-full text-center space-y-6",children:[p.jsx("h1",{className:"text-3xl font-semibold",children:"Join Meeting"}),p.jsxs("p",{className:"text-slate-300",children:["Room: ",e,"  ",n,"  ",i]}),p.jsx("div",{className:"flex justify-center",children:p.jsx(me,{size:"lg",onClick:K,children:"Start Meeting"})}),p.jsx("p",{className:"text-slate-400 mt-2",children:a})]})})}const Et=b.forwardRef(({className:t,type:e,...r},n)=>p.jsx("input",{type:e,className:Le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...r}));Et.displayName="Input";var yX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_X=yX.reduce((t,e)=>{const r=dT(`Primitive.${e}`),n=b.forwardRef((i,o)=>{const{asChild:a,...s}=i,c=a?r:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),p.jsx(c,{...s,ref:o})});return n.displayName=`Primitive.${e}`,{...t,[e]:n}},{}),wX="Label",e1=b.forwardRef((t,e)=>p.jsx(_X.label,{...t,ref:e,onMouseDown:r=>{var i;r.target.closest("button, input, select, textarea")||((i=t.onMouseDown)==null||i.call(t,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));e1.displayName=wX;var t1=e1;const bX=td("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Qe=b.forwardRef(({className:t,...e},r)=>p.jsx(t1,{ref:r,className:Le(bX(),t),...e}));Qe.displayName=t1.displayName;const Ki=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:Le("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));Ki.displayName="Card";const Gi=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:Le("flex flex-col space-y-1.5 p-6",t),...e}));Gi.displayName="CardHeader";const Qi=b.forwardRef(({className:t,...e},r)=>p.jsx("h3",{ref:r,className:Le("text-2xl font-semibold leading-none tracking-tight",t),...e}));Qi.displayName="CardTitle";const Ji=b.forwardRef(({className:t,...e},r)=>p.jsx("p",{ref:r,className:Le("text-sm text-muted-foreground",t),...e}));Ji.displayName="CardDescription";const Yi=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:Le("p-6 pt-0",t),...e}));Yi.displayName="CardContent";const SX=b.forwardRef(({className:t,...e},r)=>p.jsx("div",{ref:r,className:Le("flex items-center p-6 pt-0",t),...e}));SX.displayName="CardFooter";function Nb(t,[e,r]){return Math.min(r,Math.max(e,t))}var kX=b.createContext(void 0);function xX(t){const e=b.useContext(kX);return t||e||"ltr"}var ch=0;function TX(){b.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??Mb()),document.body.insertAdjacentElement("beforeend",t[1]??Mb()),ch++,()=>{ch===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ch--}},[])}function Mb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var lh="focusScope.autoFocusOnMount",uh="focusScope.autoFocusOnUnmount",Db={bubbles:!1,cancelable:!0},EX="FocusScope",r1=b.forwardRef((t,e)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:o,...a}=t,[s,c]=b.useState(null),l=kr(i),u=kr(o),d=b.useRef(null),h=ze(e,v=>c(v)),f=b.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;b.useEffect(()=>{if(n){let v=function(w){if(f.paused||!s)return;const S=w.target;s.contains(S)?d.current=S:An(d.current,{select:!0})},g=function(w){if(f.paused||!s)return;const S=w.relatedTarget;S!==null&&(s.contains(S)||An(d.current,{select:!0}))},y=function(w){if(document.activeElement===document.body)for(const k of w)k.removedNodes.length>0&&An(s)};document.addEventListener("focusin",v),document.addEventListener("focusout",g);const m=new MutationObserver(y);return s&&m.observe(s,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",g),m.disconnect()}}},[n,s,f.paused]),b.useEffect(()=>{if(s){Fb.add(f);const v=document.activeElement;if(!s.contains(v)){const y=new CustomEvent(lh,Db);s.addEventListener(lh,l),s.dispatchEvent(y),y.defaultPrevented||(CX(AX(n1(s)),{select:!0}),document.activeElement===v&&An(s))}return()=>{s.removeEventListener(lh,l),setTimeout(()=>{const y=new CustomEvent(uh,Db);s.addEventListener(uh,u),s.dispatchEvent(y),y.defaultPrevented||An(v??document.body,{select:!0}),s.removeEventListener(uh,u),Fb.remove(f)},0)}}},[s,l,u,f]);const _=b.useCallback(v=>{if(!r&&!n||f.paused)return;const g=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(g&&y){const m=v.currentTarget,[w,S]=PX(m);w&&S?!v.shiftKey&&y===S?(v.preventDefault(),r&&An(w,{select:!0})):v.shiftKey&&y===w&&(v.preventDefault(),r&&An(S,{select:!0})):y===m&&v.preventDefault()}},[r,n,f.paused]);return p.jsx(Te.div,{tabIndex:-1,...a,ref:h,onKeyDown:_})});r1.displayName=EX;function CX(t,{select:e=!1}={}){const r=document.activeElement;for(const n of t)if(An(n,{select:e}),document.activeElement!==r)return}function PX(t){const e=n1(t),r=$b(e,t),n=$b(e.reverse(),t);return[r,n]}function n1(t){const e=[],r=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)e.push(r.currentNode);return e}function $b(t,e){for(const r of t)if(!OX(r,{upTo:e}))return r}function OX(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function RX(t){return t instanceof HTMLInputElement&&"select"in t}function An(t,{select:e=!1}={}){if(t&&t.focus){const r=document.activeElement;t.focus({preventScroll:!0}),t!==r&&RX(t)&&e&&t.select()}}var Fb=jX();function jX(){let t=[];return{add(e){const r=t[0];e!==r&&(r==null||r.pause()),t=Ub(t,e),t.unshift(e)},remove(e){var r;t=Ub(t,e),(r=t[0])==null||r.resume()}}}function Ub(t,e){const r=[...t],n=r.indexOf(e);return n!==-1&&r.splice(n,1),r}function AX(t){return t.filter(e=>e.tagName!=="A")}function LX(t){const e=IX(t),r=b.forwardRef((n,i)=>{const{children:o,...a}=n,s=b.Children.toArray(o),c=s.find(MX);if(c){const l=c.props.children,u=s.map(d=>d===c?b.Children.count(l)>1?b.Children.only(null):b.isValidElement(l)?l.props.children:null:d);return p.jsx(e,{...a,ref:i,children:b.isValidElement(l)?b.cloneElement(l,void 0,u):null})}return p.jsx(e,{...a,ref:i,children:o})});return r.displayName=`${t}.Slot`,r}function IX(t){const e=b.forwardRef((r,n)=>{const{children:i,...o}=r;if(b.isValidElement(i)){const a=$X(i),s=DX(o,i.props);return i.type!==b.Fragment&&(s.ref=n?lc(n,a):a),b.cloneElement(i,s)}return b.Children.count(i)>1?b.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var NX=Symbol("radix.slottable");function MX(t){return b.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===NX}function DX(t,e){const r={...e};for(const n in e){const i=t[n],o=e[n];/^on[A-Z]/.test(n)?i&&o?r[n]=(...s)=>{const c=o(...s);return i(...s),c}:i&&(r[n]=i):n==="style"?r[n]={...i,...o}:n==="className"&&(r[n]=[i,o].filter(Boolean).join(" "))}return{...t,...r}}function $X(t){var n,i;let e=(n=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:n.get,r=e&&"isReactWarning"in e&&e.isReactWarning;return r?t.ref:(e=(i=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:i.get,r=e&&"isReactWarning"in e&&e.isReactWarning,r?t.props.ref:t.props.ref||t.ref)}function FX(t){const e=b.useRef({value:t,previous:t});return b.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var UX=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Eo=new WeakMap,Sl=new WeakMap,kl={},dh=0,i1=function(t){return t&&(t.host||i1(t.parentNode))},BX=function(t,e){return e.map(function(r){if(t.contains(r))return r;var n=i1(r);return n&&t.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",t,". Doing nothing"),null)}).filter(function(r){return!!r})},VX=function(t,e,r,n){var i=BX(e,Array.isArray(t)?t:[t]);kl[r]||(kl[r]=new WeakMap);var o=kl[r],a=[],s=new Set,c=new Set(i),l=function(d){!d||s.has(d)||(s.add(d),l(d.parentNode))};i.forEach(l);var u=function(d){!d||c.has(d)||Array.prototype.forEach.call(d.children,function(h){if(s.has(h))u(h);else try{var f=h.getAttribute(n),_=f!==null&&f!=="false",v=(Eo.get(h)||0)+1,g=(o.get(h)||0)+1;Eo.set(h,v),o.set(h,g),a.push(h),v===1&&_&&Sl.set(h,!0),g===1&&h.setAttribute(r,"true"),_||h.setAttribute(n,"true")}catch(y){console.error("aria-hidden: cannot operate on ",h,y)}})};return u(e),s.clear(),dh++,function(){a.forEach(function(d){var h=Eo.get(d)-1,f=o.get(d)-1;Eo.set(d,h),o.set(d,f),h||(Sl.has(d)||d.removeAttribute(n),Sl.delete(d)),f||d.removeAttribute(r)}),dh--,dh||(Eo=new WeakMap,Eo=new WeakMap,Sl=new WeakMap,kl={})}},zX=function(t,e,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(t)?t:[t]),i=UX(t);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),VX(n,i,r,"aria-hidden")):function(){return null}},ql="right-scroll-bar-position",Kl="width-before-scroll-bar",WX="with-scroll-bars-hidden",HX="--removed-body-scroll-bar-size";function fh(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function qX(t,e){var r=b.useState(function(){return{value:t,callback:e,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=e,r.facade}var KX=typeof window<"u"?b.useLayoutEffect:b.useEffect,Bb=new WeakMap;function GX(t,e){var r=qX(null,function(n){return t.forEach(function(i){return fh(i,n)})});return KX(function(){var n=Bb.get(r);if(n){var i=new Set(n),o=new Set(t),a=r.current;i.forEach(function(s){o.has(s)||fh(s,null)}),o.forEach(function(s){i.has(s)||fh(s,a)})}Bb.set(r,t)},[t]),r}function QX(t){return t}function JX(t,e){e===void 0&&(e=QX);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:t},useMedium:function(o){var a=e(o,n);return r.push(a),function(){r=r.filter(function(s){return s!==a})}},assignSyncMedium:function(o){for(n=!0;r.length;){var a=r;r=[],a.forEach(o)}r={push:function(s){return o(s)},filter:function(){return r}}},assignMedium:function(o){n=!0;var a=[];if(r.length){var s=r;r=[],s.forEach(o),a=r}var c=function(){var u=a;a=[],u.forEach(o)},l=function(){return Promise.resolve().then(c)};l(),r={push:function(u){a.push(u),l()},filter:function(u){return a=a.filter(u),r}}}};return i}function YX(t){t===void 0&&(t={});var e=JX(null);return e.options=Jt({async:!0,ssr:!1},t),e}var o1=function(t){var e=t.sideCar,r=ui(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return b.createElement(n,Jt({},r))};o1.isSideCarExport=!0;function XX(t,e){return t.useMedium(e),o1}var a1=YX(),hh=function(){},Ad=b.forwardRef(function(t,e){var r=b.useRef(null),n=b.useState({onScrollCapture:hh,onWheelCapture:hh,onTouchMoveCapture:hh}),i=n[0],o=n[1],a=t.forwardProps,s=t.children,c=t.className,l=t.removeScrollBar,u=t.enabled,d=t.shards,h=t.sideCar,f=t.noRelative,_=t.noIsolation,v=t.inert,g=t.allowPinchZoom,y=t.as,m=y===void 0?"div":y,w=t.gapMode,S=ui(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=h,E=GX([r,e]),x=Jt(Jt({},S),i);return b.createElement(b.Fragment,null,u&&b.createElement(k,{sideCar:a1,removeScrollBar:l,shards:d,noRelative:f,noIsolation:_,inert:v,setCallbacks:o,allowPinchZoom:!!g,lockRef:r,gapMode:w}),a?b.cloneElement(b.Children.only(s),Jt(Jt({},x),{ref:E})):b.createElement(m,Jt({},x,{className:c,ref:E}),s))});Ad.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Ad.classNames={fullWidth:Kl,zeroRight:ql};var ZX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function eZ(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=ZX();return e&&t.setAttribute("nonce",e),t}function tZ(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function rZ(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var nZ=function(){var t=0,e=null;return{add:function(r){t==0&&(e=eZ())&&(tZ(e,r),rZ(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},iZ=function(){var t=nZ();return function(e,r){b.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&r])}},s1=function(){var t=iZ(),e=function(r){var n=r.styles,i=r.dynamic;return t(n,i),null};return e},oZ={left:0,top:0,right:0,gap:0},ph=function(t){return parseInt(t||"",10)||0},aZ=function(t){var e=window.getComputedStyle(document.body),r=e[t==="padding"?"paddingLeft":"marginLeft"],n=e[t==="padding"?"paddingTop":"marginTop"],i=e[t==="padding"?"paddingRight":"marginRight"];return[ph(r),ph(n),ph(i)]},sZ=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return oZ;var e=aZ(t),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-r+e[2]-e[0])}},cZ=s1(),oa="data-scroll-locked",lZ=function(t,e,r,n){var i=t.left,o=t.top,a=t.right,s=t.gap;return r===void 0&&(r="margin"),`
  .`.concat(WX,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(s,"px ").concat(n,`;
  }
  body[`).concat(oa,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(s,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(s,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ql,` {
    right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(Kl,` {
    margin-right: `).concat(s,"px ").concat(n,`;
  }
  
  .`).concat(ql," .").concat(ql,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Kl," .").concat(Kl,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(oa,`] {
    `).concat(HX,": ").concat(s,`px;
  }
`)},Vb=function(){var t=parseInt(document.body.getAttribute(oa)||"0",10);return isFinite(t)?t:0},uZ=function(){b.useEffect(function(){return document.body.setAttribute(oa,(Vb()+1).toString()),function(){var t=Vb()-1;t<=0?document.body.removeAttribute(oa):document.body.setAttribute(oa,t.toString())}},[])},dZ=function(t){var e=t.noRelative,r=t.noImportant,n=t.gapMode,i=n===void 0?"margin":n;uZ();var o=b.useMemo(function(){return sZ(i)},[i]);return b.createElement(cZ,{styles:lZ(o,!e,i,r?"":"!important")})},rv=!1;if(typeof window<"u")try{var xl=Object.defineProperty({},"passive",{get:function(){return rv=!0,!0}});window.addEventListener("test",xl,xl),window.removeEventListener("test",xl,xl)}catch{rv=!1}var Co=rv?{passive:!1}:!1,fZ=function(t){return t.tagName==="TEXTAREA"},c1=function(t,e){if(!(t instanceof Element))return!1;var r=window.getComputedStyle(t);return r[e]!=="hidden"&&!(r.overflowY===r.overflowX&&!fZ(t)&&r[e]==="visible")},hZ=function(t){return c1(t,"overflowY")},pZ=function(t){return c1(t,"overflowX")},zb=function(t,e){var r=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=l1(t,n);if(i){var o=u1(t,n),a=o[1],s=o[2];if(a>s)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},vZ=function(t){var e=t.scrollTop,r=t.scrollHeight,n=t.clientHeight;return[e,r,n]},mZ=function(t){var e=t.scrollLeft,r=t.scrollWidth,n=t.clientWidth;return[e,r,n]},l1=function(t,e){return t==="v"?hZ(e):pZ(e)},u1=function(t,e){return t==="v"?vZ(e):mZ(e)},gZ=function(t,e){return t==="h"&&e==="rtl"?-1:1},yZ=function(t,e,r,n,i){var o=gZ(t,window.getComputedStyle(e).direction),a=o*n,s=r.target,c=e.contains(s),l=!1,u=a>0,d=0,h=0;do{if(!s)break;var f=u1(t,s),_=f[0],v=f[1],g=f[2],y=v-g-o*_;(_||y)&&l1(t,s)&&(d+=y,h+=_);var m=s.parentNode;s=m&&m.nodeType===Node.DOCUMENT_FRAGMENT_NODE?m.host:m}while(!c&&s!==document.body||c&&(e.contains(s)||e===s));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(l=!0),l},Tl=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Wb=function(t){return[t.deltaX,t.deltaY]},Hb=function(t){return t&&"current"in t?t.current:t},_Z=function(t,e){return t[0]===e[0]&&t[1]===e[1]},wZ=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},bZ=0,Po=[];function SZ(t){var e=b.useRef([]),r=b.useRef([0,0]),n=b.useRef(),i=b.useState(bZ++)[0],o=b.useState(s1)[0],a=b.useRef(t);b.useEffect(function(){a.current=t},[t]),b.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var v=jm([t.lockRef.current],(t.shards||[]).map(Hb),!0).filter(Boolean);return v.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),v.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[t.inert,t.lockRef.current,t.shards]);var s=b.useCallback(function(v,g){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var y=Tl(v),m=r.current,w="deltaX"in v?v.deltaX:m[0]-y[0],S="deltaY"in v?v.deltaY:m[1]-y[1],k,E=v.target,x=Math.abs(w)>Math.abs(S)?"h":"v";if("touches"in v&&x==="h"&&E.type==="range")return!1;var C=window.getSelection(),R=C&&C.anchorNode,A=R?R===E||R.contains(E):!1;if(A)return!1;var D=zb(x,E);if(!D)return!0;if(D?k=x:(k=x==="v"?"h":"v",D=zb(x,E)),!D)return!1;if(!n.current&&"changedTouches"in v&&(w||S)&&(n.current=k),!k)return!0;var O=n.current||k;return yZ(O,g,v,O==="h"?w:S)},[]),c=b.useCallback(function(v){var g=v;if(!(!Po.length||Po[Po.length-1]!==o)){var y="deltaY"in g?Wb(g):Tl(g),m=e.current.filter(function(k){return k.name===g.type&&(k.target===g.target||g.target===k.shadowParent)&&_Z(k.delta,y)})[0];if(m&&m.should){g.cancelable&&g.preventDefault();return}if(!m){var w=(a.current.shards||[]).map(Hb).filter(Boolean).filter(function(k){return k.contains(g.target)}),S=w.length>0?s(g,w[0]):!a.current.noIsolation;S&&g.cancelable&&g.preventDefault()}}},[]),l=b.useCallback(function(v,g,y,m){var w={name:v,delta:g,target:y,should:m,shadowParent:kZ(y)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(S){return S!==w})},1)},[]),u=b.useCallback(function(v){r.current=Tl(v),n.current=void 0},[]),d=b.useCallback(function(v){l(v.type,Wb(v),v.target,s(v,t.lockRef.current))},[]),h=b.useCallback(function(v){l(v.type,Tl(v),v.target,s(v,t.lockRef.current))},[]);b.useEffect(function(){return Po.push(o),t.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",c,Co),document.addEventListener("touchmove",c,Co),document.addEventListener("touchstart",u,Co),function(){Po=Po.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,Co),document.removeEventListener("touchmove",c,Co),document.removeEventListener("touchstart",u,Co)}},[]);var f=t.removeScrollBar,_=t.inert;return b.createElement(b.Fragment,null,_?b.createElement(o,{styles:wZ(i)}):null,f?b.createElement(dZ,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function kZ(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const xZ=XX(a1,SZ);var d1=b.forwardRef(function(t,e){return b.createElement(Ad,Jt({},t,{ref:e,sideCar:xZ}))});d1.classNames=Ad.classNames;var TZ=[" ","Enter","ArrowUp","ArrowDown"],EZ=[" ","Enter"],oo="Select",[Ld,Id,CZ]=wk(oo),[Ba]=uc(oo,[CZ,cd]),Nd=cd(),[PZ,fi]=Ba(oo),[OZ,RZ]=Ba(oo),f1=t=>{const{__scopeSelect:e,children:r,open:n,defaultOpen:i,onOpenChange:o,value:a,defaultValue:s,onValueChange:c,dir:l,name:u,autoComplete:d,disabled:h,required:f,form:_}=t,v=Nd(e),[g,y]=b.useState(null),[m,w]=b.useState(null),[S,k]=b.useState(!1),E=xX(l),[x,C]=cp({prop:n,defaultProp:i??!1,onChange:o,caller:oo}),[R,A]=cp({prop:a,defaultProp:s,onChange:c,caller:oo}),D=b.useRef(null),O=g?_||!!g.closest("form"):!0,[I,P]=b.useState(new Set),L=Array.from(I).map(N=>N.props.value).join(";");return p.jsx(CM,{...v,children:p.jsxs(PZ,{required:f,scope:e,trigger:g,onTriggerChange:y,valueNode:m,onValueNodeChange:w,valueNodeHasChildren:S,onValueNodeHasChildrenChange:k,contentId:mm(),value:R,onValueChange:A,open:x,onOpenChange:C,dir:E,triggerPointerDownPosRef:D,disabled:h,children:[p.jsx(Ld.Provider,{scope:e,children:p.jsx(OZ,{scope:t.__scopeSelect,onNativeOptionAdd:b.useCallback(N=>{P($=>new Set($).add(N))},[]),onNativeOptionRemove:b.useCallback(N=>{P($=>{const j=new Set($);return j.delete(N),j})},[]),children:r})}),O?p.jsxs(M1,{"aria-hidden":!0,required:f,tabIndex:-1,name:u,autoComplete:d,value:R,onChange:N=>A(N.target.value),disabled:h,form:_,children:[R===void 0?p.jsx("option",{value:""}):null,Array.from(I)]},L):null]})})};f1.displayName=oo;var h1="SelectTrigger",p1=b.forwardRef((t,e)=>{const{__scopeSelect:r,disabled:n=!1,...i}=t,o=Nd(r),a=fi(h1,r),s=a.disabled||n,c=ze(e,a.onTriggerChange),l=Id(r),u=b.useRef("touch"),[d,h,f]=$1(v=>{const g=l().filter(w=>!w.disabled),y=g.find(w=>w.value===a.value),m=F1(g,v,y);m!==void 0&&a.onValueChange(m.value)}),_=v=>{s||(a.onOpenChange(!0),f()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return p.jsx(Lx,{asChild:!0,...o,children:p.jsx(Te.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:s,"data-disabled":s?"":void 0,"data-placeholder":D1(a.value)?"":void 0,...i,ref:c,onClick:pe(i.onClick,v=>{v.currentTarget.focus(),u.current!=="mouse"&&_(v)}),onPointerDown:pe(i.onPointerDown,v=>{u.current=v.pointerType;const g=v.target;g.hasPointerCapture(v.pointerId)&&g.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(_(v),v.preventDefault())}),onKeyDown:pe(i.onKeyDown,v=>{const g=d.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&h(v.key),!(g&&v.key===" ")&&TZ.includes(v.key)&&(_(),v.preventDefault())})})})});p1.displayName=h1;var v1="SelectValue",m1=b.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,children:o,placeholder:a="",...s}=t,c=fi(v1,r),{onValueNodeHasChildrenChange:l}=c,u=o!==void 0,d=ze(e,c.onValueNodeChange);return at(()=>{l(u)},[l,u]),p.jsx(Te.span,{...s,ref:d,style:{pointerEvents:"none"},children:D1(c.value)?p.jsx(p.Fragment,{children:a}):o})});m1.displayName=v1;var jZ="SelectIcon",g1=b.forwardRef((t,e)=>{const{__scopeSelect:r,children:n,...i}=t;return p.jsx(Te.span,{"aria-hidden":!0,...i,ref:e,children:n||""})});g1.displayName=jZ;var AZ="SelectPortal",y1=t=>p.jsx(sm,{asChild:!0,...t});y1.displayName=AZ;var ao="SelectContent",_1=b.forwardRef((t,e)=>{const r=fi(ao,t.__scopeSelect),[n,i]=b.useState();if(at(()=>{i(new DocumentFragment)},[]),!r.open){const o=n;return o?lo.createPortal(p.jsx(w1,{scope:t.__scopeSelect,children:p.jsx(Ld.Slot,{scope:t.__scopeSelect,children:p.jsx("div",{children:t.children})})}),o):null}return p.jsx(b1,{...t,ref:e})});_1.displayName=ao;var ur=10,[w1,hi]=Ba(ao),LZ="SelectContentImpl",IZ=LX("SelectContent.RemoveScroll"),b1=b.forwardRef((t,e)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:o,onPointerDownOutside:a,side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:_,hideWhenDetached:v,avoidCollisions:g,...y}=t,m=fi(ao,r),[w,S]=b.useState(null),[k,E]=b.useState(null),x=ze(e,z=>S(z)),[C,R]=b.useState(null),[A,D]=b.useState(null),O=Id(r),[I,P]=b.useState(!1),L=b.useRef(!1);b.useEffect(()=>{if(w)return zX(w)},[w]),TX();const N=b.useCallback(z=>{const[q,...te]=O().map(ue=>ue.ref.current),[ce]=te.slice(-1),ae=document.activeElement;for(const ue of z)if(ue===ae||(ue==null||ue.scrollIntoView({block:"nearest"}),ue===q&&k&&(k.scrollTop=0),ue===ce&&k&&(k.scrollTop=k.scrollHeight),ue==null||ue.focus(),document.activeElement!==ae))return},[O,k]),$=b.useCallback(()=>N([C,w]),[N,C,w]);b.useEffect(()=>{I&&$()},[I,$]);const{onOpenChange:j,triggerPointerDownPosRef:M}=m;b.useEffect(()=>{if(w){let z={x:0,y:0};const q=ce=>{var ae,ue;z={x:Math.abs(Math.round(ce.pageX)-(((ae=M.current)==null?void 0:ae.x)??0)),y:Math.abs(Math.round(ce.pageY)-(((ue=M.current)==null?void 0:ue.y)??0))}},te=ce=>{z.x<=10&&z.y<=10?ce.preventDefault():w.contains(ce.target)||j(!1),document.removeEventListener("pointermove",q),M.current=null};return M.current!==null&&(document.addEventListener("pointermove",q),document.addEventListener("pointerup",te,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",q),document.removeEventListener("pointerup",te,{capture:!0})}}},[w,j,M]),b.useEffect(()=>{const z=()=>j(!1);return window.addEventListener("blur",z),window.addEventListener("resize",z),()=>{window.removeEventListener("blur",z),window.removeEventListener("resize",z)}},[j]);const[B,U]=$1(z=>{const q=O().filter(ae=>!ae.disabled),te=q.find(ae=>ae.ref.current===document.activeElement),ce=F1(q,z,te);ce&&setTimeout(()=>ce.ref.current.focus())}),Q=b.useCallback((z,q,te)=>{const ce=!L.current&&!te;(m.value!==void 0&&m.value===q||ce)&&(R(z),ce&&(L.current=!0))},[m.value]),K=b.useCallback(()=>w==null?void 0:w.focus(),[w]),V=b.useCallback((z,q,te)=>{const ce=!L.current&&!te;(m.value!==void 0&&m.value===q||ce)&&D(z)},[m.value]),W=n==="popper"?nv:S1,ee=W===nv?{side:s,sideOffset:c,align:l,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:_,hideWhenDetached:v,avoidCollisions:g}:{};return p.jsx(w1,{scope:r,content:w,viewport:k,onViewportChange:E,itemRefCallback:Q,selectedItem:C,onItemLeave:K,itemTextRefCallback:V,focusSelectedItem:$,selectedItemText:A,position:n,isPositioned:I,searchRef:B,children:p.jsx(d1,{as:IZ,allowPinchZoom:!0,children:p.jsx(r1,{asChild:!0,trapped:m.open,onMountAutoFocus:z=>{z.preventDefault()},onUnmountAutoFocus:pe(i,z=>{var q;(q=m.trigger)==null||q.focus({preventScroll:!0}),z.preventDefault()}),children:p.jsx(Xu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:z=>z.preventDefault(),onDismiss:()=>m.onOpenChange(!1),children:p.jsx(W,{role:"listbox",id:m.contentId,"data-state":m.open?"open":"closed",dir:m.dir,onContextMenu:z=>z.preventDefault(),...y,...ee,onPlaced:()=>P(!0),ref:x,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:pe(y.onKeyDown,z=>{const q=z.ctrlKey||z.altKey||z.metaKey;if(z.key==="Tab"&&z.preventDefault(),!q&&z.key.length===1&&U(z.key),["ArrowUp","ArrowDown","Home","End"].includes(z.key)){let ce=O().filter(ae=>!ae.disabled).map(ae=>ae.ref.current);if(["ArrowUp","End"].includes(z.key)&&(ce=ce.slice().reverse()),["ArrowUp","ArrowDown"].includes(z.key)){const ae=z.target,ue=ce.indexOf(ae);ce=ce.slice(ue+1)}setTimeout(()=>N(ce)),z.preventDefault()}})})})})})})});b1.displayName=LZ;var NZ="SelectItemAlignedPosition",S1=b.forwardRef((t,e)=>{const{__scopeSelect:r,onPlaced:n,...i}=t,o=fi(ao,r),a=hi(ao,r),[s,c]=b.useState(null),[l,u]=b.useState(null),d=ze(e,x=>u(x)),h=Id(r),f=b.useRef(!1),_=b.useRef(!0),{viewport:v,selectedItem:g,selectedItemText:y,focusSelectedItem:m}=a,w=b.useCallback(()=>{if(o.trigger&&o.valueNode&&s&&l&&v&&g&&y){const x=o.trigger.getBoundingClientRect(),C=l.getBoundingClientRect(),R=o.valueNode.getBoundingClientRect(),A=y.getBoundingClientRect();if(o.dir!=="rtl"){const ae=A.left-C.left,ue=R.left-ae,ge=x.left-ue,Oe=x.width+ge,Xe=Math.max(Oe,C.width),ft=window.innerWidth-ur,Ue=Nb(ue,[ur,Math.max(ur,ft-Xe)]);s.style.minWidth=Oe+"px",s.style.left=Ue+"px"}else{const ae=C.right-A.right,ue=window.innerWidth-R.right-ae,ge=window.innerWidth-x.right-ue,Oe=x.width+ge,Xe=Math.max(Oe,C.width),ft=window.innerWidth-ur,Ue=Nb(ue,[ur,Math.max(ur,ft-Xe)]);s.style.minWidth=Oe+"px",s.style.right=Ue+"px"}const D=h(),O=window.innerHeight-ur*2,I=v.scrollHeight,P=window.getComputedStyle(l),L=parseInt(P.borderTopWidth,10),N=parseInt(P.paddingTop,10),$=parseInt(P.borderBottomWidth,10),j=parseInt(P.paddingBottom,10),M=L+N+I+j+$,B=Math.min(g.offsetHeight*5,M),U=window.getComputedStyle(v),Q=parseInt(U.paddingTop,10),K=parseInt(U.paddingBottom,10),V=x.top+x.height/2-ur,W=O-V,ee=g.offsetHeight/2,z=g.offsetTop+ee,q=L+N+z,te=M-q;if(q<=V){const ae=D.length>0&&g===D[D.length-1].ref.current;s.style.bottom="0px";const ue=l.clientHeight-v.offsetTop-v.offsetHeight,ge=Math.max(W,ee+(ae?K:0)+ue+$),Oe=q+ge;s.style.height=Oe+"px"}else{const ae=D.length>0&&g===D[0].ref.current;s.style.top="0px";const ge=Math.max(V,L+v.offsetTop+(ae?Q:0)+ee)+te;s.style.height=ge+"px",v.scrollTop=q-V+v.offsetTop}s.style.margin=`${ur}px 0`,s.style.minHeight=B+"px",s.style.maxHeight=O+"px",n==null||n(),requestAnimationFrame(()=>f.current=!0)}},[h,o.trigger,o.valueNode,s,l,v,g,y,o.dir,n]);at(()=>w(),[w]);const[S,k]=b.useState();at(()=>{l&&k(window.getComputedStyle(l).zIndex)},[l]);const E=b.useCallback(x=>{x&&_.current===!0&&(w(),m==null||m(),_.current=!1)},[w,m]);return p.jsx(DZ,{scope:r,contentWrapper:s,shouldExpandOnScrollRef:f,onScrollButtonChange:E,children:p.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:S},children:p.jsx(Te.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});S1.displayName=NZ;var MZ="SelectPopperPosition",nv=b.forwardRef((t,e)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=ur,...o}=t,a=Nd(r);return p.jsx(Ix,{...a,...o,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});nv.displayName=MZ;var[DZ,Rg]=Ba(ao,{}),iv="SelectViewport",k1=b.forwardRef((t,e)=>{const{__scopeSelect:r,nonce:n,...i}=t,o=hi(iv,r),a=Rg(iv,r),s=ze(e,o.onViewportChange),c=b.useRef(0);return p.jsxs(p.Fragment,{children:[p.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),p.jsx(Ld.Slot,{scope:r,children:p.jsx(Te.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:s,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:pe(i.onScroll,l=>{const u=l.currentTarget,{contentWrapper:d,shouldExpandOnScrollRef:h}=a;if(h!=null&&h.current&&d){const f=Math.abs(c.current-u.scrollTop);if(f>0){const _=window.innerHeight-ur*2,v=parseFloat(d.style.minHeight),g=parseFloat(d.style.height),y=Math.max(v,g);if(y<_){const m=y+f,w=Math.min(_,m),S=m-w;d.style.height=w+"px",d.style.bottom==="0px"&&(u.scrollTop=S>0?S:0,d.style.justifyContent="flex-end")}}}c.current=u.scrollTop})})})]})});k1.displayName=iv;var x1="SelectGroup",[$Z,FZ]=Ba(x1),UZ=b.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=mm();return p.jsx($Z,{scope:r,id:i,children:p.jsx(Te.div,{role:"group","aria-labelledby":i,...n,ref:e})})});UZ.displayName=x1;var T1="SelectLabel",E1=b.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=FZ(T1,r);return p.jsx(Te.div,{id:i.id,...n,ref:e})});E1.displayName=T1;var Lu="SelectItem",[BZ,C1]=Ba(Lu),P1=b.forwardRef((t,e)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:o,...a}=t,s=fi(Lu,r),c=hi(Lu,r),l=s.value===n,[u,d]=b.useState(o??""),[h,f]=b.useState(!1),_=ze(e,m=>{var w;return(w=c.itemRefCallback)==null?void 0:w.call(c,m,n,i)}),v=mm(),g=b.useRef("touch"),y=()=>{i||(s.onValueChange(n),s.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return p.jsx(BZ,{scope:r,value:n,disabled:i,textId:v,isSelected:l,onItemTextChange:b.useCallback(m=>{d(w=>w||((m==null?void 0:m.textContent)??"").trim())},[]),children:p.jsx(Ld.ItemSlot,{scope:r,value:n,disabled:i,textValue:u,children:p.jsx(Te.div,{role:"option","aria-labelledby":v,"data-highlighted":h?"":void 0,"aria-selected":l&&h,"data-state":l?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:_,onFocus:pe(a.onFocus,()=>f(!0)),onBlur:pe(a.onBlur,()=>f(!1)),onClick:pe(a.onClick,()=>{g.current!=="mouse"&&y()}),onPointerUp:pe(a.onPointerUp,()=>{g.current==="mouse"&&y()}),onPointerDown:pe(a.onPointerDown,m=>{g.current=m.pointerType}),onPointerMove:pe(a.onPointerMove,m=>{var w;g.current=m.pointerType,i?(w=c.onItemLeave)==null||w.call(c):g.current==="mouse"&&m.currentTarget.focus({preventScroll:!0})}),onPointerLeave:pe(a.onPointerLeave,m=>{var w;m.currentTarget===document.activeElement&&((w=c.onItemLeave)==null||w.call(c))}),onKeyDown:pe(a.onKeyDown,m=>{var S;((S=c.searchRef)==null?void 0:S.current)!==""&&m.key===" "||(EZ.includes(m.key)&&y(),m.key===" "&&m.preventDefault())})})})})});P1.displayName=Lu;var ls="SelectItemText",O1=b.forwardRef((t,e)=>{const{__scopeSelect:r,className:n,style:i,...o}=t,a=fi(ls,r),s=hi(ls,r),c=C1(ls,r),l=RZ(ls,r),[u,d]=b.useState(null),h=ze(e,y=>d(y),c.onItemTextChange,y=>{var m;return(m=s.itemTextRefCallback)==null?void 0:m.call(s,y,c.value,c.disabled)}),f=u==null?void 0:u.textContent,_=b.useMemo(()=>p.jsx("option",{value:c.value,disabled:c.disabled,children:f},c.value),[c.disabled,c.value,f]),{onNativeOptionAdd:v,onNativeOptionRemove:g}=l;return at(()=>(v(_),()=>g(_)),[v,g,_]),p.jsxs(p.Fragment,{children:[p.jsx(Te.span,{id:c.textId,...o,ref:h}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?lo.createPortal(o.children,a.valueNode):null]})});O1.displayName=ls;var R1="SelectItemIndicator",j1=b.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return C1(R1,r).isSelected?p.jsx(Te.span,{"aria-hidden":!0,...n,ref:e}):null});j1.displayName=R1;var ov="SelectScrollUpButton",A1=b.forwardRef((t,e)=>{const r=hi(ov,t.__scopeSelect),n=Rg(ov,t.__scopeSelect),[i,o]=b.useState(!1),a=ze(e,n.onScrollButtonChange);return at(()=>{if(r.viewport&&r.isPositioned){let s=function(){const l=c.scrollTop>0;o(l)};const c=r.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[r.viewport,r.isPositioned]),i?p.jsx(I1,{...t,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=r;s&&c&&(s.scrollTop=s.scrollTop-c.offsetHeight)}}):null});A1.displayName=ov;var av="SelectScrollDownButton",L1=b.forwardRef((t,e)=>{const r=hi(av,t.__scopeSelect),n=Rg(av,t.__scopeSelect),[i,o]=b.useState(!1),a=ze(e,n.onScrollButtonChange);return at(()=>{if(r.viewport&&r.isPositioned){let s=function(){const l=c.scrollHeight-c.clientHeight,u=Math.ceil(c.scrollTop)<l;o(u)};const c=r.viewport;return s(),c.addEventListener("scroll",s),()=>c.removeEventListener("scroll",s)}},[r.viewport,r.isPositioned]),i?p.jsx(I1,{...t,ref:a,onAutoScroll:()=>{const{viewport:s,selectedItem:c}=r;s&&c&&(s.scrollTop=s.scrollTop+c.offsetHeight)}}):null});L1.displayName=av;var I1=b.forwardRef((t,e)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=t,o=hi("SelectScrollButton",r),a=b.useRef(null),s=Id(r),c=b.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return b.useEffect(()=>()=>c(),[c]),at(()=>{var u;const l=s().find(d=>d.ref.current===document.activeElement);(u=l==null?void 0:l.ref.current)==null||u.scrollIntoView({block:"nearest"})},[s]),p.jsx(Te.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerDown:pe(i.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(n,50))}),onPointerMove:pe(i.onPointerMove,()=>{var l;(l=o.onItemLeave)==null||l.call(o),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:pe(i.onPointerLeave,()=>{c()})})}),VZ="SelectSeparator",N1=b.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t;return p.jsx(Te.div,{"aria-hidden":!0,...n,ref:e})});N1.displayName=VZ;var sv="SelectArrow",zZ=b.forwardRef((t,e)=>{const{__scopeSelect:r,...n}=t,i=Nd(r),o=fi(sv,r),a=hi(sv,r);return o.open&&a.position==="popper"?p.jsx(Nx,{...i,...n,ref:e}):null});zZ.displayName=sv;var WZ="SelectBubbleInput",M1=b.forwardRef(({__scopeSelect:t,value:e,...r},n)=>{const i=b.useRef(null),o=ze(n,i),a=FX(e);return b.useEffect(()=>{const s=i.current;if(!s)return;const c=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==e&&u){const d=new Event("change",{bubbles:!0});u.call(s,e),s.dispatchEvent(d)}},[a,e]),p.jsx(Te.select,{...r,style:{...Tk,...r.style},ref:o,defaultValue:e})});M1.displayName=WZ;function D1(t){return t===""||t===void 0}function $1(t){const e=kr(t),r=b.useRef(""),n=b.useRef(0),i=b.useCallback(a=>{const s=r.current+a;e(s),function c(l){r.current=l,window.clearTimeout(n.current),l!==""&&(n.current=window.setTimeout(()=>c(""),1e3))}(s)},[e]),o=b.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return b.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,o]}function F1(t,e,r){const i=e.length>1&&Array.from(e).every(l=>l===e[0])?e[0]:e,o=r?t.indexOf(r):-1;let a=HZ(t,Math.max(o,0));i.length===1&&(a=a.filter(l=>l!==r));const c=a.find(l=>l.textValue.toLowerCase().startsWith(i.toLowerCase()));return c!==r?c:void 0}function HZ(t,e){return t.map((r,n)=>t[(e+n)%t.length])}var qZ=f1,U1=p1,KZ=m1,GZ=g1,QZ=y1,B1=_1,JZ=k1,V1=E1,z1=P1,YZ=O1,XZ=j1,W1=A1,H1=L1,q1=N1;const qb=qZ,Kb=KZ,cv=b.forwardRef(({className:t,children:e,...r},n)=>p.jsxs(U1,{ref:n,className:Le("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...r,children:[e,p.jsx(GZ,{asChild:!0,children:p.jsx(Qk,{className:"h-4 w-4 opacity-50"})})]}));cv.displayName=U1.displayName;const K1=b.forwardRef(({className:t,...e},r)=>p.jsx(W1,{ref:r,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:p.jsx(PL,{className:"h-4 w-4"})}));K1.displayName=W1.displayName;const G1=b.forwardRef(({className:t,...e},r)=>p.jsx(H1,{ref:r,className:Le("flex cursor-default items-center justify-center py-1",t),...e,children:p.jsx(Qk,{className:"h-4 w-4"})}));G1.displayName=H1.displayName;const lv=b.forwardRef(({className:t,children:e,position:r="popper",...n},i)=>p.jsx(QZ,{children:p.jsxs(B1,{ref:i,className:Le("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[p.jsx(K1,{}),p.jsx(JZ,{className:Le("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),p.jsx(G1,{})]})}));lv.displayName=B1.displayName;const ZZ=b.forwardRef(({className:t,...e},r)=>p.jsx(V1,{ref:r,className:Le("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));ZZ.displayName=V1.displayName;const uv=b.forwardRef(({className:t,children:e,...r},n)=>p.jsxs(z1,{ref:n,className:Le("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 focus:bg-accent focus:text-accent-foreground",t),...r,children:[p.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:p.jsx(XZ,{children:p.jsx(fp,{className:"h-4 w-4"})})}),p.jsx(YZ,{children:e})]}));uv.displayName=z1.displayName;const eee=b.forwardRef(({className:t,...e},r)=>p.jsx(q1,{ref:r,className:Le("-mx-1 my-1 h-px bg-muted",t),...e}));eee.displayName=q1.displayName;const Gb=[{code:"IN",name:"India"},{code:"US",name:"United States"},{code:"GB",name:"United Kingdom"},{code:"CA",name:"Canada"},{code:"AU",name:"Australia"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"JP",name:"Japan"},{code:"CN",name:"China"},{code:"BR",name:"Brazil"},{code:"AE",name:"United Arab Emirates"},{code:"SG",name:"Singapore"},{code:"NL",name:"Netherlands"},{code:"IT",name:"Italy"},{code:"ES",name:"Spain"},{code:"MX",name:"Mexico"},{code:"ZA",name:"South Africa"},{code:"KR",name:"South Korea"},{code:"RU",name:"Russia"},{code:"SA",name:"Saudi Arabia"}],tee=[{code:"AP",name:"Andhra Pradesh",countryCode:"IN"},{code:"AR",name:"Arunachal Pradesh",countryCode:"IN"},{code:"AS",name:"Assam",countryCode:"IN"},{code:"BR",name:"Bihar",countryCode:"IN"},{code:"CT",name:"Chhattisgarh",countryCode:"IN"},{code:"GA",name:"Goa",countryCode:"IN"},{code:"GJ",name:"Gujarat",countryCode:"IN"},{code:"HR",name:"Haryana",countryCode:"IN"},{code:"HP",name:"Himachal Pradesh",countryCode:"IN"},{code:"JH",name:"Jharkhand",countryCode:"IN"},{code:"KA",name:"Karnataka",countryCode:"IN"},{code:"KL",name:"Kerala",countryCode:"IN"},{code:"MP",name:"Madhya Pradesh",countryCode:"IN"},{code:"MH",name:"Maharashtra",countryCode:"IN"},{code:"MN",name:"Manipur",countryCode:"IN"},{code:"ML",name:"Meghalaya",countryCode:"IN"},{code:"MZ",name:"Mizoram",countryCode:"IN"},{code:"NL",name:"Nagaland",countryCode:"IN"},{code:"OR",name:"Odisha",countryCode:"IN"},{code:"PB",name:"Punjab",countryCode:"IN"},{code:"RJ",name:"Rajasthan",countryCode:"IN"},{code:"SK",name:"Sikkim",countryCode:"IN"},{code:"TN",name:"Tamil Nadu",countryCode:"IN"},{code:"TG",name:"Telangana",countryCode:"IN"},{code:"TR",name:"Tripura",countryCode:"IN"},{code:"UP",name:"Uttar Pradesh",countryCode:"IN"},{code:"UK",name:"Uttarakhand",countryCode:"IN"},{code:"WB",name:"West Bengal",countryCode:"IN"},{code:"DL",name:"Delhi",countryCode:"IN"}],ree=[{code:"AL",name:"Alabama",countryCode:"US"},{code:"AK",name:"Alaska",countryCode:"US"},{code:"AZ",name:"Arizona",countryCode:"US"},{code:"AR",name:"Arkansas",countryCode:"US"},{code:"CA",name:"California",countryCode:"US"},{code:"CO",name:"Colorado",countryCode:"US"},{code:"CT",name:"Connecticut",countryCode:"US"},{code:"DE",name:"Delaware",countryCode:"US"},{code:"FL",name:"Florida",countryCode:"US"},{code:"GA",name:"Georgia",countryCode:"US"},{code:"HI",name:"Hawaii",countryCode:"US"},{code:"ID",name:"Idaho",countryCode:"US"},{code:"IL",name:"Illinois",countryCode:"US"},{code:"IN",name:"Indiana",countryCode:"US"},{code:"IA",name:"Iowa",countryCode:"US"},{code:"KS",name:"Kansas",countryCode:"US"},{code:"KY",name:"Kentucky",countryCode:"US"},{code:"LA",name:"Louisiana",countryCode:"US"},{code:"ME",name:"Maine",countryCode:"US"},{code:"MD",name:"Maryland",countryCode:"US"},{code:"MA",name:"Massachusetts",countryCode:"US"},{code:"MI",name:"Michigan",countryCode:"US"},{code:"MN",name:"Minnesota",countryCode:"US"},{code:"MS",name:"Mississippi",countryCode:"US"},{code:"MO",name:"Missouri",countryCode:"US"},{code:"MT",name:"Montana",countryCode:"US"},{code:"NE",name:"Nebraska",countryCode:"US"},{code:"NV",name:"Nevada",countryCode:"US"},{code:"NH",name:"New Hampshire",countryCode:"US"},{code:"NJ",name:"New Jersey",countryCode:"US"},{code:"NM",name:"New Mexico",countryCode:"US"},{code:"NY",name:"New York",countryCode:"US"},{code:"NC",name:"North Carolina",countryCode:"US"},{code:"ND",name:"North Dakota",countryCode:"US"},{code:"OH",name:"Ohio",countryCode:"US"},{code:"OK",name:"Oklahoma",countryCode:"US"},{code:"OR",name:"Oregon",countryCode:"US"},{code:"PA",name:"Pennsylvania",countryCode:"US"},{code:"RI",name:"Rhode Island",countryCode:"US"},{code:"SC",name:"South Carolina",countryCode:"US"},{code:"SD",name:"South Dakota",countryCode:"US"},{code:"TN",name:"Tennessee",countryCode:"US"},{code:"TX",name:"Texas",countryCode:"US"},{code:"UT",name:"Utah",countryCode:"US"},{code:"VT",name:"Vermont",countryCode:"US"},{code:"VA",name:"Virginia",countryCode:"US"},{code:"WA",name:"Washington",countryCode:"US"},{code:"WV",name:"West Virginia",countryCode:"US"},{code:"WI",name:"Wisconsin",countryCode:"US"},{code:"WY",name:"Wyoming",countryCode:"US"}],nee=[{code:"ENG",name:"England",countryCode:"GB"},{code:"SCT",name:"Scotland",countryCode:"GB"},{code:"WLS",name:"Wales",countryCode:"GB"},{code:"NIR",name:"Northern Ireland",countryCode:"GB"}],iee=[{code:"ON",name:"Ontario",countryCode:"CA"},{code:"QC",name:"Quebec",countryCode:"CA"},{code:"BC",name:"British Columbia",countryCode:"CA"},{code:"AB",name:"Alberta",countryCode:"CA"}],oee=[{code:"NSW",name:"New South Wales",countryCode:"AU"},{code:"VIC",name:"Victoria",countryCode:"AU"},{code:"QLD",name:"Queensland",countryCode:"AU"},{code:"WA",name:"Western Australia",countryCode:"AU"}],aee=[...tee,...ree,...nee,...iee,...oee],see=t=>aee.filter(e=>e.countryCode===t),Qb=t=>{const e=[];return(t.length<6||t.length>14)&&e.push("6-14 characters"),/[A-Z]/.test(t)||e.push("uppercase letter"),/[a-z]/.test(t)||e.push("lowercase letter"),/[0-9]/.test(t)||e.push("digit"),/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(t)||e.push("special character (!@#$%^&*)"),e.length>0?`Password must contain: ${e.join(", ")}`:null},cee=t=>t.length<6||t.length>14?"Username must be 6-14 characters":/^[a-zA-Z0-9]+$/.test(t)?null:"Username can only contain letters and digits",lee=t=>t.length>40?"Email must be 40 characters or less":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)?null:"Please enter a valid email address",uee=()=>{var K,V;const[t,e]=b.useState(!1),[r,n]=b.useState(!1),[i,o]=b.useState(!1),[a,s]=b.useState(1),[c,l]=b.useState(""),[u,d]=b.useState(""),[h,f]=b.useState(""),[_,v]=b.useState(""),[g,y]=b.useState(""),[m,w]=b.useState(""),[S,k]=b.useState(""),[E,x]=b.useState(""),[C,R]=b.useState(!1),A=hn(),{toast:D}=Yu(),O=S?see(S):[],I=((K=Gb.find(W=>W.code===S))==null?void 0:K.name)||S,P=((V=O.find(W=>W.code===E))==null?void 0:V.name)||E;b.useEffect(()=>{x("")},[S]),b.useEffect(()=>{s(1)},[t]),b.useEffect(()=>{new URLSearchParams(window.location.hash.substring(1)).get("type")==="recovery"&&o(!0),vt.auth.getSession().then(({data:{session:q}})=>{q&&window.location.hash.includes("type=recovery")&&o(!0)});const{data:z}=vt.auth.onAuthStateChange(async(q,te)=>{q==="PASSWORD_RECOVERY"&&o(!0)});return()=>{z.subscription.unsubscribe()}},[]);const L=W=>{W.preventDefault();const ee=cee(_);if(ee){D({title:"Invalid Username",description:ee,variant:"destructive"});return}const z=lee(c);if(z){D({title:"Invalid Email",description:z,variant:"destructive"});return}const q=Qb(u);if(q){D({title:"Invalid Password",description:q,variant:"destructive"});return}if(u!==h){D({title:"Passwords Don't Match",description:"Please make sure both passwords are the same.",variant:"destructive"});return}if(!g.trim()){D({title:"First Name Required",description:"Please enter your first name.",variant:"destructive"});return}if(!m.trim()){D({title:"Last Name Required",description:"Please enter your last name.",variant:"destructive"});return}if(!S){D({title:"Country Required",description:"Please select your country.",variant:"destructive"});return}if(O.length>0&&!E){D({title:"State Required",description:"Please select your state/province.",variant:"destructive"});return}s(2)},N=async()=>{R(!0);try{const{data:W,error:ee}=await vt.auth.signUp({email:c,password:u,options:{emailRedirectTo:"http://localhost:8080/",data:{username:_,first_name:g,last_name:m,country:I,state:P}}});if(ee)throw ee;if(W.user)try{console.log(" Saving profile for user:",W.user.id),console.log(" Profile data:",{username:_.trim(),firstName:g,lastName:m,country:I,state:P});const{data:z,error:q}=await vt.from("user_profiles").insert({user_id:W.user.id,username:_.trim(),first_name:g.trim(),last_name:m.trim(),country:I,state:P}).select();q?(console.error(" Profile save error:",q),console.error("Error details:",JSON.stringify(q,null,2))):console.log(" Profile saved successfully:",z)}catch(z){console.error(" Profile save error (exception):",z)}else console.log(" No user returned from signUp");s(3)}catch(W){D({title:"Signup Failed",description:W.message,variant:"destructive"})}finally{R(!1)}},$=async W=>{W.preventDefault(),R(!0);try{const{data:ee,error:z}=await vt.auth.signInWithPassword({email:c,password:u});if(z)throw z;localStorage.setItem("prime_user",JSON.stringify(ee.user)),D({title:"Success",description:"Logged in successfully!"}),A("/rooms")}catch(ee){D({title:"Authentication Failed",description:ee.message,variant:"destructive"})}finally{R(!1)}},j=async W=>{W.preventDefault(),R(!0);try{const{error:ee}=await vt.auth.resetPasswordForEmail(c,{redirectTo:"http://localhost:8080/auth"});if(ee)throw ee;D({title:"Reset Link Sent",description:"Check your email for the password reset link."}),n(!1)}catch(ee){D({title:"Error",description:ee.message,variant:"destructive"})}finally{R(!1)}},M=async W=>{if(W.preventDefault(),u!==h){D({title:"Passwords Don't Match",description:"Please make sure both passwords are the same.",variant:"destructive"});return}const ee=Qb(u);if(ee){D({title:"Invalid Password",description:ee,variant:"destructive"});return}R(!0);try{const{error:z}=await vt.auth.updateUser({password:u});if(z)throw z;D({title:"Password Updated!",description:"You can now sign in with your new password."}),o(!1),d(""),f("")}catch(z){D({title:"Error",description:z.message,variant:"destructive"})}finally{R(!1)}},B=()=>p.jsxs(Ki,{className:"w-full max-w-md shadow-primary",children:[p.jsxs(Gi,{className:"text-center space-y-4",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:p.jsx(Yk,{className:"w-8 h-8 text-green-600"})})}),p.jsx(Qi,{className:"text-2xl font-bold text-green-600",children:"Email Sent Successfully!"}),p.jsx(Ji,{className:"text-base",children:"We've sent a confirmation email to your registered email address."})]}),p.jsxs(Yi,{className:"space-y-6",children:[p.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:p.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Please click the link in the email and follow the instructions to activate your account."})}),p.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 flex items-start gap-3",children:[p.jsx(BL,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),p.jsxs("p",{className:"text-sm text-amber-800",children:[p.jsx("span",{className:"font-semibold",children:"Important:"})," Please also check your ",p.jsx("strong",{children:"Spam"})," or ",p.jsx("strong",{children:"Junk"})," mail folder if you don't see the email in your inbox."]})]}),p.jsxs("div",{className:"border rounded-lg p-4 space-y-3 bg-gray-50",children:[p.jsx("h3",{className:"font-semibold text-sm text-gray-700 uppercase tracking-wider",children:"Account Details"}),p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-500",children:"Username:"}),p.jsx("span",{className:"font-medium",children:_})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-500",children:"Email:"}),p.jsx("span",{className:"font-medium",children:c})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-500",children:"Name:"}),p.jsxs("span",{className:"font-medium",children:[g," ",m]})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-500",children:"Country:"}),p.jsx("span",{className:"font-medium",children:I})]}),P&&p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-500",children:"State/Province:"}),p.jsx("span",{className:"font-medium",children:P})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{className:"text-gray-500",children:"Password:"}),p.jsx("span",{className:"font-medium",children:"********"})]})]})]}),p.jsxs(me,{variant:"outline",className:"w-full",onClick:()=>{e(!1),s(1),l(""),d(""),f(""),v(""),y(""),w(""),k(""),x("")},children:[p.jsx(TL,{className:"w-4 h-4 mr-2"}),"Back to Sign In"]})]})]}),U=()=>p.jsxs(Ki,{className:"w-full max-w-md shadow-primary",children:[p.jsxs(Gi,{className:"text-center space-y-4",children:[p.jsx("div",{className:"flex justify-center",children:p.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center",children:p.jsx(OL,{className:"w-8 h-8 text-primary"})})}),p.jsx(Qi,{className:"text-2xl font-bold",children:"Confirm Your Details"}),p.jsx(Ji,{children:"Please review your information before creating your account"})]}),p.jsxs(Yi,{className:"space-y-6",children:[p.jsx("div",{className:"border rounded-lg p-4 space-y-3",children:p.jsxs("div",{className:"space-y-2 text-sm",children:[p.jsxs("div",{className:"flex justify-between py-1 border-b",children:[p.jsx("span",{className:"text-gray-500",children:"Username:"}),p.jsx("span",{className:"font-medium",children:_})]}),p.jsxs("div",{className:"flex justify-between py-1 border-b",children:[p.jsx("span",{className:"text-gray-500",children:"Email:"}),p.jsx("span",{className:"font-medium",children:c})]}),p.jsxs("div",{className:"flex justify-between py-1 border-b",children:[p.jsx("span",{className:"text-gray-500",children:"First Name:"}),p.jsx("span",{className:"font-medium",children:g})]}),p.jsxs("div",{className:"flex justify-between py-1 border-b",children:[p.jsx("span",{className:"text-gray-500",children:"Last Name:"}),p.jsx("span",{className:"font-medium",children:m})]}),p.jsxs("div",{className:"flex justify-between py-1 border-b",children:[p.jsx("span",{className:"text-gray-500",children:"Country:"}),p.jsx("span",{className:"font-medium",children:I})]}),P&&p.jsxs("div",{className:"flex justify-between py-1 border-b",children:[p.jsx("span",{className:"text-gray-500",children:"State/Province:"}),p.jsx("span",{className:"font-medium",children:P})]}),p.jsxs("div",{className:"flex justify-between py-1",children:[p.jsx("span",{className:"text-gray-500",children:"Password:"}),p.jsx("span",{className:"font-medium",children:"********"})]})]})}),p.jsxs("div",{className:"space-y-3",children:[p.jsx(me,{className:"w-full shadow-primary",onClick:N,disabled:C,children:C?"Creating Account...":"Confirm & Create Account"}),p.jsxs(me,{variant:"outline",className:"w-full",onClick:()=>s(1),disabled:C,children:[p.jsx(UL,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})]})]})]}),Q=()=>p.jsxs("form",{onSubmit:L,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"firstName",children:"First Name"}),p.jsx(Et,{id:"firstName",type:"text",placeholder:"John",value:g,onChange:W=>y(W.target.value),required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"lastName",children:"Last Name"}),p.jsx(Et,{id:"lastName",type:"text",placeholder:"Doe",value:m,onChange:W=>w(W.target.value),required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"username",children:"Username"}),p.jsx(Et,{id:"username",type:"text",placeholder:"johndoe123",value:_,onChange:W=>v(W.target.value),required:!0,minLength:6,maxLength:14})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"email",children:"Email"}),p.jsx(Et,{id:"email",type:"email",placeholder:"you@example.com",value:c,onChange:W=>l(W.target.value),required:!0,maxLength:40})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"country",children:"Country"}),p.jsxs(qb,{value:S,onValueChange:k,children:[p.jsx(cv,{id:"country",children:p.jsx(Kb,{placeholder:"Select your country"})}),p.jsx(lv,{children:Gb.map(W=>p.jsx(uv,{value:W.code,children:W.name},W.code))})]})]}),O.length>0&&p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"state",children:"State / Province"}),p.jsxs(qb,{value:E,onValueChange:x,children:[p.jsx(cv,{id:"state",children:p.jsx(Kb,{placeholder:"Select your state"})}),p.jsx(lv,{children:O.map(W=>p.jsx(uv,{value:W.code,children:W.name},W.code))})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"password",children:"Password"}),p.jsx(Et,{id:"password",type:"password",placeholder:"",value:u,onChange:W=>d(W.target.value),required:!0,minLength:6,maxLength:14})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"confirm-password",children:"Confirm Password"}),p.jsx(Et,{id:"confirm-password",type:"password",placeholder:"",value:h,onChange:W=>f(W.target.value),required:!0,minLength:6,maxLength:14})]}),p.jsx(me,{type:"submit",className:"w-full shadow-primary",disabled:C,children:"Continue"})]});return t&&a===3?p.jsxs("div",{className:"min-h-screen bg-gradient-hero flex flex-col",children:[p.jsx(ra,{}),p.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:B()}),p.jsx(Hi,{})]}):t&&a===2?p.jsxs("div",{className:"min-h-screen bg-gradient-hero flex flex-col",children:[p.jsx(ra,{}),p.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:U()}),p.jsx(Hi,{})]}):p.jsxs("div",{className:"min-h-screen bg-gradient-hero flex flex-col",children:[p.jsx(ra,{}),p.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:p.jsxs(Ki,{className:`w-full shadow-primary ${t?"max-w-lg":"max-w-md"}`,children:[p.jsxs(Gi,{className:"text-center space-y-4",children:[p.jsx("div",{className:"flex justify-center mb-4",children:p.jsx("img",{src:"/logo.png",alt:"PrimeTalker Logo",className:"w-40 h-auto object-contain cursor-pointer select-none"})}),p.jsx(Qi,{className:"text-3xl font-bold",children:i?"Set New Password":r?"Reset Password":t?"Create Account":"Welcome Back"}),p.jsx(Ji,{children:i?"Enter your new password below":r?"Enter your email to receive a reset link":t?"Start breaking language barriers today":"Sign in to continue to your meetings"})]}),p.jsxs(Yi,{children:[i?p.jsxs("form",{onSubmit:M,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"new-password",children:"New Password"}),p.jsx(Et,{id:"new-password",type:"password",placeholder:"",value:u,onChange:W=>d(W.target.value),required:!0,minLength:6,maxLength:14})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"confirm-password",children:"Confirm Password"}),p.jsx(Et,{id:"confirm-password",type:"password",placeholder:"",value:h,onChange:W=>f(W.target.value),required:!0,minLength:6,maxLength:14})]}),p.jsx(me,{type:"submit",className:"w-full shadow-primary",disabled:C,children:C?"Updating...":"Update Password"})]}):r?p.jsxs("form",{onSubmit:j,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"email",children:"Email"}),p.jsx(Et,{id:"email",type:"email",placeholder:"you@example.com",value:c,onChange:W=>l(W.target.value),required:!0})]}),p.jsx(me,{type:"submit",className:"w-full shadow-primary",disabled:C,children:C?"Sending...":"Send Reset Link"}),p.jsx(me,{type:"button",variant:"link",onClick:()=>n(!1),className:"w-full text-muted-foreground hover:text-foreground",children:"Back to Sign In"})]}):t?Q():p.jsxs("form",{onSubmit:$,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"email",children:"Email"}),p.jsx(Et,{id:"email",type:"email",placeholder:"you@example.com",value:c,onChange:W=>l(W.target.value),required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"password",children:"Password"}),p.jsx(Et,{id:"password",type:"password",placeholder:"",value:u,onChange:W=>d(W.target.value),required:!0})]}),p.jsx("div",{className:"text-right",children:p.jsx(me,{type:"button",variant:"link",onClick:()=>n(!0),className:"text-sm text-muted-foreground hover:text-foreground p-0 h-auto",children:"Forgot password?"})}),p.jsx(me,{type:"submit",className:"w-full shadow-primary",disabled:C,children:C?"Please wait...":"Sign In"})]}),!r&&p.jsx("div",{className:"mt-6 text-center",children:p.jsx(me,{variant:"link",onClick:()=>e(!t),className:"text-muted-foreground hover:text-foreground",children:t?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})}),p.jsx(Hi,{})]})},dee=()=>{const t=hn(),{toast:e}=Yu(),{username:r}=Og(),[n,i]=b.useState(""),[o,a]=b.useState("en"),[s,c]=b.useState(!1),[l,u]=b.useState(!1),[d,h]=b.useState(null),[f,_]=b.useState(null),[v,g]=b.useState(!1),y=async()=>{if(!o){e({title:"Language Required",description:"Please select your language before creating a room.",variant:"destructive"});return}c(!0);try{sessionStorage.setItem("meetingUsername",r.trim()||"User");const C=(await kI(o)).roomId;if(!C)throw new Error("Invalid response from server.");localStorage.setItem("myLanguage",o),localStorage.setItem("role","caller");const A=`${window.location.origin}/join/${C}`;h(C),_(A),e({title:"Room Created!",description:"Share the link with others to join."})}catch(x){e({title:"Error",description:x.message,variant:"destructive"})}finally{c(!1)}},m=async()=>{if(f)try{await navigator.clipboard.writeText(f),g(!0),e({title:"Link Copied!",description:"Share this link with others to join your room."}),setTimeout(()=>g(!1),2e3)}catch{e({title:"Copy Failed",description:"Please copy the link manually.",variant:"destructive"})}},w=()=>{d&&t(`/meeting/${d}`)},S=()=>{h(null),_(null),g(!1)},k=async x=>{if(x.preventDefault(),!n.trim()){e({title:"Error",description:"Please enter a valid room ID",variant:"destructive"});return}if(!o){e({title:"Language Required",description:"Please select your language before joining.",variant:"destructive"});return}u(!0);try{sessionStorage.setItem("meetingUsername",r.trim()||"User");const C=await vm(n.trim(),o);if(!C.success)throw new Error(C.message||"Failed to join room");localStorage.setItem("myLanguage",o),localStorage.setItem("role","receiver"),e({title:"Joined Room!",description:`Connected to room ${n}`}),t(`/meeting/${n.trim()}`)}catch(C){e({title:"Error Joining Room",description:C.message,variant:"destructive"})}finally{u(!1)}},E=async()=>{await vt.auth.signOut(),localStorage.removeItem("prime_user"),t("/")};return p.jsxs("div",{className:"min-h-screen bg-gradient-hero flex flex-col",children:[p.jsx(ra,{}),p.jsx("header",{className:"border-b border-border bg-background/80 backdrop-blur-sm",children:p.jsxs("div",{className:"container mx-auto px-4 py-3 sm:py-4 flex items-center justify-between",children:[p.jsx("div",{className:"flex items-center gap-3 cursor-pointer",onClick:()=>t("/landing"),children:p.jsx("img",{src:"/logo.png",className:"w-28 sm:w-40 h-auto",alt:"Logo"})}),p.jsxs(me,{variant:"ghost",size:"sm",onClick:E,className:"text-sm",children:[p.jsx(Jk,{className:"w-4 h-4 sm:mr-2"}),p.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]})}),p.jsx("main",{className:"flex-1 container mx-auto px-4 py-6 sm:py-12 flex items-center justify-center",children:p.jsxs("div",{className:`w-full grid ${d?"max-w-md grid-cols-1":"max-w-4xl grid-cols-1 md:grid-cols-2"} gap-4 sm:gap-6`,children:[p.jsxs(Ki,{className:"shadow-primary border-2 hover:border-primary/50 transition-all",children:[p.jsxs(Gi,{className:"text-center space-y-4",children:[p.jsx("div",{className:"w-16 h-16 mx-auto rounded-xl bg-gradient-primary flex items-center justify-center",children:p.jsx(nd,{className:"w-10 h-10 text-primary-foreground"})}),p.jsx(Qi,{className:"text-2xl",children:d?"Enter Room":"Create Room"}),p.jsx(Ji,{children:d?"Share this link with others to join your meeting":"Start a new meeting room that supports real-time translation"})]}),p.jsx(Yi,{className:"space-y-4",children:d?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"bg-slate-100 dark:bg-slate-800 rounded-lg p-4 space-y-3",children:[p.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 dark:text-green-400",children:[p.jsx(fp,{className:"w-5 h-5"}),p.jsx("span",{className:"font-medium",children:"Room Created!"})]}),p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Room ID"}),p.jsx("div",{className:"text-2xl font-mono font-bold",children:d})]})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsxs(Qe,{className:"flex items-center gap-2",children:[p.jsx($L,{className:"w-4 h-4"}),"Share Link"]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(Et,{value:f||"",readOnly:!0,className:"font-mono text-sm"}),p.jsx(me,{variant:"outline",size:"icon",onClick:m,className:"shrink-0",children:v?p.jsx(fp,{className:"w-4 h-4 text-green-500"}):p.jsx(RL,{className:"w-4 h-4"})})]})]}),p.jsx("div",{className:"flex gap-2",children:p.jsxs(me,{className:"flex-1",size:"lg",onClick:w,children:["Enter Room",p.jsx(Gk,{className:"w-4 h-4 ml-2"})]})}),p.jsx(me,{variant:"link",className:"w-full text-muted-foreground",onClick:S,children:"Create Another Room"})]}):p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{children:"Your Language"}),p.jsxs("select",{className:"w-full bg-background border p-2 rounded-md",value:o,onChange:x=>a(x.target.value),children:[p.jsx("option",{value:"en",children:"English"}),p.jsx("option",{value:"hi",children:"Hindi"}),p.jsx("option",{value:"te",children:"Telugu"}),p.jsx("option",{value:"ta",children:"Tamil"}),p.jsx("option",{value:"bn",children:"Bengali"}),p.jsx("option",{value:"mr",children:"Marathi"}),p.jsx("option",{value:"gu",children:"Gujarati"}),p.jsx("option",{value:"kn",children:"Kannada"}),p.jsx("option",{value:"ml",children:"Malayalam"}),p.jsx("option",{value:"pa",children:"Punjabi"}),p.jsx("option",{value:"es",children:"Spanish"}),p.jsx("option",{value:"fr",children:"French"}),p.jsx("option",{value:"de",children:"German"}),p.jsx("option",{value:"pt",children:"Portuguese"}),p.jsx("option",{value:"ja",children:"Japanese"}),p.jsx("option",{value:"zh",children:"Chinese"}),p.jsx("option",{value:"ko",children:"Korean"}),p.jsx("option",{value:"ar",children:"Arabic"}),p.jsx("option",{value:"ru",children:"Russian"})]})]}),p.jsx(me,{className:"w-full shadow-primary",size:"lg",onClick:y,disabled:s,children:s?"Creating...":"Create New Room"})]})})]}),!d&&p.jsxs(Ki,{className:"shadow-primary border-2 hover:border-primary/50 transition-all",children:[p.jsxs(Gi,{className:"text-center space-y-4",children:[p.jsx("div",{className:"w-16 h-16 mx-auto rounded-xl bg-gradient-primary flex items-center justify-center",children:p.jsx(rd,{className:"w-10 h-10 text-primary-foreground"})}),p.jsx(Qi,{className:"text-2xl",children:"Join Room"}),p.jsx(Ji,{children:"Enter a room ID & your language to join an existing meeting"})]}),p.jsx(Yi,{children:p.jsxs("form",{onSubmit:k,className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{htmlFor:"roomId",children:"Room ID"}),p.jsx(Et,{id:"roomId",type:"text",placeholder:"ROOM1234",value:n,onChange:x=>i(x.target.value),className:"text-center text-lg font-mono",required:!0})]}),p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{children:"Your Language"}),p.jsxs("select",{className:"w-full bg-background border p-2 rounded-md",value:o,onChange:x=>a(x.target.value),children:[p.jsx("option",{value:"en",children:"English"}),p.jsx("option",{value:"hi",children:"Hindi"}),p.jsx("option",{value:"te",children:"Telugu"}),p.jsx("option",{value:"ta",children:"Tamil"}),p.jsx("option",{value:"bn",children:"Bengali"}),p.jsx("option",{value:"mr",children:"Marathi"}),p.jsx("option",{value:"gu",children:"Gujarati"}),p.jsx("option",{value:"kn",children:"Kannada"}),p.jsx("option",{value:"ml",children:"Malayalam"}),p.jsx("option",{value:"pa",children:"Punjabi"}),p.jsx("option",{value:"es",children:"Spanish"}),p.jsx("option",{value:"fr",children:"French"}),p.jsx("option",{value:"de",children:"German"}),p.jsx("option",{value:"pt",children:"Portuguese"}),p.jsx("option",{value:"ja",children:"Japanese"}),p.jsx("option",{value:"zh",children:"Chinese"}),p.jsx("option",{value:"ko",children:"Korean"}),p.jsx("option",{value:"ar",children:"Arabic"}),p.jsx("option",{value:"ru",children:"Russian"})]})]}),p.jsx(me,{type:"submit",variant:"secondary",className:"w-full",size:"lg",disabled:l,children:l?"Joining...":"Join Room"})]})})]})]})}),p.jsx(Hi,{})]})},fee=()=>{const{roomId:t}=oT(),e=hn(),{toast:r}=Yu(),{username:n}=Og(),[i,o]=b.useState("en"),[a,s]=b.useState(!1),c=async()=>{if(!t){r({title:"Error",description:"Invalid room ID",variant:"destructive"});return}if(!i){r({title:"Language Required",description:"Please select your language before joining.",variant:"destructive"});return}s(!0);try{sessionStorage.setItem("meetingUsername",n.trim()||"User");const l=await vm(t,i);if(!l.success)throw new Error(l.message||"Failed to join room");localStorage.setItem("myLanguage",i),localStorage.setItem("role","receiver"),r({title:"Joined Room!",description:`Connected to room ${t}`}),e(`/meeting/${t}`)}catch(l){r({title:"Error Joining Room",description:l.message,variant:"destructive"})}finally{s(!1)}};return p.jsxs("div",{className:"min-h-screen bg-gradient-hero flex flex-col",children:[p.jsx(ra,{}),p.jsx("main",{className:"flex-1 flex items-center justify-center p-4",children:p.jsxs(Ki,{className:"w-full max-w-md shadow-primary border-2",children:[p.jsxs(Gi,{className:"text-center space-y-3 sm:space-y-4",children:[p.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 mx-auto rounded-xl bg-gradient-primary flex items-center justify-center",children:p.jsx(rd,{className:"w-8 h-8 sm:w-10 sm:h-10 text-primary-foreground"})}),p.jsx(Qi,{className:"text-xl sm:text-2xl",children:"Join Meeting"}),p.jsxs(Ji,{className:"text-sm",children:["You've been invited to join room ",p.jsx("span",{className:"font-mono font-bold text-foreground",children:t})]})]}),p.jsxs(Yi,{className:"space-y-4",children:[p.jsxs("div",{className:"space-y-2",children:[p.jsx(Qe,{children:"Your Language"}),p.jsxs("select",{className:"w-full bg-background border p-2 rounded-md",value:i,onChange:l=>o(l.target.value),children:[p.jsx("option",{value:"en",children:"English"}),p.jsx("option",{value:"hi",children:"Hindi"}),p.jsx("option",{value:"te",children:"Telugu"}),p.jsx("option",{value:"ta",children:"Tamil"}),p.jsx("option",{value:"bn",children:"Bengali"}),p.jsx("option",{value:"mr",children:"Marathi"}),p.jsx("option",{value:"gu",children:"Gujarati"}),p.jsx("option",{value:"kn",children:"Kannada"}),p.jsx("option",{value:"ml",children:"Malayalam"}),p.jsx("option",{value:"pa",children:"Punjabi"}),p.jsx("option",{value:"es",children:"Spanish"}),p.jsx("option",{value:"fr",children:"French"}),p.jsx("option",{value:"de",children:"German"}),p.jsx("option",{value:"pt",children:"Portuguese"}),p.jsx("option",{value:"ja",children:"Japanese"}),p.jsx("option",{value:"zh",children:"Chinese"}),p.jsx("option",{value:"ko",children:"Korean"}),p.jsx("option",{value:"ar",children:"Arabic"}),p.jsx("option",{value:"ru",children:"Russian"})]})]}),p.jsxs(me,{className:"w-full",size:"lg",onClick:c,disabled:a,children:[a?"Joining...":"Join Meeting",p.jsx(Gk,{className:"w-4 h-4 ml-2"})]}),p.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",p.jsx(me,{variant:"link",className:"p-0 h-auto",onClick:()=>e("/auth"),children:"Sign up"})]})]})]})}),p.jsx(Hi,{})]})},hee=()=>{const t=pd(),e=hn();return b.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),p.jsxs("div",{className:"flex flex-col min-h-screen bg-background",children:[p.jsx("main",{className:"flex-1 flex items-center justify-center",children:p.jsxs("div",{className:"text-center space-y-4 p-6",children:[p.jsx("h1",{className:"text-6xl font-bold text-foreground",children:"404"}),p.jsx("p",{className:"text-xl text-muted-foreground",children:"Oops! The page you are looking for does not exist."}),p.jsx(me,{size:"lg",className:"shadow-primary mt-4",onClick:()=>e("/"),children:"Return to Home"})]})}),p.jsx(Hi,{})]})},pee=new w2,vee=({children:t})=>localStorage.getItem("prime_user")?t:p.jsx(lT,{to:"/auth",replace:!0}),mee=()=>p.jsx(S2,{client:pee,children:p.jsxs(KM,{children:[p.jsx(CI,{}),p.jsx(oN,{}),p.jsx(mD,{children:p.jsx(b.Suspense,{fallback:p.jsx("div",{className:"flex min-h-screen items-center justify-center text-lg text-muted-foreground",children:"Loading..."}),children:p.jsxs(hD,{children:[p.jsx(Rn,{path:"/",element:p.jsx(gD,{})}),p.jsx(Rn,{path:"/landing",element:p.jsx(tU,{})}),p.jsx(Rn,{path:"/auth",element:p.jsx(uee,{})}),p.jsx(Rn,{path:"/rooms",element:p.jsx(vee,{children:p.jsx(dee,{})})}),p.jsx(Rn,{path:"/meeting/:roomId",element:p.jsx(gX,{})}),p.jsx(Rn,{path:"/join/:roomId",element:p.jsx(fee,{})}),p.jsx(Rn,{path:"*",element:p.jsx(hee,{})})]})})})]})});_k(document.getElementById("root")).render(p.jsx(mee,{}));
